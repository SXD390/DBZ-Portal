import {
  __commonJS
} from "./chunk-HKJ2B2AA.js";

// node_modules/shaka-player/dist/shaka-player.ui.js
var require_shaka_player_ui = __commonJS({
  "node_modules/shaka-player/dist/shaka-player.ui.js"(exports) {
    (function() {
      var innerGlobal = typeof window != "undefined" ? window : global;
      var exportTo = {};
      (function(window2, global2, module2) {
        var p, aa = typeof Object.create == "function" ? Object.create : function(a) {
          function b() {
          }
          b.prototype = a;
          return new b();
        }, ba = typeof Object.defineProperties == "function" ? Object.defineProperty : function(a, b, c) {
          if (a == Array.prototype || a == Object.prototype) return a;
          a[b] = c.value;
          return a;
        };
        function ca(a) {
          a = ["object" == typeof globalThis && globalThis, a, "object" == typeof window2 && window2, "object" == typeof self && self, "object" == typeof global2 && global2];
          for (var b = 0; b < a.length; ++b) {
            var c = a[b];
            if (c && c.Math == Math) return c;
          }
          throw Error("Cannot find global object");
        }
        var da = ca(this);
        function ea(a, b) {
          if (b) a: {
            var c = da;
            a = a.split(".");
            for (var d = 0; d < a.length - 1; d++) {
              var e = a[d];
              if (!(e in c)) break a;
              c = c[e];
            }
            a = a[a.length - 1];
            d = c[a];
            b = b(d);
            b != d && b != null && ba(c, a, { configurable: true, writable: true, value: b });
          }
        }
        var fa;
        if (typeof Object.setPrototypeOf == "function") fa = Object.setPrototypeOf;
        else {
          var ha;
          a: {
            var ia = { a: true }, ja = {};
            try {
              ja.__proto__ = ia;
              ha = ja.a;
              break a;
            } catch (a) {
            }
            ha = false;
          }
          fa = ha ? function(a, b) {
            a.__proto__ = b;
            if (a.__proto__ !== b) throw new TypeError(a + " is not extensible");
            return a;
          } : null;
        }
        var ka = fa;
        function la(a, b) {
          a.prototype = aa(b.prototype);
          a.prototype.constructor = a;
          if (ka) ka(a, b);
          else for (var c in b) if (c != "prototype") if (Object.defineProperties) {
            var d = Object.getOwnPropertyDescriptor(b, c);
            d && Object.defineProperty(a, c, d);
          } else a[c] = b[c];
          a.Yn = b.prototype;
        }
        function ma(a) {
          var b = 0;
          return function() {
            return b < a.length ? { done: false, value: a[b++] } : { done: true };
          };
        }
        function u(a) {
          var b = typeof Symbol != "undefined" && Symbol.iterator && a[Symbol.iterator];
          if (b) return b.call(a);
          if (typeof a.length == "number") return { next: ma(a) };
          throw Error(String(a) + " is not an iterable or ArrayLike");
        }
        function x(a) {
          if (!(a instanceof Array)) {
            a = u(a);
            for (var b, c = []; !(b = a.next()).done; ) c.push(b.value);
            a = c;
          }
          return a;
        }
        ea("Symbol", function(a) {
          function b(f) {
            if (this instanceof b) throw new TypeError("Symbol is not a constructor");
            return new c(d + (f || "") + "_" + e++, f);
          }
          function c(f, g) {
            this.g = f;
            ba(this, "description", { configurable: true, writable: true, value: g });
          }
          if (a) return a;
          c.prototype.toString = function() {
            return this.g;
          };
          var d = "jscomp_symbol_" + (Math.random() * 1e9 >>> 0) + "_", e = 0;
          return b;
        });
        ea("Symbol.iterator", function(a) {
          if (a) return a;
          a = Symbol("Symbol.iterator");
          for (var b = "Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "), c = 0; c < b.length; c++) {
            var d = da[b[c]];
            typeof d === "function" && typeof d.prototype[a] != "function" && ba(d.prototype, a, { configurable: true, writable: true, value: function() {
              return na(ma(this));
            } });
          }
          return a;
        });
        function na(a) {
          a = { next: a };
          a[Symbol.iterator] = function() {
            return this;
          };
          return a;
        }
        function oa() {
          this.u = false;
          this.l = null;
          this.h = void 0;
          this.g = 1;
          this.j = this.m = 0;
          this.C = this.i = null;
        }
        function pa(a) {
          if (a.u) throw new TypeError("Generator is already running");
          a.u = true;
        }
        oa.prototype.A = function(a) {
          this.h = a;
        };
        function qa(a, b) {
          a.i = { Ui: b, gj: true };
          a.g = a.m || a.j;
        }
        oa.prototype.return = function(a) {
          this.i = { return: a };
          this.g = this.j;
        };
        function F(a, b, c) {
          a.g = c;
          return { value: b };
        }
        oa.prototype.B = function(a) {
          this.g = a;
        };
        function H(a) {
          a.g = 0;
        }
        function ra(a, b, c) {
          a.m = b;
          c != void 0 && (a.j = c);
        }
        function sa(a, b) {
          a.m = 0;
          a.j = b || 0;
        }
        function ta(a, b, c) {
          a.g = b;
          a.m = c || 0;
        }
        function ua(a, b) {
          a.m = b || 0;
          b = a.i.Ui;
          a.i = null;
          return b;
        }
        function va(a) {
          a.C = [a.i];
          a.m = 0;
          a.j = 0;
        }
        function xa(a, b) {
          var c = a.C.splice(0)[0];
          (c = a.i = a.i || c) ? c.gj ? a.g = a.m || a.j : c.B != void 0 && a.j < c.B ? (a.g = c.B, a.i = null) : a.g = a.j : a.g = b;
        }
        function ya(a) {
          this.g = new oa();
          this.h = a;
        }
        function Ba(a, b) {
          pa(a.g);
          var c = a.g.l;
          if (c) return Ga(a, "return" in c ? c["return"] : function(d) {
            return { value: d, done: true };
          }, b, a.g.return);
          a.g.return(b);
          return Ha(a);
        }
        function Ga(a, b, c, d) {
          try {
            var e = b.call(a.g.l, c);
            if (!(e instanceof Object)) throw new TypeError("Iterator result " + e + " is not an object");
            if (!e.done) return a.g.u = false, e;
            var f = e.value;
          } catch (g) {
            return a.g.l = null, qa(a.g, g), Ha(a);
          }
          a.g.l = null;
          d.call(a.g, f);
          return Ha(a);
        }
        function Ha(a) {
          for (; a.g.g; ) try {
            var b = a.h(a.g);
            if (b) return a.g.u = false, { value: b.value, done: false };
          } catch (c) {
            a.g.h = void 0, qa(a.g, c);
          }
          a.g.u = false;
          if (a.g.i) {
            b = a.g.i;
            a.g.i = null;
            if (b.gj) throw b.Ui;
            return { value: b.return, done: true };
          }
          return { value: void 0, done: true };
        }
        function Ia(a) {
          this.next = function(b) {
            pa(a.g);
            a.g.l ? b = Ga(a, a.g.l.next, b, a.g.A) : (a.g.A(b), b = Ha(a));
            return b;
          };
          this.throw = function(b) {
            pa(a.g);
            a.g.l ? b = Ga(a, a.g.l["throw"], b, a.g.A) : (qa(a.g, b), b = Ha(a));
            return b;
          };
          this.return = function(b) {
            return Ba(a, b);
          };
          this[Symbol.iterator] = function() {
            return this;
          };
        }
        function Ja(a) {
          function b(d) {
            return a.next(d);
          }
          function c(d) {
            return a.throw(d);
          }
          return new Promise(function(d, e) {
            function f(g) {
              g.done ? d(g.value) : Promise.resolve(g.value).then(b, c).then(f, e);
            }
            f(a.next());
          });
        }
        function Q(a) {
          return Ja(new Ia(new ya(a)));
        }
        function Ma() {
          for (var a = Number(this), b = [], c = a; c < arguments.length; c++) b[c - a] = arguments[c];
          return b;
        }
        ea("Promise", function(a) {
          function b(g) {
            this.h = 0;
            this.i = void 0;
            this.g = [];
            this.u = false;
            var h = this.j();
            try {
              g(h.resolve, h.reject);
            } catch (k2) {
              h.reject(k2);
            }
          }
          function c() {
            this.g = null;
          }
          function d(g) {
            return g instanceof b ? g : new b(function(h) {
              h(g);
            });
          }
          if (a) return a;
          c.prototype.h = function(g) {
            if (this.g == null) {
              this.g = [];
              var h = this;
              this.i(function() {
                h.l();
              });
            }
            this.g.push(g);
          };
          var e = da.setTimeout;
          c.prototype.i = function(g) {
            e(g, 0);
          };
          c.prototype.l = function() {
            for (; this.g && this.g.length; ) {
              var g = this.g;
              this.g = [];
              for (var h = 0; h < g.length; ++h) {
                var k2 = g[h];
                g[h] = null;
                try {
                  k2();
                } catch (l) {
                  this.j(l);
                }
              }
            }
            this.g = null;
          };
          c.prototype.j = function(g) {
            this.i(function() {
              throw g;
            });
          };
          b.prototype.j = function() {
            function g(l) {
              return function(m) {
                k2 || (k2 = true, l.call(h, m));
              };
            }
            var h = this, k2 = false;
            return { resolve: g(this.G), reject: g(this.l) };
          };
          b.prototype.G = function(g) {
            if (g === this) this.l(new TypeError("A Promise cannot resolve to itself"));
            else if (g instanceof b) this.I(g);
            else {
              a: switch (typeof g) {
                case "object":
                  var h = g != null;
                  break a;
                case "function":
                  h = true;
                  break a;
                default:
                  h = false;
              }
              h ? this.F(g) : this.m(g);
            }
          };
          b.prototype.F = function(g) {
            var h = void 0;
            try {
              h = g.then;
            } catch (k2) {
              this.l(k2);
              return;
            }
            typeof h == "function" ? this.J(h, g) : this.m(g);
          };
          b.prototype.l = function(g) {
            this.A(2, g);
          };
          b.prototype.m = function(g) {
            this.A(1, g);
          };
          b.prototype.A = function(g, h) {
            if (this.h != 0) throw Error("Cannot settle(" + g + ", " + h + "): Promise already settled in state" + this.h);
            this.h = g;
            this.i = h;
            this.h === 2 && this.H();
            this.C();
          };
          b.prototype.H = function() {
            var g = this;
            e(function() {
              if (g.D()) {
                var h = da.console;
                typeof h !== "undefined" && h.error(g.i);
              }
            }, 1);
          };
          b.prototype.D = function() {
            if (this.u) return false;
            var g = da.CustomEvent, h = da.Event, k2 = da.dispatchEvent;
            if (typeof k2 === "undefined") return true;
            typeof g === "function" ? g = new g("unhandledrejection", { cancelable: true }) : typeof h === "function" ? g = new h("unhandledrejection", { cancelable: true }) : (g = da.document.createEvent("CustomEvent"), g.initCustomEvent("unhandledrejection", false, true, g));
            g.promise = this;
            g.reason = this.i;
            return k2(g);
          };
          b.prototype.C = function() {
            if (this.g != null) {
              for (var g = 0; g < this.g.length; ++g) f.h(this.g[g]);
              this.g = null;
            }
          };
          var f = new c();
          b.prototype.I = function(g) {
            var h = this.j();
            g.kf(h.resolve, h.reject);
          };
          b.prototype.J = function(g, h) {
            var k2 = this.j();
            try {
              g.call(h, k2.resolve, k2.reject);
            } catch (l) {
              k2.reject(l);
            }
          };
          b.prototype.then = function(g, h) {
            function k2(q, r) {
              return typeof q == "function" ? function(t) {
                try {
                  l(q(t));
                } catch (w) {
                  m(w);
                }
              } : r;
            }
            var l, m, n = new b(function(q, r) {
              l = q;
              m = r;
            });
            this.kf(k2(g, l), k2(h, m));
            return n;
          };
          b.prototype.catch = function(g) {
            return this.then(void 0, g);
          };
          b.prototype.kf = function(g, h) {
            function k2() {
              switch (l.h) {
                case 1:
                  g(l.i);
                  break;
                case 2:
                  h(l.i);
                  break;
                default:
                  throw Error("Unexpected state: " + l.h);
              }
            }
            var l = this;
            this.g == null ? f.h(k2) : this.g.push(k2);
            this.u = true;
          };
          b.resolve = d;
          b.reject = function(g) {
            return new b(function(h, k2) {
              k2(g);
            });
          };
          b.race = function(g) {
            return new b(function(h, k2) {
              for (var l = u(g), m = l.next(); !m.done; m = l.next()) d(m.value).kf(h, k2);
            });
          };
          b.all = function(g) {
            var h = u(g), k2 = h.next();
            return k2.done ? d([]) : new b(function(l, m) {
              function n(t) {
                return function(w) {
                  q[t] = w;
                  r--;
                  r == 0 && l(q);
                };
              }
              var q = [], r = 0;
              do
                q.push(void 0), r++, d(k2.value).kf(n(q.length - 1), m), k2 = h.next();
              while (!k2.done);
            });
          };
          return b;
        });
        function Oa(a, b) {
          return Object.prototype.hasOwnProperty.call(a, b);
        }
        ea("WeakMap", function(a) {
          function b(k2) {
            this.g = (h += Math.random() + 1).toString();
            if (k2) {
              k2 = u(k2);
              for (var l; !(l = k2.next()).done; ) l = l.value, this.set(l[0], l[1]);
            }
          }
          function c() {
          }
          function d(k2) {
            var l = typeof k2;
            return l === "object" && k2 !== null || l === "function";
          }
          function e(k2) {
            if (!Oa(k2, g)) {
              var l = new c();
              ba(k2, g, { value: l });
            }
          }
          function f(k2) {
            var l = Object[k2];
            l && (Object[k2] = function(m) {
              if (m instanceof c) return m;
              Object.isExtensible(m) && e(m);
              return l(m);
            });
          }
          if (function() {
            if (!a || !Object.seal) return false;
            try {
              var k2 = Object.seal({}), l = Object.seal({}), m = new a([[k2, 2], [l, 3]]);
              if (m.get(k2) != 2 || m.get(l) != 3) return false;
              m.delete(k2);
              m.set(l, 4);
              return !m.has(k2) && m.get(l) == 4;
            } catch (n) {
              return false;
            }
          }()) return a;
          var g = "$jscomp_hidden_" + Math.random();
          f("freeze");
          f("preventExtensions");
          f("seal");
          var h = 0;
          b.prototype.set = function(k2, l) {
            if (!d(k2)) throw Error("Invalid WeakMap key");
            e(k2);
            if (!Oa(k2, g)) throw Error("WeakMap key fail: " + k2);
            k2[g][this.g] = l;
            return this;
          };
          b.prototype.get = function(k2) {
            return d(k2) && Oa(k2, g) ? k2[g][this.g] : void 0;
          };
          b.prototype.has = function(k2) {
            return d(k2) && Oa(
              k2,
              g
            ) && Oa(k2[g], this.g);
          };
          b.prototype.delete = function(k2) {
            return d(k2) && Oa(k2, g) && Oa(k2[g], this.g) ? delete k2[g][this.g] : false;
          };
          return b;
        });
        ea("Map", function(a) {
          function b() {
            var h = {};
            return h.Gc = h.next = h.head = h;
          }
          function c(h, k2) {
            var l = h[1];
            return na(function() {
              if (l) {
                for (; l.head != h[1]; ) l = l.Gc;
                for (; l.next != l.head; ) return l = l.next, { done: false, value: k2(l) };
                l = null;
              }
              return { done: true, value: void 0 };
            });
          }
          function d(h, k2) {
            var l = k2 && typeof k2;
            l == "object" || l == "function" ? f.has(k2) ? l = f.get(k2) : (l = "" + ++g, f.set(k2, l)) : l = "p_" + k2;
            var m = h[0][l];
            if (m && Oa(h[0], l)) for (h = 0; h < m.length; h++) {
              var n = m[h];
              if (k2 !== k2 && n.key !== n.key || k2 === n.key) return { id: l, list: m, index: h, entry: n };
            }
            return {
              id: l,
              list: m,
              index: -1,
              entry: void 0
            };
          }
          function e(h) {
            this[0] = {};
            this[1] = b();
            this.size = 0;
            if (h) {
              h = u(h);
              for (var k2; !(k2 = h.next()).done; ) k2 = k2.value, this.set(k2[0], k2[1]);
            }
          }
          if (function() {
            if (!a || typeof a != "function" || !a.prototype.entries || typeof Object.seal != "function") return false;
            try {
              var h = Object.seal({ x: 4 }), k2 = new a(u([[h, "s"]]));
              if (k2.get(h) != "s" || k2.size != 1 || k2.get({ x: 4 }) || k2.set({ x: 4 }, "t") != k2 || k2.size != 2) return false;
              var l = k2.entries(), m = l.next();
              if (m.done || m.value[0] != h || m.value[1] != "s") return false;
              m = l.next();
              return m.done || m.value[0].x != 4 || m.value[1] != "t" || !l.next().done ? false : true;
            } catch (n) {
              return false;
            }
          }()) return a;
          var f = /* @__PURE__ */ new WeakMap();
          e.prototype.set = function(h, k2) {
            h = h === 0 ? 0 : h;
            var l = d(this, h);
            l.list || (l.list = this[0][l.id] = []);
            l.entry ? l.entry.value = k2 : (l.entry = { next: this[1], Gc: this[1].Gc, head: this[1], key: h, value: k2 }, l.list.push(l.entry), this[1].Gc.next = l.entry, this[1].Gc = l.entry, this.size++);
            return this;
          };
          e.prototype.delete = function(h) {
            h = d(this, h);
            return h.entry && h.list ? (h.list.splice(h.index, 1), h.list.length || delete this[0][h.id], h.entry.Gc.next = h.entry.next, h.entry.next.Gc = h.entry.Gc, h.entry.head = null, this.size--, true) : false;
          };
          e.prototype.clear = function() {
            this[0] = {};
            this[1] = this[1].Gc = b();
            this.size = 0;
          };
          e.prototype.has = function(h) {
            return !!d(this, h).entry;
          };
          e.prototype.get = function(h) {
            return (h = d(this, h).entry) && h.value;
          };
          e.prototype.entries = function() {
            return c(this, function(h) {
              return [h.key, h.value];
            });
          };
          e.prototype.keys = function() {
            return c(this, function(h) {
              return h.key;
            });
          };
          e.prototype.values = function() {
            return c(this, function(h) {
              return h.value;
            });
          };
          e.prototype.forEach = function(h, k2) {
            for (var l = this.entries(), m; !(m = l.next()).done; ) m = m.value, h.call(k2, m[1], m[0], this);
          };
          e.prototype[Symbol.iterator] = e.prototype.entries;
          var g = 0;
          return e;
        });
        function Pa(a, b) {
          a instanceof String && (a += "");
          var c = 0, d = false, e = { next: function() {
            if (!d && c < a.length) {
              var f = c++;
              return { value: b(f, a[f]), done: false };
            }
            d = true;
            return { done: true, value: void 0 };
          } };
          e[Symbol.iterator] = function() {
            return e;
          };
          return e;
        }
        ea("Array.prototype.keys", function(a) {
          return a ? a : function() {
            return Pa(this, function(b) {
              return b;
            });
          };
        });
        ea("Set", function(a) {
          function b(c) {
            this.g = /* @__PURE__ */ new Map();
            if (c) {
              c = u(c);
              for (var d; !(d = c.next()).done; ) this.add(d.value);
            }
            this.size = this.g.size;
          }
          if (function() {
            if (!a || typeof a != "function" || !a.prototype.entries || typeof Object.seal != "function") return false;
            try {
              var c = Object.seal({ x: 4 }), d = new a(u([c]));
              if (!d.has(c) || d.size != 1 || d.add(c) != d || d.size != 1 || d.add({ x: 4 }) != d || d.size != 2) return false;
              var e = d.entries(), f = e.next();
              if (f.done || f.value[0] != c || f.value[1] != c) return false;
              f = e.next();
              return f.done || f.value[0] == c || f.value[0].x != 4 || f.value[1] != f.value[0] ? false : e.next().done;
            } catch (g) {
              return false;
            }
          }()) return a;
          b.prototype.add = function(c) {
            c = c === 0 ? 0 : c;
            this.g.set(c, c);
            this.size = this.g.size;
            return this;
          };
          b.prototype.delete = function(c) {
            c = this.g.delete(c);
            this.size = this.g.size;
            return c;
          };
          b.prototype.clear = function() {
            this.g.clear();
            this.size = 0;
          };
          b.prototype.has = function(c) {
            return this.g.has(c);
          };
          b.prototype.entries = function() {
            return this.g.entries();
          };
          b.prototype.values = function() {
            return this.g.values();
          };
          b.prototype.keys = b.prototype.values;
          b.prototype[Symbol.iterator] = b.prototype.values;
          b.prototype.forEach = function(c, d) {
            var e = this;
            this.g.forEach(function(f) {
              return c.call(d, f, f, e);
            });
          };
          return b;
        });
        ea("Array.prototype.values", function(a) {
          return a ? a : function() {
            return Pa(this, function(b, c) {
              return c;
            });
          };
        });
        ea("Array.from", function(a) {
          return a ? a : function(b, c, d) {
            c = c != null ? c : function(h) {
              return h;
            };
            var e = [], f = typeof Symbol != "undefined" && Symbol.iterator && b[Symbol.iterator];
            if (typeof f == "function") {
              b = f.call(b);
              for (var g = 0; !(f = b.next()).done; ) e.push(c.call(d, f.value, g++));
            } else for (f = b.length, g = 0; g < f; g++) e.push(c.call(d, b[g], g));
            return e;
          };
        });
        ea("Object.is", function(a) {
          return a ? a : function(b, c) {
            return b === c ? b !== 0 || 1 / b === 1 / c : b !== b && c !== c;
          };
        });
        ea("Array.prototype.includes", function(a) {
          return a ? a : function(b, c) {
            var d = this;
            d instanceof String && (d = String(d));
            var e = d.length;
            c = c || 0;
            for (c < 0 && (c = Math.max(c + e, 0)); c < e; c++) {
              var f = d[c];
              if (f === b || Object.is(f, b)) return true;
            }
            return false;
          };
        });
        function Qa(a, b, c) {
          if (a == null) throw new TypeError("The 'this' value for String.prototype." + c + " must not be null or undefined");
          if (b instanceof RegExp) throw new TypeError("First argument to String.prototype." + c + " must not be a regular expression");
          return a + "";
        }
        ea("String.prototype.includes", function(a) {
          return a ? a : function(b, c) {
            return Qa(this, b, "includes").indexOf(b, c || 0) !== -1;
          };
        });
        ea("String.fromCodePoint", function(a) {
          return a ? a : function(b) {
            for (var c = "", d = 0; d < arguments.length; d++) {
              var e = Number(arguments[d]);
              if (e < 0 || e > 1114111 || e !== Math.floor(e)) throw new RangeError("invalid_code_point " + e);
              e <= 65535 ? c += String.fromCharCode(e) : (e -= 65536, c += String.fromCharCode(e >>> 10 & 1023 | 55296), c += String.fromCharCode(e & 1023 | 56320));
            }
            return c;
          };
        });
        function Ra(a, b, c) {
          a instanceof String && (a = String(a));
          for (var d = a.length, e = 0; e < d; e++) {
            var f = a[e];
            if (b.call(c, f, e, a)) return { cj: e, v: f };
          }
          return { cj: -1, v: void 0 };
        }
        ea("Array.prototype.findIndex", function(a) {
          return a ? a : function(b, c) {
            return Ra(this, b, c).cj;
          };
        });
        ea("WeakSet", function(a) {
          function b(c) {
            this.g = /* @__PURE__ */ new WeakMap();
            if (c) {
              c = u(c);
              for (var d; !(d = c.next()).done; ) this.add(d.value);
            }
          }
          if (function() {
            if (!a || !Object.seal) return false;
            try {
              var c = Object.seal({}), d = Object.seal({}), e = new a([c]);
              if (!e.has(c) || e.has(d)) return false;
              e.delete(c);
              e.add(d);
              return !e.has(c) && e.has(d);
            } catch (f) {
              return false;
            }
          }()) return a;
          b.prototype.add = function(c) {
            this.g.set(c, true);
            return this;
          };
          b.prototype.has = function(c) {
            return this.g.has(c);
          };
          b.prototype.delete = function(c) {
            return this.g.delete(c);
          };
          return b;
        });
        ea("Array.prototype.find", function(a) {
          return a ? a : function(b, c) {
            return Ra(this, b, c).v;
          };
        });
        ea("String.prototype.startsWith", function(a) {
          return a ? a : function(b, c) {
            var d = Qa(this, b, "startsWith"), e = d.length, f = b.length;
            c = Math.max(0, Math.min(c | 0, d.length));
            for (var g = 0; g < f && c < e; ) if (d[c++] != b[g++]) return false;
            return g >= f;
          };
        });
        ea("Object.entries", function(a) {
          return a ? a : function(b) {
            var c = [], d;
            for (d in b) Oa(b, d) && c.push([d, b[d]]);
            return c;
          };
        });
        var Sa = typeof Object.assign == "function" ? Object.assign : function(a, b) {
          for (var c = 1; c < arguments.length; c++) {
            var d = arguments[c];
            if (d) for (var e in d) Oa(d, e) && (a[e] = d[e]);
          }
          return a;
        };
        ea("Object.assign", function(a) {
          return a || Sa;
        });
        ea("Promise.prototype.finally", function(a) {
          return a ? a : function(b) {
            return this.then(function(c) {
              return Promise.resolve(b()).then(function() {
                return c;
              });
            }, function(c) {
              return Promise.resolve(b()).then(function() {
                throw c;
              });
            });
          };
        });
        ea("Array.prototype.entries", function(a) {
          return a ? a : function() {
            return Pa(this, function(b, c) {
              return [b, c];
            });
          };
        });
        ea("Number.isNaN", function(a) {
          return a ? a : function(b) {
            return typeof b === "number" && isNaN(b);
          };
        });
        ea("String.prototype.repeat", function(a) {
          return a ? a : function(b) {
            var c = Qa(this, null, "repeat");
            if (b < 0 || b > 1342177279) throw new RangeError("Invalid count value");
            b |= 0;
            for (var d = ""; b; ) if (b & 1 && (d += c), b >>>= 1) c += c;
            return d;
          };
        });
        ea("Number.EPSILON", function() {
          return 2220446049250313e-31;
        });
        ea("Number.MAX_SAFE_INTEGER", function() {
          return 9007199254740991;
        });
        ea("Number.isFinite", function(a) {
          return a ? a : function(b) {
            return typeof b !== "number" ? false : !isNaN(b) && b !== Infinity && b !== -Infinity;
          };
        });
        ea("Object.values", function(a) {
          return a ? a : function(b) {
            var c = [], d;
            for (d in b) Oa(b, d) && c.push(b[d]);
            return c;
          };
        });
        ea("Math.log2", function(a) {
          return a ? a : function(b) {
            return Math.log(b) / Math.LN2;
          };
        });
        ea("String.prototype.endsWith", function(a) {
          return a ? a : function(b, c) {
            var d = Qa(this, b, "endsWith");
            c === void 0 && (c = d.length);
            c = Math.max(0, Math.min(c | 0, d.length));
            for (var e = b.length; e > 0 && c > 0; ) if (d[--c] != b[--e]) return false;
            return e <= 0;
          };
        });
        ea("Math.trunc", function(a) {
          return a ? a : function(b) {
            b = Number(b);
            if (isNaN(b) || b === Infinity || b === -Infinity || b === 0) return b;
            var c = Math.floor(Math.abs(b));
            return b < 0 ? -c : c;
          };
        });
        function Ta(a) {
          a = Math.trunc(a) || 0;
          a < 0 && (a += this.length);
          if (!(a < 0 || a >= this.length)) return this[a];
        }
        ea("Array.prototype.at", function(a) {
          return a ? a : Ta;
        });
        function Ua(a) {
          return a ? a : Ta;
        }
        ea("Int8Array.prototype.at", Ua);
        ea("Uint8Array.prototype.at", Ua);
        ea("Uint8ClampedArray.prototype.at", Ua);
        ea("Int16Array.prototype.at", Ua);
        ea("Uint16Array.prototype.at", Ua);
        ea("Int32Array.prototype.at", Ua);
        ea("Uint32Array.prototype.at", Ua);
        ea("Float32Array.prototype.at", Ua);
        ea("Float64Array.prototype.at", Ua);
        ea("String.prototype.at", function(a) {
          return a ? a : Ta;
        });
        var Va = this || self;
        function S(a, b) {
          a = a.split(".");
          var c = Va;
          a[0] in c || typeof c.execScript == "undefined" || c.execScript("var " + a[0]);
          for (var d; a.length && (d = a.shift()); ) a.length || b === void 0 ? c[d] && c[d] !== Object.prototype[d] ? c = c[d] : c = c[d] = {} : c[d] = b;
        }
        ;
        function T(a, b) {
          if (b) if (b instanceof Map) for (var c = u(b.keys()), d = c.next(); !d.done; d = c.next()) d = d.value, Object.defineProperty(this, d, { value: b.get(d), writable: true, enumerable: true });
          else for (c in b) Object.defineProperty(this, c, { value: b[c], writable: true, enumerable: true });
          this.defaultPrevented = this.cancelable = this.bubbles = false;
          this.timeStamp = window2.performance && window2.performance.now ? window2.performance.now() : Date.now();
          this.type = a;
          this.isTrusted = false;
          this.target = this.currentTarget = null;
          this.g = false;
        }
        function Xa(a) {
          var b = new T(a.type), c;
          for (c in a) Object.defineProperty(b, c, { value: a[c], writable: true, enumerable: true });
          return b;
        }
        T.prototype.preventDefault = function() {
          this.cancelable && (this.defaultPrevented = true);
        };
        T.prototype.stopImmediatePropagation = function() {
          this.g = true;
        };
        T.prototype.stopPropagation = function() {
        };
        S("shaka.util.FakeEvent", T);
        var Ya = {
          Im: "abrstatuschanged",
          Jm: "adaptation",
          Km: "audiotrackchanged",
          Lm: "audiotrackschanged",
          Mm: "boundarycrossed",
          Nm: "buffering",
          Om: "canupdatestarttime",
          Pm: "complete",
          Qm: "currentitemchanged",
          Rm: "downloadcompleted",
          Sm: "downloadfailed",
          Tm: "downloadheadersreceived",
          Um: "drmsessionupdate",
          Wm: "emsg",
          cn: "itemsinserted",
          dn: "itemsremoved",
          xn: "prft",
          Error: "error",
          Xm: "expirationupdated",
          Ym: "firstquartile",
          Zm: "gapjumped",
          fn: "keystatuschanged",
          ln: "loaded",
          mn: "loading",
          on: "manifestparsed",
          pn: "manifestupdated",
          qn: "mediaqualitychanged",
          rn: "mediasourcerecovered",
          tn: "metadataadded",
          Metadata: "metadata",
          un: "midpoint",
          vn: "nospatialvideoinfo",
          wn: "onstatechange",
          yn: "ratechange",
          Bn: "segmentappended",
          Cn: "sessiondata",
          Dn: "spatialvideoinfo",
          En: "stalldetected",
          Fn: "started",
          Gn: "statechanged",
          Hn: "streaming",
          In: "textchanged",
          Jn: "texttrackvisibility",
          Kn: "thirdquartile",
          Ln: "timelineregionadded",
          Mn: "timelineregionenter",
          Nn: "timelineregionexit",
          On: "trackschanged",
          Qn: "unloading",
          Sn: "variantchanged"
        };
        function Za() {
        }
        function $a() {
        }
        function ab() {
        }
        function bb(a) {
          var b = Ma.apply(1, arguments);
          cb.has(a) || (cb.add(a), ab.apply(Za, x(b)));
        }
        function db() {
        }
        function eb() {
        }
        function fb() {
        }
        var cb = /* @__PURE__ */ new Set();
        window2.console && ((/* @__PURE__ */ new Map()).set(1, function() {
          return console.error.apply(console, x(Ma.apply(0, arguments)));
        }).set(2, function() {
          return console.warn.apply(console, x(Ma.apply(0, arguments)));
        }).set(3, function() {
          return console.info.apply(console, x(Ma.apply(0, arguments)));
        }).set(4, function() {
          return console.log.apply(console, x(Ma.apply(0, arguments)));
        }).set(5, function() {
          return console.debug.apply(console, x(Ma.apply(0, arguments)));
        }).set(6, function() {
          return console.debug.apply(console, x(Ma.apply(0, arguments)));
        }), ab = function() {
          return console.warn.apply(console, x(Ma.apply(0, arguments)));
        }, $a = function() {
          console.error.apply(console, x(Ma.apply(0, arguments)));
        });
        function hb() {
          this.g = /* @__PURE__ */ new Map();
        }
        p = hb.prototype;
        p.push = function(a, b) {
          this.g.has(a) ? this.g.get(a).push(b) : this.g.set(a, [b]);
        };
        p.get = function(a) {
          return this.g.has(a) ? this.g.get(a).slice() : null;
        };
        p.remove = function(a, b) {
          if (this.g.has(a)) {
            var c = this.g.get(a).filter(function(d) {
              return d != b;
            });
            this.g.set(a, c);
            c.length || this.g.delete(a);
          }
        };
        p.forEach = function(a) {
          this.g.forEach(function(b, c) {
            a(c, b);
          });
        };
        p.size = function() {
          return this.g.size;
        };
        p.keys = function() {
          return Array.from(this.g.keys());
        };
        function kb() {
          this.hb = new hb();
          this.Xe = this;
        }
        kb.prototype.addEventListener = function(a, b) {
          this.hb && this.hb.push(a, b);
        };
        kb.prototype.removeEventListener = function(a, b) {
          this.hb && this.hb.remove(a, b);
        };
        kb.prototype.dispatchEvent = function(a) {
          if (!this.hb) return true;
          var b = this.hb.get(a.type) || [], c = this.hb.get("All");
          c && (b = b.concat(c));
          b = u(b);
          for (c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            a.target = this.Xe;
            a.currentTarget = this.Xe;
            try {
              c.handleEvent ? c.handleEvent(a) : c.call(this, a);
            } catch (d) {
            }
            if (a.g) break;
          }
          return a.defaultPrevented;
        };
        kb.prototype.release = function() {
          this.hb = null;
        };
        function lb(a, b) {
          var c = [];
          a = u(a);
          for (var d = a.next(); !d.done; d = a.next()) c.push(b(d.value));
          return c;
        }
        function mb(a, b) {
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) if (!b(c.value)) return false;
          return true;
        }
        function nb(a, b) {
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) if (b(c.value)) return true;
          return false;
        }
        function ob(a, b) {
          var c = [];
          a = u(a);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, b(d) && c.push(d);
          return c;
        }
        ;
        var pb = RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
        function qb(a) {
          var b;
          a instanceof qb ? (rb(this, a.lc), this.xd = a.xd, sb(this, a.Jb), tb(this, a.Sd), this.qb = a.qb, ub(this, a.g.clone()), this.fd = a.fd) : a && (b = String(a).match(pb)) ? (rb(this, b[1] || "", true), this.xd = vb(b[2] || ""), sb(this, b[3] || "", true), tb(this, b[4]), this.qb = vb(b[5] || "", true), ub(this, b[6] || "", true), this.fd = vb(b[7] || "")) : this.g = new wb(null);
        }
        p = qb.prototype;
        p.lc = "";
        p.xd = "";
        p.Jb = "";
        p.Sd = null;
        p.qb = "";
        p.fd = "";
        p.toString = function() {
          var a = [], b = this.lc;
          b && a.push(xb(b, zb, true), ":");
          if (b = this.Jb) {
            a.push("//");
            var c = this.xd;
            c && a.push(xb(c, zb, true), "@");
            a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g, "%$1"));
            b = this.Sd;
            b != null && a.push(":", String(b));
          }
          if (b = this.qb) this.Jb && b.charAt(0) != "/" && a.push("/"), a.push(xb(b, b.charAt(0) == "/" ? Bb : Cb, true));
          (b = this.g.toString()) && a.push("?", b);
          (b = this.fd) && a.push("#", xb(b, Db));
          return a.join("");
        };
        p.resolve = function(a) {
          var b = this.clone();
          b.lc === "data" && (b = new qb());
          var c = !!a.lc;
          c ? rb(b, a.lc) : c = !!a.xd;
          c ? b.xd = a.xd : c = !!a.Jb;
          c ? sb(b, a.Jb) : c = a.Sd != null;
          var d = a.qb;
          if (c) tb(b, a.Sd);
          else if (c = !!a.qb) {
            if (d.charAt(0) != "/") if (this.Jb && !this.qb) d = "/" + d;
            else {
              var e = b.qb.lastIndexOf("/");
              e != -1 && (d = b.qb.substr(0, e + 1) + d);
            }
            if (d == ".." || d == ".") d = "";
            else if (d.indexOf("./") != -1 || d.indexOf("/.") != -1) {
              e = d.lastIndexOf("/", 0) == 0;
              d = d.split("/");
              for (var f = [], g = 0; g < d.length; ) {
                var h = d[g++];
                h == "." ? e && g == d.length && f.push("") : h == ".." ? ((f.length > 1 || f.length == 1 && f[0] != "") && f.pop(), e && g == d.length && f.push("")) : (f.push(h), e = true);
              }
              d = f.join("/");
            }
          }
          c ? b.qb = d : c = a.g.toString() !== "";
          c ? ub(b, a.g.clone()) : c = !!a.fd;
          c && (b.fd = a.fd);
          return b;
        };
        p.clone = function() {
          return new qb(this);
        };
        function rb(a, b, c) {
          a.lc = c ? vb(b, true) : b;
          a.lc && (a.lc = a.lc.replace(/:$/, ""));
        }
        function sb(a, b, c) {
          a.Jb = c ? vb(b, true) : b;
        }
        function tb(a, b) {
          if (b) {
            b = Number(b);
            if (isNaN(b) || b < 0) throw Error("Bad port number " + b);
            a.Sd = b;
          } else a.Sd = null;
        }
        function ub(a, b, c) {
          b instanceof wb ? a.g = b : (c || (b = xb(b, Eb)), a.g = new wb(b));
        }
        function vb(a, b) {
          return a ? b ? decodeURI(a) : decodeURIComponent(a) : "";
        }
        function xb(a, b, c) {
          return a != null ? (a = encodeURI(a).replace(b, Fb), c && (a = a.replace(/%25([0-9a-fA-F]{2})/g, "%$1")), a) : null;
        }
        function Fb(a) {
          a = a.charCodeAt(0);
          return "%" + (a >> 4 & 15).toString(16) + (a & 15).toString(16);
        }
        var zb = /[#\/\?@]/g, Cb = /[#\?:]/g, Bb = /[#\?]/g, Eb = /[#\?@]/g, Db = /#/g;
        function wb(a) {
          this.g = a || null;
        }
        function Gb(a) {
          if (!a.ob && (a.ob = /* @__PURE__ */ new Map(), a.ie = 0, a.g)) for (var b = a.g.split("&"), c = 0; c < b.length; c++) {
            var d = b[c].indexOf("="), e = null;
            if (d >= 0) {
              var f = b[c].substring(0, d);
              e = b[c].substring(d + 1);
            } else f = b[c];
            f = decodeURIComponent(f);
            e = e || "";
            a.add(f, decodeURIComponent(e));
          }
        }
        p = wb.prototype;
        p.ob = null;
        p.ie = null;
        function Hb(a) {
          Gb(a);
          return a.ie;
        }
        p.add = function(a, b) {
          Gb(this);
          this.g = null;
          var c = this.ob.has(a) ? this.ob.get(a) : null;
          c || this.ob.set(a, c = []);
          c.push(b);
          this.ie++;
          return this;
        };
        p.set = function(a, b) {
          Gb(this);
          this.g = null;
          this.ob.has(a) ? this.ob.set(a, [b]) : this.add(a, b);
          return this;
        };
        p.get = function(a) {
          Gb(this);
          return this.ob.get(a) || [];
        };
        p.toString = function() {
          if (this.g) return this.g;
          if (!this.ob || !this.ob.size) return "";
          for (var a = [], b = u(this.ob.keys()), c = b.next(); !c.done; c = b.next()) {
            var d = c.value;
            c = encodeURIComponent(d);
            d = this.ob.get(d);
            for (var e = 0; e < d.length; e++) {
              var f = c;
              d[e] !== "" && (f += "=" + encodeURIComponent(d[e]));
              a.push(f);
            }
          }
          return this.g = a.join("&");
        };
        p.clone = function() {
          var a = new wb();
          a.g = this.g;
          if (this.ob) {
            for (var b = /* @__PURE__ */ new Map(), c = u(this.ob), d = c.next(); !d.done; d = c.next()) {
              var e = u(d.value);
              d = e.next().value;
              e = e.next().value;
              b.set(d, e.concat());
            }
            a.ob = b;
            a.ie = this.ie;
          }
          return a;
        };
        function Ib() {
        }
        function Jb(a, b) {
          if (!a && !b) return true;
          if (!a || !b || a.byteLength != b.byteLength) return false;
          if ((ArrayBuffer.isView(a) ? a.buffer : a) == (ArrayBuffer.isView(b) ? b.buffer : b) && (a.byteOffset || 0) == (b.byteOffset || 0)) return true;
          var c = Kb(a);
          b = Kb(b);
          for (var d = 0; d < a.byteLength; d++) if (c[d] != b[d]) return false;
          return true;
        }
        function Lb(a) {
          return ArrayBuffer.isView(a) ? a.byteOffset == 0 && a.byteLength == a.buffer.byteLength ? a.buffer : new Uint8Array(a).buffer : a;
        }
        function Kb(a, b, c) {
          c = c === void 0 ? Infinity : c;
          return Mb(a, b === void 0 ? 0 : b, c, Uint8Array);
        }
        function Nb(a, b, c) {
          c = c === void 0 ? Infinity : c;
          return Mb(a, b === void 0 ? 0 : b, c, Uint16Array);
        }
        function Ob(a, b, c) {
          c = c === void 0 ? Infinity : c;
          return Mb(a, b === void 0 ? 0 : b, c, DataView);
        }
        function Mb(a, b, c, d) {
          var e = ArrayBuffer.isView(a) ? a.buffer : a, f = 1;
          "BYTES_PER_ELEMENT" in d && (f = d.BYTES_PER_ELEMENT);
          var g = ((a.byteOffset || 0) + a.byteLength) / f;
          a = Math.floor(Math.max(0, Math.min(((a.byteOffset || 0) + b) / f, g)));
          return new d(e, a, Math.floor(Math.min(a + Math.max(c, 0), g)) - a);
        }
        S("shaka.util.BufferUtils", Ib);
        Ib.toDataView = Ob;
        Ib.toUint16 = Nb;
        Ib.toUint8 = Kb;
        Ib.toArrayBuffer = Lb;
        Ib.equal = Jb;
        function U(a, b, c) {
          var d = Ma.apply(3, arguments);
          this.severity = a;
          this.category = b;
          this.code = c;
          this.data = d;
          this.handled = false;
          this.message = "Shaka Error " + this.code;
          if (Pb) try {
            throw Error(this.message || "Shaka Error");
          } catch (e) {
            this.stack = e.stack;
          }
        }
        U.prototype.toString = function() {
          return "shaka.util.Error " + JSON.stringify(this, null, "  ");
        };
        S("shaka.util.Error", U);
        var Pb = true;
        U.Severity = { RECOVERABLE: 1, CRITICAL: 2 };
        U.Category = { NETWORK: 1, TEXT: 2, MEDIA: 3, MANIFEST: 4, STREAMING: 5, DRM: 6, PLAYER: 7, CAST: 8, STORAGE: 9, ADS: 10 };
        U.Code = {
          UNSUPPORTED_SCHEME: 1e3,
          BAD_HTTP_STATUS: 1001,
          HTTP_ERROR: 1002,
          TIMEOUT: 1003,
          MALFORMED_DATA_URI: 1004,
          REQUEST_FILTER_ERROR: 1006,
          RESPONSE_FILTER_ERROR: 1007,
          MALFORMED_TEST_URI: 1008,
          UNEXPECTED_TEST_REQUEST: 1009,
          ATTEMPTS_EXHAUSTED: 1010,
          SEGMENT_MISSING: 1011,
          INVALID_TEXT_HEADER: 2e3,
          INVALID_TEXT_CUE: 2001,
          UNABLE_TO_DETECT_ENCODING: 2003,
          BAD_ENCODING: 2004,
          INVALID_XML: 2005,
          INVALID_MP4_TTML: 2007,
          INVALID_MP4_VTT: 2008,
          UNABLE_TO_EXTRACT_CUE_START_TIME: 2009,
          INVALID_MP4_CEA: 2010,
          TEXT_COULD_NOT_GUESS_MIME_TYPE: 2011,
          CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS: 2012,
          TEXT_ONLY_WEBVTT_SRC_EQUALS: 2013,
          MISSING_TEXT_PLUGIN: 2014,
          UNSUPPORTED_EXTERNAL_THUMBNAILS_URI: 2017,
          BUFFER_READ_OUT_OF_BOUNDS: 3e3,
          JS_INTEGER_OVERFLOW: 3001,
          EBML_OVERFLOW: 3002,
          EBML_BAD_FLOATING_POINT_SIZE: 3003,
          MP4_SIDX_WRONG_BOX_TYPE: 3004,
          MP4_SIDX_INVALID_TIMESCALE: 3005,
          MP4_SIDX_TYPE_NOT_SUPPORTED: 3006,
          WEBM_CUES_ELEMENT_MISSING: 3007,
          WEBM_EBML_HEADER_ELEMENT_MISSING: 3008,
          WEBM_SEGMENT_ELEMENT_MISSING: 3009,
          WEBM_INFO_ELEMENT_MISSING: 3010,
          WEBM_DURATION_ELEMENT_MISSING: 3011,
          WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING: 3012,
          WEBM_CUE_TIME_ELEMENT_MISSING: 3013,
          MEDIA_SOURCE_OPERATION_FAILED: 3014,
          MEDIA_SOURCE_OPERATION_THREW: 3015,
          VIDEO_ERROR: 3016,
          QUOTA_EXCEEDED_ERROR: 3017,
          TRANSMUXING_FAILED: 3018,
          CONTENT_TRANSFORMATION_FAILED: 3019,
          MSS_MISSING_DATA_FOR_TRANSMUXING: 3020,
          MSS_TRANSMUXING_FAILED: 3022,
          TRANSMUXING_NO_VIDEO_DATA: 3023,
          STREAMING_NOT_ALLOWED: 3024,
          UNABLE_TO_GUESS_MANIFEST_TYPE: 4e3,
          DASH_INVALID_XML: 4001,
          DASH_NO_SEGMENT_INFO: 4002,
          DASH_EMPTY_ADAPTATION_SET: 4003,
          DASH_EMPTY_PERIOD: 4004,
          DASH_WEBM_MISSING_INIT: 4005,
          DASH_UNSUPPORTED_CONTAINER: 4006,
          DASH_PSSH_BAD_ENCODING: 4007,
          DASH_NO_COMMON_KEY_SYSTEM: 4008,
          DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED: 4009,
          DASH_CONFLICTING_KEY_IDS: 4010,
          RESTRICTIONS_CANNOT_BE_MET: 4012,
          HLS_PLAYLIST_HEADER_MISSING: 4015,
          INVALID_HLS_TAG: 4016,
          HLS_INVALID_PLAYLIST_HIERARCHY: 4017,
          DASH_DUPLICATE_REPRESENTATION_ID: 4018,
          HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND: 4020,
          HLS_REQUIRED_ATTRIBUTE_MISSING: 4023,
          HLS_REQUIRED_TAG_MISSING: 4024,
          HLS_COULD_NOT_GUESS_CODECS: 4025,
          HLS_KEYFORMATS_NOT_SUPPORTED: 4026,
          DASH_UNSUPPORTED_XLINK_ACTUATE: 4027,
          DASH_XLINK_DEPTH_LIMIT: 4028,
          CONTENT_UNSUPPORTED_BY_BROWSER: 4032,
          CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM: 4033,
          NO_VARIANTS: 4036,
          PERIOD_FLATTENING_FAILED: 4037,
          INCONSISTENT_DRM_ACROSS_PERIODS: 4038,
          HLS_VARIABLE_NOT_FOUND: 4039,
          HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED: 4040,
          HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4041,
          NO_WEB_CRYPTO_API: 4042,
          CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM: 4045,
          MSS_INVALID_XML: 4046,
          MSS_LIVE_CONTENT_NOT_SUPPORTED: 4047,
          AES_128_INVALID_IV_LENGTH: 4048,
          AES_128_INVALID_KEY_LENGTH: 4049,
          DASH_CONFLICTING_AES_128: 4050,
          DASH_UNSUPPORTED_AES_128: 4051,
          DASH_INVALID_PATCH: 4052,
          HLS_EMPTY_MEDIA_PLAYLIST: 4053,
          DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED: 4054,
          CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM: 4054,
          STREAMING_ENGINE_STARTUP_INVALID_STATE: 5006,
          NO_RECOGNIZED_KEY_SYSTEMS: 6e3,
          REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE: 6001,
          FAILED_TO_CREATE_CDM: 6002,
          FAILED_TO_ATTACH_TO_VIDEO: 6003,
          INVALID_SERVER_CERTIFICATE: 6004,
          FAILED_TO_CREATE_SESSION: 6005,
          FAILED_TO_GENERATE_LICENSE_REQUEST: 6006,
          LICENSE_REQUEST_FAILED: 6007,
          LICENSE_RESPONSE_REJECTED: 6008,
          ENCRYPTED_CONTENT_WITHOUT_DRM_INFO: 6010,
          NO_LICENSE_SERVER_GIVEN: 6012,
          OFFLINE_SESSION_REMOVED: 6013,
          EXPIRED: 6014,
          SERVER_CERTIFICATE_REQUIRED: 6015,
          INIT_DATA_TRANSFORM_ERROR: 6016,
          SERVER_CERTIFICATE_REQUEST_FAILED: 6017,
          MIN_HDCP_VERSION_NOT_MATCH: 6018,
          ERROR_CHECKING_HDCP_VERSION: 6019,
          MISSING_EME_SUPPORT: 6020,
          LOAD_INTERRUPTED: 7e3,
          OPERATION_ABORTED: 7001,
          NO_VIDEO_ELEMENT: 7002,
          OBJECT_DESTROYED: 7003,
          CONTENT_NOT_LOADED: 7004,
          SRC_EQUALS_PRELOAD_NOT_SUPPORTED: 7005,
          PRELOAD_DESTROYED: 7006,
          QUEUE_INDEX_OUT_OF_BOUNDS: 7007,
          CAST_API_UNAVAILABLE: 8e3,
          NO_CAST_RECEIVERS: 8001,
          ALREADY_CASTING: 8002,
          UNEXPECTED_CAST_ERROR: 8003,
          CAST_CANCELED_BY_USER: 8004,
          CAST_CONNECTION_TIMED_OUT: 8005,
          CAST_RECEIVER_APP_UNAVAILABLE: 8006,
          STORAGE_NOT_SUPPORTED: 9e3,
          INDEXED_DB_ERROR: 9001,
          DEPRECATED_OPERATION_ABORTED: 9002,
          REQUESTED_ITEM_NOT_FOUND: 9003,
          MALFORMED_OFFLINE_URI: 9004,
          CANNOT_STORE_LIVE_OFFLINE: 9005,
          NO_INIT_DATA_FOR_OFFLINE: 9007,
          LOCAL_PLAYER_INSTANCE_REQUIRED: 9008,
          NEW_KEY_OPERATION_NOT_SUPPORTED: 9011,
          KEY_NOT_FOUND: 9012,
          MISSING_STORAGE_CELL: 9013,
          STORAGE_LIMIT_REACHED: 9014,
          DOWNLOAD_SIZE_CALLBACK_ERROR: 9015,
          MODIFY_OPERATION_NOT_SUPPORTED: 9016,
          INDEXED_DB_INIT_TIMED_OUT: 9017,
          CS_IMA_SDK_MISSING: 1e4,
          CS_AD_MANAGER_NOT_INITIALIZED: 10001,
          SS_IMA_SDK_MISSING: 10002,
          SS_AD_MANAGER_NOT_INITIALIZED: 10003,
          CURRENT_DAI_REQUEST_NOT_FINISHED: 10004,
          MT_AD_MANAGER_NOT_INITIALIZED: 10005,
          INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED: 10006,
          VAST_INVALID_XML: 10007
        };
        function Qb(a) {
          this.h = a;
          this.g = void 0;
        }
        Qb.prototype.value = function() {
          this.g === void 0 && (this.g = this.h());
          return this.g;
        };
        function Rb() {
          return Sb.value();
        }
        var Tb = null, Ub = null, Sb = new Qb(function() {
          var a = void 0;
          Tb && (a = Tb());
          !a && Ub && (a = Ub());
          return a;
        });
        function Vb() {
        }
        function Wb(a) {
          if (!a) return "";
          a = Kb(a);
          a[0] == 239 && a[1] == 187 && a[2] == 191 && (a = a.subarray(3));
          if (window2.TextDecoder && !Rb().ki()) return a = new TextDecoder().decode(a), a.includes("") && $a('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'), a;
          for (var b = "", c = 0; c < a.length; ++c) {
            var d = 65533;
            (a[c] & 128) == 0 ? d = a[c] : a.length >= c + 2 && (a[c] & 224) == 192 && (a[c + 1] & 192) == 128 ? (d = (a[c] & 31) << 6 | a[c + 1] & 63, c += 1) : a.length >= c + 3 && (a[c] & 240) == 224 && (a[c + 1] & 192) == 128 && (a[c + 2] & 192) == 128 ? (d = (a[c] & 15) << 12 | (a[c + 1] & 63) << 6 | a[c + 2] & 63, c += 2) : a.length >= c + 4 && (a[c] & 241) == 240 && (a[c + 1] & 192) == 128 && (a[c + 2] & 192) == 128 && (a[c + 3] & 192) == 128 && (d = (a[c] & 7) << 18 | (a[c + 1] & 63) << 12 | (a[c + 2] & 63) << 6 | a[c + 3] & 63, c += 3);
            if (d <= 65535) b += String.fromCharCode(d);
            else {
              d -= 65536;
              var e = d & 1023;
              b += String.fromCharCode(55296 + (d >> 10));
              b += String.fromCharCode(56320 + e);
            }
          }
          return b;
        }
        function Xb(a, b, c) {
          if (!a) return "";
          if (!c && a.byteLength % 2 != 0) throw new U(2, 2, 2004);
          c = Math.floor(a.byteLength / 2);
          var d = new Uint16Array(c);
          a = Ob(a);
          for (var e = 0; e < c; e++) d[e] = a.getUint16(e * 2, b);
          return Yb(d);
        }
        function Zb(a) {
          function b(d) {
            return c.byteLength <= d || c[d] >= 9 && c[d] <= 126;
          }
          if (!a) return "";
          var c = Kb(a);
          if (c[0] == 239 && c[1] == 187 && c[2] == 191) return Wb(c);
          if (c[0] == 254 && c[1] == 255) return Xb(c.subarray(2), false);
          if (c[0] == 255 && c[1] == 254) return Xb(c.subarray(2), true);
          if (c[0] == 0 && c[2] == 0) return Xb(a, false);
          if (c[1] == 0 && c[3] == 0) return Xb(a, true);
          if (b(0) && b(1) && b(2) && b(3)) return Wb(a);
          throw new U(2, 2, 2003);
        }
        function $b(a) {
          if (window2.TextEncoder && !Rb().ki()) {
            var b = new TextEncoder();
            return Lb(b.encode(a));
          }
          a = encodeURIComponent(a);
          a = unescape(a);
          b = new Uint8Array(a.length);
          for (var c = 0; c < a.length; c++) b[c] = a[c].charCodeAt(0);
          return Lb(b);
        }
        function ac(a, b) {
          for (var c = new ArrayBuffer(a.length * 2), d = new DataView(c), e = 0; e < a.length; ++e) d.setUint16(e * 2, a.charCodeAt(e), b);
          return c;
        }
        function Yb(a) {
          return bc.value()(a);
        }
        function cc(a) {
          var b = { "&amp;": "&", "&lt;": "<", "&gt;": ">", "&quot;": '"', "&apos;": "'", "&nbsp;": "", "&lrm;": "", "&rlm;": "" }, c = /&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g, d = RegExp(c.source);
          return a && d.test(a) ? a.replace(c, function(e) {
            return e[1] == "#" ? (e = e[2] == "x" || e[2] == "X" ? parseInt(e.substring(3), 16) : parseInt(e.substring(2), 10), e >= 0 && e <= 1114111 ? String.fromCodePoint(e) : "") : b[e] || "'";
          }) : a || "";
        }
        S("shaka.util.StringUtils", Vb);
        Vb.resetFromCharCode = function() {
          bc.g = void 0;
        };
        Vb.toUTF16 = ac;
        Vb.toUTF8 = $b;
        Vb.fromBytesAutoDetect = Zb;
        Vb.fromUTF16 = Xb;
        Vb.fromUTF8 = Wb;
        var bc = new Qb(function() {
          function a(c) {
            try {
              var d = new Uint8Array(c);
              return String.fromCharCode.apply(null, d).length > 0;
            } catch (e) {
              return false;
            }
          }
          for (var b = { $c: 65536 }; b.$c > 0; b = { $c: b.$c }, b.$c /= 2) if (a(b.$c)) return /* @__PURE__ */ function(c) {
            return function(d) {
              for (var e = "", f = 0; f < d.length; f += c.$c) e += String.fromCharCode.apply(null, d.subarray(f, f + c.$c));
              return e;
            };
          }(b);
          return null;
        });
        function dc() {
        }
        function ec(a) {
          a = Yb(Kb(a));
          return btoa(a);
        }
        function fc(a, b) {
          b = b == void 0 ? true : b;
          a = ec(a).replace(/\+/g, "-").replace(/\//g, "_");
          return b ? a : a.replace(/[=]*$/, "");
        }
        function hc(a) {
          a = window2.atob(a.replace(/-/g, "+").replace(/_/g, "/"));
          for (var b = new Uint8Array(a.length), c = 0; c < a.length; ++c) b[c] = a.charCodeAt(c);
          return b;
        }
        function ic(a) {
          for (var b = a.length / 2, c = new Uint8Array(b), d = 0; d < b; d++) c[d] = window2.parseInt(a.substr(d * 2, 2), 16);
          return c;
        }
        function jc(a) {
          var b = Kb(a);
          a = "";
          b = u(b);
          for (var c = b.next(); !c.done; c = b.next()) c = c.value, c = c.toString(16), c.length == 1 && (c = "0" + c), a += c;
          return a;
        }
        function lc() {
          for (var a = Ma.apply(0, arguments), b = 0, c = 0; c < a.length; ++c) b += a[c].byteLength;
          b = new Uint8Array(b);
          for (var d = c = 0; d < a.length; ++d) {
            var e = a[d];
            ArrayBuffer.isView(e) && e.BYTES_PER_ELEMENT === 1 ? b.set(e, c) : b.set(Kb(e), c);
            c += e.byteLength;
          }
          return b;
        }
        S("shaka.util.Uint8ArrayUtils", dc);
        dc.concat = lc;
        dc.toHex = jc;
        dc.fromHex = ic;
        dc.fromBase64 = hc;
        dc.toBase64 = fc;
        dc.toStandardBase64 = ec;
        function mc(a, b, c) {
          c = c === void 0 ? "" : c;
          if (b.length == 0) return a;
          if (a.length == 1 && b.length == 1) {
            var d = new qb(a[0]);
            b = new qb(b[0]);
            b = d.resolve(b);
            c && ub(b, c);
            return [b.toString()];
          }
          b = b.map(function(h) {
            return new qb(h);
          });
          d = [];
          a = u(a);
          for (var e = a.next(); !e.done; e = a.next()) {
            e = new qb(e.value);
            for (var f = u(b), g = f.next(); !g.done; g = f.next()) g = e.resolve(g.value), c && ub(g, c), d.push(g.toString());
          }
          return d;
        }
        function nc(a, b, c, d) {
          a = { keySystem: a, encryptionScheme: b, licenseServerUri: "", distinctiveIdentifierRequired: false, persistentStateRequired: false, audioRobustness: "", videoRobustness: "", serverCertificate: null, serverCertificateUri: "", sessionType: "", initData: c || [], keyIds: /* @__PURE__ */ new Set() };
          d && (a.keySystemUris = /* @__PURE__ */ new Set([d]));
          return a;
        }
        function oc(a, b) {
          b = b === void 0 ? "cenc" : b;
          var c = [], d = [], e = [];
          a.forEach(function(g, h) {
            var k2 = h;
            k2.length != 22 && (k2 = fc(ic(h), false));
            var l = g;
            l.length != 22 && (l = fc(ic(g), false));
            g = { kty: "oct", kid: k2, k: l };
            c.push(g);
            d.push(g.kid);
            e.push(h);
          });
          a = JSON.stringify({ keys: c });
          var f = JSON.stringify({ kids: d });
          f = [{ initData: Kb($b(f)), initDataType: "keyids" }];
          return {
            keySystem: "org.w3.clearkey",
            encryptionScheme: b,
            licenseServerUri: "data:application/json;base64," + window2.btoa(a),
            distinctiveIdentifierRequired: false,
            persistentStateRequired: false,
            audioRobustness: "",
            videoRobustness: "",
            serverCertificate: null,
            serverCertificateUri: "",
            sessionType: "",
            initData: f,
            keyIds: new Set(e)
          };
        }
        function pc(a, b) {
          if (b.length == 1) return b[0];
          a = qc(a, b);
          if (a != null) return a;
          throw new U(2, 4, 4025, b);
        }
        function qc(a, b) {
          var c = rc.get(a);
          c = u(c);
          for (var d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            for (var e = u(b), f = e.next(); !f.done; f = e.next()) if (f = f.value, d.test(f.trim())) return f.trim();
          }
          return a == sc ? "" : null;
        }
        function tc(a, b) {
          var c = [];
          a = rc.get(a);
          a = u(a);
          for (var d = a.next(); !d.done; d = a.next()) {
            d = d.value;
            for (var e = u(b), f = e.next(); !f.done; f = e.next()) f = f.value, d.test(f.trim()) && c.push(f.trim());
          }
          return c;
        }
        var sc = "text", uc = { Ia: "video", na: "audio", Va: sc, yg: "image", Gm: "application" }, vc = 1 / 15, rc = (/* @__PURE__ */ new Map()).set("audio", [/^vorbis$/, /^Opus$/, /^opus$/, /^fLaC$/, /^flac$/, /^mp4a/, /^[ae]c-3$/, /^ac-4/, /^dts[cex]$/, /^iamf/, /^mhm[12]/, /^ac3$/, /^eac3$/, /^apac$/]).set("video", [/^avc/, /^hev/, /^hvc/, /^vvc/, /^vvi/, /^vp0?[89]/, /^av01/, /^dvh/, /^dva/, /^dav/]).set("text", [/^vtt$/, /^wvtt/, /^stpp/]);
        function wc() {
        }
        function xc(a, b) {
          a = yc(a);
          b = yc(b);
          return a.split("-")[0] == b.split("-")[0];
        }
        function zc(a, b) {
          a = yc(a);
          b = yc(b);
          a = a.split("-");
          b = b.split("-");
          return a[0] == b[0] && a.length == 1 && b.length == 2;
        }
        function Ac(a, b) {
          a = yc(a);
          b = yc(b);
          a = a.split("-");
          b = b.split("-");
          return a.length == 2 && b.length == 2 && a[0] == b[0];
        }
        function yc(a) {
          a = u(a.split("-x-"));
          var b = a.next().value;
          b = b === void 0 ? "" : b;
          a = a.next().value;
          a = a === void 0 ? "" : a;
          var c = u(b.split("-"));
          b = c.next().value;
          b = b === void 0 ? "" : b;
          c = c.next().value;
          c = c === void 0 ? "" : c;
          a = a ? "x-" + a : "";
          b = b.toLowerCase();
          b = Bc.get(b) || b;
          c = c.toUpperCase();
          return (c ? b + "-" + c : b) + (a ? "-" + a : "");
        }
        function Cc(a, b) {
          var c = Dc(a), d = Dc(b);
          return a != c && b != d && c == d;
        }
        function Ec(a, b) {
          a = yc(a);
          b = yc(b);
          return b == a ? 4 : zc(b, a) ? 3 : Ac(b, a) ? 2 : zc(a, b) ? 1 : 0;
        }
        function Dc(a) {
          var b = a.indexOf("-");
          a = b >= 0 ? a.substring(0, b) : a;
          a = a.toLowerCase();
          return a = Bc.get(a) || a;
        }
        function Fc(a) {
          return a.language ? yc(a.language) : a.audio && a.audio.language ? yc(a.audio.language) : a.video && a.video.language ? yc(a.video.language) : "und";
        }
        function Gc(a, b) {
          a = yc(a);
          var c = /* @__PURE__ */ new Set();
          b = u(b);
          for (var d = b.next(); !d.done; d = b.next()) c.add(yc(d.value));
          b = u(c);
          for (d = b.next(); !d.done; d = b.next()) if (d = d.value, d == a) return d;
          b = u(c);
          for (d = b.next(); !d.done; d = b.next()) if (d = d.value, zc(d, a)) return d;
          b = u(c);
          for (d = b.next(); !d.done; d = b.next()) if (d = d.value, Ac(d, a)) return d;
          c = u(c);
          for (b = c.next(); !b.done; b = c.next()) if (b = b.value, zc(a, b)) return b;
          return null;
        }
        S("shaka.util.LanguageUtils", wc);
        wc.findClosestLocale = Gc;
        wc.getLocaleForVariant = Fc;
        wc.getLocaleForText = function(a) {
          return yc(a.language || "und");
        };
        wc.getBase = Dc;
        wc.relatedness = Ec;
        wc.areSiblings = Cc;
        wc.normalize = yc;
        wc.isSiblingOf = Ac;
        wc.isParentOf = zc;
        wc.areLanguageCompatible = xc;
        wc.areLocaleCompatible = function(a, b) {
          a = yc(a);
          b = yc(b);
          return a == b;
        };
        var Bc = /* @__PURE__ */ new Map([["aar", "aa"], ["abk", "ab"], ["afr", "af"], ["aka", "ak"], ["alb", "sq"], ["amh", "am"], ["ara", "ar"], ["arg", "an"], ["arm", "hy"], ["asm", "as"], ["ava", "av"], ["ave", "ae"], ["aym", "ay"], ["aze", "az"], ["bak", "ba"], ["bam", "bm"], ["baq", "eu"], ["bel", "be"], ["ben", "bn"], ["bih", "bh"], ["bis", "bi"], ["bod", "bo"], ["bos", "bs"], ["bre", "br"], ["bul", "bg"], ["bur", "my"], ["cat", "ca"], ["ces", "cs"], ["cha", "ch"], ["che", "ce"], ["chi", "zh"], ["chu", "cu"], ["chv", "cv"], ["cor", "kw"], ["cos", "co"], ["cre", "cr"], ["cym", "cy"], [
          "cze",
          "cs"
        ], ["dan", "da"], ["deu", "de"], ["div", "dv"], ["dut", "nl"], ["dzo", "dz"], ["ell", "el"], ["eng", "en"], ["epo", "eo"], ["est", "et"], ["eus", "eu"], ["ewe", "ee"], ["fao", "fo"], ["fas", "fa"], ["fij", "fj"], ["fin", "fi"], ["fra", "fr"], ["fre", "fr"], ["fry", "fy"], ["ful", "ff"], ["geo", "ka"], ["ger", "de"], ["gla", "gd"], ["gle", "ga"], ["glg", "gl"], ["glv", "gv"], ["gre", "el"], ["grn", "gn"], ["guj", "gu"], ["hat", "ht"], ["hau", "ha"], ["heb", "he"], ["her", "hz"], ["hin", "hi"], ["hmo", "ho"], ["hrv", "hr"], ["hun", "hu"], ["hye", "hy"], ["ibo", "ig"], [
          "ice",
          "is"
        ], ["ido", "io"], ["iii", "ii"], ["iku", "iu"], ["ile", "ie"], ["ina", "ia"], ["ind", "id"], ["ipk", "ik"], ["isl", "is"], ["ita", "it"], ["jav", "jv"], ["jpn", "ja"], ["kal", "kl"], ["kan", "kn"], ["kas", "ks"], ["kat", "ka"], ["kau", "kr"], ["kaz", "kk"], ["khm", "km"], ["kik", "ki"], ["kin", "rw"], ["kir", "ky"], ["kom", "kv"], ["kon", "kg"], ["kor", "ko"], ["kua", "kj"], ["kur", "ku"], ["lao", "lo"], ["lat", "la"], ["lav", "lv"], ["lim", "li"], ["lin", "ln"], ["lit", "lt"], ["ltz", "lb"], ["lub", "lu"], ["lug", "lg"], ["mac", "mk"], ["mah", "mh"], ["mal", "ml"], [
          "mao",
          "mi"
        ], ["mar", "mr"], ["may", "ms"], ["mkd", "mk"], ["mlg", "mg"], ["mlt", "mt"], ["mon", "mn"], ["mri", "mi"], ["msa", "ms"], ["mya", "my"], ["nau", "na"], ["nav", "nv"], ["nbl", "nr"], ["nde", "nd"], ["ndo", "ng"], ["nep", "ne"], ["nld", "nl"], ["nno", "nn"], ["nob", "nb"], ["nor", "no"], ["nya", "ny"], ["oci", "oc"], ["oji", "oj"], ["ori", "or"], ["orm", "om"], ["oss", "os"], ["pan", "pa"], ["per", "fa"], ["pli", "pi"], ["pol", "pl"], ["por", "pt"], ["pus", "ps"], ["que", "qu"], ["roh", "rm"], ["ron", "ro"], ["rum", "ro"], ["run", "rn"], ["rus", "ru"], ["sag", "sg"], [
          "san",
          "sa"
        ], ["sin", "si"], ["slk", "sk"], ["slo", "sk"], ["slv", "sl"], ["sme", "se"], ["smo", "sm"], ["sna", "sn"], ["snd", "sd"], ["som", "so"], ["sot", "st"], ["spa", "es"], ["sqi", "sq"], ["srd", "sc"], ["srp", "sr"], ["ssw", "ss"], ["sun", "su"], ["swa", "sw"], ["swe", "sv"], ["tah", "ty"], ["tam", "ta"], ["tat", "tt"], ["tel", "te"], ["tgk", "tg"], ["tgl", "tl"], ["tha", "th"], ["tib", "bo"], ["tir", "ti"], ["ton", "to"], ["tsn", "tn"], ["tso", "ts"], ["tuk", "tk"], ["tur", "tr"], ["twi", "tw"], ["uig", "ug"], ["ukr", "uk"], ["urd", "ur"], ["uzb", "uz"], ["ven", "ve"], [
          "vie",
          "vi"
        ], ["vol", "vo"], ["wel", "cy"], ["wln", "wa"], ["wol", "wo"], ["xho", "xh"], ["yid", "yi"], ["yor", "yo"], ["zha", "za"], ["zho", "zh"], ["zul", "zu"]]);
        function Hc(a) {
          kb.call(this);
          this.j = yc(a);
          this.i = /* @__PURE__ */ new Map();
          this.g = /* @__PURE__ */ new Set();
          this.h = /* @__PURE__ */ new Map();
        }
        la(Hc, kb);
        p = Hc.prototype;
        p.release = function() {
          kb.prototype.release.call(this);
        };
        p.Li = function(a) {
          var b = this;
          this.g.clear();
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) this.g.add(yc(c.value));
          Ic(this);
          a = ob(this.g, function(d) {
            return !b.h.has(d);
          });
          a.length && this.dispatchEvent(new T("unknown-locales", (/* @__PURE__ */ new Map()).set("locales", a)));
          a = ob(this.g, function(d) {
            return b.h.has(d);
          });
          a = (/* @__PURE__ */ new Map()).set("locales", a.length ? a : [this.j]);
          this.dispatchEvent(new T("locale-changed", a));
        };
        p.Xa = function(a, b, c) {
          a = yc(a);
          c === void 0 && (c = Jc);
          var d = this.h.get(a) || /* @__PURE__ */ new Map();
          b.forEach(function(e, f) {
            d.has(f) && c != Jc || d.set(f, e);
          });
          this.h.set(a, d);
          Ic(this);
          this.dispatchEvent(new T("locale-updated"));
          return this;
        };
        p.jm = function(a) {
          for (var b = u(a.keys()), c = b.next(); !c.done; c = b.next()) c = c.value, a.set(c, this.resolve(c));
        };
        p.resolve = function(a) {
          var b = this.i.get(a);
          if (b) return b;
          a = (/* @__PURE__ */ new Map()).set("locales", Array.from(this.g)).set("missing", a);
          this.dispatchEvent(new T("unknown-localization", a));
          return "";
        };
        p.Lk = function() {
          return this.g;
        };
        function Ic(a) {
          for (var b = a.h, c = a.j, d = a.g, e = /* @__PURE__ */ new Set(), f = u(d), g = f.next(), h = {}; !g.done; h = { ye: void 0 }, g = f.next()) {
            h.ye = g.value;
            e.add(h.ye);
            e.add(Dc(h.ye));
            g = ob(b.keys(), /* @__PURE__ */ function(l) {
              return function(m) {
                return Cc(m, l.ye);
              };
            }(h));
            g.sort();
            g = u(g);
            for (var k2 = g.next(); !k2.done; k2 = g.next()) e.add(k2.value);
            h = ob(b.keys(), /* @__PURE__ */ function(l) {
              return function(m) {
                return Dc(m) == l.ye;
              };
            }(h));
            h.sort();
            h = u(h);
            for (g = h.next(); !g.done; g = h.next()) e.add(g.value);
          }
          e.add(c);
          c = [];
          e = u(e);
          for (f = e.next(); !f.done; f = e.next()) (f = b.get(f.value)) && c.push(f);
          c.reverse();
          a.i.clear();
          b = u(c);
          for (e = b.next(); !e.done; e = b.next()) e.value.forEach(function(l, m) {
            a.i.set(m, l);
          });
          b = a.i.keys();
          e = /* @__PURE__ */ new Set();
          c = u(a.g);
          for (f = c.next(); !f.done; f = c.next()) f = a.h.get(f.value) || /* @__PURE__ */ new Map(), Kc(f, b, e);
          e.size > 0 && (d = (/* @__PURE__ */ new Map()).set("locales", Array.from(d)).set("missing", Array.from(e)), a.dispatchEvent(new T("missing-localizations", d)));
        }
        function Kc(a, b, c) {
          b = u(b);
          for (var d = b.next(); !d.done; d = b.next()) d = d.value, a.get(d) || c.add(d);
        }
        S("shaka.ui.Localization", Hc);
        Hc.prototype.getCurrentLocales = Hc.prototype.Lk;
        Hc.prototype.resolve = Hc.prototype.resolve;
        Hc.prototype.resolveDictionary = Hc.prototype.jm;
        Hc.prototype.insert = Hc.prototype.Xa;
        Hc.prototype.changeLocale = Hc.prototype.Li;
        Hc.prototype.release = Hc.prototype.release;
        var Jc = 1;
        Hc.ConflictResolution = { USE_OLD: 0, USE_NEW: Jc };
        Hc.UNKNOWN_LOCALES = "unknown-locales";
        Hc.UNKNOWN_LOCALIZATION = "unknown-localization";
        Hc.MISSING_LOCALIZATIONS = "missing-localizations";
        Hc.LOCALE_CHANGED = "locale-changed";
        Hc.LOCALE_UPDATED = "locale-updated";
        function Lc(a) {
          this.g = Math.exp(Math.log(0.5) / a);
          this.i = this.h = 0;
        }
        Lc.prototype.sample = function(a, b) {
          var c = Math.pow(this.g, a);
          b = b * (1 - c) + c * this.h;
          isNaN(b) || (this.h = b, this.i += a);
        };
        function Mc(a) {
          return a.h / (1 - Math.pow(a.g, a.i));
        }
        ;
        function Nc() {
          this.h = new Lc(2);
          this.j = new Lc(5);
          this.g = 0;
          this.i = 128e3;
          this.l = 16e3;
        }
        Nc.prototype.configure = function(a) {
          this.i = a.minTotalBytes;
          this.l = a.minBytes;
          this.h.g = Math.exp(Math.log(0.5) / a.fastHalfLife);
          this.j.g = Math.exp(Math.log(0.5) / a.slowHalfLife);
        };
        Nc.prototype.sample = function(a, b) {
          if (!(b < this.l)) {
            var c = 8e3 * b / a;
            a /= 1e3;
            this.g += b;
            this.h.sample(a, c);
            this.j.sample(a, c);
          }
        };
        Nc.prototype.getBandwidthEstimate = function(a) {
          return this.g < this.i ? a : Math.min(Mc(this.h), Mc(this.j));
        };
        function Pc(a, b) {
          return typeof a === "number" && typeof b === "number" && isNaN(a) && isNaN(b) ? true : a === b;
        }
        function Qc(a, b) {
          b = a.indexOf(b);
          b > -1 && a.splice(b, 1);
        }
        function Rc(a, b, c) {
          c || (c = Pc);
          if (a.length != b.length) return false;
          b = b.slice();
          a = u(a);
          for (var d = a.next(), e = {}; !d.done; e = { hj: void 0 }, d = a.next()) {
            e.hj = d.value;
            d = b.findIndex(/* @__PURE__ */ function(f) {
              return function(g) {
                return c(f.hj, g);
              };
            }(e));
            if (d == -1) return false;
            b[d] = b[b.length - 1];
            b.pop();
          }
          return b.length == 0;
        }
        function Sc(a, b, c) {
          if (a === b) return true;
          if (!a || !b) return a == b;
          c || (c = Pc);
          if (a.length != b.length) return false;
          for (var d = 0; d < a.length; d++) if (!c(a[d], b[d])) return false;
          return true;
        }
        ;
        function Tc() {
          this.g = new hb();
        }
        p = Tc.prototype;
        p.release = function() {
          this.Sa();
          this.g = null;
        };
        p.o = function(a, b, c, d) {
          this.g && (a = new Uc(a, b, c, d), this.g.push(b, a));
        };
        p.ua = function(a, b, c, d) {
          function e(g) {
            f.Ea(a, b, e);
            c(g);
          }
          var f = this;
          this.o(a, b, e, d);
        };
        p.Ea = function(a, b, c) {
          if (this.g) {
            var d = this.g.get(b) || [];
            d = u(d);
            for (var e = d.next(); !e.done; e = d.next()) e = e.value, e.target != a || c != e.listener && c || (e.Ea(), this.g.remove(b, e));
          }
        };
        p.Sa = function() {
          if (this.g) {
            for (var a = [], b = u(this.g.g.values()), c = b.next(); !c.done; c = b.next()) a.push.apply(a, x(c.value));
            a = u(a);
            for (b = a.next(); !b.done; b = a.next()) b.value.Ea();
            this.g.g.clear();
          }
        };
        S("shaka.util.EventManager", Tc);
        Tc.prototype.removeAll = Tc.prototype.Sa;
        Tc.prototype.unlisten = Tc.prototype.Ea;
        Tc.prototype.listenOnce = Tc.prototype.ua;
        Tc.prototype.listen = Tc.prototype.o;
        Tc.prototype.release = Tc.prototype.release;
        function Uc(a, b, c, d) {
          this.target = a;
          this.type = b;
          this.listener = c;
          this.g = Vc(a, d);
          this.target.addEventListener(b, c, this.g);
        }
        Uc.prototype.Ea = function() {
          this.target.removeEventListener(this.type, this.listener, this.g);
          this.listener = this.target = null;
          this.g = false;
        };
        function Vc(a, b) {
          if (b == void 0) return false;
          if (typeof b == "boolean") return b;
          var c = /* @__PURE__ */ new Set(["passive", "capture"]);
          Object.keys(b).filter(function(d) {
            return !c.has(d);
          });
          return Wc(a) ? b : b.capture || false;
        }
        function Wc(a) {
          var b = Xc;
          if (b == void 0) {
            b = false;
            try {
              var c = {}, d = { get: function() {
                b = true;
                return false;
              } };
              Object.defineProperty(c, "passive", d);
              Object.defineProperty(c, "capture", d);
              d = function() {
              };
              a.addEventListener("test", d, c);
              a.removeEventListener("test", d, c);
            } catch (e) {
              b = false;
            }
            Xc = b;
          }
          return b || false;
        }
        var Xc = void 0;
        S("shaka.config.AutoShowText", { NEVER: 0, ALWAYS: 1, IF_PREFERRED_TEXT_LANGUAGE: 2, IF_SUBTITLES_MAY_BE_NEEDED: 3 });
        function Yc(a, b) {
          this.g = a;
          this.h = b;
        }
        Yc.prototype.toString = function() {
          return "v" + this.g + "." + this.h;
        };
        function Zc(a, b) {
          var c = new Yc(5, 0), d = $c, e = d.g, f = c.h - e.h;
          ((c.g - e.g || f) > 0 ? d.i : d.h)(d.g, c, a, b);
        }
        function ad(a, b, c, d) {
          ab([c, "has been deprecated and will be removed in", b, ". We are currently at version", a, ". Additional information:", d].join(" "));
        }
        function bd(a, b, c, d) {
          $a([c, "has been deprecated and has been removed in", b, ". We are now at version", a, ". Additional information:", d].join(" "));
        }
        var $c = null;
        function cd(a, b, c, d) {
          this.g = null;
          this.l = a;
          this.i = b;
          this.m = c;
          this.u = d;
          this.j = false;
          a: {
            typeof libDPIModule === "undefined" && ab("Could not find LCEVC Library dependencies on this page");
            if (typeof LCEVCdec !== "undefined") this.h = LCEVCdec;
            else if (typeof LcevcDil !== "undefined") this.h = LcevcDil, this.j = true, Zc("LcevcDil", "lcevc_dil.js is deprecated, please use lcevc_dec.js instead");
            else {
              ab("Could not find LCEVC Library on this page");
              a = false;
              break a;
            }
            typeof this.h.SupportObject === "undefined" ? (ab("Could not find LCEVC Library on this page"), a = false) : (this.h.SupportObject.SupportStatus || ab(this.h.SupportObject.SupportError), a = typeof this.h !== "undefined" && typeof libDPIModule !== "undefined" && this.i instanceof HTMLCanvasElement && this.h.SupportObject.SupportStatus);
          }
          a && !this.g && this.h.SupportObject.webGLSupport(this.i) && (this.i.classList.remove("shaka-hidden"), this.g = this.j ? new this.h.LcevcDil(this.l, this.i, this.m) : new this.h.LCEVCdec(this.l, this.i, this.m));
        }
        function dd(a, b, c, d) {
          d.type !== "video" || a.u && !d.baseOriginalId || a.g && a.g.appendBuffer(b, "video", d.id, -c, !a.u);
        }
        function ed(a) {
          a.g && a.i.classList.add("shaka-hidden");
        }
        cd.prototype.release = function() {
          this.g && (this.g.close(), this.g = null);
        };
        function fd(a) {
          return a && typeof LCEVCdec !== "undefined" ? a.codecs == "lvc1" : false;
        }
        S("shaka.lcevc.Dec", cd);
        cd.prototype.release = cd.prototype.release;
        function gd(a) {
          if (hd.has(a)) return hd.get(a);
          var b = window2.ManagedMediaSource || window2.MediaSource;
          return b ? (b = b.isTypeSupported(a), hd.set(a, b), b) : false;
        }
        function id() {
          var a = window2.ManagedSourceBuffer || window2.SourceBuffer;
          return !!a && !!a.prototype && !!a.prototype.changeType;
        }
        function kd() {
          var a = window2.ManagedMediaSource || window2.MediaSource;
          return a && a.prototype ? !!a.prototype.setLiveSeekableRange && !!a.prototype.clearLiveSeekableRange : false;
        }
        var hd = /* @__PURE__ */ new Map();
        function ld() {
        }
        ld.prototype.extract = function() {
        };
        ld.prototype.decode = function() {
          return [];
        };
        ld.prototype.clear = function() {
        };
        ld.prototype.getStreams = function() {
          return [];
        };
        function md() {
        }
        md.prototype.init = function() {
        };
        md.prototype.parse = function() {
          return [];
        };
        function nd() {
        }
        p = nd.prototype;
        p.init = function() {
        };
        p.Uf = function() {
        };
        p.ce = function() {
        };
        p.remove = function() {
        };
        p.zg = function() {
        };
        S("shaka.media.IClosedCaptionParser", nd);
        function od(a) {
          this.h = /* @__PURE__ */ new Map();
          this.i = 0;
          this.j = new md();
          if (a = pd(a.toLowerCase())) this.j = a();
          this.g = new ld();
          if (a = qd) this.g = a(), this.h.set(this.i, this.g);
        }
        p = od.prototype;
        p.init = function(a, b, c) {
          b = b === void 0 ? false : b;
          c = c === void 0 ? -1 : c;
          if (c != -1 && this.i != c) {
            b = c;
            var d = this.h.get(b);
            this.h.set(this.i, this.g);
            if (d) this.g = d;
            else {
              if (d = qd) this.g = d();
              this.h.set(b, this.g);
            }
          } else b || this.ce();
          this.j.init(a);
          c != -1 && (this.i = c);
        };
        p.Uf = function(a) {
          a = this.j.parse(a);
          a = u(a);
          for (var b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            var c = Kb(b.packet);
            c.length > 0 && this.g.extract(c, b.pts);
          }
          return this.g.decode();
        };
        p.ce = function() {
          this.g.clear();
        };
        p.remove = function(a) {
          a = a === void 0 ? [] : a;
          a = new Set(a);
          for (var b = u(this.h.keys()), c = b.next(); !c.done; c = b.next()) if (c = c.value, !a.has(c)) {
            var d = this.h.get(c);
            d && d.clear();
            this.h.delete(c);
          }
        };
        p.zg = function() {
          return this.g.getStreams();
        };
        function rd(a, b) {
          sd.set(a, b);
        }
        function pd(a) {
          return sd.get(a);
        }
        S("shaka.media.ClosedCaptionParser", od);
        od.findDecoder = function() {
          return qd;
        };
        od.unregisterDecoder = function() {
          qd = null;
        };
        od.registerDecoder = function(a) {
          qd = a;
        };
        od.findParser = pd;
        od.unregisterParser = function(a) {
          sd.delete(a);
        };
        od.registerParser = rd;
        var sd = /* @__PURE__ */ new Map(), qd = null;
        function td() {
          this.id = "";
          this.regionAnchorY = this.regionAnchorX = this.viewportAnchorY = this.viewportAnchorX = 0;
          this.height = this.width = 100;
          this.viewportAnchorUnits = this.widthUnits = this.heightUnits = ud;
          this.scroll = vd;
        }
        S("shaka.text.CueRegion", td);
        var ud = 1;
        td.units = { PX: 0, PERCENTAGE: ud, LINES: 2 };
        var vd = "";
        td.scrollMode = { NONE: vd, UP: "up" };
        function wd(a) {
          this.h = a || "";
          this.g = 0;
        }
        function xd(a) {
          yd(a, /[ \t]+/gm);
        }
        function yd(a, b) {
          b.lastIndex = a.g;
          b = b.exec(a.h);
          b = b == null ? null : { position: b.index, length: b[0].length, results: b };
          if (a.g == a.h.length || b == null || b.position != a.g) return null;
          a.g += b.length;
          return b.results;
        }
        function zd(a) {
          return a.g == a.h.length ? null : (a = yd(a, /[^ \t\n]*/gm)) ? a[0] : null;
        }
        function Ad(a) {
          a = yd(a, Bd);
          if (a == null) return null;
          var b = Number(a[2]), c = Number(a[3]);
          return b > 59 || c > 59 ? null : (Number(a[6]) || 0) / 1e3 + c + b * 60 + (Number(a[1]) || 0) * 3600;
        }
        function Dd(a) {
          return a ? Ad(new wd(a)) : null;
        }
        var Bd = /(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;
        function Fd() {
        }
        function Gd(a) {
          function b(d) {
            switch (typeof d) {
              case "undefined":
              case "boolean":
              case "number":
              case "string":
              case "symbol":
              case "function":
                return d;
              default:
                if (!d || ArrayBuffer.isView(d)) return d;
                if (c.has(d)) return null;
                var e = Array.isArray(d);
                if (d.constructor != Object && !e) return null;
                c.add(d);
                var f = e ? [] : {}, g;
                for (g in d) f[g] = b(d[g]);
                e && (f.length = d.length);
                return f;
            }
          }
          var c = /* @__PURE__ */ new WeakSet();
          return b(a);
        }
        function Hd(a) {
          var b = {}, c;
          for (c in a) b[c] = a[c];
          return b;
        }
        function Id(a) {
          if (Array.isArray(a)) {
            for (var b = [], c = 0; c < a.length; c++) {
              var d = c.toString(), e = a[c];
              e !== void 0 && (e = Id(e)) && b.push(d + ":" + e);
            }
            a = "[" + b.join(",") + "]";
          } else if (typeof a == "function") a = "";
          else if (a instanceof Object) {
            c = Object.keys(a);
            c.sort();
            b = [];
            c = u(c);
            for (d = c.next(); !d.done; d = c.next()) e = d.value, d = JSON.stringify(e), e = a[e], e !== void 0 && (e = Id(e)) && b.push(d + ":" + e);
            a = "{" + b.join(",") + "}";
          } else a = JSON.stringify(a);
          return a;
        }
        S("shaka.util.ObjectUtils", Fd);
        Fd.alphabeticalKeyOrderStringify = Id;
        Fd.shallowCloneObject = Hd;
        Fd.cloneObject = Gd;
        function Jd(a, b) {
          var c = c === void 0 ? false : c;
          a = Zb(a);
          return Kd(a, b, c);
        }
        function Kd(a, b, c) {
          a = Ld(a, c === void 0 ? false : c);
          return !b && a.length ? a[0] : (a = a.find(function(d) {
            return b.split(",").includes(d.tagName);
          })) ? a : null;
        }
        function Md(a) {
          return Nd.has(a) ? Nd.get(a) : "";
        }
        function Ld(a, b) {
          function c(f, g) {
            g = g === void 0 ? false : g;
            for (var h = []; a[e]; ) if (a.charCodeAt(e) == 60) {
              if (a.charCodeAt(e + 1) === 47) {
                g = e + 2;
                e = a.indexOf(">", e);
                g = a.substring(g, e);
                var k2 = g.indexOf(f);
                if (k2 == -1) {
                  var l = f.indexOf(".");
                  l > 0 && (k2 = g.indexOf(f.substring(0, l)));
                }
                if (k2 == -1) throw f = a.substring(0, e).split("\n"), Error("Unexpected close tag\nLine: " + (f.length - 1) + "\nColumn: " + (f[f.length - 1].length + 1) + "\nChar: " + a[e]);
                e + 1 && (e += 1);
                break;
              } else if (a.charCodeAt(e + 1) === 33) {
                if (a.charCodeAt(e + 2) == 45) {
                  for (; e !== -1 && (a.charCodeAt(e) !== 62 || a.charCodeAt(e - 1) != 45 || a.charCodeAt(e - 2) != 45 || e == -1); ) e = a.indexOf(">", e + 1);
                  e === -1 && (e = a.length);
                } else if (a.charCodeAt(e + 2) === 91 && a.charCodeAt(e + 8) === 91 && a.substr(e + 3, 5).toLowerCase() === "cdata") {
                  k2 = a.indexOf("]]>", e);
                  k2 == -1 ? (h.push(a.substr(e + 9)), e = a.length) : (h.push(a.substring(e + 9, k2)), e = k2 + 3);
                  continue;
                }
                e++;
                continue;
              }
              a: {
                l = g;
                e++;
                var m = d(), n = {};
                for (k2 = []; a.charCodeAt(e) !== 62 && a[e]; ) {
                  var q = a.charCodeAt(e);
                  if (q > 64 && q < 91 || q > 96 && q < 123) {
                    q = d();
                    for (var r = a.charCodeAt(e); r && r !== 39 && r !== 34 && !(r > 64 && r < 91 || r > 96 && r < 123) && r !== 62; ) e++, r = a.charCodeAt(e);
                    var t = e + 1;
                    e = a.indexOf(a[e], t);
                    t = a.slice(t, e);
                    if (r === 39 || r === 34) {
                      if (e === -1) {
                        l = { tagName: m, attributes: n, children: k2, parent: null };
                        if (b) for (m = 0; m < k2.length; m++) typeof k2[m] !== "string" && (k2[m].parent = l);
                        k2 = l;
                        break a;
                      }
                    } else t = null, e--;
                    if (q.startsWith("xmlns:")) {
                      r = t;
                      var w = q.split(":")[1];
                      Nd.set(r, w);
                      Od.set(w, r);
                    }
                    m === "tt" && q === "xml:space" && t === "preserve" && (l = true);
                    n[q] = t;
                  }
                  e++;
                }
                a.charCodeAt(e - 1) !== 47 ? (e++, k2 = c(m, l)) : e++;
                l = { tagName: m, attributes: n, children: k2, parent: null };
                m = k2.length;
                for (n = 0; n < m; n++) q = k2[n], typeof q !== "string" ? b && (q.parent = l) : n == m - 1 && q == "\n" && k2.pop();
                k2 = l;
              }
              h.push(k2);
              if (typeof k2 === "string") break;
              k2.tagName[0] === "?" && k2.children && (h.push.apply(h, x(k2.children)), k2.children = []);
            } else k2 = e, e = a.indexOf("<", e) - 1, e === -2 && (e = a.length), k2 = a.slice(k2, e + 1), g ? k2.length > 0 && h.push(k2) : h.length && k2.length == 1 && k2[0] == "\n" ? h.push(k2) : k2.trim().length > 0 && h.push(k2), e++;
            return h;
          }
          function d() {
            for (var f = e; "\r\n	>/= ".indexOf(a[e]) === -1 && a[e]; ) e++;
            return a.slice(f, e);
          }
          var e = 0;
          return c("");
        }
        function Pd(a) {
          return typeof a === "string";
        }
        function Qd(a) {
          var b = [];
          if (!a.children) return [];
          a = u(a.children);
          for (var c = a.next(); !c.done; c = a.next()) c = c.value, typeof c !== "string" && b.push(c);
          return b;
        }
        function Rd(a, b) {
          var c = [];
          if (!a.children) return [];
          a = u(a.children);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, d.tagName === b && c.push(d);
          return c;
        }
        function Sd(a) {
          if (typeof a === "string") return cc(a);
          a = a.children.reduce(function(b, c) {
            return typeof c === "string" ? b + c : b;
          }, "");
          return a === "" ? null : cc(a);
        }
        function Td(a) {
          if (!Array.from(a.children).every(function(b) {
            return typeof b === "string";
          })) return null;
          (a = Sd(a)) && (a = a.trim());
          return a;
        }
        function Ud(a, b, c) {
          c = c === void 0 ? [] : c;
          a.tagName === b && c.push(a);
          if (a.children) {
            a = u(a.children);
            for (var d = a.next(); !d.done; d = a.next()) Ud(d.value, b, c);
          }
          return c;
        }
        function Vd(a, b) {
          a = Rd(a, b);
          return a.length != 1 ? null : a[0];
        }
        function Wd(a, b, c) {
          a = Xd(a, b, c);
          return a.length != 1 ? null : a[0];
        }
        function Zd(a, b, c, d) {
          d = d === void 0 ? null : d;
          var e = null;
          a = a.attributes[b];
          a != null && (e = c(a));
          return e == null ? d : e;
        }
        function $d(a, b, c) {
          b = Md(b);
          return a.attributes[b + ":" + c] || null;
        }
        function Xd(a, b, c) {
          var d = Md(b);
          b = [];
          if (a.children) for (c = d ? d + ":" + c : c, a = u(a.children), d = a.next(); !d.done; d = a.next()) (d = d.value) && d.tagName === c && b.push(d);
          return b;
        }
        function ae(a, b, c) {
          b = u(b);
          for (var d = b.next(); !d.done; d = b.next()) if (d = $d(a, d.value, c)) return d;
          return null;
        }
        function be(a) {
          if (!a) return null;
          /^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(a) && (a += "Z");
          a = Date.parse(a);
          return isNaN(a) ? null : a / 1e3;
        }
        function ce(a) {
          if (!a) return null;
          a = RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$", "i").exec(a);
          if (!a) return null;
          a = 31536e3 * Number(a[1] || null) + 2592e3 * Number(a[2] || null) + 86400 * Number(a[3] || null) + 3600 * Number(a[4] || null) + 60 * Number(a[5] || null) + Number(a[6] || null);
          return isFinite(a) ? a : null;
        }
        function de(a) {
          var b = /([0-9]+)-([0-9]+)/.exec(a);
          if (!b) return null;
          a = Number(b[1]);
          if (!isFinite(a)) return null;
          b = Number(b[2]);
          return isFinite(b) ? { start: a, end: b } : null;
        }
        function ee(a) {
          a = Number(a);
          return a % 1 === 0 ? a : null;
        }
        function fe(a) {
          a = Number(a);
          return a % 1 === 0 && a > 0 ? a : null;
        }
        function ge(a) {
          a = Number(a);
          return a % 1 === 0 && a >= 0 ? a : null;
        }
        function he(a) {
          a = Number(a);
          return isNaN(a) ? null : a;
        }
        function ie(a) {
          return a ? a.toLowerCase() === "true" : false;
        }
        function ke(a) {
          var b;
          var c = (b = a.match(/^(\d+)\/(\d+)$/)) ? Number(b[1]) / Number(b[2]) : Number(a);
          return isNaN(c) ? null : c;
        }
        function le(a) {
          var b = [];
          a = cc(a).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/);
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            var d = c.match(/^([\w]+)/);
            if (d) {
              var e = c.match(/(@id='(.*?)')/), f = c.match(/(@t='(\d+)')/), g = c.match(/(@n='(\d+)')/), h = c.match(/\[(\d+)\]/);
              b.push({ name: d[0], id: e ? e[0].match(/'(.*?)'/)[0].replace(/'/gm, "") : null, t: f ? Number(f[0].match(/'(.*?)'/)[0].replace(/'/gm, "")) : null, n: g ? Number(g[0].match(/'(.*?)'/)[0].replace(/'/gm, "")) : null, position: h ? Number(h[1]) - 1 : null, Mc: c.split("/@")[1] || null });
            } else c.startsWith("@") && b.length && (b[b.length - 1].Mc = c.slice(1));
          }
          return b;
        }
        function me(a, b) {
          var c = le(b.attributes.sel || "");
          if (c.length) {
            var d = c[c.length - 1], e = b.attributes.pos || null;
            c = d.position;
            c == null && (d.t !== null && (c = ne(a, "t", d.t)), d.n !== null && (c = ne(a, "n", d.n)));
            c === null ? c = e === "prepend" ? 0 : a.length : e === "prepend" ? --c : e === "after" && ++c;
            e = b.tagName;
            (d = d.Mc) && a[c] ? oe(a[c], e, d, Td(b) || "") : (e !== "remove" && e !== "replace" || a.splice(c, 1), e !== "add" && e !== "replace" || a.splice.apply(a, [c, 0].concat(x(b.children))));
          }
        }
        function ne(a, b, c) {
          var d = 0;
          a = u(a);
          for (var e = a.next(); !e.done; e = a.next()) {
            if (Number(e.value.attributes[b]) === c) return d;
            d++;
          }
          return null;
        }
        function oe(a, b, c, d) {
          if (b === "remove") delete a.attributes[c];
          else if (b === "add" || b === "replace") a.attributes[c] = d;
        }
        function pe(a) {
          var b = "", c = a.tagName.split(":");
          c.length > 0 && (b = c[0], b = Od.has(b) ? Od.get(b) : "");
          b = document.createElementNS(b, a.tagName);
          for (var d in a.attributes) b.setAttribute(d, a.attributes[d]);
          a = u(a.children);
          for (d = a.next(); !d.done; d = a.next()) d = d.value, c = void 0, typeof d == "string" ? c = new Text(d) : c = pe(d), b.appendChild(c);
          return b;
        }
        function qe(a) {
          if (!a) return null;
          var b = { tagName: a.tagName, attributes: Hd(a.attributes), children: [], parent: null };
          a = u(a.children);
          for (var c = a.next(); !c.done; c = a.next()) c = c.value, typeof c === "string" ? b.children.push(c) : (c = qe(c), c.parent = b, b.children.push(c));
          return b;
        }
        var Nd = /* @__PURE__ */ new Map(), Od = /* @__PURE__ */ new Map();
        function re(a, b, c) {
          this.startTime = a;
          this.endTime = b;
          this.payload = c;
          this.region = new td();
          this.position = null;
          this.positionAlign = se;
          this.size = 0;
          this.textAlign = te;
          this.direction = ue;
          this.writingMode = ve;
          this.lineInterpretation = we;
          this.line = null;
          this.lineHeight = "";
          this.lineAlign = xe;
          this.displayAlign = ye;
          this.fontSize = this.border = this.backgroundImage = this.backgroundColor = this.color = "";
          this.fontWeight = ze;
          this.fontStyle = Ae;
          this.linePadding = this.letterSpacing = this.fontFamily = "";
          this.opacity = 1;
          this.textCombineUpright = "";
          this.textDecoration = [];
          this.textStrokeWidth = this.textStrokeColor = this.textShadow = "";
          this.wrapLine = true;
          this.id = "";
          this.nestedCues = [];
          this.lineBreak = this.isContainer = false;
          this.rubyTag = null;
          this.cellResolution = { columns: 32, rows: 15 };
        }
        function Be(a, b) {
          a = new re(a, b, "");
          a.lineBreak = true;
          return a;
        }
        re.prototype.clone = function() {
          var a = new re(0, 0, ""), b;
          for (b in this) a[b] = this[b], Array.isArray(a[b]) && (a[b] = a[b].slice());
          return a;
        };
        function Ce(a, b) {
          if (a.payload != b.payload || !(Math.abs(a.startTime - b.startTime) < 1e-3 && Math.abs(a.endTime - b.endTime) < 1e-3)) return false;
          for (var c in a) if (c != "startTime" && c != "endTime" && c != "payload") {
            if (c == "nestedCues") {
              if (!Sc(a.nestedCues, b.nestedCues, Ce)) return false;
            } else if (c == "region" || c == "cellResolution") for (var d in a[c]) {
              if (a[c][d] != b[c][d]) return false;
            }
            else if (Array.isArray(a[c])) {
              if (!Sc(a[c], b[c])) return false;
            } else if (a[c] != b[c]) return false;
          }
          return true;
        }
        function De(a, b) {
          b = b === void 0 ? /* @__PURE__ */ new Map() : b;
          var c = a.payload;
          if (c.includes("<")) {
            b.size === 0 && Ee(b);
            var d = c;
            c = [];
            for (var e = -1, f = 0; f < d.length; f++) d[f] === "<" ? e = f + 1 : d[f] === ">" && e > 0 && (e = d.substr(e, f - e), e.match(Fe) && c.push(e), e = -1);
            c = u(c);
            for (f = c.next(); !f.done; f = c.next()) f = f.value, d = d.replace("<" + f + ">", '<div time="' + f + '">'), d += "</div>";
            a: {
              f = d;
              e = [];
              var g = -1;
              c = "";
              d = false;
              for (var h = 0; h < f.length; h++) if (f[h] === "/") {
                var k2 = f.indexOf(">", h);
                if (k2 === -1) {
                  c = f;
                  break a;
                }
                if ((k2 = f.substring(h + 1, k2)) && k2 == "v") {
                  d = true;
                  var l = null;
                  e.length && (l = e[e.length - 1]);
                  if (l) {
                    if (l === k2) c += "/" + k2 + ">";
                    else {
                      if (!l.startsWith("v")) {
                        c += f[h];
                        continue;
                      }
                      c += "/" + l + ">";
                    }
                    h += k2.length + 1;
                  } else c += f[h];
                } else c += f[h];
              } else f[h] === "<" ? (g = h + 1, f[g] != "v" && (g = -1)) : f[h] === ">" && g > 0 && (e.push(f.substr(g, h - g)), g = -1), c += f[h];
              f = u(e);
              for (e = f.next(); !e.done; e = f.next()) e = e.value, g = e.replace(" ", ".voice-"), c = c.replace("<" + e + ">", "<" + g + ">"), c = c.replace("</" + e + ">", "</" + g + ">"), d || (c += "</" + g + ">");
            }
            c = Ge(c);
            a.payload = "";
            try {
              var m = Kd("<span>" + c + "</span>", "span");
            } catch (n) {
            }
            if (m) if (m = m.children, m.length != 1 || m[0].tagName) for (m = u(m), c = m.next(); !c.done; c = m.next()) He(c.value, a, b);
            else a.payload = cc(c);
            else a.payload = cc(c);
          } else a.payload = cc(c);
        }
        function Ee(a) {
          for (var b = u(Object.entries(Ie)), c = b.next(); !c.done; c = b.next()) {
            var d = u(c.value);
            c = d.next().value;
            d = d.next().value;
            var e = new re(0, 0, "");
            e.color = d;
            a.set("." + c, e);
          }
          b = u(Object.entries(Ke));
          for (c = b.next(); !c.done; c = b.next()) d = u(c.value), c = d.next().value, d = d.next().value, e = new re(0, 0, ""), e.backgroundColor = d, a.set("." + c, e);
        }
        function Ge(a) {
          var b = { "< ": "", " >": " &gt;" }, c = /(< +>|<\s|\s>)/g, d = RegExp(c.source);
          return a && d.test(a) ? a.replace(c, function(e) {
            return b[e] || "";
          }) : a || "";
        }
        function He(a, b, c) {
          var d = b.clone();
          d.nestedCues = [];
          d.payload = "";
          d.rubyTag = "";
          d.line = null;
          d.region = new td();
          d.position = null;
          d.size = 0;
          d.textAlign = te;
          if (a.tagName) for (var e = u(a.tagName.split(/(?=[ .])+/g)), f = e.next(); !f.done; f = e.next()) {
            var g = f = f.value;
            if (g.startsWith(".voice-")) {
              var h = g.split("-").pop();
              g = 'v[voice="' + h + '"]';
              c.has(g) || (g = "v[voice=" + h + "]");
            }
            c.has(g) && (h = d, g = c.get(g)) && (h.backgroundColor = Ne(g.backgroundColor, h.backgroundColor), h.color = Ne(g.color, h.color), h.fontFamily = Ne(g.fontFamily, h.fontFamily), h.fontSize = Ne(g.fontSize, h.fontSize), h.textShadow = Ne(g.textShadow, h.textShadow), h.fontWeight = g.fontWeight, h.fontStyle = g.fontStyle, h.opacity = g.opacity, h.rubyTag = g.rubyTag, h.textCombineUpright = g.textCombineUpright, h.wrapLine = g.wrapLine);
            switch (f) {
              case "br":
                d = Be(d.startTime, d.endTime);
                b.nestedCues.push(d);
                return;
              case "b":
                d.fontWeight = Oe;
                break;
              case "i":
                d.fontStyle = Pe;
                break;
              case "u":
                d.textDecoration.push(Qe);
                break;
              case "font":
                if (f = a.attributes.color) d.color = f;
                break;
              case "div":
                f = a.attributes.time;
                if (!f) break;
                if (f = Dd(f)) d.startTime = f;
                break;
              case "ruby":
              case "rp":
              case "rt":
                d.rubyTag = f;
            }
          }
          e = a.children;
          if (Pd(a) || e.length == 1 && Pd(e[0])) for (c = Sd(a).split("\n"), a = true, c = u(c), e = c.next(); !e.done; e = c.next()) e = e.value, a || (a = Be(d.startTime, d.endTime), b.nestedCues.push(a)), e.length > 0 && (a = d.clone(), a.payload = cc(e), b.nestedCues.push(a)), a = false;
          else for (b.nestedCues.push(d), b = u(e), a = b.next(); !a.done; a = b.next()) He(a.value, d, c);
        }
        function Ne(a, b) {
          return a && a.length > 0 ? a : b;
        }
        S("shaka.text.Cue", re);
        re.parseCuePayload = De;
        re.equal = Ce;
        re.prototype.clone = re.prototype.clone;
        var se = "auto";
        re.positionAlign = { LEFT: "line-left", RIGHT: "line-right", CENTER: "center", AUTO: se };
        var te = "center", Re = { LEFT: "left", RIGHT: "right", CENTER: te, START: "start", END: "end" };
        re.textAlign = Re;
        var ye = "after", Se = { BEFORE: "before", CENTER: "center", AFTER: ye };
        re.displayAlign = Se;
        var ue = "ltr";
        re.direction = { HORIZONTAL_LEFT_TO_RIGHT: ue, HORIZONTAL_RIGHT_TO_LEFT: "rtl" };
        var ve = "horizontal-tb";
        re.writingMode = { HORIZONTAL_TOP_TO_BOTTOM: ve, VERTICAL_LEFT_TO_RIGHT: "vertical-lr", VERTICAL_RIGHT_TO_LEFT: "vertical-rl" };
        var we = 0;
        re.lineInterpretation = { LINE_NUMBER: we, PERCENTAGE: 1 };
        var xe = "start", Te = { CENTER: "center", START: xe, END: "end" };
        re.lineAlign = Te;
        var Ie = { white: "white", lime: "lime", cyan: "cyan", red: "red", yellow: "yellow", magenta: "magenta", blue: "blue", black: "black" };
        re.defaultTextColor = Ie;
        var Ke = { bg_white: "white", bg_lime: "lime", bg_cyan: "cyan", bg_red: "red", bg_yellow: "yellow", bg_magenta: "magenta", bg_blue: "blue", bg_black: "black" };
        re.defaultTextBackgroundColor = Ke;
        var ze = 400, Oe = 700;
        re.fontWeight = { NORMAL: ze, BOLD: Oe };
        var Ae = "normal", Pe = "italic", Ue = { NORMAL: Ae, ITALIC: Pe, OBLIQUE: "oblique" };
        re.fontStyle = Ue;
        var Qe = "underline";
        re.textDecoration = { UNDERLINE: Qe, LINE_THROUGH: "lineThrough", OVERLINE: "overline" };
        var Fe = /(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;
        function Ve() {
        }
        Ve.prototype.destroy = function() {
        };
        function We(a, b, c) {
          Xe.set(a.toLowerCase().split(";")[0] + "-" + c, { priority: c, Vf: b });
        }
        function Ye(a, b) {
          for (var c = a.toLowerCase().split(";")[0], d = u([Ze, $e, af, bf]), e = d.next(); !e.done; e = d.next()) if (e = Xe.get(c + "-" + e.value)) {
            var f = e.Vf(), g = f.isSupported(a, b);
            f.destroy();
            if (g) return e.Vf;
          }
          return null;
        }
        S("shaka.transmuxer.TransmuxerEngine", Ve);
        Ve.findTransmuxer = Ye;
        Ve.unregisterTransmuxer = function(a, b) {
          Xe.delete(a.toLowerCase().split(";")[0] + "-" + b);
        };
        Ve.registerTransmuxer = We;
        Ve.prototype.destroy = Ve.prototype.destroy;
        var Xe = /* @__PURE__ */ new Map(), bf = 1, af = 2, $e = 3, Ze = 4;
        Ve.PluginPriority = { FALLBACK: bf, PREFERRED_SECONDARY: af, PREFERRED: $e, APPLICATION: Ze };
        function cf() {
        }
        function df(a, b) {
          var c = a;
          b && !ef.includes(a) && (c += '; codecs="' + b + '"');
          return c;
        }
        function ff(a, b) {
          b && (a += '; codecs="' + b + '"');
          return a;
        }
        function gf(a, b, c) {
          var d = df(a, b);
          b = ff(a, b);
          Ye(b) ? (a = Ye(b)) ? (a = a(), c = a.convertCodecs(c, b), a.destroy()) : c = b : c = a != "video/mp2t" && c == "audio" ? d.replace("video", "audio") : d;
          return c;
        }
        function hf(a) {
          return a.split(";")[0].split("/")[1];
        }
        function jf(a) {
          var b = kf(a);
          a = b[0].toLowerCase();
          b = b[1].toLowerCase();
          switch (true) {
            case (a === "mp4a" && b === "69"):
            case (a === "mp4a" && b === "6b"):
            case (a === "mp4a" && b === "40.34"):
              return "mp3";
            case (a === "mp4a" && b === "66"):
            case (a === "mp4a" && b === "67"):
            case (a === "mp4a" && b === "68"):
            case (a === "mp4a" && b === "40.2"):
            case (a === "mp4a" && b === "40.02"):
            case (a === "mp4a" && b === "40.5"):
            case (a === "mp4a" && b === "40.05"):
            case (a === "mp4a" && b === "40.29"):
            case (a === "mp4a" && b === "40.42"):
              return "aac";
            case (a === "mp4a" && b === "a5"):
            case a === "ac3":
            case a === "ac-3":
              return "ac-3";
            case (a === "mp4a" && b === "a6"):
            case a === "eac3":
            case a === "ec-3":
              return "ec-3";
            case a === "ac-4":
              return "ac-4";
            case (a === "mp4a" && b === "b2"):
              return "dtsx";
            case (a === "mp4a" && b === "a9"):
              return "dtsc";
            case a === "vp09":
            case a === "vp9":
              return "vp9";
            case a === "avc1":
            case a === "avc3":
              return "avc";
            case a === "hvc1":
            case a === "hev1":
              return "hevc";
            case a === "vvc1":
            case a === "vvi1":
              return "vvc";
            case a === "dvh1":
            case a === "dvhe":
              return b && b.startsWith("05") ? "dovi-p5" : "dovi-hevc";
            case a === "dvav":
            case a === "dva1":
              return "dovi-avc";
            case a === "dav1":
              return "dovi-av1";
            case a === "dvc1":
            case a === "dvi1":
              return "dovi-vvc";
          }
          return a;
        }
        function lf(a) {
          var b = [];
          a = u(a.split(","));
          for (var c = a.next(); !c.done; c = a.next()) c = kf(c.value), b.push(c[0]);
          return b.sort().join(",");
        }
        function mf(a) {
          return a.split(";")[0];
        }
        function nf(a) {
          a = a.split(/ *; */);
          a.shift();
          return (a = a.find(function(b) {
            return b.startsWith("codecs=");
          })) ? a.split("=")[1].replace(/^"|"$/g, "") : "";
        }
        function of(a) {
          return a === "application/x-mpegurl" || a === "application/vnd.apple.mpegurl";
        }
        function kf(a) {
          a = a.split(".");
          var b = a[0];
          a.shift();
          return [b, a.join(".")];
        }
        S("shaka.util.MimeUtils", cf);
        cf.getFullTypeWithAllCodecs = ff;
        cf.getFullType = df;
        (/* @__PURE__ */ new Map()).set("codecs", "codecs").set("frameRate", "framerate").set("bandwidth", "bitrate").set("width", "width").set("height", "height").set("channelsCount", "channels");
        var ef = ["audio/aac", "audio/ac3", "audio/ec3", "audio/mpeg"];
        function pf(a) {
          this.i = null;
          this.j = a;
          this.D = false;
          this.l = this.A = 0;
          this.m = Infinity;
          this.h = this.g = null;
          this.F = "";
          this.C = function() {
          };
          this.u = /* @__PURE__ */ new Map();
        }
        function qf(a, b) {
          rf.set(a, b);
        }
        function sf(a) {
          return rf.get(a);
        }
        function tf(a) {
          return rf.has(a) ? true : a == "application/cea-608" || a == "application/cea-708" ? !!qd : false;
        }
        pf.prototype.destroy = function() {
          this.j = this.i = null;
          this.u.clear();
          return Promise.resolve();
        };
        function uf(a, b, c, d, e) {
          var f, g, h, k2, l, m, n;
          return Q(function(q) {
            if (q.g == 1) return F(q, Promise.resolve(), 2);
            if (!a.i || !a.j) return q.return();
            if (c == null || d == null) return a.i.parseInit(Kb(b)), q.return();
            f = a.D ? c : a.A;
            g = { periodStart: a.A, segmentStart: c, segmentEnd: d, vttOffset: f };
            h = a.i.parseMedia(Kb(b), g, e, []);
            k2 = u(h);
            for (l = k2.next(); !l.done; l = k2.next()) m = l.value, a.C(m, e || null, g);
            n = h.filter(function(r) {
              return r.startTime >= a.l && r.startTime < a.m;
            });
            a.j.append(n);
            a.g == null && (a.g = Math.max(c, a.l));
            a.h = Math.min(d, a.m);
            H(q);
          });
        }
        pf.prototype.remove = function(a, b) {
          var c = this;
          return Q(function(d) {
            if (d.g == 1) return F(d, Promise.resolve(), 2);
            !c.j || !c.j.remove(a, b) || c.g == null || b <= c.g || a >= c.h || (a <= c.g && b >= c.h ? c.g = c.h = null : a <= c.g && b < c.h ? c.g = b : a > c.g && b >= c.h && (c.h = a));
            H(d);
          });
        };
        function vf(a, b, c) {
          a.l = b;
          a.m = c;
        }
        function wf(a, b, c) {
          a.F = b;
          if (b = a.u.get(b)) for (var d = u(b.keys()), e = d.next(); !e.done; e = d.next()) (e = b.get(e.value).filter(function(f) {
            return f.endTime <= c;
          })) && a.j.append(e);
        }
        function yf(a, b, c) {
          b.startTime += c;
          b.endTime += c;
          b = u(b.nestedCues);
          for (var d = b.next(); !d.done; d = b.next()) yf(a, d.value, c);
        }
        function zf(a, b, c, d, e) {
          var f = c + " " + d, g = /* @__PURE__ */ new Map();
          b = u(b);
          for (var h = b.next(); !h.done; h = b.next()) {
            var k2 = h.value;
            h = k2.stream;
            k2 = k2.cue;
            g.has(h) || g.set(h, /* @__PURE__ */ new Map());
            g.get(h).has(f) || g.get(h).set(f, []);
            yf(a, k2, e);
            k2.startTime >= a.l && k2.startTime < a.m && (g.get(h).get(f).push(k2), h == a.F && a.j.append([k2]));
          }
          e = u(g.keys());
          for (f = e.next(); !f.done; f = e.next()) for (f = f.value, a.u.has(f) || a.u.set(f, /* @__PURE__ */ new Map()), b = u(g.get(f).keys()), h = b.next(); !h.done; h = b.next()) h = h.value, k2 = g.get(f).get(h), a.u.get(f).set(h, k2);
          a.g = a.g == null ? Math.max(
            c,
            a.l
          ) : Math.min(a.g, Math.max(c, a.l));
          a.h = Math.max(a.h, Math.min(d, a.m));
        }
        S("shaka.text.TextEngine", pf);
        pf.prototype.destroy = pf.prototype.destroy;
        pf.findParser = sf;
        pf.unregisterParser = function(a) {
          rf.delete(a);
        };
        pf.registerParser = qf;
        var rf = /* @__PURE__ */ new Map();
        function Af(a) {
          this.h = a;
          this.g = null;
        }
        Af.prototype.$ = function(a) {
          var b = this;
          this.stop();
          var c = true, d = null;
          this.g = function() {
            window2.clearTimeout(d);
            c = false;
          };
          d = window2.setTimeout(function() {
            c && b.h();
          }, a * 1e3);
          return this;
        };
        Af.prototype.stop = function() {
          this.g && (this.g(), this.g = null);
        };
        function Bf(a) {
          this.h = a;
          this.g = null;
        }
        Bf.prototype.La = function() {
          this.stop();
          this.h();
          return this;
        };
        Bf.prototype.$ = function(a) {
          var b = this;
          this.stop();
          this.g = new Af(function() {
            b.h();
          }).$(a);
          return this;
        };
        Bf.prototype.wa = function(a) {
          var b = this;
          this.stop();
          this.g = new Af(function() {
            b.g.$(a);
            b.h();
          }).$(a);
          return this;
        };
        Bf.prototype.stop = function() {
          this.g && (this.g.stop(), this.g = null);
        };
        S("shaka.util.Timer", Bf);
        Bf.prototype.stop = Bf.prototype.stop;
        Bf.prototype.tickEvery = Bf.prototype.wa;
        Bf.prototype.tickAfter = Bf.prototype.$;
        Bf.prototype.tickNow = Bf.prototype.La;
        function Cf(a, b) {
          return a.concat(b);
        }
        function Df() {
        }
        function Ef(a) {
          return a != null;
        }
        function Ff(a, b) {
          return Promise.race([b, new Promise(function(c, d) {
            new Bf(d).$(a);
          })]);
        }
        ;
        function Gf() {
        }
        function Hf(a, b, c, d, e) {
          function f(z) {
            var y = String(z.width || "") + String(z.height || "") + String(Math.round(z.frameRate || 0)) + (z.hdr || "") + z.fastSwitching;
            z.dependencyStream && (y += z.dependencyStream.baseOriginalId || "");
            z.roles && (y += z.roles.sort().join("_"));
            return y;
          }
          function g(z) {
            var y = z.language + (z.channelsCount || 0) + (z.audioSamplingRate || 0) + z.roles.join(",") + z.label + z.groupId + z.fastSwitching;
            z.dependencyStream && (y += z.dependencyStream.baseOriginalId || "");
            return y;
          }
          if (e.length) {
            var h = a.textStreams;
            e = u(e);
            for (var k2 = e.next(), l = {}; !k2.done; l = { si: void 0 }, k2 = e.next()) if (l.si = k2.value, k2 = h.filter(/* @__PURE__ */ function(z) {
              return function(y) {
                return y.codecs.startsWith(z.si) || y.mimeType.startsWith(z.si) ? true : false;
              };
            }(l)), k2.length) {
              h = k2;
              break;
            }
            a.textStreams = h;
          }
          h = a.variants;
          if (b.length || c.length) h = If(h, b, c);
          if (d.length) {
            b = new hb();
            c = u(h);
            for (h = c.next(); !h.done; h = c.next()) h = h.value, b.push(String(h.video.width || 0), h);
            var m = [];
            b.forEach(function(z, y) {
              z = 0;
              var A = [];
              y = u(y);
              for (var C = y.next(), E = {}; !C.done; E = { xg: void 0 }, C = y.next()) E.xg = C.value, C = d.filter(/* @__PURE__ */ function(D) {
                return function(B) {
                  return D.xg.decodingInfos[0][B];
                };
              }(E)).length, C > z ? (z = C, A = [E.xg]) : C == z && A.push(E.xg);
              m.push.apply(m, x(A));
            });
            h = m;
          }
          c = /* @__PURE__ */ new Set();
          b = /* @__PURE__ */ new Set();
          h = u(h);
          for (e = h.next(); !e.done; e = h.next()) e = e.value, e.audio && c.add(e.audio), e.video && b.add(e.video);
          h = Array.from(c).sort(function(z, y) {
            return z.bandwidth - y.bandwidth;
          });
          var n = [];
          c = /* @__PURE__ */ new Map();
          h = u(h);
          for (e = h.next(); !e.done; e = h.next()) {
            e = e.value;
            k2 = g(e);
            l = c.get(k2) || [];
            if (l.length) {
              var q = l[l.length - 1], r = jf(q.codecs), t = jf(e.codecs);
              r != t || e.bandwidth && q.bandwidth && !(e.bandwidth > q.bandwidth) || (l.push(e), n.push(e.id));
            } else l.push(e), n.push(e.id);
            c.set(k2, l);
          }
          var w = { vp8: 1, avc: 1, "dovi-avc": 0.95, vp9: 0.9, vp09: 0.9, hevc: 0.85, "dovi-hevc": 0.8, "dovi-p5": 0.75, av01: 0.7, "dovi-av1": 0.65, vvc: 0.6 };
          h = Array.from(b).sort(function(z, y) {
            if (!z.bandwidth || !y.bandwidth || z.bandwidth == y.bandwidth) {
              if (z.codecs && y.codecs && z.codecs != y.codecs && z.width == y.width) {
                var A = jf(z.codecs), C = jf(y.codecs);
                if (A != C) return (w[A] || 1) - (w[C] || 1);
              }
              return z.width - y.width;
            }
            return z.bandwidth - y.bandwidth;
          });
          b = id();
          var v = [];
          c = /* @__PURE__ */ new Map();
          h = u(h);
          for (e = h.next(); !e.done; e = h.next()) {
            e = e.value;
            k2 = f(e);
            l = c.get(k2) || [];
            if (l.length) {
              q = l[l.length - 1];
              if (!b && (r = jf(q.codecs), t = jf(e.codecs), r !== t)) continue;
              r = jf(q.codecs);
              t = jf(e.codecs);
              r != t || e.bandwidth && q.bandwidth && !(e.bandwidth > q.bandwidth) || (l.push(e), v.push(e.id));
            } else l.push(e), v.push(e.id);
            c.set(k2, l);
          }
          a.variants = a.variants.filter(function(z) {
            var y = z.audio;
            z = z.video;
            return y && !n.includes(y.id) || z && !v.includes(z.id) ? false : true;
          });
        }
        function If(a, b, c) {
          b = u(b);
          for (var d = b.next(), e = {}; !d.done; e = { videoCodec: void 0 }, d = b.next()) if (e.videoCodec = d.value, d = a.filter(/* @__PURE__ */ function(f) {
            return function(g) {
              return g.video && g.video.codecs.startsWith(f.videoCodec);
            };
          }(e)), d.length) {
            a = d;
            break;
          }
          c = u(c);
          b = c.next();
          for (d = {}; !b.done; d = { audioCodec: void 0 }, b = c.next()) if (d.audioCodec = b.value, b = a.filter(/* @__PURE__ */ function(f) {
            return function(g) {
              return g.audio && g.audio.codecs.startsWith(f.audioCodec);
            };
          }(d)), b.length) {
            a = b;
            break;
          }
          return a;
        }
        function Jf(a, b, c) {
          a.variants = a.variants.filter(function(d) {
            return Kf(d, b, c);
          });
        }
        function Kf(a, b, c) {
          function d(h, k2, l) {
            return h >= k2 && h <= l;
          }
          var e = a.video;
          if (e && e.width && e.height) {
            var f = e.width, g = e.height;
            g > f && (g = u([g, f]), f = g.next().value, g = g.next().value);
            if (!d(f, b.minWidth, Math.min(b.maxWidth, c.width)) || !d(g, b.minHeight, Math.min(b.maxHeight, c.height)) || !d(e.width * e.height, b.minPixels, b.maxPixels)) return false;
          }
          return a && a.video && a.video.frameRate && !d(a.video.frameRate, b.minFrameRate, b.maxFrameRate) || a && a.audio && a.audio.channelsCount && !d(a.audio.channelsCount, b.minChannelsCount, b.maxChannelsCount) || !d(a.bandwidth, b.minBandwidth, b.maxBandwidth) ? false : true;
        }
        function Lf(a, b, c, d) {
          c = c === void 0 ? [] : c;
          d = d === void 0 ? {} : d;
          return Q(function(e) {
            if (e.g == 1) return F(e, Mf(a, b, b.offlineSessionIds.length > 0, c, d), 2);
            Nf(b);
            return F(e, Of(b), 0);
          });
        }
        function Mf(a, b, c, d, e) {
          var f, g;
          return Q(function(h) {
            if (h.g == 1) return Rb().Qj() && Pf(b.variants), F(h, Qf(b.variants, c, false, d), 2);
            f = null;
            a && (g = a.g) && (f = g.keySystem);
            b.variants = b.variants.filter(function(k2) {
              var l = Rf(k2, f, e);
              if (!l) {
                var m = [];
                k2.audio && m.push(Sf(k2.audio));
                k2.video && m.push(Sf(k2.video));
              }
              return l;
            });
            H(h);
          });
        }
        function Pf(a) {
          var b = (/* @__PURE__ */ new Map()).set("dvav", "avc3").set("dva1", "avc1").set("dvhe", "hev1").set("dvh1", "hvc1").set("dvc1", "vvc1").set("dvi1", "vvi1"), c = /* @__PURE__ */ new Set();
          a = u(a);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, d.video && c.add(d.video);
          c = u(c);
          for (a = c.next(); !a.done; a = c.next()) {
            a = a.value;
            d = u(b);
            for (var e = d.next(); !e.done; e = d.next()) {
              var f = u(e.value);
              e = f.next().value;
              f = f.next().value;
              if (a.codecs.includes(e)) {
                a.codecs = a.codecs.replace(e, f);
                break;
              }
            }
          }
        }
        function Rf(a, b, c) {
          if (!a.decodingInfos.some(function(k2) {
            return !k2.supported || b && (k2 = k2.keySystemAccess) && (c[k2.keySystem] || k2.keySystem) != b ? false : true;
          })) return false;
          var d = Rb(), e = d.Ub() === "Xbox";
          d = d.Ka() === "MOBILE" && d.Ja() === "GECKO";
          var f = a.video, g = f && f.width || 0, h = f && f.height || 0;
          if (e && f && (g > 1920 || h > 1080) && (f.codecs.includes("avc1.") || f.codecs.includes("avc3.")) || (e = f && f.dependencyStream) && !fd(e)) return false;
          a = a.audio;
          return d && a && a.encrypted && a.codecs.toLowerCase().includes("opus") || a && a.dependencyStream ? false : true;
        }
        function Tf(a, b) {
          var c, d, e, f, g, h, k2;
          return Q(function(l) {
            if (l.g == 1) {
              c = function(m, n) {
                if (m) {
                  var q = Hd(m);
                  q.supported = m.supported && n.supported;
                  q.powerEfficient = m.powerEfficient && n.powerEfficient;
                  q.smooth = m.smooth && n.smooth;
                  n.keySystemAccess && !q.keySystemAccess && (q.keySystemAccess = n.keySystemAccess);
                  return q;
                }
                return n;
              };
              d = null;
              e = [];
              f = u(b);
              g = f.next();
              for (h = {}; !g.done; h = { cache: void 0, jf: void 0 }, g = f.next()) k2 = g.value, h.jf = Id(k2), h.cache = Uf, h.cache.has(h.jf) ? d = c(d, h.cache.get(h.jf)) : e.push(Vf(k2).then(/* @__PURE__ */ function(m) {
                return function(n) {
                  var q = null;
                  n = u(n || []);
                  for (var r = n.next(); !r.done; r = n.next()) q = c(q, r.value);
                  q && (m.cache.set(m.jf, q), d = c(d, q));
                };
              }(h)));
              return F(l, Promise.all(e), 2);
            }
            d && a.decodingInfos.push(d);
            H(l);
          });
        }
        function Vf(a) {
          var b = [""];
          a.video && (b = nf(a.video.contentType).split(","));
          var c = [""];
          a.audio && (c = nf(a.audio.contentType).split(","));
          var d = [];
          b = u(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            for (var f = u(c), g = f.next(), h = {}; !g.done; h = { ed: void 0 }, g = f.next()) g = g.value, h.ed = Gd(a), a.video && (h.ed.video.contentType = df(mf(h.ed.video.contentType), e)), a.audio && (h.ed.audio.contentType = df(mf(h.ed.audio.contentType), g)), d.push(new Promise(/* @__PURE__ */ function(k2) {
              return function(l, m) {
                (Rb().Ka() == "MOBILE" ? Ff(5, navigator.mediaCapabilities.decodingInfo(k2.ed)) : navigator.mediaCapabilities.decodingInfo(k2.ed)).then(function(n) {
                  l(n);
                }).catch(m);
              };
            }(h)));
          }
          return Promise.all(d).catch(function() {
            JSON.stringify(a);
            return null;
          });
        }
        function Qf(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D;
          return Q(function(B) {
            switch (B.g) {
              case 1:
                if (e = a.some(function(G) {
                  return G.decodingInfos.length;
                })) return B.return();
                f = u(d);
                g = f.next();
                h = {};
              case 2:
                if (g.done) {
                  B.B(4);
                  break;
                }
                h.vj = g.value;
                k2 = false;
                l = u(a);
                m = l.next();
              case 5:
                if (m.done) {
                  B.B(7);
                  break;
                }
                n = m.value;
                q = Wf(n, b, c).filter(/* @__PURE__ */ function(G) {
                  return function(I) {
                    I = I[0];
                    return (I.keySystemConfiguration && I.keySystemConfiguration.keySystem) === G.vj;
                  };
                }(h));
                r = u(q);
                t = r.next();
              case 8:
                if (t.done) {
                  B.B(10);
                  break;
                }
                w = t.value;
                return F(B, Tf(n, w), 9);
              case 9:
                t = r.next();
                B.B(8);
                break;
              case 10:
                n.decodingInfos.some(function(G) {
                  return G.supported;
                }) && (k2 = true);
                m = l.next();
                B.B(5);
                break;
              case 7:
                if (k2) return B.return();
                h = { vj: void 0 };
                g = f.next();
                B.B(2);
                break;
              case 4:
                v = u(a), z = v.next();
              case 12:
                if (z.done) {
                  B.B(0);
                  break;
                }
                y = z.value;
                A = Wf(y, b, c).filter(function(G) {
                  G = G[0];
                  G = G.keySystemConfiguration && G.keySystemConfiguration.keySystem;
                  return !G || !d.includes(G);
                });
                C = u(A);
                E = C.next();
              case 15:
                if (E.done) {
                  z = v.next();
                  B.B(12);
                  break;
                }
                D = E.value;
                return F(
                  B,
                  Tf(y, D),
                  16
                );
              case 16:
                E = C.next(), B.B(15);
            }
          });
        }
        function Wf(a, b, c) {
          var d = a.audio, e = a.video, f = [], g = [];
          if (e) for (var h = u(e.fullMimeTypes), k2 = h.next(); !k2.done; k2 = h.next()) {
            k2 = k2.value;
            var l = nf(k2);
            if (l.includes(",") && !d) {
              var m = l.split(","), n = mf(k2);
              l = pc("video", m);
              m = pc("audio", m);
              m = Xf(m, n);
              n = gf(n, m, "audio");
              g.push({ contentType: n, channels: 2, bitrate: a.bandwidth || 1, samplerate: 1, spatialRendering: false });
            }
            l = Yf(l);
            k2 = { contentType: gf(mf(k2), l, "video"), width: e.width || 64, height: e.height || 64, bitrate: e.bandwidth || a.bandwidth || 1, framerate: e.frameRate || 30 };
            if (e.hdr) switch (e.hdr) {
              case "PQ":
                k2.transferFunction = "pq";
                break;
              case "HLG":
                k2.transferFunction = "hlg";
            }
            e.colorGamut && (k2.colorGamut = e.colorGamut);
            f.push(k2);
          }
          if (d) for (h = u(d.fullMimeTypes), k2 = h.next(); !k2.done; k2 = h.next()) l = k2.value, k2 = mf(l), l = Xf(nf(l), k2), k2 = gf(k2, l, "audio"), g.push({ contentType: k2, channels: d.channelsCount || 2, bitrate: d.bandwidth || a.bandwidth || 1, samplerate: d.audioSamplingRate || 1, spatialRendering: d.spatialAudio });
          h = [];
          f.length == 0 && f.push(null);
          g.length == 0 && g.push(null);
          f = u(f);
          for (k2 = f.next(); !k2.done; k2 = f.next()) for (k2 = k2.value, l = u(g), n = l.next(); !n.done; n = l.next()) n = n.value, m = { type: c ? "file" : "media-source" }, k2 && (m.video = k2), n && (m.audio = n), h.push(m);
          g = (a.video ? a.video.drmInfos : []).concat(a.audio ? a.audio.drmInfos : []);
          if (!g.length) return [h];
          a = [];
          c = /* @__PURE__ */ new Map();
          g = u(g);
          for (f = g.next(); !f.done; f = g.next()) f = f.value, c.get(f.keySystem) || c.set(f.keySystem, []), c.get(f.keySystem).push(f);
          g = b ? "required" : "optional";
          b = b ? ["persistent-license"] : ["temporary"];
          f = u(c.keys());
          for (k2 = f.next(); !k2.done; k2 = f.next()) {
            k2 = k2.value;
            n = c.get(k2);
            l = /* @__PURE__ */ new Map();
            n = u(n);
            for (m = n.next(); !m.done; m = n.next()) {
              m = m.value;
              var q = m.videoRobustness + "," + m.audioRobustness;
              l.get(q) || l.set(q, []);
              l.get(q).push(m);
            }
            l = u(l.values());
            for (n = l.next(); !n.done; n = l.next()) {
              n = n.value;
              m = [];
              q = u(h);
              for (var r = q.next(); !r.done; r = q.next()) {
                r = Object.assign({}, r.value);
                for (var t = { keySystem: k2, initDataType: "cenc", persistentState: g, distinctiveIdentifier: "optional", sessionTypes: b }, w = u(n), v = w.next(); !v.done; v = w.next()) {
                  v = v.value;
                  if (v.initData && v.initData.length) {
                    for (var z = /* @__PURE__ */ new Set(), y = u(v.initData), A = y.next(); !A.done; A = y.next()) z.add(A.value.initDataType);
                    t.initDataType = v.initData[0].initDataType;
                  }
                  v.distinctiveIdentifierRequired && (t.distinctiveIdentifier = "required");
                  v.persistentStateRequired && (t.persistentState = "required");
                  v.sessionType && (t.sessionTypes = [v.sessionType]);
                  d && (t.audio ? (v.encryptionScheme && (t.audio.encryptionScheme = t.audio.encryptionScheme || v.encryptionScheme), t.audio.robustness = t.audio.robustness || v.audioRobustness) : (t.audio = { robustness: v.audioRobustness }, v.encryptionScheme && (t.audio.encryptionScheme = v.encryptionScheme)), t.audio.robustness == "" && delete t.audio.robustness);
                  e && (t.video ? (v.encryptionScheme && (t.video.encryptionScheme = t.video.encryptionScheme || v.encryptionScheme), t.video.robustness = t.video.robustness || v.videoRobustness) : (t.video = { robustness: v.videoRobustness }, v.encryptionScheme && (t.video.encryptionScheme = v.encryptionScheme)), t.video.robustness == "" && delete t.video.robustness);
                }
                r.keySystemConfiguration = t;
                m.push(r);
              }
              a.push(m);
            }
          }
          return a;
        }
        function Xf(a, b) {
          var c = Rb();
          return a.toLowerCase() == "flac" ? c.Ja() != "WEBKIT" ? "flac" : "fLaC" : a.toLowerCase() === "opus" ? c.Ja() != "WEBKIT" ? "opus" : hf(b) == "mp4" ? "Opus" : "opus" : a.toLowerCase() == "ac-3" && c.Fe() ? "ec-3" : a;
        }
        function Yf(a) {
          if (a.includes("avc1")) {
            var b = a.split(".");
            if (b.length == 3) return a = b.shift() + ".", a += parseInt(b.shift(), 10).toString(16), a += ("000" + parseInt(b.shift(), 10).toString(16)).slice(-4);
          } else if (a == "vp9") return "vp09.00.41.08";
          return a;
        }
        function Nf(a) {
          a.textStreams = a.textStreams.filter(function(b) {
            b = df(b.mimeType, b.codecs);
            return tf(b);
          });
        }
        function Of(a) {
          var b, c, d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                b = [], c = u(a.imageStreams), d = c.next();
              case 2:
                if (d.done) {
                  l.B(4);
                  break;
                }
                e = d.value;
                f = e.mimeType;
                f == "application/mp4" && e.codecs == "mjpg" && (f = "image/jpg");
                if (Zf.has(f)) {
                  l.B(5);
                  break;
                }
                g = $f.get(f);
                if (!g) {
                  Zf.set(f, false);
                  l.B(5);
                  break;
                }
                return F(l, ag(g), 7);
              case 7:
                h = l.h, Zf.set(f, h);
              case 5:
                (k2 = Zf.get(f)) && b.push(e);
                d = c.next();
                l.B(2);
                break;
              case 4:
                a.imageStreams = b, H(l);
            }
          });
        }
        function ag(a) {
          return new Promise(function(b) {
            var c = new Image();
            c.src = a;
            "decode" in c ? c.decode().then(function() {
              b(true);
            }).catch(function() {
              b(false);
            }) : c.onload = c.onerror = function() {
              b(c.height === 2);
            };
          });
        }
        function bg(a) {
          var b = a.audio, c = a.video, d = b ? b.mimeType : null, e = c ? c.mimeType : null, f = b ? b.codecs : null, g = c ? c.codecs : null, h = b ? b.groupId : null, k2 = [];
          c && k2.push(c.mimeType);
          b && k2.push(b.mimeType);
          k2 = k2[0] || null;
          var l = [];
          b && l.push(b.kind);
          c && l.push(c.kind);
          l = l[0] || null;
          var m = /* @__PURE__ */ new Set();
          if (b) for (var n = u(b.roles), q = n.next(); !q.done; q = n.next()) m.add(q.value);
          if (c) for (n = u(c.roles), q = n.next(); !q.done; q = n.next()) m.add(q.value);
          a = {
            id: a.id,
            active: false,
            type: "variant",
            bandwidth: a.bandwidth,
            language: a.language,
            label: null,
            videoLabel: null,
            kind: l,
            width: null,
            height: null,
            frameRate: null,
            pixelAspectRatio: null,
            hdr: null,
            colorGamut: null,
            videoLayout: null,
            mimeType: k2,
            audioMimeType: d,
            videoMimeType: e,
            codecs: "",
            audioCodec: f,
            videoCodec: g,
            primary: a.primary,
            roles: Array.from(m),
            audioRoles: null,
            videoRoles: null,
            forced: false,
            videoId: null,
            audioId: null,
            audioGroupId: h,
            channelsCount: null,
            audioSamplingRate: null,
            spatialAudio: false,
            tilesLayout: null,
            audioBandwidth: null,
            videoBandwidth: null,
            originalVideoId: null,
            originalAudioId: null,
            originalTextId: null,
            originalImageId: null,
            accessibilityPurpose: null,
            originalLanguage: null
          };
          if (c) {
            a.videoId = c.id;
            a.originalVideoId = c.originalId;
            a.width = c.width || null;
            a.height = c.height || null;
            a.frameRate = c.frameRate || null;
            a.pixelAspectRatio = c.pixelAspectRatio || null;
            a.videoBandwidth = c.bandwidth || null;
            a.hdr = c.hdr || null;
            a.colorGamut = c.colorGamut || null;
            a.videoLayout = c.videoLayout || null;
            a.videoRoles = c.roles;
            a.videoLabel = c.label;
            if (d = c.dependencyStream) a.width = d.width || a.width, a.height = d.height || a.height, a.videoCodec = d.codecs || a.videoCodec, a.videoBandwidth && d.bandwidth && (a.videoBandwidth += d.bandwidth);
            if (g.includes(",")) {
              a.channelsCount = c.channelsCount;
              a.audioSamplingRate = c.audioSamplingRate;
              a.spatialAudio = c.spatialAudio;
              a.originalLanguage = c.originalLanguage;
              a.audioMimeType = e;
              c = g.split(",");
              try {
                a.videoCodec = pc("video", c), a.audioCodec = pc("audio", c);
              } catch (r) {
              }
            }
          }
          b && (a.audioId = b.id, a.originalAudioId = b.originalId, a.channelsCount = b.channelsCount, a.audioSamplingRate = b.audioSamplingRate, a.audioBandwidth = b.bandwidth || null, a.spatialAudio = b.spatialAudio, a.label = b.label, a.audioRoles = b.roles, a.accessibilityPurpose = b.accessibilityPurpose, a.originalLanguage = b.originalLanguage, b = b.dependencyStream) && (a.audioCodec = b.codecs || a.audioCodec, a.audioBandwidth && b.bandwidth && (a.audioBandwidth += b.bandwidth));
          b = [];
          a.videoCodec && b.push(a.videoCodec);
          a.audioCodec && b.push(a.audioCodec);
          a.codecs = b.join(", ");
          return a;
        }
        function cg(a) {
          return { id: a.id, active: false, type: sc, bandwidth: a.bandwidth || 0, language: a.language, label: a.label, kind: a.kind || null, mimeType: a.mimeType, codecs: a.codecs || null, primary: a.primary, roles: a.roles, accessibilityPurpose: a.accessibilityPurpose, forced: a.forced, originalTextId: a.originalId, originalLanguage: a.originalLanguage };
        }
        function dg(a) {
          var b = a.width || null, c = a.height || null, d = null;
          a.segmentIndex && (d = eg(a.segmentIndex));
          var e = a.tilesLayout;
          d && (e = d.tilesLayout || e);
          e && b != null && (b /= Number(e.split("x")[0]));
          e && c != null && (c /= Number(e.split("x")[1]));
          return { id: a.id, type: "image", bandwidth: a.bandwidth || 0, width: b, height: c, mimeType: a.mimeType, codecs: a.codecs || null, tilesLayout: e || null, originalImageId: a.originalId };
        }
        function fg(a) {
          a.__shaka_id || (a.__shaka_id = gg++);
          return a.__shaka_id;
        }
        function hg(a) {
          var b = { id: fg(a), active: a.mode != "disabled", type: sc, bandwidth: 0, language: yc(a.language || "und"), label: a.label, kind: a.kind, mimeType: null, codecs: null, primary: false, roles: [], accessibilityPurpose: null, forced: a.kind == "forced", originalTextId: a.id, originalLanguage: a.language };
          a.kind == "captions" && (b.mimeType = "unknown");
          a.kind == "subtitles" && (b.mimeType = "text/vtt");
          a.kind && (b.roles = [a.kind]);
          return b;
        }
        function ig(a, b) {
          var c = a ? a.language : null;
          c = {
            id: fg(a || b),
            active: a ? a.enabled : b.selected,
            type: "variant",
            bandwidth: 0,
            language: yc(c || "und"),
            label: a ? a.label : null,
            videoLabel: null,
            kind: a ? a.kind : null,
            width: null,
            height: null,
            frameRate: null,
            pixelAspectRatio: null,
            hdr: null,
            colorGamut: null,
            videoLayout: null,
            mimeType: null,
            audioMimeType: null,
            videoMimeType: null,
            codecs: null,
            audioCodec: null,
            videoCodec: null,
            primary: a ? a.kind == "main" : false,
            roles: [],
            forced: false,
            audioRoles: null,
            videoRoles: null,
            videoId: null,
            audioId: null,
            audioGroupId: null,
            channelsCount: null,
            audioSamplingRate: null,
            spatialAudio: false,
            tilesLayout: null,
            audioBandwidth: null,
            videoBandwidth: null,
            originalVideoId: b ? b.id : null,
            originalAudioId: a ? a.id : null,
            originalTextId: null,
            originalImageId: null,
            accessibilityPurpose: null,
            originalLanguage: c
          };
          a && a.kind && (c.roles = [a.kind], c.audioRoles = [a.kind]);
          a && a.configuration && (a.configuration.codec && (c.audioCodec = a.configuration.codec, c.codecs = c.audioCodec), a.configuration.bitrate && (c.audioBandwidth = a.configuration.bitrate, c.bandwidth += c.audioBandwidth), a.configuration.sampleRate && (c.audioSamplingRate = a.configuration.sampleRate), a.configuration.numberOfChannels && (c.channelsCount = a.configuration.numberOfChannels));
          if (b && b.configuration && (b.configuration.codec && (c.videoCodec = b.configuration.codec, c.codecs = c.codecs ? c.codecs + ("," + c.videoCodec) : c.videoCodec), b.configuration.bitrate && (c.videoBandwidth = b.configuration.bitrate, c.bandwidth += c.videoBandwidth), b.configuration.framerate && (c.frameRate = b.configuration.framerate), b.configuration.width && (c.width = b.configuration.width), b.configuration.height && (c.height = b.configuration.height), b.configuration.colorSpace && b.configuration.colorSpace.transfer)) switch (b.configuration.colorSpace.transfer) {
            case "pq":
              c.hdr = "PQ";
              break;
            case "hlg":
              c.hdr = "HLG";
              break;
            case "bt709":
              c.hdr = "SDR";
          }
          return c;
        }
        function jg(a) {
          return a.allowedByApplication && a.allowedByKeySystem && a.disabledUntilTime == 0;
        }
        function kg(a) {
          return a.filter(function(b) {
            return jg(b);
          });
        }
        function lg(a, b, c, d) {
          var e = a, f = a.filter(function(k2) {
            return k2.primary;
          });
          f.length && (e = f);
          var g = e.length ? e[0].language : "";
          e = e.filter(function(k2) {
            return k2.language == g;
          });
          if (b) {
            var h = Gc(yc(b), a.map(function(k2) {
              return k2.language;
            }));
            h && (e = a.filter(function(k2) {
              return yc(k2.language) == h;
            }));
          }
          e = e.filter(function(k2) {
            return k2.forced == d;
          });
          if (c) {
            if (a = mg(e, c), a.length) return a;
          } else if (a = e.filter(function(k2) {
            return k2.roles.length == 0;
          }), a.length) return a;
          a = e.map(function(k2) {
            return k2.roles;
          }).reduce(Cf, []);
          return a.length ? mg(e, a[0]) : e;
        }
        function mg(a, b) {
          return a.filter(function(c) {
            return c.roles.includes(b);
          });
        }
        function ng(a) {
          var b = [];
          a.audio && b.push(a.audio);
          a.video && b.push(a.video);
          return b;
        }
        function og(a, b) {
          b.length && (b = b.filter(function(c) {
            return jf(a.codecs) == jf(c.codecs);
          }).sort(function(c, d) {
            return c.bandwidth && d.bandwidth && c.bandwidth != d.bandwidth ? c.bandwidth - d.bandwidth : (c.width || 0) - (d.width || 0);
          }), a.trickModeVideo = b[0], b.length > 1 && (b = b.find(function(c) {
            return a.width == c.width && a.height == c.height;
          }))) && (a.trickModeVideo = b);
        }
        function Sf(a) {
          return a.type == "audio" ? "type=audio codecs=" + a.codecs + " bandwidth=" + a.bandwidth + " channelsCount=" + a.channelsCount + " audioSamplingRate=" + a.audioSamplingRate : a.type == "video" ? "type=video codecs=" + a.codecs + " bandwidth=" + a.bandwidth + " frameRate=" + a.frameRate + " width=" + a.width + " height=" + a.height : "unexpected stream type";
        }
        function pg(a, b, c) {
          if (c.autoShowText == 0) return false;
          if (c.autoShowText == 1) return true;
          var d = yc(c.preferredTextLanguage);
          b = yc(b.language);
          if (c.autoShowText == 2) return xc(b, d);
          if (c.autoShowText == 3) {
            if (!a) return false;
            a = yc(a.language);
            return xc(b, d) && !xc(a, b);
          }
          ab("Invalid autoShowText setting!");
          return false;
        }
        function qg(a) {
          var b = { id: 0, language: "und", disabledUntilTime: 0, primary: false, audio: null, video: null, bandwidth: 100, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] };
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            var d = {
              id: 0,
              originalId: null,
              groupId: null,
              createSegmentIndex: function() {
                return Promise.resolve();
              },
              segmentIndex: null,
              mimeType: c ? mf(c) : "",
              codecs: c ? nf(c) : "",
              encrypted: true,
              drmInfos: [],
              keyIds: /* @__PURE__ */ new Set(),
              language: "und",
              originalLanguage: null,
              label: null,
              type: "video",
              primary: false,
              trickModeVideo: null,
              dependencyStream: null,
              emsgSchemeIdUris: null,
              roles: [],
              forced: false,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: false,
              closedCaptions: null,
              accessibilityPurpose: null,
              external: false,
              fastSwitching: false,
              fullMimeTypes: /* @__PURE__ */ new Set(),
              isAudioMuxedInVideo: false,
              baseOriginalId: null
            };
            d.fullMimeTypes.add(df(d.mimeType, d.codecs));
            c.startsWith("audio/") ? (d.type = "audio", b.audio = d) : b.video = d;
          }
          return b;
        }
        S("shaka.util.StreamUtils", Gf);
        Gf.meetsRestrictions = Kf;
        var Uf = /* @__PURE__ */ new Map(), gg = 0, Zf = (/* @__PURE__ */ new Map()).set("image/svg+xml", true).set("image/png", true).set("image/jpeg", true).set("image/jpg", true), $f = (/* @__PURE__ */ new Map()).set("image/webp", "data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif", "data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");
        function rg() {
          var a = this;
          this.H = null;
          this.m = false;
          this.C = new Nc();
          this.j = new Tc();
          navigator.connection && navigator.connection.addEventListener && this.j.o(navigator.connection, "change", function() {
            if (a.m && a.g.useNetworkInformation) {
              a.C = new Nc();
              a.g && a.C.configure(a.g.advanced);
              var b = a.chooseVariant();
              b && navigator.onLine && a.H(b, a.g.clearBufferSwitch, a.g.safeMarginSwitch);
            }
          });
          this.A = [];
          this.I = 1;
          this.J = false;
          this.h = this.u = this.g = this.D = null;
          this.l = new Bf(function() {
            if (a.m && (a.g.restrictToElementSize || a.g.restrictToScreenSize)) {
              var b = a.chooseVariant();
              b && a.H(b, a.g.clearBufferSwitch, a.g.safeMarginSwitch);
            }
          });
          this.F = window2;
          "documentPictureInPicture" in window2 && this.j.o(window2.documentPictureInPicture, "enter", function() {
            a.F = window2.documentPictureInPicture.window;
            a.l && a.l.La();
            a.j.ua(a.F, "pagehide", function() {
              a.F = window2;
              a.l && a.l.La();
            });
          });
          this.G = this.i = null;
        }
        p = rg.prototype;
        p.stop = function() {
          this.H = null;
          this.m = false;
          this.A = [];
          this.I = 1;
          this.u = this.D = null;
          this.h && (this.h.disconnect(), this.h = null);
          this.l && this.l.stop();
          this.G = this.i = null;
        };
        p.release = function() {
          this.stop();
          this.j.release();
          this.l = null;
        };
        p.init = function(a) {
          this.H = a;
        };
        p.chooseVariant = function(a) {
          a = a === void 0 ? false : a;
          var b = Infinity, c = Infinity;
          this.g.restrictToScreenSize && (c = this.g.ignoreDevicePixelRatio ? 1 : this.F.devicePixelRatio, b = this.F.screen.height * c, c *= this.F.screen.width);
          if (this.h && this.g.restrictToElementSize) {
            var d = this.g.ignoreDevicePixelRatio ? 1 : this.F.devicePixelRatio, e = this.u.clientHeight, f = this.u.clientWidth;
            this.i && document.pictureInPictureElement && document.pictureInPictureElement == this.u && (e = this.i.height, f = this.i.width);
            b = Math.min(b, e * d);
            c = Math.min(
              c,
              f * d
            );
          }
          e = this.A.filter(function(l) {
            return l && !(l.audio && l.audio.fastSwitching || l.video && l.video.fastSwitching);
          });
          e.length || (e = this.A);
          d = e;
          a && e.length != this.A.length && (d = this.A.filter(function(l) {
            return l && (l.audio && l.audio.fastSwitching || l.video && l.video.fastSwitching ? true : false);
          }));
          a = sg(this, this.g.restrictions, d, Infinity, Infinity);
          if (b != Infinity || c != Infinity) {
            a = tg(a);
            a = u(a);
            for (e = a.next(); !e.done; e = a.next()) if (e = e.value, e.height >= b && e.width >= c) {
              b = e.height;
              c = e.width;
              break;
            }
            a = sg(
              this,
              this.g.restrictions,
              d,
              b,
              c
            );
          }
          b = this.getBandwidthEstimate();
          d.length && !a.length && (a = sg(this, null, d, Infinity, Infinity), a = [a[0]]);
          c = a[0] || null;
          for (d = 0; d < a.length; d++) {
            e = a[d];
            var g = isNaN(this.I) ? 1 : Math.abs(this.I);
            f = g * e.bandwidth / this.g.bandwidthDowngradeTarget;
            for (var h = { bandwidth: Infinity }, k2 = d + 1; k2 < a.length; k2++) if (e.bandwidth != a[k2].bandwidth) {
              h = a[k2];
              break;
            }
            g = g * h.bandwidth / this.g.bandwidthUpgradeTarget;
            b >= f && b <= g && (c.bandwidth != e.bandwidth || c.bandwidth == e.bandwidth && c.video && e.video && (c.video.width < e.video.width || c.video.height < e.video.height)) && (c = e);
          }
          this.D = Date.now();
          return c;
        };
        p.enable = function() {
          this.m = true;
        };
        p.disable = function() {
          this.m = false;
        };
        p.segmentDownloaded = function(a, b, c, d) {
          var e = a;
          this.g.removeLatencyFromFirstPacketTime && d && d.packetNumber === 1 && d.timeToFirstByte && (e = a - d.timeToFirstByte);
          e >= this.g.cacheLoadThreshold && this.C.sample(e, b);
          c && this.D != null && this.m && ug(this);
        };
        p.trySuggestStreams = function() {
          this.m && (this.D = Date.now(), ug(this, true));
        };
        p.getBandwidthEstimate = function() {
          var a = this.g.defaultBandwidthEstimate;
          navigator.connection && navigator.connection.downlink && this.g.useNetworkInformation && (a = navigator.connection.downlink * 1e6);
          if (navigator.connection && navigator.connection.downlink && this.g.useNetworkInformation && this.g.preferNetworkInformationBandwidth) return a;
          a = this.C.getBandwidthEstimate(a);
          return this.G ? this.G.getBandwidthEstimate(a) : a;
        };
        p.setVariants = function(a) {
          if (Rc(a, this.A)) return false;
          this.A = a;
          return true;
        };
        p.playbackRateChanged = function(a) {
          this.I = a;
        };
        p.setMediaElement = function(a) {
          function b() {
            c.l.$(vg);
          }
          var c = this;
          this.u = a;
          this.h && (this.h.disconnect(), this.h = null);
          this.u && "ResizeObserver" in window2 && (this.h = new ResizeObserver(b), this.h.observe(this.u));
          this.j.o(a, "enterpictureinpicture", function(d) {
            d.pictureInPictureWindow && (c.i = d.pictureInPictureWindow, c.j.o(c.i, "resize", b));
          });
          this.j.o(a, "leavepictureinpicture", function() {
            c.i && c.j.Ea(c.i, "resize", b);
            c.i = null;
          });
        };
        p.setCmsdManager = function(a) {
          this.G = a;
        };
        p.configure = function(a) {
          this.g = a;
          this.C && this.g && this.C.configure(this.g.advanced);
        };
        function ug(a, b) {
          if (b === void 0 || !b) {
            if (!a.J) {
              b = a.C;
              if (!(b.g >= b.i)) return;
              a.J = true;
              a.D -= (a.g.switchInterval - a.g.minTimeToSwitch) * 1e3;
            }
            if (Date.now() - a.D < a.g.switchInterval * 1e3) return;
          }
          b = a.chooseVariant();
          a.getBandwidthEstimate();
          b && a.H(b, a.g.clearBufferSwitch, a.g.safeMarginSwitch);
        }
        function sg(a, b, c, d, e) {
          if (a.G) {
            var f = a.G.Yi();
            f && (c = c.filter(function(g) {
              return g.bandwidth && f ? g.bandwidth <= f : true;
            }));
          }
          b && (c = c.filter(function(g) {
            return Kf(g, b, { width: e, height: d });
          }));
          return c.sort(function(g, h) {
            return g.bandwidth - h.bandwidth;
          });
        }
        function tg(a) {
          var b = [];
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) (c = c.value.video) && c.height && c.width && b.push({ height: c.height, width: c.width });
          return b.sort(function(d, e) {
            return d.width - e.width;
          });
        }
        S("shaka.abr.SimpleAbrManager", rg);
        rg.prototype.configure = rg.prototype.configure;
        rg.prototype.setCmsdManager = rg.prototype.setCmsdManager;
        rg.prototype.setMediaElement = rg.prototype.setMediaElement;
        rg.prototype.playbackRateChanged = rg.prototype.playbackRateChanged;
        rg.prototype.setVariants = rg.prototype.setVariants;
        rg.prototype.getBandwidthEstimate = rg.prototype.getBandwidthEstimate;
        rg.prototype.trySuggestStreams = rg.prototype.trySuggestStreams;
        rg.prototype.segmentDownloaded = rg.prototype.segmentDownloaded;
        rg.prototype.disable = rg.prototype.disable;
        rg.prototype.enable = rg.prototype.enable;
        rg.prototype.chooseVariant = rg.prototype.chooseVariant;
        rg.prototype.init = rg.prototype.init;
        rg.prototype.release = rg.prototype.release;
        rg.prototype.stop = rg.prototype.stop;
        var vg = 1;
        function wg(a, b) {
          if (a === b || !a.length || !b.length) return true;
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            if (xg(c)) return true;
            for (var d = u(b), e = d.next(); !e.done; e = d.next()) if (e = e.value, c.keySystem === e.keySystem || xg(e)) return true;
          }
          return false;
        }
        function yg(a, b) {
          if (!a.length) return b;
          if (!b.length) return a;
          var c = [];
          a = u(a);
          for (var d = a.next(); !d.done; d = a.next()) {
            d = d.value;
            for (var e = u(b), f = e.next(); !f.done; f = e.next()) if (f = f.value, d.keySystem == f.keySystem) {
              e = /* @__PURE__ */ new Map();
              for (var g = u((d.initData || []).concat(f.initData || [])), h = g.next(); !h.done; h = g.next()) h = h.value, e.set(h.keyId, h);
              e = Array.from(e.values());
              g = d.keyIds && f.keyIds ? new Set([].concat(x(d.keyIds), x(f.keyIds))) : d.keyIds || f.keyIds;
              c.push({ keySystem: d.keySystem, licenseServerUri: d.licenseServerUri || f.licenseServerUri, distinctiveIdentifierRequired: d.distinctiveIdentifierRequired || f.distinctiveIdentifierRequired, persistentStateRequired: d.persistentStateRequired || f.persistentStateRequired, videoRobustness: d.videoRobustness || f.videoRobustness, audioRobustness: d.audioRobustness || f.audioRobustness, serverCertificate: d.serverCertificate || f.serverCertificate, serverCertificateUri: d.serverCertificateUri || f.serverCertificateUri, initData: e, keyIds: g });
              break;
            } else xg(d) ? c.push(d) : xg(f) && c.push(f);
          }
          return c;
        }
        function zg(a) {
          return a ? !!a.match(/^com\.(microsoft|chromecast)\.playready/) : false;
        }
        function Bg(a) {
          return a ? !!a.match(/^com\.apple\.fps/) : false;
        }
        function xg(a) {
          return (a = a.licenseServerUri) ? a.startsWith("data:application/json;base64,") : false;
        }
        var Cg = new Qb(function() {
          return Lb(new Uint8Array([0]));
        }), Dg = /* @__PURE__ */ new Map();
        function Eg(a, b) {
          var c = Fg();
          this.l = a.maxAttempts == null ? c.maxAttempts : a.maxAttempts;
          this.j = a.baseDelay == null ? c.baseDelay : a.baseDelay;
          this.u = a.fuzzFactor == null ? c.fuzzFactor : a.fuzzFactor;
          this.m = a.backoffFactor == null ? c.backoffFactor : a.backoffFactor;
          this.g = 0;
          this.h = this.j;
          if (this.i = b === void 0 ? false : b) this.g = 1;
        }
        function Gg(a) {
          var b, c;
          return Q(function(d) {
            if (d.g == 1) {
              if (a.g >= a.l) if (a.i) a.g = 1, a.h = a.j;
              else throw new U(2, 7, 1010);
              b = a.g;
              a.g++;
              if (b == 0) return d.return();
              c = a.h * (1 + (Math.random() * 2 - 1) * a.u);
              return F(d, new Promise(function(e) {
                new Bf(e).$(c / 1e3);
              }), 2);
            }
            a.h *= a.m;
            H(d);
          });
        }
        function Fg() {
          return { maxAttempts: 2, baseDelay: 1e3, backoffFactor: 2, fuzzFactor: 0.5, timeout: 3e4, stallTimeout: 5e3, connectionTimeout: 1e4 };
        }
        ;
        function Lg() {
          var a, b, c = new Promise(function(d, e) {
            a = d;
            b = e;
          });
          c.resolve = a;
          c.reject = b;
          return c;
        }
        Lg.prototype.resolve = function() {
        };
        Lg.prototype.reject = function() {
        };
        function Mg(a, b) {
          this.promise = a;
          this.i = b;
          this.g = null;
        }
        function Ng(a) {
          return new Mg(Promise.reject(a), function() {
            return Promise.resolve();
          });
        }
        function Og() {
          var a = Promise.reject(new U(2, 7, 7001));
          a.catch(function() {
          });
          return new Mg(a, function() {
            return Promise.resolve();
          });
        }
        function Pg(a) {
          return new Mg(Promise.resolve(a), function() {
            return Promise.resolve();
          });
        }
        function Qg(a) {
          return new Mg(a, function() {
            return a.catch(function() {
            });
          });
        }
        Mg.prototype.abort = function() {
          this.g || (this.g = this.i());
          return this.g;
        };
        function Rg(a) {
          return new Mg(Promise.all(a.map(function(b) {
            return b.promise;
          })), function() {
            return Promise.all(a.map(function(b) {
              return b.abort();
            }));
          });
        }
        Mg.prototype.finally = function(a) {
          this.promise.then(function() {
            return a(true);
          }, function() {
            return a(false);
          });
          return this;
        };
        Mg.prototype.bb = function(a, b) {
          function c(h) {
            return function(k2) {
              if (e.g && h) f.reject(g);
              else {
                var l = h ? a : b;
                l ? d = Sg(l, k2, f) : (h ? f.resolve : f.reject)(k2);
              }
            };
          }
          function d() {
            f.reject(g);
            return e.abort();
          }
          var e = this, f = new Lg();
          f.catch(function() {
          });
          var g = new U(2, 7, 7001);
          this.promise.then(c(true), c(false));
          return new Mg(f, function() {
            return d();
          });
        };
        function Sg(a, b, c) {
          try {
            var d = a(b);
            if (d && d.promise && d.abort) return c.resolve(d.promise), function() {
              return d.abort();
            };
            c.resolve(d);
            return function() {
              return Promise.resolve(d).then(function() {
              }, function() {
              });
            };
          } catch (e) {
            return c.reject(e), function() {
              return Promise.resolve();
            };
          }
        }
        da.Object.defineProperties(Mg.prototype, { aborted: { configurable: true, enumerable: true, get: function() {
          return this.g !== null;
        } } });
        S("shaka.util.AbortableOperation", Mg);
        Mg.prototype.chain = Mg.prototype.bb;
        Mg.prototype["finally"] = Mg.prototype.finally;
        Mg.all = Rg;
        Mg.prototype.abort = Mg.prototype.abort;
        Mg.notAbortable = Qg;
        Mg.completed = Pg;
        Mg.aborted = Og;
        Mg.failed = Ng;
        function Tg() {
          this.g = [];
        }
        function Ug(a, b) {
          a.g.push(b.finally(function() {
            Qc(a.g, b);
          }));
        }
        Tg.prototype.destroy = function() {
          for (var a = [], b = u(this.g), c = b.next(); !c.done; c = b.next()) c = c.value, c.promise.catch(function() {
          }), a.push(c.abort());
          this.g = [];
          return Promise.all(a);
        };
        function Vg(a, b, c, d, e, f, g) {
          kb.call(this);
          this.i = null;
          this.j = false;
          this.A = new Tg();
          this.g = /* @__PURE__ */ new Set();
          this.h = /* @__PURE__ */ new Set();
          this.u = a || null;
          this.m = b || null;
          this.C = c || null;
          this.D = d || null;
          this.F = e || null;
          this.H = f || null;
          this.G = g || null;
          this.l = /* @__PURE__ */ new Map();
        }
        la(Vg, kb);
        p = Vg.prototype;
        p.configure = function(a) {
          this.i = a;
        };
        function Wg(a, b, c, d) {
          d = d === void 0 ? false : d;
          c = c || Xg;
          var e = Yg.get(a);
          (!e || c >= e.priority) && Yg.set(a, { priority: c, Vf: b, Yl: d });
        }
        function Zg(a, b) {
          for (var c = u(a.g), d = c.next(); !d.done; d = c.next()) b.g.add(d.value);
          a = u(a.h);
          for (c = a.next(); !c.done; c = a.next()) b.h.add(c.value);
        }
        p.am = function(a) {
          this.g.add(a);
        };
        p.Bm = function(a) {
          this.g.delete(a);
        };
        p.qk = function() {
          this.g.clear();
        };
        p.bm = function(a) {
          this.h.add(a);
        };
        p.Cm = function(a) {
          this.h.delete(a);
        };
        p.rk = function() {
          this.h.clear();
        };
        p.Ni = function() {
          this.l.clear();
        };
        function $g(a, b, c) {
          return { uris: a, method: "GET", body: null, headers: {}, allowCrossSiteCredentials: false, retryParameters: b, licenseRequestType: null, sessionId: null, drmInfo: null, initData: null, initDataType: null, streamDataCallback: c === void 0 ? null : c };
        }
        p.destroy = function() {
          this.j = true;
          this.g.clear();
          this.h.clear();
          this.l.clear();
          kb.prototype.release.call(this);
          return this.A.destroy();
        };
        p.request = function(a, b, c) {
          var d = this, e = new ah();
          if (this.j) {
            var f = Promise.reject(new U(2, 7, 7001));
            f.catch(function() {
            });
            return new bh(f, function() {
              return Promise.resolve();
            }, e);
          }
          b.method = b.method || "GET";
          b.headers = b.headers || {};
          b.retryParameters = b.retryParameters ? Gd(b.retryParameters) : Fg();
          b.uris = Gd(b.uris);
          f = ch(this, a, b, c);
          var g = f.bb(function() {
            return dh(d, a, b, c, new Eg(b.retryParameters, false), 0, null, e);
          }), h = g.bb(function(q) {
            return eh(d, a, q, c);
          }), k2 = Date.now(), l = 0;
          f.promise.then(function() {
            l = Date.now() - k2;
          }, function() {
          });
          var m = 0;
          g.promise.then(function() {
            m = Date.now();
          }, function() {
          });
          var n = h.bb(function(q) {
            var r = Date.now() - m, t = q.response;
            t.timeMs += l;
            t.timeMs += r;
            q.Bl || !d.u || t.fromCache || b.method == "HEAD" || a != fh || d.u(t.timeMs, t.data.byteLength, gh(c), b, c);
            d.G && d.G(a, t, c);
            return t;
          }, function(q) {
            q && (q.severity = 2);
            throw q;
          });
          f = new bh(n.promise, function() {
            return n.abort();
          }, e);
          Ug(this.A, f);
          return f;
        };
        function ch(a, b, c, d) {
          function e(h) {
            f = f.bb(function() {
              c.body && (c.body = Lb(c.body));
              return h(b, c, d);
            });
          }
          var f = Pg(void 0);
          a.F && e(a.F);
          a = u(a.g);
          for (var g = a.next(); !g.done; g = a.next()) e(g.value);
          return f.bb(void 0, function(h) {
            if (h instanceof U && h.code == 7001) throw h;
            throw new U(2, 1, 1006, h);
          });
        }
        function dh(a, b, c, d, e, f, g, h) {
          a.i.forceHTTP && (c.uris[f] = c.uris[f].replace("https://", "http://"));
          a.i.forceHTTPS && (c.uris[f] = c.uris[f].replace("http://", "https://"));
          f > 0 && a.H && a.H(b, d, c.uris[f], c.uris[f - 1]);
          var k2 = new qb(c.uris[f]), l = k2.lc, m = false;
          l || (l = location.protocol, l = l.slice(0, -1), rb(k2, l), c.uris[f] = k2.toString());
          l = l.toLowerCase();
          var n = (l = Yg.get(l)) ? l.Vf : null;
          if (!n) return Ng(new U(2, 1, 1e3, k2));
          var q = l.Yl;
          (k2 = a.l.get(k2.Jb)) && (c.headers["common-access-token"] = k2);
          var r = null, t = null, w = false, v = false, z;
          return Qg(Gg(e)).bb(function() {
            if (a.j) return Og();
            z = Date.now();
            var y = 0;
            c.requestStartTime = Date.now();
            var A = n(c.uris[f], c, b, function(D, B, G) {
              r && r.stop();
              t && t.$(E / 1e3);
              a.u && b == fh && (y++, c.packetNumber = y, a.u(D, B, gh(d), c, d), m = true, h.g = G);
            }, function(D) {
              v = true;
              c.timeToFirstByte = Date.now() - c.requestStartTime;
              a.m && a.m(D, c, b);
            }, { minBytesForProgressEvents: a.i.minBytesForProgressEvents });
            if (!q) return A;
            var C = c.retryParameters.connectionTimeout;
            C && (r = new Bf(function() {
              w = true;
              A.abort();
            }), r.$(C / 1e3));
            var E = c.retryParameters.stallTimeout;
            E && (t = new Bf(function() {
              w = true;
              A.abort();
            }));
            return A;
          }).bb(function(y) {
            r && r.stop();
            t && t.stop();
            y.timeMs == void 0 && (y.timeMs = Date.now() - z);
            var A = y.headers["common-access-token"];
            if (A) {
              var C = new qb(y.uri);
              a.l.set(C.Jb, A);
            }
            A = { response: y, Bl: m };
            !v && a.m && a.m(y.headers, c, b);
            a.C && a.C(c, y);
            return A;
          }, function(y) {
            r && r.stop();
            t && t.stop();
            if (a.D) {
              var A = null, C = 0;
              y instanceof U && (A = y, y.code == 1001 && (C = y.data[1]));
              a.D(c, A, C, w);
            }
            if (a.j) return Og();
            w && (y = new U(1, 1, 1003, c.uris[f], b));
            if (y instanceof U) {
              if (y.code == 7001) throw y;
              if (y.code == 1010) throw g;
              if (y.severity == 1) {
                A = (/* @__PURE__ */ new Map()).set("error", y);
                A = new T("retry", A);
                A.cancelable = true;
                a.dispatchEvent(A);
                if (A.defaultPrevented) throw y;
                f = (f + 1) % c.uris.length;
                return dh(a, b, c, d, e, f, y, h);
              }
            }
            throw y;
          });
        }
        function eh(a, b, c, d) {
          var e = Pg(void 0);
          a = u(a.h);
          for (var f = a.next(), g = {}; !f.done; g = { Cj: void 0 }, f = a.next()) g.Cj = f.value, e = e.bb(/* @__PURE__ */ function(h) {
            return function() {
              var k2 = c.response;
              k2.data && (k2.data = Lb(k2.data));
              return (0, h.Cj)(b, k2, d);
            };
          }(g));
          return e.bb(function() {
            return c;
          }, function(h) {
            var k2 = 2;
            if (h instanceof U) {
              if (h.code == 7001) throw h;
              k2 = h.severity;
            }
            throw new U(k2, 1, 1007, h);
          });
        }
        function gh(a) {
          if (a) {
            var b = a.segment;
            a = a.stream;
            if (b && a && a.fastSwitching && b.nd) return false;
          }
          return true;
        }
        S("shaka.net.NetworkingEngine", Vg);
        Vg.prototype.request = Vg.prototype.request;
        Vg.prototype.destroy = Vg.prototype.destroy;
        Vg.makeRequest = $g;
        Vg.defaultRetryParameters = function() {
          return Fg();
        };
        Vg.prototype.clearCommonAccessTokenMap = Vg.prototype.Ni;
        Vg.prototype.clearAllResponseFilters = Vg.prototype.rk;
        Vg.prototype.unregisterResponseFilter = Vg.prototype.Cm;
        Vg.prototype.registerResponseFilter = Vg.prototype.bm;
        Vg.prototype.clearAllRequestFilters = Vg.prototype.qk;
        Vg.prototype.unregisterRequestFilter = Vg.prototype.Bm;
        Vg.prototype.registerRequestFilter = Vg.prototype.am;
        Vg.unregisterScheme = function(a) {
          Yg.delete(a);
        };
        Vg.registerScheme = Wg;
        Vg.prototype.configure = Vg.prototype.configure;
        function ah() {
          this.g = 0;
        }
        Vg.NumBytesRemainingClass = ah;
        function bh(a, b, c) {
          Mg.call(this, a, b);
          this.h = c;
        }
        la(bh, Mg);
        Vg.PendingRequest = bh;
        var fh = 1;
        Vg.RequestType = { MANIFEST: 0, SEGMENT: fh, LICENSE: 2, APP: 3, TIMING: 4, SERVER_CERTIFICATE: 5, KEY: 6, ADS: 7, CONTENT_STEERING: 8, CMCD: 9 };
        Vg.AdvancedRequestType = { INIT_SEGMENT: 0, MEDIA_SEGMENT: 1, MEDIA_PLAYLIST: 2, MASTER_PLAYLIST: 3, MPD: 4, MSS: 5, MPD_PATCH: 6, MEDIATAILOR_SESSION_INFO: 7, MEDIATAILOR_TRACKING_INFO: 8, MEDIATAILOR_STATIC_RESOURCE: 9, MEDIATAILOR_TRACKING_EVENT: 10, INTERSTITIAL_ASSET_LIST: 11, INTERSTITIAL_AD_URL: 12 };
        var Xg = 3;
        Vg.PluginPriority = { FALLBACK: 1, PREFERRED: 2, APPLICATION: Xg };
        var Yg = /* @__PURE__ */ new Map();
        function hh(a) {
          this.g = false;
          this.h = new Lg();
          this.i = a;
        }
        hh.prototype.destroy = function() {
          var a = this;
          if (this.g) return this.h;
          this.g = true;
          return this.i().then(function() {
            a.h.resolve();
          }, function() {
            a.h.resolve();
          });
        };
        function ih(a, b) {
          if (a.g) {
            if (b instanceof U && b.code == 7003) throw b;
            throw new U(2, 7, 7003, b);
          }
        }
        ;
        function jh(a) {
          for (var b = /* @__PURE__ */ new Map(), c = u(Object.keys(a)), d = c.next(); !d.done; d = c.next()) d = d.value, b.set(d, a[d]);
          return b;
        }
        function kh(a) {
          var b = {};
          a.forEach(function(c, d) {
            b[d] = c;
          });
          return b;
        }
        ;
        function lh(a, b) {
          this.h = Ob(a);
          this.i = b == mh;
          this.g = 0;
        }
        p = lh.prototype;
        p.Pa = function() {
          return this.g < this.h.byteLength;
        };
        p.Wa = function() {
          return this.g;
        };
        p.getLength = function() {
          return this.h.byteLength;
        };
        p.ba = function() {
          try {
            var a = this.h.getUint8(this.g);
            this.g += 1;
            return a;
          } catch (b) {
            throw nh();
          }
        };
        p.Ha = function() {
          try {
            var a = this.h.getUint16(this.g, this.i);
            this.g += 2;
            return a;
          } catch (b) {
            throw nh();
          }
        };
        p.Z = function() {
          try {
            var a = this.h.getUint32(this.g, this.i);
            this.g += 4;
            return a;
          } catch (b) {
            throw nh();
          }
        };
        p.Sh = function() {
          try {
            var a = this.h.getInt32(this.g, this.i);
            this.g += 4;
            return a;
          } catch (b) {
            throw nh();
          }
        };
        p.Td = function() {
          try {
            if (this.i) {
              var a = this.h.getUint32(this.g, true);
              var b = this.h.getUint32(this.g + 4, true);
            } else b = this.h.getUint32(this.g, false), a = this.h.getUint32(this.g + 4, false);
          } catch (c) {
            throw nh();
          }
          if (b > 2097151) throw new U(2, 3, 3001);
          this.g += 8;
          return b * 4294967296 + a;
        };
        p.ac = function(a) {
          if (this.g + a > this.h.byteLength) throw nh();
          var b = Kb(this.h, this.g, a);
          this.g += a;
          return b;
        };
        p.skip = function(a) {
          if (this.g + a > this.h.byteLength) throw nh();
          this.g += a;
        };
        p.Dj = function(a) {
          if (this.g < a) throw nh();
          this.g -= a;
        };
        p.seek = function(a) {
          if (a < 0 || a > this.h.byteLength) throw nh();
          this.g = a;
        };
        p.od = function() {
          for (var a = this.g; this.Pa() && this.h.getUint8(this.g) != 0; ) this.g += 1;
          a = Kb(this.h, a, this.g - a);
          this.g += 1;
          return Wb(a);
        };
        function nh() {
          return new U(2, 3, 3e3);
        }
        S("shaka.util.DataViewReader", lh);
        lh.prototype.readTerminatedString = lh.prototype.od;
        lh.prototype.seek = lh.prototype.seek;
        lh.prototype.rewind = lh.prototype.Dj;
        lh.prototype.skip = lh.prototype.skip;
        lh.prototype.readBytes = lh.prototype.ac;
        lh.prototype.readUint64 = lh.prototype.Td;
        lh.prototype.readInt32 = lh.prototype.Sh;
        lh.prototype.readUint32 = lh.prototype.Z;
        lh.prototype.readUint16 = lh.prototype.Ha;
        lh.prototype.readUint8 = lh.prototype.ba;
        lh.prototype.getLength = lh.prototype.getLength;
        lh.prototype.getPosition = lh.prototype.Wa;
        lh.prototype.hasMoreData = lh.prototype.Pa;
        var mh = 1;
        lh.Endianness = { BIG_ENDIAN: 0, LITTLE_ENDIAN: mh };
        function oh() {
          this.i = /* @__PURE__ */ new Map();
          this.h = /* @__PURE__ */ new Map();
          this.g = false;
        }
        p = oh.prototype;
        p.box = function(a, b) {
          a = ph(a);
          this.i.set(a, qh);
          this.h.set(a, b);
          return this;
        };
        p.W = function(a, b) {
          a = ph(a);
          this.i.set(a, rh);
          this.h.set(a, b);
          return this;
        };
        p.stop = function() {
          this.g = true;
        };
        p.parse = function(a, b, c) {
          a = new lh(a, 0);
          for (this.g = false; a.Pa() && !this.g; ) this.Qd(0, a, b, c);
        };
        p.Qd = function(a, b, c, d) {
          var e = b.Wa();
          if (d && e + 8 > b.getLength()) this.g = true;
          else {
            var f = b.Z(), g = b.Z(), h = sh(g), k2 = false;
            switch (f) {
              case 0:
                f = b.getLength() - e;
                break;
              case 1:
                if (d && b.Wa() + 8 > b.getLength()) {
                  this.g = true;
                  return;
                }
                f = b.Td();
                k2 = true;
            }
            var l = this.h.get(g);
            if (l) {
              var m = null, n = null;
              if (this.i.get(g) == rh) {
                if (d && b.Wa() + 4 > b.getLength()) {
                  this.g = true;
                  return;
                }
                n = b.Z();
                m = n >>> 24;
                n &= 16777215;
              }
              g = e + f;
              c && g > b.getLength() && (g = b.getLength());
              d && g > b.getLength() ? this.g = true : (g -= b.Wa(), b = g > 0 ? b.ac(g) : new Uint8Array(0), b = new lh(b, 0), l({
                name: h,
                parser: this,
                partialOkay: c || false,
                stopOnPartial: d || false,
                version: m,
                flags: n,
                reader: b,
                size: f,
                start: e + a,
                has64BitSize: k2
              }));
            } else b.skip(Math.min(e + f - b.Wa(), b.getLength() - b.Wa()));
          }
        };
        function th(a) {
          for (var b = uh(a); a.reader.Pa() && !a.parser.g; ) a.parser.Qd(a.start + b, a.reader, a.partialOkay, a.stopOnPartial);
        }
        function vh(a) {
          for (var b = uh(a), c = a.reader.Z(), d = 0; d < c && (a.parser.Qd(a.start + b, a.reader, a.partialOkay, a.stopOnPartial), !a.parser.g); d++) ;
        }
        function wh(a) {
          var b = uh(a);
          for (a.reader.skip(78); a.reader.Pa() && !a.parser.g; ) a.parser.Qd(a.start + b, a.reader, a.partialOkay, a.stopOnPartial);
        }
        function xh(a) {
          var b = uh(a);
          a.reader.skip(8);
          var c = a.reader.Ha();
          a.reader.skip(6);
          c == 2 ? a.reader.skip(48) : a.reader.skip(12);
          for (c == 1 && a.reader.skip(16); a.reader.Pa() && !a.parser.g; ) a.parser.Qd(a.start + b, a.reader, a.partialOkay, a.stopOnPartial);
        }
        function yh(a) {
          return function(b) {
            a(b.reader.ac(b.reader.getLength() - b.reader.Wa()));
          };
        }
        function ph(a) {
          var b = 0;
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) b = b << 8 | c.value.charCodeAt(0);
          return b;
        }
        function sh(a) {
          return String.fromCharCode(a >> 24 & 255, a >> 16 & 255, a >> 8 & 255, a & 255);
        }
        function uh(a) {
          return 8 + (a.has64BitSize ? 8 : 0) + (a.flags != null ? 4 : 0);
        }
        S("shaka.util.Mp4Parser", oh);
        oh.headerSize = uh;
        oh.typeToString = sh;
        oh.allData = yh;
        oh.audioSampleEntry = xh;
        oh.visualSampleEntry = wh;
        oh.sampleDescription = vh;
        oh.children = th;
        oh.prototype.parseNext = oh.prototype.Qd;
        oh.prototype.parse = oh.prototype.parse;
        oh.prototype.stop = oh.prototype.stop;
        oh.prototype.fullBox = oh.prototype.W;
        oh.prototype.box = oh.prototype.box;
        var qh = 0, rh = 1;
        function zh(a) {
          var b = this;
          this.g = [];
          this.h = [];
          this.data = [];
          new oh().box("moov", th).box("moof", th).W("pssh", function(c) {
            if (!(c.version > 1)) {
              var d = Kb(c.reader.h, -12, c.size);
              b.data.push(d);
              b.g.push(jc(c.reader.ac(16)));
              if (c.version > 0) {
                d = c.reader.Z();
                for (var e = 0; e < d; e++) {
                  var f = jc(c.reader.ac(16));
                  b.h.push(f);
                }
              }
            }
          }).parse(a);
        }
        function Ah(a, b, c, d) {
          var e = a.length, f = 12 + b.length + 4 + e;
          d > 0 && (f += 4 + 16 * c.size);
          var g = new Uint8Array(f), h = Ob(g), k2 = 0;
          h.setUint32(k2, f);
          k2 += 4;
          h.setUint32(k2, 1886614376);
          k2 += 4;
          d < 1 ? h.setUint32(k2, 0) : h.setUint32(k2, 16777216);
          k2 += 4;
          g.set(b, k2);
          k2 += b.length;
          if (d > 0) for (h.setUint32(k2, c.size), k2 += 4, b = u(c), c = b.next(); !c.done; c = b.next()) c = ic(c.value), g.set(c, k2), k2 += c.length;
          h.setUint32(k2, e);
          g.set(a, k2 + 4);
          return g;
        }
        ;
        function Bh(a) {
          var b = this;
          this.F = a;
          this.j = this.C = null;
          this.ea = this.R = false;
          this.I = 0;
          this.g = null;
          this.u = new Tc();
          this.i = /* @__PURE__ */ new Map();
          this.V = [];
          this.D = /* @__PURE__ */ new Map();
          this.J = false;
          this.m = new Lg();
          this.h = null;
          this.A = function(c) {
            c.severity == 2 && b.m.reject(c);
            a.onError(c);
          };
          this.Y = /* @__PURE__ */ new Map();
          this.aa = /* @__PURE__ */ new Map();
          this.K = new Bf(function() {
            return Ch(b);
          });
          this.P = false;
          this.M = [];
          this.X = false;
          this.G = new Bf(function() {
            Dh(b);
          });
          this.m.catch(function() {
          });
          this.l = new hh(function() {
            return Eh(b);
          });
          this.O = false;
          this.L = this.H = null;
          this.S = function() {
            return false;
          };
        }
        p = Bh.prototype;
        p.destroy = function() {
          return this.l.destroy();
        };
        function Eh(a) {
          return Q(function(b) {
            switch (b.g) {
              case 1:
                return a.u.release(), a.u = null, a.m.reject(), a.G.stop(), a.G = null, a.K.stop(), a.K = null, F(b, Fh(a), 2);
              case 2:
                if (!a.j) {
                  b.B(3);
                  break;
                }
                ra(b, 4);
                return F(b, a.j.setMediaKeys(null), 6);
              case 6:
                ta(b, 5);
                break;
              case 4:
                ua(b);
              case 5:
                a.j = null;
              case 3:
                a.g = null, a.C = null, a.D = /* @__PURE__ */ new Map(), a.h = null, a.A = function() {
                }, a.F = null, a.O = false, a.H = null, H(b);
            }
          });
        }
        p.configure = function(a, b) {
          this.h = a;
          b && (this.S = b);
          this.G && this.R && this.g && this.G.wa(this.h.updateExpirationTime);
        };
        function Gh(a, b, c) {
          a.ea = true;
          a.D = /* @__PURE__ */ new Map();
          a.P = c;
          return Hh(a, b, false);
        }
        function Ih(a, b, c, d) {
          d = d === void 0 ? true : d;
          a.D = /* @__PURE__ */ new Map();
          c = u(c);
          for (var e = c.next(); !e.done; e = c.next()) a.D.set(e.value, { initData: null, initDataType: null });
          c = u(a.h.persistentSessionsMetadata);
          for (e = c.next(); !e.done; e = c.next()) e = e.value, a.D.set(e.sessionId, { initData: e.initData, initDataType: e.initDataType });
          a.P = a.D.size > 0;
          return Hh(a, b, d);
        }
        function Jh(a, b, c, d, e, f) {
          var g, h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) return g = [], f.length && g.push(f[0].contentType), e.length && g.push(e[0].contentType), h = function(q) {
              q = nc(b, q, null);
              q.licenseServerUri = c;
              q.serverCertificate = d;
              q.persistentStateRequired = true;
              q.sessionType = "persistent-license";
              return q;
            }, k2 = qg(g), k2.video && (l = h(f[0].encryptionScheme || ""), k2.video.drmInfos.push(l)), k2.audio && (m = h(e[0].encryptionScheme || ""), k2.audio.drmInfos.push(m)), F(n, Qf([k2], true, a.O, []), 2);
            ih(a.l);
            return n.return(Kh(a, [k2]));
          });
        }
        function Hh(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C;
          return Q(function(E) {
            if (E.g == 1) {
              Lh(a.h.clearKeys, b);
              d = b.some(function(D) {
                return D.video && D.video.drmInfos.length || D.audio && D.audio.drmInfos.length ? true : false;
              });
              e = jh(a.h.servers);
              f = jh(a.h.advanced || {});
              !d && c && Mh(b, e);
              g = /* @__PURE__ */ new WeakSet();
              h = u(b);
              for (k2 = h.next(); !k2.done; k2 = h.next()) for (l = k2.value, m = Nh(l), n = u(m), q = n.next(); !q.done; q = n.next()) r = q.value, g.has(r) || (g.add(r), Oh(r, e, f, a.h.keySystemsMapping));
              t = function(D, B) {
                var G = [];
                D = u(D);
                for (var I = D.next(); !I.done; I = D.next()) {
                  I = I.value;
                  var J = I[B] || f.has(I.keySystem) && f.get(I.keySystem)[B] || "", L;
                  if (L = J == "") L = (L = I.keySystem) ? !!L.match(/^com\.widevine\.alpha/) : false;
                  L && (B == "audioRobustness" ? J = [a.h.defaultAudioRobustnessForWidevine] : B == "videoRobustness" && (J = [a.h.defaultVideoRobustnessForWidevine]));
                  if (typeof J === "string") G.push(I);
                  else if (Array.isArray(J)) for (J.length === 0 && (J = [""]), J = u(J), L = J.next(); !L.done; L = J.next()) {
                    var K = {};
                    G.push(Object.assign({}, I, (K[B] = L.value, K)));
                  }
                }
                return G;
              };
              w = /* @__PURE__ */ new WeakSet();
              v = u(b);
              for (z = v.next(); !z.done; z = v.next()) y = z.value, y.video && !w.has(y.video) && (y.video.drmInfos = t(y.video.drmInfos, "videoRobustness"), y.video.drmInfos = t(y.video.drmInfos, "audioRobustness"), w.add(y.video)), y.audio && !w.has(y.audio) && (y.audio.drmInfos = t(y.audio.drmInfos, "videoRobustness"), y.audio.drmInfos = t(y.audio.drmInfos, "audioRobustness"), w.add(y.audio));
              return F(E, Qf(b, a.P, a.O, a.h.preferredKeySystems), 2);
            }
            ih(a.l);
            A = d || e.size > 0;
            if (!A) return a.R = true, E.return(Promise.resolve());
            C = Kh(a, b);
            return E.return(d ? C : C.catch(function() {
            }));
          });
        }
        function Ph(a) {
          var b;
          return Q(function(c) {
            switch (c.g) {
              case 1:
                if (a.j.mediaKeys) return c.return();
                if (!a.H) {
                  c.B(2);
                  break;
                }
                return F(c, a.H, 3);
              case 3:
                return ih(a.l), c.return();
              case 2:
                return ra(c, 4), a.H = a.j.setMediaKeys(a.C), F(c, a.H, 6);
              case 6:
                ta(c, 5);
                break;
              case 4:
                b = ua(c), a.A(new U(2, 6, 6003, b.message));
              case 5:
                ih(a.l), H(c);
            }
          });
        }
        function Qh(a, b) {
          return Q(function(c) {
            if (c.g == 1) return F(c, Ph(a), 2);
            Rh(a, b.initDataType, Kb(b.initData));
            H(c);
          });
        }
        p.cc = function(a) {
          var b = this, c, d;
          return Q(function(e) {
            if (e.g == 1) {
              if (b.j === a) return e.return();
              if (!b.C) return b.u.ua(a, "encrypted", function() {
                b.A(new U(2, 6, 6010));
              }), e.return();
              b.j = a;
              b.h.delayLicenseRequestUntilPlayed && b.u.ua(b.j, "play", function() {
                for (var f = u(b.M), g = f.next(); !g.done; g = f.next()) Sh(b, g.value);
                b.X = true;
                b.M = [];
              });
              b.j.remote ? (b.u.o(b.j.remote, "connect", function() {
                return Fh(b);
              }), b.u.o(b.j.remote, "connecting", function() {
                return Fh(b);
              }), b.u.o(b.j.remote, "disconnect", function() {
                return Fh(b);
              })) : "webkitCurrentPlaybackTargetIsWireless" in b.j && b.u.o(b.j, "webkitcurrentplaybacktargetiswirelesschanged", function() {
                return Fh(b);
              });
              b.L = b.g ? b.g.initData.find(function(f) {
                return f.initData.length > 0;
              }) || null : null;
              c = b.g.keySystem;
              return (d = Rb().Kh(c)) || !(b.L || b.D.size || b.h.parseInbandPsshEnabled) ? (b.u.o(b.j, "encrypted", function(f) {
                return Qh(b, f);
              }), e.B(2)) : F(e, Ph(b), 2);
            }
            Th(b).catch(function() {
            });
            H(e);
          });
        };
        function Uh(a) {
          var b, c, d, e, f;
          return Q(function(g) {
            switch (g.g) {
              case 1:
                if (!a.C || !a.g) return g.return();
                if (!a.g.serverCertificateUri || a.g.serverCertificate && a.g.serverCertificate.length) {
                  g.B(2);
                  break;
                }
                b = $g([a.g.serverCertificateUri], a.h.retryParameters);
                ra(g, 3);
                c = a.F.Dc.request(5, b, { isPreload: a.S() });
                return F(g, c.promise, 5);
              case 5:
                d = g.h;
                a.g.serverCertificate = Kb(d.data);
                ta(g, 4);
                break;
              case 3:
                throw e = ua(g), new U(2, 6, 6017, e);
              case 4:
                if (a.l.g) return g.return();
              case 2:
                if (!a.g.serverCertificate || !a.g.serverCertificate.length) return g.return();
                ra(g, 6);
                return F(g, a.C.setServerCertificate(a.g.serverCertificate), 8);
              case 8:
                ta(g, 0);
                break;
              case 6:
                throw f = ua(g), new U(2, 6, 6004, f.message);
            }
          });
        }
        function Vh(a, b) {
          var c, d, e;
          return Q(function(f) {
            if (f.g == 1) return F(f, Wh(a, b, { initData: null, initDataType: null }), 2);
            if (f.g != 3) {
              c = f.h;
              if (!c) return f.return();
              d = [];
              if (e = a.i.get(c)) e.Rb = new Lg(), d.push(e.Rb);
              d.push(c.remove());
              return F(f, Promise.all(d), 3);
            }
            a.i.delete(c);
            H(f);
          });
        }
        function Th(a) {
          var b, c, d, e, f;
          return Q(function(g) {
            if (g.g == 1) {
              if (!a.D.size) return g.B(2);
              a.D.forEach(function(h, k2) {
                Wh(a, k2, h);
              });
              return F(g, a.m, 3);
            }
            if (g.g != 2) {
              b = a.g && a.g.keyIds || /* @__PURE__ */ new Set([]);
              if (b.size > 0 && Xh(a)) return g.return(a.m);
              a.J = false;
              a.m = new Lg();
              a.m.catch(function() {
              });
            }
            c = (a.g ? a.g.initData : []) || [];
            d = u(c);
            for (e = d.next(); !e.done; e = d.next()) f = e.value, Rh(a, f.initDataType, f.initData);
            Yh(a) && a.m.resolve();
            return g.return(a.m);
          });
        }
        function Rh(a, b, c) {
          if (c.length) {
            if (a.h.ignoreDuplicateInitData) {
              var d = a.i.values();
              d = u(d);
              for (var e = d.next(); !e.done; e = d.next()) if (Jb(c, e.value.initData)) return;
              var f = false;
              a.D.forEach(function(g) {
                !f && Jb(c, g.initData) && (f = true);
              });
              if (f) return;
            }
            a.J = true;
            a.i.size > 0 && Yh(a) && (a.m.resolve(), a.J = false, a.m = new Lg(), a.m.catch(function() {
            }));
            Zh(a, b, c, a.g.sessionType);
          }
        }
        function $h(a) {
          a = a.i.keys();
          a = lb(a, function(b) {
            return b.sessionId;
          });
          return Array.from(a);
        }
        p.nh = function() {
          var a = this, b = this.i.keys();
          b = lb(b, function(c) {
            var d = a.i.get(c);
            return { sessionId: c.sessionId, sessionType: d.type, initData: d.initData, initDataType: d.initDataType };
          });
          return Array.from(b);
        };
        p.me = function() {
          var a = Infinity, b = this.i.keys();
          b = u(b);
          for (var c = b.next(); !c.done; c = b.next()) c = c.value, isNaN(c.expiration) || (a = Math.min(a, c.expiration));
          return a;
        };
        function ai(a) {
          return a.I ? a.I : NaN;
        }
        p.uf = function() {
          return kh(this.aa);
        };
        function Kh(a, b) {
          var c, d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                c = /* @__PURE__ */ new Map();
                d = bi(a, b, c);
                if (!d) {
                  if (!navigator.requestMediaKeySystemAccess) throw new U(2, 6, 6020);
                  throw new U(2, 6, 6001);
                }
                ih(a.l);
                ra(l, 2);
                d.getConfiguration();
                var m = e = a.h.keySystemsMapping[d.keySystem] || d.keySystem, n = c.get(e), q = [], r = [], t = [], w = [], v = [], z = /* @__PURE__ */ new Set(), y = /* @__PURE__ */ new Set();
                ci(n, q, r, w, t, v, z, y);
                var A = a.P ? "persistent-license" : "temporary";
                m = {
                  keySystem: m,
                  encryptionScheme: q[0],
                  licenseServerUri: r[0],
                  distinctiveIdentifierRequired: n[0].distinctiveIdentifierRequired,
                  persistentStateRequired: n[0].persistentStateRequired,
                  sessionType: n[0].sessionType || A,
                  audioRobustness: n[0].audioRobustness || "",
                  videoRobustness: n[0].videoRobustness || "",
                  serverCertificate: w[0],
                  serverCertificateUri: t[0],
                  initData: v,
                  keyIds: z
                };
                y.size > 0 && (m.keySystemUris = y);
                n = u(n);
                for (y = n.next(); !y.done; y = n.next()) y = y.value, y.distinctiveIdentifierRequired && (m.distinctiveIdentifierRequired = y.distinctiveIdentifierRequired), y.persistentStateRequired && (m.persistentStateRequired = y.persistentStateRequired);
                a.g = m;
                if (!a.g.licenseServerUri) throw new U(2, 6, 6012, a.g.keySystem);
                return F(l, d.createMediaKeys(), 4);
              case 4:
                f = l.h;
                ih(a.l);
                a.C = f;
                if (!(a.h.minHdcpVersion != "" && "getStatusForPolicy" in a.C)) {
                  l.B(5);
                  break;
                }
                ra(l, 6);
                return F(l, a.C.getStatusForPolicy({ minHdcpVersion: a.h.minHdcpVersion }), 8);
              case 8:
                g = l.h;
                if (g != "usable") throw new U(2, 6, 6018);
                ih(a.l);
                ta(l, 5, 2);
                break;
              case 6:
                h = ua(l, 2);
                if (h instanceof U) throw h;
                throw new U(2, 6, 6019, h.message);
              case 5:
                return a.R = true, a.G.wa(a.h.updateExpirationTime), F(l, Uh(a), 9);
              case 9:
                ih(a.l);
                ta(l, 0);
                break;
              case 2:
                k2 = ua(l);
                ih(a.l, k2);
                a.g = null;
                if (k2 instanceof U) throw k2;
                throw new U(2, 6, 6002, k2.message);
            }
          });
        }
        function bi(a, b, c) {
          for (var d = u(b), e = d.next(); !e.done; e = d.next()) {
            e = u(Nh(e.value));
            for (var f = e.next(); !f.done; f = e.next()) f = f.value, c.has(f.keySystem) || c.set(f.keySystem, []), c.get(f.keySystem).push(f);
          }
          if (c.size == 1 && c.has("")) throw new U(2, 6, 6e3);
          d = a.h.preferredKeySystems;
          d.length || (e = jh(a.h.servers), e.size == 1 && (d = Array.from(e.keys())));
          e = u(d);
          var g = e.next();
          for (f = {}; !g.done; f = { wj: void 0 }, g = e.next()) {
            f.wj = g.value;
            g = u(b);
            for (var h = g.next(); !h.done; h = g.next()) if (h = h.value.decodingInfos.find(/* @__PURE__ */ function(n) {
              return function(q) {
                return q.supported && q.keySystemAccess != null && q.keySystemAccess.keySystem == n.wj;
              };
            }(f))) return h.keySystemAccess;
          }
          e = u([true, false]);
          for (f = e.next(); !f.done; f = e.next()) for (f = f.value, g = u(b), h = g.next(); !h.done; h = g.next()) {
            h = u(h.value.decodingInfos);
            for (var k2 = h.next(); !k2.done; k2 = h.next()) if (k2 = k2.value, k2.supported && k2.keySystemAccess) {
              var l = k2.keySystemAccess.keySystem;
              if (!d.includes(l)) {
                var m = c.get(l);
                !m && a.h.keySystemsMapping[l] && (m = c.get(a.h.keySystemsMapping[l]));
                l = u(m);
                for (m = l.next(); !m.done; m = l.next()) if (!!m.value.licenseServerUri == f) return k2.keySystemAccess;
              }
            }
          }
          return null;
        }
        function di(a) {
          Yh(a) && a.m.resolve();
        }
        function ei(a, b) {
          new Bf(function() {
            b.loaded = true;
            di(a);
          }).$(gi);
        }
        function Wh(a, b, c) {
          var d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                try {
                  d = a.C.createSession("persistent-license");
                } catch (n) {
                  return e = new U(2, 6, 6005, n.message), a.A(e), m.return(Promise.reject(e));
                }
                a.u.o(d, "message", function(n) {
                  a.j && a.h.delayLicenseRequestUntilPlayed && a.j.paused && !a.X ? a.M.push(n) : Sh(a, n);
                });
                a.u.o(d, "keystatuseschange", function(n) {
                  return hi(a, n);
                });
                f = { initData: c.initData, initDataType: c.initDataType, loaded: false, Nh: Infinity, Rb: null, type: "persistent-license" };
                a.i.set(d, f);
                ra(m, 2);
                return F(
                  m,
                  d.load(b),
                  4
                );
              case 4:
                return g = m.h, ih(a.l), g || (a.i.delete(d), h = a.h.persistentSessionOnlinePlayback ? 1 : 2, a.A(new U(h, 6, 6013)), f.loaded = true), ei(a, f), di(a), m.return(d);
              case 2:
                k2 = ua(m), ih(a.l, k2), a.i.delete(d), l = a.h.persistentSessionOnlinePlayback ? 1 : 2, a.A(new U(l, 6, 6005, k2.message)), f.loaded = true, di(a);
              case 3:
                return m.return(Promise.resolve());
            }
          });
        }
        function Zh(a, b, c, d) {
          try {
            var e = a.C.createSession(d);
          } catch (f) {
            a.A(new U(2, 6, 6005, f.message));
            return;
          }
          a.u.o(e, "message", function(f) {
            a.j && a.h.delayLicenseRequestUntilPlayed && a.j.paused && !a.X ? a.M.push(f) : Sh(a, f);
          });
          a.u.o(e, "keystatuseschange", function(f) {
            return hi(a, f);
          });
          a.i.set(e, { initData: c, initDataType: b, loaded: false, Nh: Infinity, Rb: null, type: d });
          try {
            c = a.h.initDataTransform(c, b, a.g);
          } catch (f) {
            b = f;
            f instanceof U || (b = new U(2, 6, 6016, f));
            a.A(b);
            return;
          }
          a.h.logLicenseExchange && fc(c);
          e.generateRequest(b, c).catch(function(f) {
            if (!a.l.g) {
              a.i.delete(e);
              var g = f.errorCode;
              if (g && g.systemCode) {
                var h = g.systemCode;
                h < 0 && (h += 4294967296);
                h = "0x" + h.toString(16);
              }
              a.A(new U(2, 6, 6006, f.message, f, h));
            }
          });
        }
        function ii(a) {
          return Q(function(b) {
            return b.g == 1 ? a.J ? F(b, a.m, 3) : b.B(0) : F(b, Promise.all(a.V.map(function(c) {
              return c.promise;
            })), 0);
          });
        }
        function Sh(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z;
          Q(function(y) {
            switch (y.g) {
              case 1:
                c = b.target;
                a.h.logLicenseExchange && fc(b.message);
                d = a.i.get(c);
                e = a.g.licenseServerUri;
                f = a.h.advanced[a.g.keySystem];
                b.messageType == "individualization-request" && f && f.individualizationServer && (e = f.individualizationServer);
                g = $g([e], a.h.retryParameters);
                g.body = b.message;
                g.method = "POST";
                g.licenseRequestType = b.messageType;
                g.sessionId = c.sessionId;
                g.drmInfo = a.g;
                d && (g.initData = d.initData, g.initDataType = d.initDataType);
                if (f && f.headers) for (h in f.headers) g.headers[h] = f.headers[h];
                if (a.g.keySystem === "org.w3.clearkey") {
                  var A = g, C = a.g;
                  try {
                    var E = Zb(A.body);
                    if (E) {
                      var D = JSON.parse(E);
                      D.type || (D.type = C.sessionType, A.body = $b(JSON.stringify(D)));
                    }
                  } catch (B) {
                  }
                }
                if (zg(a.g.keySystem)) if (A = Xb(g.body, true, true), A.includes("PlayReadyKeyMessage")) {
                  A = Kd(A, "PlayReadyKeyMessage");
                  C = Ud(A, "HttpHeader");
                  C = u(C);
                  for (E = C.next(); !E.done; E = C.next()) D = E.value, E = Ud(D, "name")[0], D = Ud(D, "value")[0], g.headers[Sd(E)] = Sd(D);
                  A = Ud(A, "Challenge")[0];
                  g.body = hc(Sd(A));
                } else g.headers["Content-Type"] = "text/xml; charset=utf-8";
                k2 = Date.now();
                ra(y, 2);
                m = a.F.Dc.request(2, g, { isPreload: a.S() });
                a.V.push(m);
                return F(y, m.promise, 4);
              case 4:
                l = y.h;
                Qc(a.V, m);
                ta(y, 3);
                break;
              case 2:
                n = ua(y);
                if (a.l.g) return y.return();
                q = { sessionId: c.sessionId, sessionType: d.type, initData: d.initData, initDataType: d.initDataType };
                r = new U(2, 6, 6007, n, q);
                a.i.size == 1 ? (a.A(r), d && d.Rb && d.Rb.reject(r)) : (d && d.Rb && d.Rb.reject(r), a.i.delete(c), Yh(a) && (a.m.resolve(), a.K.$(0.1)));
                return y.return();
              case 3:
                if (a.l.g) return y.return();
                a.I += (Date.now() - k2) / 1e3;
                a.h.logLicenseExchange && fc(l.data);
                ra(y, 5);
                return F(y, c.update(l.data), 7);
              case 7:
                ta(y, 6);
                break;
              case 5:
                return w = (t = ua(y)) && t.message || String(t), v = new U(2, 6, 6008, w), a.A(v), d && d.Rb && d.Rb.reject(v), y.return();
              case 6:
                if (a.l.g) return y.return();
                z = new T("drmsessionupdate");
                a.F.onEvent(z);
                d && (d.Rb && d.Rb.resolve(), ei(a, d));
                H(y);
            }
          });
        }
        function hi(a, b) {
          b = b.target;
          var c = a.i.get(b), d = false;
          b.keyStatuses.forEach(function(f, g) {
            if (typeof g == "string") {
              var h = g;
              g = f;
              f = h;
            }
            h = Rb();
            if (zg(a.g.keySystem) && g.byteLength == 16 && h.Yh()) {
              h = Ob(g);
              var k2 = h.getUint32(0, true), l = h.getUint16(4, true), m = h.getUint16(6, true);
              h.setUint32(0, k2, false);
              h.setUint16(4, l, false);
              h.setUint16(6, m, false);
            }
            f != "status-pending" && (c.loaded = true);
            f == "expired" && (d = true);
            g = jc(g).slice(0, 32);
            a.Y.set(g, f);
          });
          var e = b.expiration - Date.now();
          (e < 0 || d && e < 1e3) && c && !c.Rb && (a.i.delete(b), ji(b));
          Yh(a) && (a.m.resolve(), a.K.$(ki));
        }
        function Ch(a) {
          var b = a.Y, c = a.aa;
          c.clear();
          b.forEach(function(d, e) {
            return c.set(e, d);
          });
          b = Array.from(c.values());
          b.length && b.every(function(d) {
            return d == "expired";
          }) && a.A(new U(2, 6, 6014));
          a.F.Rf(kh(c));
        }
        function li() {
          var a, b, c, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P, O, M, R, W;
          return Q(function(wa) {
            if (wa.g == 1) {
              a = "org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" ");
              if (!(window2.MediaKeys && window2.navigator && window2.navigator.requestMediaKeySystemAccess && window2.MediaKeySystemAccess && window2.MediaKeySystemAccess.prototype.getConfiguration)) {
                b = {};
                c = u(a);
                for (d = c.next(); !d.done; d = c.next()) e = d.value, b[e] = null;
                return wa.return(b);
              }
              f = "1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" ");
              g = ["SW_SECURE_CRYPTO", "SW_SECURE_DECODE", "HW_SECURE_CRYPTO", "HW_SECURE_DECODE", "HW_SECURE_ALL"];
              h = ["150", "2000", "3000"];
              k2 = { "com.widevine.alpha": g, "com.widevine.alpha.experiment": g, "com.microsoft.playready.recommendation": h };
              l = [
                { contentType: 'video/mp4; codecs="avc1.42E01E"' },
                { contentType: 'video/webm; codecs="vp8"' }
              ];
              m = [{ contentType: 'audio/mp4; codecs="mp4a.40.2"' }, { contentType: 'audio/webm; codecs="opus"' }];
              n = { videoCapabilities: l, audioCapabilities: m, initDataTypes: ["cenc", "sinf", "skd", "keyids"] };
              q = [null, "cenc", "cbcs"];
              r = /* @__PURE__ */ new Map();
              t = Rb();
              w = function(Y, Ka) {
                var Na, La, Ea, za, Fa, Da, Aa, Ca, gb, ib, jb, Ab, yb;
                return Q(function(Wa) {
                  switch (Wa.g) {
                    case 1:
                      return ra(Wa, 2), F(Wa, Ka.createMediaKeys(), 5);
                    case 5:
                      Na = Wa.h;
                    case 4:
                      ta(Wa, 3);
                      break;
                    case 2:
                      return ua(Wa), Wa.return();
                    case 3:
                      Ea = (La = Ka.getConfiguration().sessionTypes) ? La.includes("persistent-license") : false;
                      t.oj() && (Ea = false);
                      za = Ka.getConfiguration().videoCapabilities;
                      Fa = Ka.getConfiguration().audioCapabilities;
                      Da = { persistentState: Ea, encryptionSchemes: [], videoRobustnessLevels: [], audioRobustnessLevels: [], minHdcpVersions: [] };
                      r.has(Y) && r.get(Y) ? Da = r.get(Y) : r.set(Y, Da);
                      (Aa = za[0].encryptionScheme) && !Da.encryptionSchemes.includes(Aa) && Da.encryptionSchemes.push(Aa);
                      (Ca = za[0].robustness) && !Da.videoRobustnessLevels.includes(Ca) && Da.videoRobustnessLevels.push(Ca);
                      (gb = Fa[0].robustness) && !Da.audioRobustnessLevels.includes(gb) && Da.audioRobustnessLevels.push(gb);
                      if ("getStatusForPolicy" in Na) {
                        ib = [];
                        jb = u(f);
                        Ab = jb.next();
                        for (yb = {}; !Ab.done; yb = { re: void 0 }, Ab = jb.next()) yb.re = Ab.value, Da.minHdcpVersions.includes(yb.re) || ib.push(Na.getStatusForPolicy({ minHdcpVersion: yb.re }).then(/* @__PURE__ */ function(Yd) {
                          return function(Oc) {
                            Oc != "usable" || Da.minHdcpVersions.includes(Yd.re) || Da.minHdcpVersions.push(Yd.re);
                          };
                        }(yb)));
                        return F(Wa, Promise.all(ib), 0);
                      }
                      Wa.B(0);
                  }
                });
              };
              v = function(Y, Ka, Na, La) {
                var Ea, za, Fa, Da, Aa, Ca, gb, ib, jb, Ab, yb;
                return Q(function(Wa) {
                  switch (Wa.g) {
                    case 1:
                      ra(Wa, 2);
                      Ea = Gd(n);
                      za = u(Ea.videoCapabilities);
                      for (Fa = za.next(); !Fa.done; Fa = za.next()) Da = Fa.value, Da.encryptionScheme = Ka, Da.robustness = Na;
                      Aa = u(Ea.audioCapabilities);
                      for (Ca = Aa.next(); !Ca.done; Ca = Aa.next()) gb = Ca.value, gb.encryptionScheme = Ka, gb.robustness = La;
                      ib = Gd(Ea);
                      ib.persistentState = "required";
                      ib.sessionTypes = ["persistent-license"];
                      jb = [ib, Ea];
                      yb = Rb();
                      return yb.Ka() == "MOBILE" ? F(Wa, Ff(5, navigator.requestMediaKeySystemAccess(Y, jb)), 7) : F(Wa, navigator.requestMediaKeySystemAccess(
                        Y,
                        jb
                      ), 6);
                    case 6:
                      Ab = Wa.h;
                      Wa.B(5);
                      break;
                    case 7:
                      Ab = Wa.h;
                    case 5:
                      return F(Wa, w(Y, Ab), 8);
                    case 8:
                      ta(Wa, 0);
                      break;
                    case 2:
                      ua(Wa), H(Wa);
                  }
                });
              };
              z = function(Y, Ka, Na, La) {
                var Ea, za, Fa, Da;
                return Q(function(Aa) {
                  switch (Aa.g) {
                    case 1:
                      return ra(Aa, 2), Ea = { type: "media-source", video: { contentType: l[0].contentType, width: 640, height: 480, bitrate: 1, framerate: 1 }, audio: { contentType: m[0].contentType, channels: 2, bitrate: 1, samplerate: 1 }, keySystemConfiguration: { keySystem: Y, video: { encryptionScheme: Ka, robustness: Na }, audio: {
                        encryptionScheme: Ka,
                        robustness: La
                      } } }, Fa = Rb(), Fa.Ka() == "MOBILE" ? F(Aa, Ff(5, navigator.mediaCapabilities.decodingInfo(Ea)), 7) : F(Aa, navigator.mediaCapabilities.decodingInfo(Ea), 6);
                    case 6:
                      za = Aa.h;
                      Aa.B(5);
                      break;
                    case 7:
                      za = Aa.h;
                    case 5:
                      return Da = za.keySystemAccess, F(Aa, w(Y, Da), 8);
                    case 8:
                      ta(Aa, 0);
                      break;
                    case 2:
                      ua(Aa), H(Aa);
                  }
                });
              };
              y = u(a);
              for (A = y.next(); !A.done; A = y.next()) C = A.value, r.set(C, null);
              E = function(Y) {
                return Rb().Ja() === "WEBKIT" && Y === "org.w3.clearkey" ? false : true;
              };
              D = [];
              B = u(q);
              for (G = B.next(); !G.done; G = B.next()) for (I = G.value, J = u(a), L = J.next(); !L.done; L = J.next()) K = L.value, E(K) && (D.push(v(K, I, "", "")), D.push(z(K, I, "", "")));
              N = u(a);
              for (P = N.next(); !P.done; P = N.next()) for (O = P.value, M = u(k2[O] || []), R = M.next(); !R.done; R = M.next()) W = R.value, E(O) && (D.push(v(O, null, W, "")), D.push(v(O, null, "", W)), D.push(z(O, null, W, "")), D.push(z(O, null, "", W)));
              return F(wa, Promise.all(D), 2);
            }
            return wa.return(kh(r));
          });
        }
        function ji(a) {
          return Q(function(b) {
            if (b.g == 1) return ra(b, 2), F(b, Ff(mi, Promise.all([a.close().catch(function() {
            }), a.closed])), 4);
            if (b.g != 2) return ta(b, 0);
            ua(b);
            H(b);
          });
        }
        function Fh(a) {
          var b;
          return Q(function(c) {
            b = Array.from(a.i.entries());
            a.i.clear();
            return F(c, Promise.all(b.map(function(d) {
              d = u(d);
              var e = d.next().value;
              var f = d.next().value;
              return Q(function(g) {
                if (g.g == 1) return ra(g, 2), a.ea || a.D.has(e.sessionId) || f.type !== "persistent-license" || a.h.persistentSessionOnlinePlayback ? F(g, ji(e), 5) : F(g, e.remove(), 5);
                if (g.g != 2) return ta(g, 0);
                ua(g);
                H(g);
              });
            })), 0);
          });
        }
        function Nh(a) {
          return (a.video ? a.video.drmInfos : []).concat(a.audio ? a.audio.drmInfos : []);
        }
        function Dh(a) {
          a.i.forEach(function(b, c) {
            var d = b.Nh, e = c.expiration;
            isNaN(e) && (e = Infinity);
            e != d && (a.F.onExpirationUpdated(c.sessionId, e), b.Nh = e);
          });
        }
        function Yh(a) {
          a = a.i.values();
          return mb(a, function(b) {
            return b.loaded;
          });
        }
        function Xh(a) {
          for (var b = u(a.g && a.g.keyIds || /* @__PURE__ */ new Set([])), c = b.next(); !c.done; c = b.next()) if (a.Y.get(c.value) !== "usable") return false;
          return true;
        }
        function Mh(a, b) {
          var c = [];
          b.forEach(function(d, e) {
            c.push({ keySystem: e, licenseServerUri: d, distinctiveIdentifierRequired: false, persistentStateRequired: false, audioRobustness: "", videoRobustness: "", serverCertificate: null, serverCertificateUri: "", initData: [], keyIds: /* @__PURE__ */ new Set() });
          });
          a = u(a);
          for (b = a.next(); !b.done; b = a.next()) b = b.value, b.video && (b.video.drmInfos = c), b.audio && (b.audio.drmInfos = c);
        }
        function ci(a, b, c, d, e, f, g, h) {
          var k2 = [];
          a = u(a);
          for (var l = a.next(), m = {}; !l.done; m = { Ta: void 0 }, l = a.next()) {
            m.Ta = l.value;
            b.includes(m.Ta.encryptionScheme) || b.push(m.Ta.encryptionScheme);
            m.Ta.keySystem == "org.w3.clearkey" && m.Ta.licenseServerUri.startsWith("data:application/json;base64,") ? k2.includes(m.Ta.licenseServerUri) || k2.push(m.Ta.licenseServerUri) : c.includes(m.Ta.licenseServerUri) || c.push(m.Ta.licenseServerUri);
            e.includes(m.Ta.serverCertificateUri) || e.push(m.Ta.serverCertificateUri);
            m.Ta.serverCertificate && (d.some(/* @__PURE__ */ function(r) {
              return function(t) {
                return Jb(t, r.Ta.serverCertificate);
              };
            }(m)) || d.push(m.Ta.serverCertificate));
            if (m.Ta.initData) {
              l = u(m.Ta.initData);
              for (var n = l.next(), q = {}; !n.done; q = { Dh: void 0 }, n = l.next()) q.Dh = n.value, f.some(/* @__PURE__ */ function(r) {
                return function(t) {
                  var w = r.Dh;
                  return t.keyId && t.keyId == w.keyId ? true : t.initDataType == w.initDataType && Jb(t.initData, w.initData);
                };
              }(q)) || f.push(q.Dh);
            }
            if (m.Ta.keyIds) for (l = u(m.Ta.keyIds), n = l.next(); !n.done; n = l.next()) g.add(n.value);
            if (m.Ta.keySystemUris && h) for (m = u(m.Ta.keySystemUris), l = m.next(); !l.done; l = m.next()) h.add(l.value);
          }
          if (k2.length == 1) c.push(k2[0]);
          else if (k2.length > 0) {
            b = [];
            k2 = u(k2);
            for (d = k2.next(); !d.done; d = k2.next()) d = window2.atob(d.value.split("data:application/json;base64,").pop()), d = JSON.parse(d), b.push.apply(b, x(d.keys));
            k2 = JSON.stringify({ keys: b });
            c.push("data:application/json;base64," + window2.btoa(k2));
          }
        }
        function Oh(a, b, c, d) {
          var e = a.keySystem;
          if (e && (e != "org.w3.clearkey" || !a.licenseServerUri)) {
            b.size && b.get(e) && (b = b.get(e), a.licenseServerUri = b);
            a.keyIds || (a.keyIds = /* @__PURE__ */ new Set());
            if (c = c.get(e)) a.distinctiveIdentifierRequired || (a.distinctiveIdentifierRequired = c.distinctiveIdentifierRequired), a.persistentStateRequired || (a.persistentStateRequired = c.persistentStateRequired), a.serverCertificate || (a.serverCertificate = c.serverCertificate), c.sessionType && (a.sessionType = c.sessionType), a.serverCertificateUri || (a.serverCertificateUri = c.serverCertificateUri);
            d[e] && (a.keySystem = d[e]);
            window2.cast && window2.cast.__platform__ && e == "com.microsoft.playready" && (a.keySystem = "com.chromecast.playready");
          }
        }
        function Lh(a, b) {
          a = jh(a);
          if (a.size != 0) {
            a = oc(a);
            b = u(b);
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, c.video && (c.video.drmInfos = [a]), c.audio && (c.audio.drmInfos = [a]);
          }
        }
        var mi = 1, gi = 5, ki = 0.5;
        function ni() {
          this.g = oi;
          this.i = (/* @__PURE__ */ new Map()).set(oi, 2).set(pi, 1);
          this.h = 0;
        }
        function qi(a, b) {
          var c = a.g !== b;
          a.g = b;
          c && b === oi && (a.h = Date.now());
          return c;
        }
        var pi = 0, oi = 1;
        function ui(a, b, c) {
          this.g = a;
          this.i = b;
          this.h = c;
        }
        function vi(a, b) {
          return Q(function(c) {
            if (c.g == 1) return F(c, Lf(a.h, b, a.g.drm.preferredKeySystems, a.g.drm.keySystemsMapping), 2);
            a.g.streaming.dontChooseCodecs || Hf(b, a.g.preferredVideoCodecs, a.g.preferredAudioCodecs, a.g.preferredDecodingAttributes, a.g.preferredTextFormats);
            if (!b.variants.some(jg)) throw new U(2, 4, 4032);
            return c.return(wi(a, b));
          });
        }
        function xi(a, b) {
          var c = a.g.restrictions;
          a = a.i;
          var d = false;
          b = u(b.variants);
          for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            var f = e.allowedByApplication;
            e.allowedByApplication = Kf(e, c, a);
            f != e.allowedByApplication && (d = true);
          }
          return d;
        }
        function wi(a, b) {
          var c = xi(a, b);
          if (b) {
            var d = a.h ? a.h.g : null;
            if (d && a.h.C) {
              for (var e = /* @__PURE__ */ new Set(), f = u(b.variants), g = f.next(); !g.done; g = f.next()) g = g.value, g.audio && e.add(g.audio), g.video && e.add(g.video);
              e = u(e);
              for (f = e.next(); !f.done; f = e.next()) yi(a, d.keySystem, f.value);
            }
            zi(a, b);
          }
          return c;
        }
        function yi(a, b, c) {
          c = u(c.drmInfos);
          for (var d = c.next(); !d.done; d = c.next()) if (d = d.value, d.keySystem == b) {
            d = u(d.initData || []);
            for (var e = d.next(); !e.done; e = d.next()) e = e.value, Rh(a.h, e.initDataType, e.initData);
          }
        }
        function zi(a, b) {
          a = a.h ? a.h.uf() : {};
          var c = Object.keys(a);
          c = c.length && c[0] == "00";
          var d = false, e = false, f = /* @__PURE__ */ new Set(), g = /* @__PURE__ */ new Set(), h = /* @__PURE__ */ new Set();
          b = u(b.variants);
          for (var k2 = b.next(); !k2.done; k2 = b.next()) k2 = k2.value, k2.audio && h.add(k2.audio), k2.video && h.add(k2.video), k2.allowedByApplication ? k2.allowedByKeySystem && (d = true) : e = true;
          h = u(h);
          for (b = h.next(); !b.done; b = h.next()) if (b = b.value, b.keyIds.size) for (b = u(b.keyIds), k2 = b.next(); !k2.done; k2 = b.next()) {
            k2 = k2.value;
            var l = a[c ? "00" : k2];
            l ? Ai.includes(l) && g.add(l) : f.add(k2);
          }
          if (!d) throw a = {
            hasAppRestrictions: e,
            missingKeys: Array.from(f),
            restrictedKeyStatuses: Array.from(g)
          }, new U(2, 4, 4012, a);
        }
        var Ai = ["output-restricted", "internal-error"];
        function Bi() {
        }
        function Ci(a, b) {
          Di.set(a, b);
        }
        function Ei() {
          var a = {};
          Rb();
          if (Fi()) for (var b = u(Di.keys()), c = b.next(); !c.done; c = b.next()) a[c.value] = true;
          b = u(["application/dash+xml", "application/x-mpegurl", "application/vnd.apple.mpegurl", "application/vnd.ms-sstr+xml"]);
          for (c = b.next(); !c.done; c = b.next()) c = c.value, a[c] = Fi() ? Di.has(c) : Gi().canPlayType(c) != "";
          return a;
        }
        function Hi(a, b) {
          if (b) {
            var c = Di.get(b.toLowerCase());
            if (c) return c;
          }
          throw new U(2, 4, 4e3, a, b);
        }
        S("shaka.media.ManifestParser", Bi);
        Bi.unregisterParserByMime = function(a) {
          Di.delete(a);
        };
        Bi.registerParserByMime = Ci;
        Bi.registerParserByExtension = function() {
          Zc("ManifestParser.registerParserByExtension", "Please use an ManifestParser with registerParserByMime function.");
        };
        Bi.AccessibilityPurpose = { Rn: "visually impaired", $m: "hard of hearing", An: "spoken subtitles" };
        var Di = /* @__PURE__ */ new Map();
        S("shaka.config.CodecSwitchingStrategy", { RELOAD: "reload", SMOOTH: "smooth" });
        function Ii(a, b) {
          var c = null, d = null, e = null, f = null, g = a.Z();
          b & 1 && (e = a.Td());
          b & 2 && (f = a.Z());
          b & 8 && (c = a.Z());
          b & 16 && (d = a.Z());
          return { trackId: g, je: c, ke: d, nk: e, Ej: f };
        }
        function Ji(a, b) {
          return b == 1 ? (b = a.Z(), a = a.Z(), { baseMediaDecodeTime: b * 4294967296 + a }) : { baseMediaDecodeTime: a.Z() };
        }
        function Ki(a, b) {
          b == 1 ? (a.skip(8), a.skip(8)) : (a.skip(4), a.skip(4));
          b = a.Z();
          a.skip(4);
          a = a.Ha();
          return { timescale: b, language: String.fromCharCode((a >> 10) + 96) + String.fromCharCode(((a & 960) >> 5) + 96) + String.fromCharCode((a & 31) + 96) };
        }
        function Li(a, b, c) {
          var d = a.Z(), e = [], f = null;
          c & 1 && (f = a.Sh());
          c & 4 && a.skip(4);
          for (var g = 0; g < d; g++) {
            var h = { $h: null, sampleSize: null, cg: null };
            c & 256 && (h.$h = a.Z());
            c & 512 && (h.sampleSize = a.Z());
            c & 1024 && a.skip(4);
            c & 2048 && (h.cg = b == 0 ? a.Z() : a.Sh());
            e.push(h);
          }
          return { Xn: d, Zh: e, Tg: f };
        }
        function Mi(a) {
          a.skip(6);
          a.skip(2);
          a.skip(8);
          var b = a.Ha();
          a.skip(2);
          a.skip(2);
          a.skip(2);
          a = a.Ha() + a.Ha() / 65536;
          return { channelCount: b, sampleRate: a };
        }
        function Ni(a) {
          a = a.Z();
          return { codec: sh(a) };
        }
        function Oi(a) {
          var b = null, c = null, d = a.ac(4);
          var e = String.fromCharCode(d[0]);
          e += String.fromCharCode(d[1]);
          e += String.fromCharCode(d[2]);
          e += String.fromCharCode(d[3]);
          if (e === "nclx") {
            switch (a.Ha()) {
              case 1:
              case 5:
              case 6:
              case 7:
                b = "srgb";
                break;
              case 9:
                b = "rec2020";
                break;
              case 11:
              case 12:
                b = "p3";
            }
            d = a.Ha();
            a.Ha();
            switch (d) {
              case 1:
              case 6:
              case 13:
              case 14:
              case 15:
                c = "SDR";
                break;
              case 16:
                c = "PQ";
                break;
              case 18:
                c = "HLG";
            }
          }
          return { colorGamut: b, Ne: c };
        }
        function Pi(a, b) {
          b = b === void 0 ? false : b;
          a = a.toString(16).toUpperCase();
          return b ? a : ("0" + a).slice(-2);
        }
        function Qi(a) {
          return (a < 10 ? "0" : "") + a;
        }
        ;
        function Ri(a) {
          this.g = a;
        }
        function Si(a) {
          for (var b = [], c = u(a.g), d = c.next(); !d.done; d = c.next()) {
            var e = b, f = e.push;
            var g = d.value;
            d = Ti;
            var h = g.id + 1;
            var k2 = g.stream.width || 0, l = g.stream.height || 0;
            g.type == "audio" && (l = k2 = 0);
            var m = g.duration * g.timescale, n = Math.floor(m / (Ui + 1));
            m = Math.floor(m % (Ui + 1));
            h = new Uint8Array([1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(x(Vi(h, 4)), [0, 0, 0, 0], x(Vi(n, 4)), x(Vi(m, 4)), [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0], x(Vi(k2, 2)), [0, 0], x(Vi(
              l,
              2
            )), [0, 0]));
            h = Ti("tkhd", h);
            k2 = Ti;
            n = g.duration * g.timescale;
            l = Math.floor(n / (Ui + 1));
            n = Math.floor(n % (Ui + 1));
            m = g.stream.language;
            m = m.charCodeAt(0) - 96 << 10 | m.charCodeAt(1) - 96 << 5 | m.charCodeAt(2) - 96;
            l = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(x(Vi(g.timescale, 4)), x(Vi(l, 4)), x(Vi(n, 4)), x(Vi(m, 2)), [0, 0]));
            l = Ti("mdhd", l);
            n = g;
            m = new Uint8Array([]);
            switch (n.type) {
              case "video":
                m = Wi.value();
                break;
              case "audio":
                m = Xi.value();
            }
            n = Ti("hdlr", m);
            a: {
              switch (g.type) {
                case "video":
                  g = Ti(
                    "minf",
                    Ti("vmhd", Yi.value()),
                    Zi.value(),
                    $i(g)
                  );
                  break a;
                case "audio":
                  g = Ti("minf", Ti("smhd", aj.value()), Zi.value(), $i(g));
                  break a;
              }
              g = new Uint8Array([]);
            }
            g = k2("mdia", l, n, g);
            d = d("trak", h, g);
            f.call(e, d);
          }
          b = lc.apply(dc, x(b));
          f = a.g[0];
          c = Ti;
          d = f.duration * f.timescale;
          e = Math.floor(d / (Ui + 1));
          d = Math.floor(d % (Ui + 1));
          e = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3].concat(x(Vi(f.timescale, 4)), x(Vi(e, 4)), x(Vi(d, 4)), [
            0,
            1,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            64,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            255,
            255,
            255,
            255
          ]));
          e = Ti("mvhd", e);
          d = [];
          a = u(a.g);
          for (k2 = a.next(); !k2.done; k2 = a.next()) g = d, h = g.push, k2 = new Uint8Array([0, 0, 0, 0].concat(x(Vi(k2.value.id + 1, 4)), [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])), k2 = Ti("trex", k2), h.call(g, k2);
          a = lc.apply(dc, x(d));
          a = Ti("mvex", a);
          d = [];
          if (f.encrypted) {
            f = u(f.stream.drmInfos);
            for (g = f.next(); !g.done; g = f.next()) if (g = g.value, g.initData) for (g = u(g.initData), h = g.next(); !h.done; h = g.next()) d.push(h.value.initData);
            f = lc.apply(dc, x(d));
          } else f = new Uint8Array([]);
          a = c("moov", e, b, a, f);
          b = bj.value();
          c = new Uint8Array(b.byteLength + a.byteLength);
          c.set(b);
          c.set(a, b.byteLength);
          return c;
        }
        function $i(a) {
          var b = Ti, c = "aac";
          a.codecs.includes("mp3") ? c = "mp3" : a.codecs.includes("ac-3") ? c = Rb().Fe() ? "ec-3" : "ac-3" : a.codecs.includes("ec-3") ? c = "ec-3" : a.codecs.includes("opus") && (c = "opus");
          var d = new Uint8Array([]);
          switch (a.type) {
            case "video":
              if (a.codecs.includes("avc1")) {
                c = a.stream.width || 0;
                d = a.stream.height || 0;
                if (a.Ya.byteLength > 0) var e = Ti("avcC", a.Ya);
                else {
                  e = Ti;
                  for (var f = 7, g = [], h = [], k2 = 0, l = 0, m = 0, n = 0; n < a.Hb.length; n++) {
                    var q = cj(a.Hb[n]);
                    switch (q[0] & 31) {
                      case 7:
                        g.push(q);
                        f += q.length + 2;
                        break;
                      case 8:
                        h.push(q), f += q.length + 2;
                    }
                  }
                  g.length > 0 && (k2 = g[0][1], m = g[0][2], l = g[0][3]);
                  f = new Uint8Array(f);
                  n = 0;
                  f[n++] = 1;
                  f[n++] = k2;
                  f[n++] = m;
                  f[n++] = l;
                  f[n++] = 255;
                  f[n++] = 224 | g.length;
                  for (k2 = 0; k2 < g.length; k2++) f[n++] = (g[k2].length & 65280) >> 8, f[n++] = g[k2].length & 255, f.set(g[k2], n), n += g[k2].length;
                  f[n++] = h.length;
                  for (g = 0; g < h.length; g++) f[n++] = (h[g].length & 65280) >> 8, f[n++] = h[g].length & 255, f.set(h[g], n), n += h[g].length;
                  e = e("avcC", f);
                }
                c = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(x(Vi(c, 2)), x(Vi(d, 2)), [
                  0,
                  72,
                  0,
                  0,
                  0,
                  72,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  1,
                  19,
                  118,
                  105,
                  100,
                  101,
                  111,
                  106,
                  115,
                  45,
                  99,
                  111,
                  110,
                  116,
                  114,
                  105,
                  98,
                  45,
                  104,
                  108,
                  115,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  0,
                  24,
                  17,
                  17
                ]));
                d = "avc1";
                h = dj(a);
                g = new Uint8Array([]);
                a.encrypted && (g = ej(a.stream, a.codecs), d = "encv");
                d = Ti(d, c, e, h, g);
              } else a.codecs.includes("hvc1") && (d = a.stream.width || 0, e = a.stream.height || 0, c = new Uint8Array([]), a.Ya.byteLength > 0 && (c = Ti("hvcC", a.Ya)), d = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0].concat(x(Vi(d, 2)), x(Vi(e, 2)), [
                0,
                72,
                0,
                0,
                0,
                72,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                1,
                19,
                118,
                105,
                100,
                101,
                111,
                106,
                115,
                45,
                99,
                111,
                110,
                116,
                114,
                105,
                98,
                45,
                104,
                108,
                115,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                0,
                24,
                17,
                17
              ])), e = "hvc1", h = dj(a), g = new Uint8Array([]), a.encrypted && (g = ej(a.stream, a.codecs), e = "encv"), d = Ti(e, d, c, h, g));
              break;
            case "audio":
              if (c == "mp3") a = Ti(".mp3", fj(a));
              else if (c == "ac-3") c = Ti("dac3", a.Na), d = "ac-3", e = new Uint8Array([]), a.encrypted && (e = ej(a.stream, a.codecs), d = "enca"), a = Ti(d, fj(a), c, e);
              else if (c == "ec-3") c = Ti("dec3", a.Na), d = "ec-3", e = new Uint8Array([]), a.encrypted && (e = ej(a.stream, a.codecs), d = "enca"), a = Ti(d, fj(a), c, e);
              else if (c == "opus") c = Ti("dOps", a.Na), d = "Opus", e = new Uint8Array([]), a.encrypted && (e = ej(a.stream, a.codecs), d = "enca"), a = Ti(d, fj(a), c, e);
              else {
                if (a.Na.byteLength > 0) c = Ti("esds", a.Na);
                else {
                  c = Ti;
                  d = a.id + 1;
                  e = a.stream.channelsCount || 2;
                  g = a.stream.audioSamplingRate || 44100;
                  k2 = pc("audio", a.codecs.split(","));
                  l = { 96e3: 0, 88200: 1, 64e3: 2, 48e3: 3, 44100: 4, 32e3: 5, 24e3: 6, 22050: 7, 16e3: 8, 12e3: 9, 11025: 10, 8e3: 11, 7350: 12 };
                  h = l[g];
                  if (k2 === "mp4a.40.5" || k2 === "mp4a.40.29") h = l[g * 2];
                  g = parseInt(k2.split(".").pop(), 10);
                  d = new Uint8Array([0, 0, 0, 0, 3, 25].concat(x(Vi(d, 2)), [0, 4, 17, 64, 21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 2, g << 3 | h >>> 1, h << 7 | e << 3, 6, 1, 2]));
                  c = c("esds", d);
                }
                d = "mp4a";
                e = new Uint8Array([]);
                a.encrypted && (e = ej(a.stream, a.codecs), d = "enca");
                a = Ti(d, fj(a), c, e);
              }
              d = a;
          }
          a = Ti("stsd", gj.value(), d);
          return b("stbl", a, Ti("stts", hj.value()), Ti("stsc", ij.value()), Ti("stsz", jj.value()), Ti("stco", kj.value()));
        }
        function dj(a) {
          if (!a.eb && !a.gb) return new Uint8Array([]);
          var b = a.gb;
          a = new Uint8Array([].concat(x(Vi(a.eb, 4)), x(Vi(b, 4))));
          return Ti("pasp", a);
        }
        function fj(a) {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, a.stream.channelsCount || 2, 0, 16, 0, 0, 0, 0].concat(x(Vi(a.stream.audioSamplingRate || 44100, 2)), [0, 0]));
        }
        function ej(a, b) {
          var c = Ti;
          b = new Uint8Array([].concat(x(Vi(lj(b.split(".")[0]), 4))));
          b = Ti("frma", b);
          var d = "cenc";
          var e = a.drmInfos[0];
          e && e.encryptionScheme && (d = e.encryptionScheme);
          d = new Uint8Array([0, 0, 0, 0].concat(x(Vi(lj(d), 4)), [0, 1, 0, 0]));
          d = Ti("schm", d);
          e = Ti;
          var f = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
          a = u(a.drmInfos);
          for (var g = a.next(); !g.done; g = a.next()) if ((g = g.value) && g.keyIds && g.keyIds.size) {
            g = u(g.keyIds);
            for (var h = g.next(); !h.done; h = g.next()) f = cj(h.value);
          }
          a = new Uint8Array([
            0,
            0,
            0,
            0,
            0,
            0,
            1,
            8
          ]);
          f = Ti("tenc", a, f);
          return c("sinf", b, d, e("schi", f));
        }
        function mj(a) {
          var b = [];
          a = u(a.g);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            var d = b.push, e = d.apply;
            var f = Ti;
            var g = new Uint8Array([0, 0, 0, 0].concat(x(Vi(c.data ? c.data.sequenceNumber : 0, 4))));
            g = Ti("mfhd", g);
            var h;
            var k2 = c.data ? c.data.Gb : [];
            var l = new Uint8Array(4 + k2.length);
            for (h = 0; h < k2.length; h++) {
              var m = k2[h].flags;
              l[h + 4] = m.sb << 4 | m.wb << 2 | m.ub;
            }
            k2 = Ti("sdtp", l);
            var n = k2.length + 32 + 20 + 8 + 16 + 8 + 8;
            l = Ti;
            h = new Uint8Array([0, 0, 0, 58].concat(x(Vi(c.id + 1, 4)), [0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]));
            h = Ti("tfhd", h);
            m = c.data ? c.data.baseMediaDecodeTime : 0;
            var q = Math.floor(m % (Ui + 1));
            m = new Uint8Array([1, 0, 0, 0].concat(x(Vi(Math.floor(m / (Ui + 1)), 4)), x(Vi(q, 4))));
            m = Ti("tfdt", m);
            var r = n;
            n = c.data ? c.data.Gb : [];
            q = n.length;
            var t = 12 + 16 * q, w = new Uint8Array(t);
            r += 8 + t;
            w.set([c.type === "video" ? 1 : 0, 0, 15, 1].concat(x(Vi(q, 4)), x(Vi(r, 4))), 0);
            for (r = 0; r < q; r++) {
              var v = n[r];
              t = Vi(v.duration, 4);
              var z = Vi(v.size, 4), y = v.flags;
              v = Vi(v.Cb, 4);
              w.set([].concat(x(t), x(z), [y.Eb << 2 | y.sb, y.wb << 6 | y.ub << 4 | y.Fb, y.rb & 61440, y.rb & 15], x(v)), 12 + 16 * r);
            }
            n = Ti("trun", w);
            k2 = l("traf", h, m, n, k2);
            f = f("moof", g, k2);
            e.call(d, b, [f, nj(c)]);
          }
          return lc.apply(dc, x(b));
        }
        function nj(a) {
          a = (a.data ? a.data.Gb : []).map(function(b) {
            return b.data;
          });
          a = lc.apply(dc, x(a));
          return Ti("mdat", a);
        }
        function Vi(a, b) {
          var c = [];
          for (--b; b >= 0; b--) c.push(a >> 8 * b & 255);
          return c;
        }
        function cj(a) {
          for (var b = new Uint8Array(a.length / 2), c = 0; c < a.length / 2; c += 1) b[c] = parseInt(String(a[c * 2] + a[c * 2 + 1]), 16);
          return b;
        }
        function lj(a) {
          for (var b = 0, c = 0; c < a.length; c += 1) b |= a.charCodeAt(c) << (a.length - c - 1) * 8;
          return b;
        }
        function Ti(a) {
          var b = Ma.apply(1, arguments), c = oj.get(a);
          c || (c = [a.charCodeAt(0), a.charCodeAt(1), a.charCodeAt(2), a.charCodeAt(3)], oj.set(a, c));
          for (var d = 8, e = b.length - 1; e >= 0; e--) d += b[e].byteLength;
          e = new Uint8Array(d);
          e[0] = d >> 24 & 255;
          e[1] = d >> 16 & 255;
          e[2] = d >> 8 & 255;
          e[3] = d & 255;
          e.set(c, 4);
          c = 0;
          for (d = 8; c < b.length; c++) e.set(b[c], d), d += b[c].byteLength;
          return e;
        }
        var Ui = 4294967295, oj = /* @__PURE__ */ new Map(), Wi = new Qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]);
        }), Xi = new Qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]);
        }), hj = new Qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
        }), ij = new Qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
        }), kj = new Qb(function() {
          return new Uint8Array([
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            0
          ]);
        }), jj = new Qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);
        }), Yi = new Qb(function() {
          return new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]);
        }), aj = new Qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
        }), gj = new Qb(function() {
          return new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]);
        }), bj = new Qb(function() {
          var a = new Uint8Array([105, 115, 111, 109]), b = new Uint8Array([97, 118, 99, 49]), c = new Uint8Array([0, 0, 0, 1]);
          return Ti("ftyp", a, c, a, b);
        }), Zi = new Qb(function() {
          var a = new Uint8Array([
            0,
            0,
            0,
            0,
            0,
            0,
            0,
            1,
            0,
            0,
            0,
            12,
            117,
            114,
            108,
            32,
            0,
            0,
            0,
            1
          ]);
          a = Ti("dref", a);
          return Ti("dinf", a);
        });
        function pj(a) {
          a = Kb(a);
          var b = null;
          new oh().box("moov", th).box("trak", th).box("mdia", th).box("minf", th).box("stbl", th).W("stsd", vh).box("enca", function(c) {
            b = c.reader.h;
            return xh(c);
          }).box("sinf", th).box("frma", function(c) {
            c.parser.stop();
            Ni(c.reader).codec === "ec-3" && b && b.getUint16(16) !== 2 && b.setUint16(16, 2);
          }).parse(a);
          return a;
        }
        function qj(a, b, c) {
          function d(r) {
            n.push({ box: r, qj: 1701733217 });
          }
          function e(r) {
            n.push({ box: r, qj: 1701733238 });
          }
          function f(r) {
            k2 = true;
            r.parser.stop();
          }
          function g(r) {
            m.push(r);
            th(r);
          }
          var h = b = Kb(b), k2 = false, l, m = [], n = [];
          new oh().box("moov", g).box("trak", g).box("mdia", g).box("minf", g).box("stbl", g).W("stsd", function(r) {
            l = r;
            m.push(r);
            vh(r);
          }).W("encv", f).W("enca", f).W("dvav", e).W("dva1", e).W("dvh1", e).W("dvhe", e).W("dvc1", e).W("dvi1", e).W("hev1", e).W("hvc1", e).W("avc1", e).W("avc3", e).W("ac-3", d).W("ec-3", d).W(
            "ac-4",
            d
          ).W("Opus", d).W("fLaC", d).W("mp4a", d).parse(b);
          if (k2) return b;
          if (n.length == 0 || !l) throw fb(jc(b)), new U(2, 3, 3019, c);
          n.reverse();
          c = u(n);
          for (var q = c.next(); !q.done; q = c.next()) q = q.value, h = rj(a, h, l, q.box, m, q.qj);
          return Rb().zj() ? (a = new Uint8Array(b.byteLength + h.byteLength), a.set(h), a.set(b, h.byteLength), a) : h;
        }
        function sj(a) {
          a = Kb(a);
          var b = [];
          new oh().box("mdat", function(g) {
            b.push(g);
          }).parse(a);
          for (var c = [], d = 0; d < b.length; d++) {
            var e = b[d - 1], f = b[d];
            c.push(tj(a.subarray(e ? e.start + e.size : 0, f.start + f.size)));
          }
          return lc.apply(dc, x(c));
        }
        function tj(a) {
          function b(n) {
            g.push(n);
            th(n);
          }
          var c, d, e, f, g = [];
          new oh().box("moof", b).box("traf", b).W("tfhd", function(n) {
            c = n;
            e = Ii(n.reader, n.flags);
          }).W("trun", function(n) {
            d = n;
            f = Li(n.reader, n.version, n.flags);
          }).parse(a);
          if (e && e.Ej !== 2) {
            var h = c.start + uh(c) + 4 + (e.nk !== null ? 8 : 0), k2 = Ob(a);
            if (e.Ej !== null) k2.setUint32(h, 2);
            else {
              uj(a, c.start, c.size + 4);
              var l = k2.getUint32(c.start + 8);
              k2.setUint32(c.start + 8, l | 2);
              f && f.Tg !== null && k2.setInt32(d.start + uh(d) + 4, f.Tg + 4);
              l = a.subarray(0, h);
              k2 = a.subarray(h);
              a = new Uint8Array(a.byteLength + 4);
              a.set(l);
              l = [];
              for (var m = 3; m >= 0; m--) l.push(2 >> 8 * m & 255);
              a.set(new Uint8Array(l), h);
              a.set(k2, h + 4);
              h = u(g);
              for (k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, uj(a, k2.start, k2.size + 4);
            }
          }
          return a;
        }
        function rj(a, b, c, d, e, f) {
          var g = ej(a, d.name), h = b.subarray(d.start, d.start + d.size);
          a = new Uint8Array(d.size + g.byteLength);
          a.set(h, 0);
          Ob(a).setUint32(4, f);
          a.set(g, d.size);
          uj(a, 0, a.byteLength);
          f = new Uint8Array(b.byteLength + a.byteLength);
          d = Rb().Bf() ? d.start : d.start + d.size;
          g = b.subarray(d);
          f.set(b.subarray(0, d));
          f.set(a, d);
          f.set(g, d + a.byteLength);
          b = u(e);
          for (e = b.next(); !e.done; e = b.next()) e = e.value, uj(f, e.start, e.size + a.byteLength);
          a = Ob(f, c.start);
          c = uh(c);
          b = a.getUint32(c);
          a.setUint32(c, b + 1);
          return f;
        }
        function uj(a, b, c) {
          a = Ob(a, b);
          b = a.getUint32(0);
          b != 0 && (b == 1 ? (a.setUint32(8, c >> 32), a.setUint32(12, c & 4294967295)) : a.setUint32(0, c));
        }
        function vj(a) {
          function b(e) {
            d.push({ start: e.start, size: e.size });
            th(e);
          }
          var c = Kb(a), d = [];
          new oh().box("moov", b).box("trak", b).box("mdia", b).box("minf", b).box("stbl", b).box("stsd", function(e) {
            d.push({ start: e.start, size: e.size });
            for (var f = Ob(c, e.start), g = 0; g < e.size - 3; g++) {
              var h = f.getUint32(g);
              h == 1633889587 ? f.setUint32(g, 1700998451) : h == 1684103987 && f.setUint32(g, 1684366131);
            }
          }).parse(c);
          return c;
        }
        ;
        function wj(a, b, c, d, e, f, g, h) {
          this.T = a;
          this.startByte = b;
          this.endByte = c;
          this.Od = d === void 0 ? null : d;
          this.timescale = e === void 0 ? null : e;
          this.h = f === void 0 ? null : f;
          this.aesKey = g === void 0 ? null : g;
          this.g = this.mimeType = this.codecs = null;
          this.encrypted = h === void 0 ? false : h;
        }
        wj.prototype.Tc = function() {
          return this.startByte;
        };
        wj.prototype.Qc = function() {
          return this.endByte;
        };
        wj.prototype.He = function(a) {
          this.h = a;
        };
        wj.prototype.hc = function() {
          return this.h;
        };
        function xj(a, b) {
          return a === b ? true : a && b ? a.Tc() == b.Tc() && a.Qc() == b.Qc() && Sc(a.T().sort(), b.T().sort()) && Jb(a.hc(), b.hc()) : a == b;
        }
        S("shaka.media.InitSegmentReference", wj);
        wj.prototype.getEndByte = wj.prototype.Qc;
        wj.prototype.getStartByte = wj.prototype.Tc;
        function yj(a, b, c, d, e, f, g, h, k2, l, m, n, q, r, t, w) {
          l = l === void 0 ? [] : l;
          r = r === void 0 ? zj : r;
          this.startTime = a;
          this.j = this.endTime = b;
          this.D = c;
          this.startByte = d;
          this.endByte = e;
          this.ia = f;
          this.timestampOffset = g;
          this.appendWindowStart = h;
          this.appendWindowEnd = k2;
          this.g = l;
          this.tilesLayout = m === void 0 ? "" : m;
          this.C = n === void 0 ? null : n;
          this.h = q === void 0 ? null : q;
          this.status = r;
          this.preload = false;
          this.l = true;
          this.m = false;
          this.aesKey = t === void 0 ? null : t;
          this.thumbnailSprite = null;
          this.i = -1;
          this.A = w === void 0 ? false : w;
          this.xe = this.nd = false;
          a = u(this.g);
          for (b = a.next(); !b.done; b = a.next()) b.value.mj();
          this.A && this.g.length && this.g[this.g.length - 1].lj();
          this.u = this.bandwidth = this.mimeType = this.codecs = null;
          this.F = false;
        }
        p = yj.prototype;
        p.T = function() {
          return this.D();
        };
        p.getStartTime = function() {
          return this.startTime;
        };
        p.Nk = function() {
          return this.endTime;
        };
        p.Tc = function() {
          return this.startByte;
        };
        p.Qc = function() {
          return this.endByte;
        };
        p.ul = function() {
          return this.tilesLayout;
        };
        p.rl = function() {
          return this.C;
        };
        p.Uc = function() {
          return this.status;
        };
        p.Ql = function() {
          this.status = Aj;
        };
        p.Jh = function() {
          this.preload = true;
        };
        p.isPreload = function() {
          return this.preload;
        };
        p.Nd = function() {
          this.l = false;
        };
        p.Gl = function() {
          return this.l;
        };
        p.mj = function() {
          this.nd = true;
        };
        p.Il = function() {
          return this.nd;
        };
        p.lj = function() {
          this.xe = true;
        };
        p.Hl = function() {
          return this.xe;
        };
        p.kj = function() {
          this.m = true;
        };
        p.Cl = function() {
          return this.m;
        };
        p.jg = function(a) {
          this.thumbnailSprite = a;
        };
        p.ql = function() {
          return this.thumbnailSprite;
        };
        p.offset = function(a) {
          this.startTime += a;
          this.endTime += a;
          this.j += a;
          for (var b = u(this.g), c = b.next(); !c.done; c = b.next()) c = c.value, c.startTime += a, c.endTime += a, c.j += a;
        };
        p.pi = function(a) {
          this.h == null ? $a("Sync attempted without sync time!") : (a = this.h - a - this.startTime, Math.abs(a) >= 1e-3 && this.offset(a));
        };
        p.He = function(a, b) {
          this.u = a;
          this.F = b === void 0 ? false : b;
        };
        p.hc = function(a) {
          var b = this.u;
          (a === void 0 || a) && this.F && (this.u = null);
          return b;
        };
        function Bj(a, b) {
          a.ia = b;
          a = u(a.g);
          for (var c = a.next(); !c.done; c = a.next()) Bj(c.value, b);
        }
        S("shaka.media.SegmentReference", yj);
        yj.prototype.getSegmentData = yj.prototype.hc;
        yj.prototype.setSegmentData = yj.prototype.He;
        yj.prototype.syncAgainst = yj.prototype.pi;
        yj.prototype.offset = yj.prototype.offset;
        yj.prototype.getThumbnailSprite = yj.prototype.ql;
        yj.prototype.setThumbnailSprite = yj.prototype.jg;
        yj.prototype.hasByterangeOptimization = yj.prototype.Cl;
        yj.prototype.markAsByterangeOptimization = yj.prototype.kj;
        yj.prototype.isLastPartial = yj.prototype.Hl;
        yj.prototype.markAsLastPartial = yj.prototype.lj;
        yj.prototype.isPartial = yj.prototype.Il;
        yj.prototype.markAsPartial = yj.prototype.mj;
        yj.prototype.isIndependent = yj.prototype.Gl;
        yj.prototype.markAsNonIndependent = yj.prototype.Nd;
        yj.prototype.isPreload = yj.prototype.isPreload;
        yj.prototype.markAsPreload = yj.prototype.Jh;
        yj.prototype.markAsUnavailable = yj.prototype.Ql;
        yj.prototype.getStatus = yj.prototype.Uc;
        yj.prototype.getTileDuration = yj.prototype.rl;
        yj.prototype.getTilesLayout = yj.prototype.ul;
        yj.prototype.getEndByte = yj.prototype.Qc;
        yj.prototype.getStartByte = yj.prototype.Tc;
        yj.prototype.getEndTime = yj.prototype.Nk;
        yj.prototype.getStartTime = yj.prototype.getStartTime;
        yj.prototype.getUris = yj.prototype.T;
        var zj = 0, Aj = 1;
        yj.Status = { Hm: zj, Pn: Aj, nn: 2 };
        function Cj(a) {
          return a.length == 1 && a.end(0) - a.start(0) < 1e-4;
        }
        function Dj(a) {
          return !a || Cj(a) ? null : a.length == 1 && a.start(0) < 0 ? 0 : a.length ? a.start(0) : null;
        }
        function Ej(a) {
          return !a || Cj(a) ? null : a.length ? a.end(a.length - 1) : null;
        }
        function Fj(a, b) {
          return !a || !a.length || Cj(a) || b > a.end(a.length - 1) ? false : b >= a.start(0);
        }
        function Gj(a, b) {
          if (!a || !a.length || Cj(a)) return 0;
          var c = 0;
          a = u(Hj(a));
          for (var d = a.next(); !d.done; d = a.next()) {
            var e = d.value;
            d = e.start;
            e = e.end;
            e > b && (c += e - Math.max(d, b));
          }
          return c;
        }
        function Ij(a, b, c) {
          if (!a || !a.length || Cj(a)) return null;
          a = Hj(a).findIndex(function(d, e, f) {
            return d.start > b && (e == 0 || f[e - 1].end - b <= c);
          });
          return a >= 0 ? a : null;
        }
        function Hj(a) {
          if (!a) return [];
          for (var b = [], c = 0; c < a.length; c++) b.push({ start: a.start(c), end: a.end(c) });
          return b;
        }
        ;
        function Jj() {
        }
        function V(a) {
          return document.createElement(a);
        }
        function Kj(a) {
          return document.createElementNS("http://www.w3.org/2000/svg", a);
        }
        function Lj() {
          var a = document.createElement("button");
          a.setAttribute("type", "button");
          return a;
        }
        function Mj(a, b) {
          var c = document.createElement("source");
          c.src = a;
          c.type = b === void 0 ? "" : b;
          return c;
        }
        function Nj(a) {
          for (var b = false, c = a.getElementsByTagName("source"), d = c.length - 1; d >= 0; --d) a.removeChild(c[d]), b = true;
          a.src && (a.removeAttribute("src"), b = true);
          return b;
        }
        function Oj(a) {
          a = a.getElementsByClassName("shaka-overflow-quality-mark");
          return a.length ? a[0] : null;
        }
        function Pj(a) {
          for (; a.firstChild; ) a.removeChild(a.firstChild);
        }
        function Gi() {
          if (Qj) return Qj;
          Rj || (Rj = new Bf(function() {
            Qj = null;
          }));
          (Qj = document.getElementsByTagName("video")[0] || document.getElementsByTagName("audio")[0]) || (Qj = document.createElement("video"));
          Rj.$(1);
          return Qj;
        }
        function Sj(a, b) {
          var c, d, e, f, g;
          return Q(function(h) {
            if (h.g == 1) return "fonts" in document && "FontFace" in window2 ? F(h, document.fonts.ready, 2) : h.return();
            if (!("entries" in document.fonts)) return h.return();
            c = function(k2) {
              k2 = k2.entries();
              for (var l = [], m = k2.next(); m.done === false; ) l.push(m.value), m = k2.next();
              return l;
            };
            d = u(c(document.fonts));
            for (e = d.next(); !e.done; e = d.next()) if (f = e.value, f.family === a && f.display === "swap") return h.return();
            g = new FontFace(a, "url(" + b + ")", { display: "swap" });
            document.fonts.add(g);
            H(h);
          });
        }
        S("shaka.util.Dom", Jj);
        Jj.removeAllChildren = Pj;
        Jj.clearSourceFromVideo = Nj;
        var Rj = null, Qj = null;
        function Tj() {
        }
        function Uj(a, b) {
          return b + 10 <= a.length && a[b] === 73 && a[b + 1] === 68 && a[b + 2] === 51 && a[b + 3] < 255 && a[b + 4] < 255 && a[b + 6] < 128 && a[b + 7] < 128 && a[b + 8] < 128 && a[b + 9] < 128 ? true : false;
        }
        function Vj(a, b) {
          return b + 10 <= a.length && a[b] === 51 && a[b + 1] === 68 && a[b + 2] === 73 && a[b + 3] < 255 && a[b + 4] < 255 && a[b + 6] < 128 && a[b + 7] < 128 && a[b + 8] < 128 && a[b + 9] < 128 ? true : false;
        }
        function Wj(a, b) {
          var c = (a[b] & 127) << 21;
          c |= (a[b + 1] & 127) << 14;
          c |= (a[b + 2] & 127) << 7;
          return c |= a[b + 3] & 127;
        }
        function Xj(a) {
          var b = { key: a.type, description: "", data: "", mimeType: null, pictureType: null };
          if (a.type === "APIC") {
            if (a.size < 2 || a.data[0] !== 3) return null;
            var c = a.data.subarray(1).indexOf(0);
            if (c === -1) return null;
            var d = Wb(Kb(a.data, 1, c)), e = a.data[2 + c], f = a.data.subarray(3 + c).indexOf(0);
            if (f === -1) return null;
            var g = Wb(Kb(a.data, 3 + c, f)), h;
            d === "-->" ? h = Wb(Kb(a.data, 4 + c + f)) : h = Lb(a.data.subarray(4 + c + f));
            b.mimeType = d;
            b.pictureType = e;
            b.description = g;
            b.data = h;
            return b;
          }
          if (a.type === "TXXX") {
            if (a.size < 2 || a.data[0] !== 3) return null;
            d = a.data.subarray(1).indexOf(0);
            if (d === -1) return null;
            c = Wb(Kb(a.data, 1, d));
            a = Wb(Kb(a.data, 2 + d)).replace(/\0*$/, "");
            b.description = c;
            b.data = a;
            return b;
          }
          if (a.type === "WXXX") {
            if (a.size < 2 || a.data[0] !== 3) return null;
            d = a.data.subarray(1).indexOf(0);
            if (d === -1) return null;
            c = Wb(Kb(a.data, 1, d));
            a = Wb(Kb(a.data, 2 + d)).replace(/\0*$/, "");
            b.description = c;
            b.data = a;
            return b;
          }
          if (a.type === "PRIV") {
            if (a.size < 2) return null;
            c = a.data.indexOf(0);
            if (c === -1) return null;
            c = Wb(Kb(a.data, 0, c));
            b.description = c;
            c == "com.apple.streaming.transportStreamTimestamp" ? (c = a.data.subarray(c.length + 1), a = c[3] & 1, c = (c[4] << 23) + (c[5] << 15) + (c[6] << 7) + c[7], c /= 45, a && (c += 4772185884e-2), b.data = c) : (a = Lb(a.data.subarray(c.length + 1)), b.data = a);
            return b;
          }
          if (a.type[0] === "T") {
            if (a.size < 2 || a.data[0] !== 3) return null;
            a = Wb(a.data.subarray(1)).replace(/\0*$/, "");
            b.data = a;
            return b;
          }
          return a.type[0] === "W" ? (a = Wb(a.data).replace(/\0*$/, ""), b.data = a, b) : a.data ? (b.data = Lb(a.data), b) : null;
        }
        function Yj(a) {
          for (var b = 0, c = []; Uj(a, b); ) {
            var d = Wj(a, b + 6);
            a[b + 5] >> 6 & 1 && (b += 10);
            b += 10;
            for (d = b + d; b + 10 < d; ) {
              var e = a.subarray(b), f = Wj(e, 4);
              e = { type: String.fromCharCode(e[0], e[1], e[2], e[3]), size: f, data: e.subarray(10, 10 + f) };
              (f = Xj(e)) && c.push(f);
              b += e.size + 10;
            }
            Vj(a, b) && (b += 10);
          }
          return c;
        }
        function Zj(a, b) {
          for (var c = b = b === void 0 ? 0 : b, d = 0; Uj(a, b); ) a[b + 5] >> 6 & 1 && (d += 10), d += 10, d += Wj(a, b + 6), Vj(a, b + 10) && (d += 10), b += d;
          return d > 0 ? a.subarray(c, c + d) : new Uint8Array([]);
        }
        S("shaka.util.Id3Utils", Tj);
        Tj.getID3Data = Zj;
        Tj.getID3Frames = Yj;
        function ak(a) {
          return new Date(Date.UTC(1900, 0, 1, 0, 0, 0, 0) + a).getTime();
        }
        ;
        function bk(a, b) {
          this.j = a;
          if (b === void 0 ? 0 : b) {
            b = new Uint8Array(a.byteLength);
            for (var c = 0, d = 0; d < a.byteLength; d++) d >= 2 && a[d] == 3 && a[d - 1] == 0 && a[d - 2] == 0 || (b[c] = a[d], c++);
            this.j = Kb(b, 0, c);
          }
          this.i = this.j.byteLength;
          this.g = this.h = 0;
        }
        function ck(a) {
          var b = a.j.byteLength - a.i, c = new Uint8Array(4), d = Math.min(4, a.i);
          d !== 0 && (c.set(a.j.subarray(b, b + d)), a.h = new lh(c, 0).Z(), a.g = d * 8, a.i -= d);
        }
        function dk(a, b) {
          if (a.g <= b) {
            b -= a.g;
            var c = Math.floor(b / 8);
            b -= c * 8;
            a.g -= c;
            ck(a);
          }
          a.h <<= b;
          a.g -= b;
        }
        function ek(a, b) {
          var c = Math.min(a.g, b), d = a.h >>> 32 - c;
          a.g -= c;
          a.g > 0 ? a.h <<= c : a.i > 0 && ck(a);
          c = b - c;
          return c > 0 ? d << c | ek(a, c) : d;
        }
        function fk(a) {
          var b;
          for (b = 0; b < a.g; ++b) if ((a.h & 2147483648 >>> b) !== 0) return a.h <<= b, a.g -= b, b;
          ck(a);
          return b + fk(a);
        }
        function gk(a) {
          dk(a, 1 + fk(a));
        }
        function hk(a) {
          var b = fk(a);
          return ek(a, b + 1) - 1;
        }
        function ik(a) {
          a = hk(a);
          return 1 & a ? 1 + a >>> 1 : -1 * (a >>> 1);
        }
        function jk(a) {
          return ek(a, 1) === 1;
        }
        function kk(a) {
          return ek(a, 8);
        }
        function lk(a, b) {
          for (var c = 8, d = 8, e = 0; e < b; e++) d !== 0 && (d = ik(a), d = (c + d + 256) % 256), c = d === 0 ? c : d;
        }
        function mk(a) {
          kk(a);
          hk(a);
          return hk(a);
        }
        S("shaka.util.ExpGolomb", bk);
        function nk() {
          this.I = null;
          this.J = false;
          this.m = this.K = null;
          this.j = [];
          this.g = [];
          this.D = this.F = null;
          this.i = [];
          this.h = [];
          this.G = null;
          this.l = [];
          this.C = this.H = this.u = this.A = null;
        }
        p = nk.prototype;
        p.clearData = function() {
          this.j = [];
          this.g = [];
          this.i = [];
          this.h = [];
          this.l = [];
        };
        p.gg = function(a) {
          this.C != null && this.C != a && (this.u = this.A = null);
          this.C = a;
        };
        p.parse = function(a) {
          if (a.length < 564) return this;
          for (var b = Math.max(0, ok(a)), c = a.length - (a.length + b) % 188, d = false, e = b; e < c; e += 188) if (a[e] == 71) {
            var f = !!(a[e + 1] & 64), g = ((a[e + 1] & 31) << 8) + a[e + 2];
            if ((a[e + 3] & 48) >> 4 > 1) {
              var h = e + 5 + a[e + 4];
              if (h == e + 188) continue;
            } else h = e + 4;
            switch (g) {
              case 0:
                f && (h += a[h] + 1);
                this.I = (a[h + 10] & 31) << 8 | a[h + 11];
                break;
              case 17:
              case 8191:
                break;
              case this.I:
                f && (h += a[h] + 1);
                f = a;
                g = { audio: -1, video: -1, zf: -1, audioCodec: "", videoCodec: "" };
                var k2 = h + 3 + ((f[h + 1] & 15) << 8 | f[h + 2]) - 4;
                for (h += 12 + ((f[h + 10] & 15) << 8 | f[h + 11]); h < k2; ) {
                  var l = (f[h + 1] & 31) << 8 | f[h + 2], m = (f[h + 3] & 15) << 8 | f[h + 4];
                  switch (f[h]) {
                    case 6:
                      if (m > 0) for (var n = h + 5, q = m; q > 2; ) {
                        var r = f[n + 1] + 2;
                        switch (f[n]) {
                          case 5:
                            var t = Yb(f.subarray(n + 2, n + r));
                            g.audio == -1 && t === "Opus" ? (g.audio = l, g.audioCodec = "opus") : g.video == -1 && t === "AV01" && (g.video = l, g.videoCodec = "av1");
                            break;
                          case 106:
                            g.audio == -1 && (g.audio = l, g.audioCodec = "ac3");
                            break;
                          case 122:
                            g.audio == -1 && (g.audio = l, g.audioCodec = "ec3");
                            break;
                          case 124:
                            g.audio == -1 && (g.audio = l, g.audioCodec = "aac");
                            break;
                          case 127:
                            g.audioCodec == "opus" && (t = null, f[n + 2] === 128 && (t = f[n + 3]), t != null && (this.H = { channelCount: (t & 15) === 0 ? 2 : t & 15, pk: t, sampleRate: 48e3 }));
                        }
                        n += r;
                        q -= r;
                      }
                      break;
                    case 15:
                      g.audio == -1 && (g.audio = l, g.audioCodec = "aac");
                      break;
                    case 17:
                      g.audio == -1 && (g.audio = l, g.audioCodec = "aac-loas");
                      break;
                    case 21:
                      g.zf == -1 && (g.zf = l);
                      break;
                    case 27:
                      g.video == -1 && (g.video = l, g.videoCodec = "avc");
                      break;
                    case 3:
                    case 4:
                      g.audio == -1 && (g.audio = l, g.audioCodec = "mp3");
                      break;
                    case 36:
                      g.video == -1 && (g.video = l, g.videoCodec = "hvc");
                      break;
                    case 129:
                      g.audio == -1 && (g.audio = l, g.audioCodec = "ac3");
                      break;
                    case 132:
                    case 135:
                      g.audio == -1 && (g.audio = l, g.audioCodec = "ec3");
                  }
                  h += m + 5;
                }
                f = g;
                f.video != -1 && (this.K = f.video, this.m = f.videoCodec);
                f.audio != -1 && (this.F = f.audio, this.D = f.audioCodec);
                f.zf != -1 && (this.G = f.zf);
                d && !this.J && (d = false, e = b - 188);
                this.J = true;
                break;
              case this.K:
                h = a.subarray(h, e + 188);
                f ? this.j.push([h]) : this.j.length && this.j[this.j.length - 1] && this.j[this.j.length - 1].push(h);
                break;
              case this.F:
                h = a.subarray(h, e + 188);
                f ? this.i.push([h]) : this.i.length && this.i[this.i.length - 1] && this.i[this.i.length - 1].push(h);
                break;
              case this.G:
                h = a.subarray(h, e + 188);
                f ? this.l.push([h]) : this.l.length && this.l[this.l.length - 1] && this.l[this.l.length - 1].push(h);
                break;
              default:
                d = true;
            }
          }
          return this;
        };
        function pk(a, b) {
          if ((b[0] << 16 | b[1] << 8 | b[2]) !== 1) return null;
          var c = { data: new Uint8Array(0), packetLength: b[4] << 8 | b[5], pts: null, dts: null, nalus: [] };
          if (c.packetLength && c.packetLength > b.byteLength - 6) return null;
          var d = b[7];
          if (d & 192) {
            var e = (b[9] & 14) * 536870912 + (b[10] & 255) * 4194304 + (b[11] & 254) * 16384 + (b[12] & 255) * 128 + (b[13] & 254) / 2;
            a.A == null && (a.A = e);
            c.pts = qk(e, a.A);
            a.A = c.pts;
            c.dts = c.pts;
            d & 64 && (d = (b[14] & 14) * 536870912 + (b[15] & 255) * 4194304 + (b[16] & 254) * 16384 + (b[17] & 255) * 128 + (b[18] & 254) / 2, a.u == null && (a.u = d), c.dts = c.pts != e ? qk(d, a.u) : d);
            a.u = c.dts;
          }
          a = b[8] + 9;
          if (b.byteLength <= a) return null;
          c.data = b.subarray(a);
          return c;
        }
        p.Xl = function(a) {
          Zc("TsParser.parseAvcNalus", "Please use parseNalus function instead.");
          return this.Ph(a, { Ae: null, state: null });
        };
        p.Ph = function(a, b) {
          var c = a.pts ? a.pts / 9e4 : null;
          a = a.data;
          var d = a.byteLength, e = 1;
          this.m == "hvc" && (e = 2);
          var f = b.state || 0, g = f, h = 0, k2 = [], l = -1, m = 0;
          f == -1 && (l = 0, m = this.m == "hvc" ? a[0] >> 1 & 63 : a[0] & 31, f = 0, h = 1);
          for (; h < d; ) {
            var n = a[h++];
            if (f) if (f === 1) f = n ? 0 : 2;
            else if (n) if (n == 1) {
              n = h - f - 1;
              if (l >= 0) k2.push({ data: a.subarray(l + e, n), fullData: a.subarray(l, n), type: m, time: c, state: null });
              else if (f = k2.length ? k2[k2.length - 1] : b.Ae) g && h <= 4 - g && f.state && (f.data = f.data.subarray(0, f.data.byteLength - g), f.fullData = f.fullData.subarray(0, f.fullData.byteLength - g)), n > 0 && (n = a.subarray(0, n), f.data = lc(f.data, n), f.fullData = lc(f.fullData, n), f.state = 0);
              h < d ? (m = this.m == "hvc" ? a[h] >> 1 & 63 : a[h] & 31, l = h, f = 0) : f = -1;
            } else f = 0;
            else f = 3;
            else f = n ? 0 : 1;
          }
          l >= 0 && f >= 0 && k2.push({ data: a.subarray(l + e, d), fullData: a.subarray(l, d), type: m, time: c, state: f });
          !k2.length && b.Ae && (c = k2.length ? k2[k2.length - 1] : b.Ae) && (c.data = lc(c.data, a), c.fullData = lc(c.fullData, a));
          b.state = f;
          return k2;
        };
        p.getMetadata = function() {
          for (var a = [], b = u(this.l), c = b.next(); !c.done; c = b.next()) c = lc.apply(dc, x(c.value)), (c = pk(this, c)) && a.push({ cueTime: c.pts ? c.pts / 9e4 : null, data: c.data, frames: Yj(c.data), dts: c.dts, pts: c.pts });
          return a;
        };
        p.Db = function() {
          if (this.i.length && !this.h.length) for (var a = u(this.i), b = a.next(); !b.done; b = a.next()) {
            var c = lc.apply(dc, x(b.value)), d = pk(this, c);
            b = this.h.length ? this.h[this.h.length - 1] : null;
            d && d.pts != null && d.dts != null && (!b || b.pts != d.pts && b.dts != d.dts) ? this.h.push(d) : this.h.length && (c = d ? d.data : c) && (b = this.h.pop(), b.data = lc(b.data, c), this.h.push(b));
          }
          return this.h;
        };
        p.Jd = function(a) {
          a = a === void 0 ? true : a;
          if (this.j.length && !this.g.length) {
            for (var b = u(this.j), c = b.next(); !c.done; c = b.next()) {
              var d = lc.apply(dc, x(c.value)), e = pk(this, d);
              c = this.g.length ? this.g[this.g.length - 1] : null;
              e && e.pts != null && e.dts != null && (!c || c.pts != e.pts && c.dts != e.dts) ? this.g.push(e) : this.g.length && (d = e ? e.data : d) && (c = this.g.pop(), c.data = lc(c.data, d), this.g.push(c));
            }
            if (a) {
              b = { Ae: null, state: null };
              c = [];
              d = u(this.g);
              for (e = d.next(); !e.done; e = d.next()) e = e.value, e.nalus = this.Ph(e, b), e.nalus.length && (c.push(e), b.Ae = e.nalus[e.nalus.length - 1]);
              this.g = c;
            }
          }
          return a ? this.g : (a = this.g, this.g = [], a);
        };
        p.getStartTime = function(a) {
          if (a == "audio") {
            a = null;
            var b = this.Db();
            b.length && (a = b[0], a = Math.min(a.dts, a.pts) / 9e4);
            return a;
          }
          return a == "video" ? (a = null, b = this.Jd(false), b.length && (a = b[0], a = Math.min(a.dts, a.pts) / 9e4), a) : null;
        };
        p.le = function() {
          return { audio: this.D, video: this.m };
        };
        p.yf = function() {
          for (var a = [], b = u(this.Jd()), c = b.next(); !c.done; c = b.next()) a.push.apply(a, x(c.value.nalus));
          return a;
        };
        p.zl = function() {
          Zc("TsParser.getVideoResolution", "Please use getVideoInfo function instead.");
          var a = this.xh();
          return { height: a.height, width: a.width };
        };
        p.xh = function() {
          return this.m == "hvc" ? rk(this) : sk(this);
        };
        function tk(a) {
          var b = a.Jd();
          return b.length > 1 && (a = b[0].pts, b = b[1].pts, !isNaN(b - a)) ? String(1 / (b - a) * 9e4) : null;
        }
        function sk(a) {
          var b = { height: null, width: null, codec: null, frameRate: null }, c = a.yf();
          if (!c.length) return b;
          c = c.find(function(r) {
            return r.type == 7;
          });
          if (!c) return b;
          c = new bk(c.data);
          var d = kk(c), e = kk(c), f = kk(c);
          gk(c);
          if (uk.includes(d)) {
            var g = hk(c);
            g === 3 && dk(c, 1);
            gk(c);
            gk(c);
            dk(c, 1);
            if (jk(c)) {
              g = g !== 3 ? 8 : 12;
              for (var h = 0; h < g; h++) jk(c) && (h < 6 ? lk(c, 16) : lk(c, 64));
            }
          }
          gk(c);
          g = hk(c);
          if (g === 0) hk(c);
          else if (g === 1) for (dk(c, 1), gk(c), gk(c), g = hk(c), h = 0; h < g; h++) gk(c);
          gk(c);
          dk(c, 1);
          g = hk(c);
          h = hk(c);
          var k2 = ek(c, 1);
          k2 === 0 && dk(c, 1);
          dk(c, 1);
          var l = 0, m = 0, n = 0, q = 0;
          jk(c) && (l = hk(c), m = hk(c), n = hk(c), q = hk(c));
          b.height = String((2 - k2) * (h + 1) * 16 - n * 2 - q * 2);
          b.width = String((g + 1) * 16 - l * 2 - m * 2);
          b.codec = "avc1." + ("0" + d.toString(16).toUpperCase()).slice(-2) + ("0" + e.toString(16).toUpperCase()).slice(-2) + ("0" + f.toString(16).toUpperCase()).slice(-2);
          b.frameRate = tk(a);
          return b;
        }
        function rk(a) {
          var b = { height: null, width: null, codec: null, frameRate: null }, c = a.yf();
          if (!c.length) return b;
          c = c.find(function(E) {
            return E.type == 33;
          });
          if (!c) return b;
          var d = new bk(c.fullData, true);
          kk(d);
          kk(d);
          ek(d, 4);
          var e = ek(d, 3);
          jk(d);
          var f = ek(d, 2), g = ek(d, 1), h = ek(d, 5), k2 = ek(d, 32);
          c = kk(d);
          for (var l = kk(d), m = kk(d), n = kk(d), q = kk(d), r = kk(d), t = kk(d), w = [], v = [], z = 0; z < e; z++) w.push(jk(d)), v.push(jk(d));
          if (e > 0) for (z = e; z < 8; z++) ek(d, 2);
          for (z = 0; z < e; z++) w[z] && ek(d, 88), v[z] && kk(d);
          hk(d);
          e = hk(d);
          e == 3 && ek(d, 1);
          w = hk(d);
          v = hk(d);
          var y = z = 0, A = 0, C = 0;
          jk(d) && (z += hk(d), y += hk(d), A += hk(d), C += hk(d));
          b.width = String(w - (z + y) * (e === 1 || e === 2 ? 2 : 1));
          b.height = String(v - (A + C) * (e === 1 ? 2 : 1));
          d = function(E) {
            for (var D = 0, B = 0; B < 32; B++) D |= (E >> B & 1) << 31 - B;
            return D >>> 0;
          }(k2);
          g = g == 1 ? "H" : "L";
          f = "hvc1" + ("." + ["", "A", "B", "C"][f] + h);
          f += "." + d.toString(16).toUpperCase();
          f += "." + g + t;
          r && (f += "." + r.toString(16).toUpperCase());
          q && (f += "." + q.toString(16).toUpperCase());
          n && (f += "." + n.toString(16).toUpperCase());
          m && (f += "." + m.toString(16).toUpperCase());
          l && (f += "." + l.toString(16).toUpperCase());
          c && (f += "." + c.toString(16).toUpperCase());
          b.codec = f;
          b.frameRate = tk(a);
          return b;
        }
        function qk(a, b) {
          var c = 1;
          for (a > b && (c = -1); Math.abs(b - a) > 4294967296; ) a += c * 8589934592;
          return a;
        }
        function vk(a) {
          return ok(a) < 0 ? false : true;
        }
        function ok(a) {
          for (var b = Math.min(1e3, a.length - 564), c = 0; c < b; ) {
            if (a[c] == 71 && a[c + 188] == 71 && a[c + 376] == 71) return c;
            c++;
          }
          return -1;
        }
        S("shaka.util.TsParser", nk);
        nk.syncOffset = ok;
        nk.probe = vk;
        nk.prototype.getVideoInfo = nk.prototype.xh;
        nk.prototype.getVideoResolution = nk.prototype.zl;
        nk.prototype.getVideoNalus = nk.prototype.yf;
        nk.prototype.getCodecs = nk.prototype.le;
        nk.prototype.getStartTime = nk.prototype.getStartTime;
        nk.prototype.getVideoData = nk.prototype.Jd;
        nk.prototype.getAudioData = nk.prototype.Db;
        nk.prototype.getMetadata = nk.prototype.getMetadata;
        nk.prototype.parseNalus = nk.prototype.Ph;
        nk.prototype.parseAvcNalus = nk.prototype.Xl;
        nk.prototype.parse = nk.prototype.parse;
        nk.prototype.setDiscontinuitySequence = nk.prototype.gg;
        nk.prototype.clearData = nk.prototype.clearData;
        nk.Timescale = 9e4;
        var uk = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
        function wk(a, b, c, d, e) {
          var f = this;
          this.g = a;
          this.O = c;
          this.C = d;
          this.Y = b;
          this.l = /* @__PURE__ */ new Map();
          this.F = /* @__PURE__ */ new Map();
          this.Ma = /* @__PURE__ */ new Map();
          this.h = null;
          this.Fa = false;
          this.H = e || null;
          this.u = /* @__PURE__ */ new Map();
          this.A = new Tc();
          this.j = /* @__PURE__ */ new Map();
          this.K = null;
          this.L = new Lg();
          this.xa = "";
          this.jb = false;
          this.sa = true;
          this.M = false;
          this.D = this.P = null;
          this.i = xk(this, this.L);
          this.hb = this.G = false;
          this.J = new hh(function() {
            return yk(f);
          });
          this.I = false;
          this.V = "UNKNOWN";
          this.fb = this.ib = false;
          this.Oa = new Lg();
          this.m = false;
          this.ra = null;
          this.X = /* @__PURE__ */ new Map();
          this.ea = this.R = this.oa = this.S = null;
          this.aa = new Lg();
          this.g.remote && (this.M = this.g.remote.state != "disconnected", this.A.o(this.g.remote, "connect", function() {
            f.M = f.g.remote.state != "disconnected";
          }), this.A.o(this.g.remote, "connecting", function() {
            f.M = f.g.remote.state != "disconnected";
          }), this.A.o(this.g.remote, "disconnect", function() {
            f.M = f.g.remote.state != "disconnected";
          }));
        }
        function xk(a, b) {
          a.sa = true;
          if (window2.ManagedMediaSource) {
            a.D || (a.g.disableRemotePlayback = true);
            var c = new ManagedMediaSource();
            a.A.o(c, "startstreaming", function() {
              a.sa = true;
            });
            a.A.o(c, "endstreaming", function() {
              a.sa = false;
            });
          } else c = new MediaSource();
          a.A.ua(c, "sourceopen", function() {
            URL.revokeObjectURL(a.xa);
            b.resolve();
          });
          a.A.ua(a.g, "playing", function() {
            a.jb = true;
          });
          a.xa = zk(c);
          a.C.useSourceElements ? (a.g.removeAttribute("src"), a.P && a.g.removeChild(a.P), a.D && a.g.removeChild(a.D), a.P = Mj(a.xa), a.g.appendChild(a.P), a.D && a.g.appendChild(a.D), a.g.load()) : a.g.src = a.xa;
          return c;
        }
        function Ak(a, b, c) {
          a.g && window2.ManagedMediaSource && a.i && a.C.useSourceElements && (a.D && a.g.removeChild(a.D), a.D = Mj(b, c), a.g.appendChild(a.D), a.g.disableRemotePlayback = false);
        }
        function Bk() {
          var a = 'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(x(ef)), b = {};
          Rb();
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            if (tf(c)) b[c] = true;
            else if (Fi()) {
              var d = mf(c), e = Xf(nf(c), d);
              d = df(d, e);
              b[c] = gd(d) || (Ye(d) ? true : false);
            } else b[c] = Gi().canPlayType(c) != "";
            d = c.split(";")[0];
            b[d] = b[d] || b[c];
          }
          return b;
        }
        p = wk.prototype;
        p.destroy = function() {
          return this.J.destroy();
        };
        function yk(a) {
          var b, c, d, e, f, g, h, k2, l, m, n, q, r, t, w;
          return Q(function(v) {
            if (v.g == 1) {
              b = [];
              c = u(a.u);
              for (d = c.next(); !d.done; d = c.next()) for (e = d.value, f = u(e), g = f.next().value, h = f.next().value, k2 = h[0], l = g, a.u.set(l, h.slice(0, 1)), k2 && b.push(k2.p.catch(Df)), m = u(h.slice(1)), n = m.next(); !n.done; n = m.next()) q = n.value, q.p.reject(new U(2, 7, 7003, void 0));
              a.h && b.push(a.h.destroy());
              return F(v, Promise.all(b), 2);
            }
            r = u(a.j.values());
            for (t = r.next(); !t.done; t = r.next()) w = t.value, w.destroy();
            a.A && (a.A.release(), a.A = null);
            a.g && a.D && a.g.removeChild(a.D);
            a.g && a.P && (a.g.removeChild(a.P), a.g.load(), a.g.disableRemotePlayback = false);
            a.g = null;
            a.P = null;
            a.D = null;
            a.C = null;
            a.i = null;
            a.h = null;
            a.Y = null;
            a.l.clear();
            a.Ma.clear();
            a.j.clear();
            a.K = null;
            a.u.clear();
            a.H = null;
            a.X.clear();
            a.O = null;
            H(v);
          });
        }
        p.init = function(a, b, c, d) {
          b = b === void 0 ? false : b;
          c = c === void 0 ? "UNKNOWN" : c;
          d = d === void 0 ? false : d;
          var e = this, f, g, h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) return f = uc, F(n, e.L, 2);
            if (n.g != 3) {
              if (!Ck(e) && !Dk(e)) return n.B(3);
              $a("Expected MediaSource to be open during init(); reopening the media source.");
              e.L = new Lg();
              e.i = xk(e, e.L);
              return F(n, e.L, 3);
            }
            e.I = b;
            e.V = c;
            e.ib = d;
            e.fb = !e.I && e.V == "HLS" && !e.ib;
            e.X.clear();
            e.S = null;
            e.oa = null;
            e.R = null;
            e.ea = null;
            e.aa = new Lg();
            g = u(a.keys());
            for (h = g.next(); !h.done; h = g.next()) k2 = h.value, l = a.get(k2), Ek(e, k2, l, l.codecs), e.m ? (e.u.set(f.na, []), e.u.set(f.Ia, [])) : e.u.set(k2, []);
            (m = a.get(f.na)) && m.isAudioMuxedInVideo && (e.m = true);
            H(n);
          });
        };
        function Ek(a, b, c, d) {
          b == "audio" && d && (d = Xf(d, c.mimeType));
          var e = df(c.mimeType, d);
          if (b == sc) Fk(a, e, a.I, c.external);
          else {
            var f = a.C.forceTransmux;
            if (!gd(e) || !a.I && ef.includes(e)) f = true;
            var g = ff(c.mimeType, d);
            if (f) {
              f = qc("audio", (d || "").split(","));
              d = qc("video", (d || "").split(","));
              if (f && d) {
                a.m = true;
                Ek(a, "audio", c, f);
                Ek(a, "video", c, d);
                return;
              }
              if (d = Ye(g)) e = d(), a.j.set(b, e), e = e.convertCodecs(b, g);
            }
            g = e + a.C.addExtraFeaturesToSourceBuffer(e);
            ih(a.J);
            try {
              var h = a.i.addSourceBuffer(g);
            } catch (k2) {
              throw new U(2, 3, 3015, k2, "The mediaSource_ status was " + a.i.readyState + " expected 'open'", null);
            }
            a.I && (h.mode = Gk);
            a.A.o(h, "error", function() {
              var k2 = a.u.get(b)[0];
              k2.p.reject(new U(2, 3, 3014, a.g.error ? a.g.error.code : 0, k2.uri));
            });
            a.A.o(h, "updateend", function() {
              return Hk(a, b);
            });
            a.l.set(b, h);
            a.F.set(b, e);
            a.Ma.set(b, !!c.drmInfos.length);
          }
        }
        p.configure = function(a) {
          this.C = a;
          this.h && (this.h.C = a.modifyCueCallback);
        };
        function Jk(a) {
          return a.sa && !a.M && !a.G;
        }
        function Fk(a, b, c, d) {
          a.h || (a.h = new pf(a.Y), a.h && (a.h.C = a.C.modifyCueCallback));
          var e = a.h;
          d = d || a.Fa;
          a = a.V;
          b == "application/cea-608" || b == "application/cea-708" ? e.i = null : (e.i = rf.get(b)(), e.i.setSequenceMode ? e.i.setSequenceMode(c) : Zc("Text parsers w/ setSequenceMode", 'Text parsers should have a "setSequenceMode" method!'), e.i.setManifestType ? e.i.setManifestType(a) : Zc("Text parsers w/ setManifestType", 'Text parsers should have a "setManifestType" method!'), e.D = d);
        }
        function Ck(a) {
          return a.G ? false : a.i ? a.i.readyState == "ended" : true;
        }
        function Dk(a) {
          return a.G ? false : a.i ? a.i.readyState == "closed" : true;
        }
        function Kk(a, b) {
          return a.l.size ? b == sc ? a.h.g : Dj(Lk(a, b)) : null;
        }
        function Mk(a, b) {
          return a.l.size ? b == sc ? a.h.h : Ej(Lk(a, b)) : null;
        }
        function Nk(a, b, c) {
          if (b == sc) return a = a.h, a.h == null || a.h < c ? 0 : a.h - Math.max(c, a.g);
          a = Lk(a, b);
          return Gj(a, c);
        }
        p.Pc = function() {
          var a = { total: this.G ? [] : Hj(this.g.buffered), audio: Hj(Lk(this, "audio")), video: Hj(Lk(this, "video")), text: [] };
          if (this.h) {
            var b = this.h.g, c = this.h.h;
            b != null && c != null && a.text.push({ start: b, end: c });
          }
          return a;
        };
        function Lk(a, b) {
          if (a.G || a.M) return null;
          try {
            return a.l.get(b).buffered;
          } catch (c) {
            return a.l.has(b), null;
          }
        }
        function Ok(a, b, c, d, e, f) {
          var g = null, h = [], k2 = Kb(c);
          if (ef.includes(f)) b = Yj(k2), b.length && d && ((c = b.find(function(r) {
            return r.description === "com.apple.streaming.transportStreamTimestamp";
          })) && typeof c.data == "number" && (g = Math.round(c.data) / 1e3), a.O.onMetadata([{ cueTime: d.startTime, data: k2, frames: b, dts: d.startTime, pts: d.startTime }], 0, d.endTime));
          else if (f.includes("/mp4") && d && d.ia && d.ia.timescale) {
            var l = d.ia.timescale;
            if (!isNaN(l)) {
              var m = e.emsgSchemeIdUris != null && e.emsgSchemeIdUris.length > 0 || a.C.dispatchAllEmsgBoxes, n = 0, q = false;
              k2 = new oh();
              m && k2.W("emsg", function(r) {
                var t = e.emsgSchemeIdUris;
                if (r.version === 0) {
                  var w = r.reader.od();
                  var v = r.reader.od();
                  var z = r.reader.Z();
                  var y = r.reader.Z();
                  var A = r.reader.Z();
                  var C = r.reader.Z();
                  var E = d.startTime + y / z;
                } else z = r.reader.Z(), E = r.reader.Td() / z + d.timestampOffset, y = E - d.startTime, A = r.reader.Z(), C = r.reader.Z(), w = r.reader.od(), v = r.reader.od();
                r = r.reader.ac(r.reader.getLength() - r.reader.Wa());
                if (t && t.includes(w) || a.C.dispatchAllEmsgBoxes) {
                  if (w == "urn:mpeg:dash:event:2012") a.O.Wl();
                  else if (t = new Uint8Array(r.byteLength), t.set(r), r = E + A / z, a.O.Ul({ startTime: E, endTime: r, schemeIdUri: w, value: v, timescale: z, presentationTimeDelta: y, eventDuration: A, id: C, messageData: t }), w == "https://aomedia.org/emsg/ID3" || w == "https://developer.apple.com/streaming/emsg-id3") {
                    if (z = Yj(t), z.length) a.O.onMetadata([{ cueTime: E, data: t, frames: z, dts: E, pts: E }], 0, r);
                  }
                }
              });
              k2.W("prft", function(r) {
                var t = r.reader, w = r.version;
                t.Z();
                r = t.Z();
                var v = t.Z();
                r = r * 1e3 + v / 4294967296 * 1e3;
                w === 0 ? t = t.Z() : (w = t.Z(), t = t.Z(), t = w * 4294967296 + t);
                r = ak(r);
                t = (/* @__PURE__ */ new Map()).set("detail", { wallClockTime: r, programStartDate: new Date(r - t / l * 1e3) });
                t = new T("prft", t);
                a.O.onEvent(t);
              }).box("moof", th).box("traf", th).W("tfdt", function(r) {
                q || (n = Ji(r.reader, r.version).baseMediaDecodeTime / l, q = true, m || r.parser.stop());
              }).parse(c, true);
              q && d.timestampOffset == 0 && (g = n);
            }
          } else f.includes("/mp4") || f.includes("/webm") || !vk(k2) || (a.X.has(b) || a.X.set(b, new nk()), h = a.X.get(b), h.clearData(), h.gg(d.i), h.parse(k2), k2 = h.getStartTime(b), k2 != null && (g = k2), h = h.getMetadata());
          return { timestamp: g, metadata: h };
        }
        function Pk(a, b, c, d, e, f, g, h, k2, l, m) {
          g = g === void 0 ? false : g;
          h = h === void 0 ? false : h;
          k2 = k2 === void 0 ? false : k2;
          l = l === void 0 ? false : l;
          var n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P, O;
          return Q(function(M) {
            switch (M.g) {
              case 1:
                n = uc;
                if (b != n.Va) {
                  M.B(2);
                  break;
                }
                if (a.V != "HLS") {
                  M.B(3);
                  break;
                }
                return F(M, a.Oa, 4);
              case 4:
                q = M.h, a.h.A = q;
              case 3:
                return F(M, uf(a.h, c, d ? d.startTime : null, d ? d.endTime : null, d ? d.T()[0] : null), 5);
              case 5:
                return M.return();
              case 2:
                if (l || !a.m) {
                  M.B(6);
                  break;
                }
                return F(M, Pk(a, n.na, c, d, e, f, g, h, k2, true), 7);
              case 7:
                return F(M, Pk(
                  a,
                  n.Ia,
                  c,
                  d,
                  e,
                  f,
                  g,
                  h,
                  k2,
                  true
                ), 8);
              case 8:
                return M.return();
              case 6:
                if (!a.l.has(b)) return M.return();
                r = a.l.get(b).timestampOffset;
                t = a.F.get(b);
                a.j.has(b) && (t = a.j.get(b).getOriginalMimeType());
                if (d && (w = Ok(a, b, c, d, e, t), v = w.timestamp, z = w.metadata, v != null && (a.S == null && b == n.Ia && (a.S = v, a.oa = d.startTime, a.R != null && (y = 0, a.oa == a.ea && (y = a.S - a.R), a.aa.resolve(y))), a.R == null && b == n.na && (a.R = v, a.ea = d.startTime, a.S != null && (A = 0, a.oa == a.ea && (A = a.S - a.R), a.aa.resolve(A))), C = v, E = ef, !a.I && E.includes(a.F.get(b)) && (C = 0), D = d.startTime - C, B = Math.abs(r - D), (B >= 1e-3 || g || h) && (!k2 || D > 0 || !r) && (r = D, a.fb && (Qk(a, b, function() {
                  return Rk(a, b);
                }, null), Qk(a, b, function() {
                  return Sk(a, b, r);
                }, null))), (G = b == n.Ia || !a.l.has(n.Ia)) && a.Oa.resolve(r)), z.length)) a.O.onMetadata(z, r, d ? d.endTime : null);
                f && b == n.Ia && (a.h || Fk(a, "application/cea-608", a.I, false), a.K || (I = t.split(";", 1)[0], a.K = new od(I)), d ? (J = a.K.Uf(c), J.length && zf(a.h, J, d.startTime, d.endTime, r)) : a.K.init(c, h, m));
                if (!a.j.has(b)) {
                  M.B(9);
                  break;
                }
                return F(M, a.j.get(b).transmux(c, e, d, a.i.duration, b), 10);
              case 10:
                L = M.h, ArrayBuffer.isView(L) ? c = L : (K = L, K.init != null && (N = K.init, Qk(a, b, function() {
                  a.H && dd(a.H, N, r, e);
                  a.l.get(b).appendBuffer(N);
                }, d ? d.T()[0] : null)), c = K.data);
              case 9:
                c = Tk(a, e, c, d, b);
                if (!d || !a.I || b == n.Va) {
                  M.B(11);
                  break;
                }
                if (!g && !h) {
                  M.B(11);
                  break;
                }
                P = d.startTime;
                if (a.V != "HLS" || a.m || b != n.na || !a.l.has(n.Ia)) {
                  M.B(13);
                  break;
                }
                return F(M, a.aa, 14);
              case 14:
                O = M.h, Math.abs(O) > 0.15 && (P -= O);
              case 13:
                Qk(a, b, function() {
                  return Rk(a, b);
                }, null), Qk(a, b, function() {
                  return Sk(a, b, P);
                }, null);
              case 11:
                return F(M, Qk(a, b, function() {
                  var R = c;
                  a.H && dd(a.H, R, r, e);
                  a.l.get(b).appendBuffer(R);
                }, d ? d.T()[0] : null), 15);
              case 15:
                H(M);
            }
          });
        }
        function Uk(a, b) {
          var c = Mk(a, "video") || 0;
          wf(a.h, b, c);
        }
        function Vk(a) {
          a.h && wf(a.h, "", 0);
        }
        p.remove = function(a, b, c, d) {
          var e = this, f;
          return Q(function(g) {
            return g.g == 1 ? (f = uc, a == f.Ia && e.K && e.K.remove(d), a == f.Va ? F(g, e.h.remove(b, c), 0) : c > b ? F(g, Qk(e, a, function() {
              return Wk(e, a, b, c);
            }, null), 5) : g.B(0)) : e.m ? F(g, Qk(e, f.na, function() {
              return Wk(e, f.na, b, c);
            }, null), 0) : g.B(0);
          });
        };
        function Xk(a, b) {
          var c;
          return Q(function(d) {
            return d.g == 1 ? (c = uc, b == c.Va ? a.h ? F(d, a.h.remove(0, Infinity), 0) : d.return() : F(d, Qk(a, b, function() {
              return Wk(a, b, 0, a.i.duration);
            }, null), 4)) : a.m ? F(d, Qk(a, c.na, function() {
              return Wk(a, c.na, 0, a.i.duration);
            }, null), 0) : d.B(0);
          });
        }
        p.flush = function(a) {
          var b = this, c;
          return Q(function(d) {
            return d.g == 1 ? (c = uc, a == c.Va ? d.return() : F(d, Qk(b, a, function() {
              b.g.currentTime -= 1e-3;
              Hk(b, a);
            }, null), 2)) : b.m ? F(d, Qk(b, c.na, function() {
              var e = c.na;
              b.g.currentTime -= 1e-3;
              Hk(b, e);
            }, null), 0) : d.B(0);
          });
        };
        function Yk(a, b, c, d, e, f, g, h, k2) {
          var l, m, n;
          return Q(function(q) {
            if (q.g == 1) {
              l = uc;
              if (b == l.Va) return f || (a.h.A = c), vf(a.h, d, e), q.return();
              m = [];
              return F(q, Zk(a, b, g, h, k2), 2);
            }
            n = q.h;
            n || (m.push(Qk(a, b, function() {
              return Rk(a, b);
            }, null)), a.m && m.push(Qk(a, l.na, function() {
              return Rk(a, l.na);
            }, null)));
            f || (m.push(Qk(a, b, function() {
              return Sk(a, b, c);
            }, null)), a.m && m.push(Qk(a, l.na, function() {
              return Sk(a, l.na, c);
            }, null)));
            if (d != 0 || e != Infinity) m.push(Qk(a, b, function() {
              return $k(a, b, d, e);
            }, null)), a.m && m.push(Qk(a, l.na, function() {
              return $k(
                a,
                l.na,
                d,
                e
              );
            }, null));
            return m.length ? F(q, Promise.all(m), 0) : q.B(0);
          });
        }
        function al(a, b, c) {
          var d, e;
          return Q(function(f) {
            if (f.g == 1) {
              d = uc;
              if (b == d.Va) return f.return();
              b == d.Ia && (a.Oa = new Lg());
              if (!a.I || (e = Mk(a, b)) && Math.abs(e - c) < 0.15) return f.return();
              Qk(a, b, function() {
                return Rk(a, b);
              }, null);
              a.m && Qk(a, d.na, function() {
                return Rk(a, d.na);
              }, null);
              return F(f, Qk(a, b, function() {
                return Sk(a, b, c);
              }, null), 2);
            }
            return a.m ? F(f, Qk(a, d.na, function() {
              return Sk(a, d.na, c);
            }, null), 0) : f.B(0);
          });
        }
        p.endOfStream = function(a) {
          var b = this;
          return Q(function(c) {
            return F(c, bl(b, function() {
              Ck(b) || Dk(b) || (a ? b.i.endOfStream(a) : b.i.endOfStream());
            }), 0);
          });
        };
        p.zb = function(a) {
          var b = this;
          return Q(function(c) {
            return F(c, bl(b, function() {
              if (b.C.durationReductionEmitsUpdateEnd && a < b.i.duration) for (var d = u(b.l.keys()), e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                var f = { start: function() {
                }, p: new Lg(), uri: null };
                b.u.get(e).unshift(f);
              }
              b.i.duration = a;
              b.ra = a;
            }), 0);
          });
        };
        p.getDuration = function() {
          return this.i.duration;
        };
        function cl(a, b, c) {
          Q(function(d) {
            return a.J.g || a.g.error || a.M || a.G || Ck(a) || Dk(a) ? d.return() : F(d, bl(a, function() {
              Ck(a) || Dk(a) || a.i.setLiveSeekableRange(b, c);
            }), 0);
          });
        }
        function dl(a) {
          Q(function(b) {
            return a.J.g || a.g.error || a.M || a.G || Ck(a) || Dk(a) ? b.return() : F(b, bl(a, function() {
              Ck(a) || Dk(a) || a.i.clearLiveSeekableRange();
            }), 0);
          });
        }
        function Wk(a, b, c, d) {
          d <= c ? Hk(a, b) : a.l.get(b).remove(c, d);
        }
        function Rk(a, b) {
          var c = a.l.get(b), d = c.appendWindowStart, e = c.appendWindowEnd;
          c.abort();
          c.appendWindowStart = d;
          c.appendWindowEnd = e;
          Hk(a, b);
        }
        function Sk(a, b, c) {
          c < 0 && (c += 1e-3);
          a.l.get(b).timestampOffset = c;
          Hk(a, b);
        }
        function $k(a, b, c, d) {
          var e = a.l.get(b);
          if (e.appendWindowEnd !== d || e.appendWindowStart !== c) e.appendWindowStart = 0, e.appendWindowEnd = d, e.appendWindowStart = c;
          Hk(a, b);
        }
        function Hk(a, b) {
          if (a.G || a.J.g) {
            var c = a.u.get(b);
            c && c.length && ((c = c[0]) && c.p && c.p.resolve(), a.u.set(b, []));
          } else if (c = a.u.get(b)[0]) c.p.resolve(), el(a, b);
        }
        function Qk(a, b, c, d) {
          ih(a.J);
          c = { start: c, p: new Lg(), uri: d };
          a.u.get(b).push(c);
          a.u.get(b).length == 1 && fl(a, b);
          return c.p;
        }
        function bl(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, t;
          return Q(function(w) {
            switch (w.g) {
              case 1:
                ih(a.J);
                c = [];
                d = Array.from(a.l.keys());
                e = u(d);
                f = e.next();
                for (g = {}; !f.done; g = { ready: void 0 }, f = e.next()) h = f.value, g.ready = new Lg(), k2 = { start: /* @__PURE__ */ function(v) {
                  return function() {
                    return v.ready.resolve();
                  };
                }(g), p: g.ready, uri: null }, l = a.u.get(h), l.push(k2), c.push(g.ready), l.length == 1 && k2.start();
                ra(w, 2);
                return F(w, Promise.all(c), 4);
              case 4:
                ta(w, 3);
                break;
              case 2:
                throw m = ua(w), m;
              case 3:
                return ra(w, 5, 6), F(w, b(), 6);
              case 6:
                va(w);
                n = u(d);
                for (q = n.next(); !q.done; q = n.next()) r = q.value, el(a, r);
                xa(w, 0);
                break;
              case 5:
                throw t = ua(w), new U(2, 3, 3015, t, a.g.error || "No error in the media element", null);
            }
          });
        }
        function el(a, b) {
          a.u.get(b).shift();
          fl(a, b);
        }
        function fl(a, b) {
          var c = a.u.get(b)[0];
          if (c) try {
            c.start();
          } catch (d) {
            d.name == "QuotaExceededError" ? c.p.reject(new U(2, 3, 3017, b)) : Jk(a) ? c.p.reject(new U(2, 3, 3015, d, a.g.error || "No error in the media element", c.uri)) : c.p.reject(new U(2, 3, 3024, b)), el(a, b);
          }
        }
        function gl(a, b) {
          a.Y = b;
          a.h && (a.h.j = b);
        }
        function Tk(a, b, c, d, e) {
          if (hf(a.F.get(e)) != "mp4") return c;
          var f = d === null, g = a.Ma.get(e), h = a.O.Rk(), k2 = false;
          d && d.ia && (k2 = d.ia.encrypted);
          d = d ? d.T()[0] : null;
          var l = Rb();
          a.C.correctEc3Enca && f && e === "audio" && (c = pj(c));
          a.C.insertFakeEncryptionInInit && g && l.Ud(h, e) && (f ? c = qj(b, c, d) : !k2 && l.Aj(e) && (c = sj(c)));
          f && l.Fe() && (c = vj(c));
          return c;
        }
        function hl(a, b, c, d) {
          return Qk(a, b, function() {
            if (b !== sc) {
              a.F.get(b);
              if (id()) {
                a.j.has(b) && (a.j.get(b).destroy(), a.j.delete(b));
                d && a.j.set(b, d);
                var e = c + a.C.addExtraFeaturesToSourceBuffer(c);
                a.l.get(b).changeType(e);
                a.F.set(b, c);
              }
              Hk(a, b);
            }
          }, null);
        }
        function il(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E;
          return Q(function(D) {
            if (D.g == 1) {
              if (a.G || a.M) return D.return();
              c = uc;
              a.G = true;
              a.m = false;
              d = a.g.currentTime;
              e = a.g.autoplay;
              a.g.paused || (a.hb = true);
              a.jb && (a.g.autoplay = false);
              sa(D, 2);
              a.A.Sa();
              f = u(a.j.values());
              for (g = f.next(); !g.done; g = f.next()) h = g.value, h.destroy();
              k2 = u(a.l.values());
              for (l = k2.next(); !l.done; l = k2.next()) {
                m = l.value;
                try {
                  a.i.removeSourceBuffer(m);
                } catch (B) {
                }
              }
              a.j.clear();
              a.l.clear();
              n = a.i.duration;
              a.L = new Lg();
              a.i = xk(a, a.L);
              return F(D, a.L, 4);
            }
            if (D.g != 2) {
              !isNaN(n) && n ? a.i.duration = n : !isNaN(a.ra) && a.ra && (a.i.duration = a.ra);
              q = new Lg();
              r = a.i.sourceBuffers;
              t = b.size;
              w = 0;
              v = function() {
                w++;
                w === t && (q.resolve(), a.A.Ea(r, "addsourcebuffer", v));
              };
              a.A.o(r, "addsourcebuffer", v);
              z = u(b.keys());
              for (y = z.next(); !y.done; y = z.next()) A = y.value, C = b.get(A), Ek(a, A, C, C.codecs);
              (E = b.get(c.na)) && E.isAudioMuxedInVideo && (a.m = true);
              a.m && !a.u.has(c.na) && a.u.set(c.na, []);
              a.g.currentTime = d;
              return F(D, q, 2);
            }
            va(D);
            a.G = false;
            ih(a.J);
            a.A.ua(a.g, "canplaythrough", function() {
              a.J.g || (a.g.autoplay = e, a.hb && (a.hb = false, a.g.play()));
            });
            return xa(D, 0);
          });
        }
        function jl(a, b) {
          return bl(a, function() {
            return il(a, b);
          });
        }
        function kl(a, b, c, d) {
          var e = false, f = qc("audio", (d || "").split(",")), g = qc("video", (d || "").split(",")), h = g;
          b == "audio" && (h = f);
          h || (h = d);
          d = df(c, h);
          var k2 = mf(a.F.get(b)), l = a.C.forceTransmux;
          !gd(d) || !a.I && ef.includes(d) ? l = true : l || c == k2 || (l = !Rb().lg() && ef.includes(c));
          if (l && (a = ff(c, h), c = Ye(a))) {
            var m = c();
            f && g && (e = true);
            d = m.convertCodecs(b, a);
          }
          b = jf(nf(d));
          return { qc: m, Am: e, Ii: mf(d), codec: b, mimeType: d };
        }
        function ll(a, b, c, d, e) {
          if (b == sc) return { type: ml, Of: c, qc: null };
          var f = jf(nf(a.F.get(b))), g = mf(a.F.get(b)), h = kl(a, b, c, d), k2 = h.qc, l = h.Am, m = h.Ii, n = h.codec;
          h = h.mimeType;
          var q = true;
          l && a.F.has("audio") && (c = kl(a, "audio", c, d), d = jf(nf(a.F.get("audio"))), q = mf(a.F.get("audio")), q = d == c.codec && q == c.Ii, c.qc && c.qc.destroy());
          if (f === n && g === m && q) return { type: ml, Of: h, qc: k2 };
          f = true;
          if (a.m && !e.has("audio") || l && k2 && !a.j.has(b)) f = false;
          if (f && a.C.codecSwitchingStrategy === "smooth" && id()) return { type: nl, Of: h, qc: k2 };
          k2 && k2.destroy();
          return {
            type: ol,
            Of: h,
            qc: null
          };
        }
        function Zk(a, b, c, d, e) {
          var f, g, h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) {
              f = uc;
              g = ll(a, b, c, d, e);
              h = g.type;
              k2 = g.qc;
              l = g.Of;
              if (m = e.get(f.na)) a.m = m.isAudioMuxedInVideo;
              if (h == ml) return a.j.has(b) && !k2 ? (a.j.get(b).destroy(), a.j.delete(b)) : !a.j.has(b) && k2 ? a.j.set(b, k2) : k2 && (a.j.has(b) && a.j.get(b).transmux !== k2.transmux ? (a.j.get(b).destroy(), a.j.set(b, k2)) : k2.destroy()), n.return(false);
              if (h == nl) return F(n, hl(a, b, l, k2), 3);
              if (h != ol) return n.B(3);
              k2 && k2.destroy();
              return F(n, jl(a, e), 3);
            }
            return n.return(true);
          });
        }
        function pl(a, b, c, d, e) {
          a = ll(a, b, c, d, e);
          a.qc && a.qc.destroy();
          return a.type == ol;
        }
        var zk = window2.URL.createObjectURL, Gk = "sequence", ml = "none", ol = "reset", nl = "changeType";
        function yl(a, b, c) {
          this.i = a;
          this.F = b;
          this.A = this.l = Infinity;
          this.h = 1;
          this.g = this.j = null;
          this.C = 0;
          this.D = true;
          this.J = false;
          this.I = 0;
          this.G = c === void 0 ? true : c;
          this.H = 0;
          this.u = false;
          this.m = a;
        }
        p = yl.prototype;
        p.getDuration = function() {
          return this.l;
        };
        p.Xk = function() {
          return this.h;
        };
        p.Nj = function(a) {
          this.i = a;
        };
        p.zb = function(a) {
          this.l = a;
        };
        p.fl = function() {
          return this.i;
        };
        p.Kj = function(a) {
          this.C = a;
        };
        p.sd = function(a) {
          a && !this.D && (this.J = true);
          this.D = a;
        };
        p.hg = function(a) {
          this.A = a;
        };
        p.xf = function() {
          return this.A;
        };
        p.ci = function(a) {
          this.F = a;
        };
        p.Mk = function() {
          return this.F;
        };
        p.tj = function(a, b) {
          if (a.length != 0) {
            var c = (Date.now() + this.C) / 1e3;
            a = a.filter(function(e) {
              return e.start + b < c;
            });
            if (a.length != 0) {
              var d = a[a.length - 1].end + b;
              this.Pf(a[0].start + b);
              this.h = a.reduce(function(e, f) {
                return Math.max(e, f.end - f.start);
              }, this.h);
              this.g = Math.max(this.g, d);
              this.i != null && this.G && !this.u && (this.i = c - this.g - this.h);
            }
          }
        };
        p.Be = function(a) {
          if (a.length != 0) {
            var b = a[0].startTime, c = a[0].endTime, d = (Date.now() + this.C) / 1e3;
            a = u(a);
            for (var e = a.next(); !e.done; e = a.next()) e = e.value, d < e.startTime || (b = Math.min(b, e.startTime), c = Math.max(c, e.endTime), this.h = Math.max(this.h, e.endTime - e.startTime));
            this.Pf(b);
            this.g = Math.max(this.g, c);
            this.i != null && this.G && !this.u && (this.i = d - this.g - this.h);
          }
        };
        p.sj = function(a, b) {
          this.Pf(a);
          b == Infinity || this.U() || (this.g = Math.max(this.g, b));
        };
        p.Yk = function() {
          return this.g;
        };
        p.Jf = function() {
          this.u = true;
        };
        p.Kl = function() {
          return this.u;
        };
        p.ei = function(a) {
          this.m = a;
        };
        p.Qk = function() {
          return this.m;
        };
        p.Pf = function(a) {
          this.j == null ? this.j = a : this.J || (this.j = Math.min(this.j, a));
        };
        p.Lh = function(a) {
          this.h = Math.max(this.h, a);
        };
        p.offset = function(a) {
          this.j != null && (this.j += a);
          this.g != null && (this.g += a);
        };
        p.U = function() {
          return this.l == Infinity && !this.D;
        };
        p.ld = function() {
          return this.l != Infinity && !this.D;
        };
        p.Nb = function() {
          return Math.max(this.I, this.Sc() - this.A);
        };
        p.Pj = function(a) {
          this.I = a;
        };
        p.Sc = function() {
          return this.U() || this.ld() ? Math.min(Math.max(0, (Date.now() + this.C) / 1e3 - this.h - this.i) + this.H, this.l) : this.g ? Math.min(this.g, this.l) : this.l;
        };
        p.oe = function(a) {
          var b = Math.max(this.j, this.I);
          return this.A == Infinity ? Math.ceil(b * 1e3) / 1e3 : Math.max(b, Math.min(this.Sc() - this.A + a, this.Mb()));
        };
        p.fc = function() {
          return this.oe(0);
        };
        p.Mb = function() {
          return Math.max(0, this.Sc() - (this.U() || this.ld() ? this.F : 0));
        };
        p.dk = function() {
          return this.i == null || this.g != null && this.G ? false : true;
        };
        p.Jj = function(a) {
          this.H = a;
        };
        p.Ck = function() {
          return this.H;
        };
        S("shaka.media.PresentationTimeline", yl);
        yl.prototype.getAvailabilityTimeOffset = yl.prototype.Ck;
        yl.prototype.setAvailabilityTimeOffset = yl.prototype.Jj;
        yl.prototype.usingPresentationStartTime = yl.prototype.dk;
        yl.prototype.getSeekRangeEnd = yl.prototype.Mb;
        yl.prototype.getSeekRangeStart = yl.prototype.fc;
        yl.prototype.getSafeSeekRangeStart = yl.prototype.oe;
        yl.prototype.getSegmentAvailabilityEnd = yl.prototype.Sc;
        yl.prototype.setUserSeekStart = yl.prototype.Pj;
        yl.prototype.getSegmentAvailabilityStart = yl.prototype.Nb;
        yl.prototype.isInProgress = yl.prototype.ld;
        yl.prototype.isLive = yl.prototype.U;
        yl.prototype.offset = yl.prototype.offset;
        yl.prototype.notifyMaxSegmentDuration = yl.prototype.Lh;
        yl.prototype.notifyMinSegmentStartTime = yl.prototype.Pf;
        yl.prototype.getInitialProgramDateTime = yl.prototype.Qk;
        yl.prototype.setInitialProgramDateTime = yl.prototype.ei;
        yl.prototype.isStartTimeLocked = yl.prototype.Kl;
        yl.prototype.lockStartTime = yl.prototype.Jf;
        yl.prototype.getMaxSegmentEndTime = yl.prototype.Yk;
        yl.prototype.notifyPeriodDuration = yl.prototype.sj;
        yl.prototype.notifySegments = yl.prototype.Be;
        yl.prototype.notifyTimeRange = yl.prototype.tj;
        yl.prototype.getDelay = yl.prototype.Mk;
        yl.prototype.setDelay = yl.prototype.ci;
        yl.prototype.getSegmentAvailabilityDuration = yl.prototype.xf;
        yl.prototype.setSegmentAvailabilityDuration = yl.prototype.hg;
        yl.prototype.setStatic = yl.prototype.sd;
        yl.prototype.setClockOffset = yl.prototype.Kj;
        yl.prototype.getPresentationStartTime = yl.prototype.fl;
        yl.prototype.setDuration = yl.prototype.zb;
        yl.prototype.setPresentationStartTime = yl.prototype.Nj;
        yl.prototype.getMaxSegmentDuration = yl.prototype.Xk;
        yl.prototype.getDuration = yl.prototype.getDuration;
        function zl(a, b, c, d) {
          var e = this;
          this.A = d;
          this.g = a;
          this.F = b;
          this.h = c;
          this.j = new Tc();
          this.m = false;
          this.l = 0;
          this.D = false;
          this.H = this.G = 0;
          this.u = Al(this);
          this.C = false;
          this.j.o(a, "waiting", function() {
            return Bl(e);
          });
          this.i = new Bf(function() {
            Bl(e);
          }).wa(this.h.gapJumpTimerTime);
        }
        zl.prototype.release = function() {
          this.j && (this.j.release(), this.j = null);
          this.i != null && (this.i.stop(), this.i = null);
          this.u && (this.u.release(), this.u = null);
          this.g = this.F = this.A = null;
        };
        zl.prototype.Sf = function() {
          this.C = true;
          this.i && this.i.wa(this.h.gapJumpTimerTime);
          Bl(this);
        };
        function Bl(a) {
          if (a.g.readyState != 0) {
            if (a.g.seeking) {
              if (!a.m) return;
            } else a.m = false;
            if (!a.g.paused || a.g.currentTime == a.l && (a.g.autoplay || a.g.currentTime != a.l)) {
              var b;
              if (!(b = !a.u)) {
                b = a.u;
                var c = b.h, d = Cl(c), e = c.g.currentTime, f = Date.now() / 1e3;
                if (b.g != e || b.m != d) b.l = f, b.g = e, b.m = d, b.i = false;
                e = f - b.l;
                if (d = e >= b.u && d && !b.i) b.j && b.j(b.g, e), b.i = true, b.g = c.g.currentTime;
                b = !d;
              }
              b && (b = a.g.currentTime, c = a.g.buffered, d = Ij(c, b, a.h.gapDetectionThreshold), d == null || d == 0 && !a.C || (e = c.start(d), (f = a.h.gapPadding) && (e = Math.ceil((e + f) * 100) / 100), e >= a.F.Mb() || e - b < 1e-3 || (d != 0 && c.end(d - 1), Dl(a, e), b == a.l && (a.l = e), a.G++, a.A(new T("gapjumped")))));
            }
          }
        }
        function Dl(a, b) {
          a.D = true;
          a.j.ua(a.g, "seeked", function() {
            a.D = false;
          });
          a.g.currentTime = b;
        }
        function Al(a) {
          if (!a.h.stallEnabled) return null;
          var b = a.h.stallThreshold, c = a.h.stallSkip;
          return new El(new Fl(a.g), b, function() {
            var d;
            return Q(function(e) {
              if (e.g == 1) return d = Hj(a.g.buffered), d.length ? c ? (a.g.currentTime += c, e.B(2)) : F(e, a.g.play(), 3) : e.return();
              if (e.g != 2) {
                if (!a.g) return e.return();
                a.g.pause();
                a.g.play();
              }
              a.H++;
              a.A(new T("stalldetected"));
              H(e);
            });
          });
        }
        function El(a, b, c) {
          this.h = a;
          this.m = Cl(a);
          this.g = a.g.currentTime;
          this.l = Date.now() / 1e3;
          this.i = false;
          this.u = b;
          this.j = c;
        }
        El.prototype.release = function() {
          this.h && this.h.release();
          this.j = this.h = null;
        };
        function Fl(a) {
          var b = this;
          this.g = a;
          this.h = new Tc();
          this.i = false;
          this.h.o(this.g, "audiofocuspaused", function() {
            b.i = true;
          });
          this.h.o(this.g, "audiofocusgranted", function() {
            b.i = false;
          });
          this.h.o(this.g, "audiofocuslost", function() {
            b.i = true;
          });
        }
        function Cl(a) {
          if (a.g.paused || a.g.playbackRate == 0 || a.i || a.g.buffered.length == 0) var b = false;
          else a: {
            b = a.g.currentTime;
            a = u(Hj(a.g.buffered));
            for (var c = a.next(); !c.done; c = a.next()) if (c = c.value, !(b < c.start - 0.1 || b > c.end - 0.5)) {
              b = true;
              break a;
            }
            b = false;
          }
          return b;
        }
        Fl.prototype.release = function() {
          this.h && this.h.release();
          this.h = null;
        };
        function Gl(a, b, c, d) {
          b == HTMLMediaElement.HAVE_NOTHING || a.readyState >= b ? d() : (b = Hl.value().get(b), c.ua(a, b, d));
        }
        var Hl = new Qb(function() {
          return /* @__PURE__ */ new Map([[HTMLMediaElement.HAVE_METADATA, "loadedmetadata"], [HTMLMediaElement.HAVE_CURRENT_DATA, "loadeddata"], [HTMLMediaElement.HAVE_FUTURE_DATA, "canplay"], [HTMLMediaElement.HAVE_ENOUGH_DATA, "canplaythrough"]]);
        });
        function Il(a, b, c, d) {
          var e = this;
          this.g = a;
          this.m = b;
          this.A = c;
          this.l = null;
          this.j = function() {
            e.l == null && (e.l = d());
            return e.l;
          };
          this.u = false;
          this.h = new Tc();
          this.i = new Jl(a);
          Gl(this.g, HTMLMediaElement.HAVE_METADATA, this.h, function() {
            Kl(e, e.j());
          });
        }
        Il.prototype.release = function() {
          this.h && (this.h.release(), this.h = null);
          this.i != null && (this.i.release(), this.i = null);
          this.m = function() {
          };
          this.g = null;
        };
        function Ll(a) {
          return a.u ? a.g.currentTime : a.j();
        }
        function Ml(a, b) {
          a.g.readyState > 0 ? Nl(a.i, b) : Gl(a.g, HTMLMediaElement.HAVE_METADATA, a.h, function() {
            Kl(a, a.j());
          });
        }
        function Kl(a, b) {
          Math.abs(a.g.currentTime - b) < 1e-3 ? Ol(a) : (a.h.ua(a.g, "seeking", function() {
            Ol(a);
          }), Nl(a.i, a.g.currentTime && a.g.currentTime != 0 ? a.g.currentTime : b));
        }
        function Ol(a) {
          a.u = true;
          a.h.o(a.g, "seeking", function() {
            return a.m();
          });
          a.A(a.g.currentTime);
        }
        function Jl(a) {
          var b = this;
          this.g = a;
          this.m = 10;
          this.j = this.l = this.i = 0;
          this.h = new Bf(function() {
            b.i <= 0 ? b.h.stop() : b.g.currentTime != b.l || b.g.currentTime === b.j ? b.h.stop() : (b.g.currentTime = b.j, b.i--);
          });
        }
        Jl.prototype.release = function() {
          this.h && (this.h.stop(), this.h = null);
          this.g = null;
        };
        function Nl(a, b) {
          a.l = a.g.currentTime;
          a.j = b;
          a.i = a.m;
          a.g.currentTime = b;
          a.h.wa(0.1);
        }
        ;
        function Pl(a) {
          this.g = a;
          this.i = false;
          this.h = null;
          this.j = new Tc();
        }
        p = Pl.prototype;
        p.ready = function() {
          function a() {
            if (b.h == null || b.h == 0 && b.g.duration != Infinity) b.i = true;
            else {
              var c = b.g.currentTime, d = null;
              if (typeof b.h === "number") d = b.h;
              else if (b.h instanceof Date) {
                var e = Ql(b);
                e !== null && (d = b.h.getTime() / 1e3 - e, d = Rl(b, d));
              }
              d == null ? b.i = true : (d < 0 && (d = Math.max(0, c + d)), c != d ? (b.j.ua(b.g, "seeking", function() {
                b.i = true;
              }), b.g.currentTime = d) : b.i = true);
            }
          }
          var b = this;
          Gl(this.g, HTMLMediaElement.HAVE_FUTURE_DATA, this.j, function() {
            a();
          });
        };
        p.release = function() {
          this.j && (this.j.release(), this.j = null);
          this.g = null;
        };
        p.Ag = function(a) {
          this.h = this.i ? this.h : a;
        };
        p.$e = function() {
          var a = this.i ? this.g.currentTime : this.h;
          a instanceof Date && (a = a.getTime() / 1e3 - (Ql(this) || 0), a = Rl(this, a));
          return a || 0;
        };
        p.Ci = function() {
          return 0;
        };
        p.Ai = function() {
          return 0;
        };
        p.Bi = function() {
          return false;
        };
        p.rj = function() {
        };
        p.fj = function() {
          var a = Ej(this.g.buffered);
          return a != null && a >= this.g.duration - 1;
        };
        function Ql(a) {
          return a.g.getStartDate && (a = a.g.getStartDate().getTime(), !isNaN(a)) ? a / 1e3 : null;
        }
        function Rl(a, b) {
          a = a.g.seekable;
          a.length > 0 && (b = Math.max(a.start(0), b), b = Math.min(a.end(a.length - 1), b));
          return b;
        }
        function Sl(a, b, c, d, e, f) {
          var g = this;
          this.h = a;
          this.g = b.presentationTimeline;
          this.l = c;
          this.A = e;
          this.u = null;
          this.i = new zl(a, b.presentationTimeline, c, f);
          this.j = new Il(a, function() {
            a: {
              var h = g.i;
              h.m = true;
              h.C = false;
              h.i && h.i.wa(h.h.gapJumpTimerTime);
              Bl(h);
              var k2 = Ll(g.j);
              h = Tl(g, k2);
              if (!kd() && Math.abs(h - k2) > 1e-3) {
                k2 = false;
                var l = Rb().Fj();
                if (l) {
                  var m = Date.now() / 1e3;
                  if (!g.u || g.u < m - l) g.u = m, k2 = true;
                } else k2 = true;
                if (k2) {
                  Ml(g.j, h);
                  h = void 0;
                  break a;
                }
              }
              g.A();
              h = void 0;
            }
            return h;
          }, function(h) {
            var k2 = g.i;
            k2.g.seeking && !k2.m && (k2.m = true, k2.l = h);
            k2.i && k2.i.wa(k2.h.gapJumpTimerTime);
            Bl(k2);
          }, function() {
            return Ul(g, d);
          });
          this.m = new Bf(function() {
            if (g.h.readyState != 0 && !g.h.paused) {
              var h = Ll(g.j), k2 = g.g.fc(), l = g.g.Mb();
              l - k2 < 3 && (k2 = l - 3);
              h < k2 && (h = Tl(g, h), g.h.currentTime = h);
            }
          });
        }
        p = Sl.prototype;
        p.ready = function() {
          this.m.wa(0.25);
        };
        p.release = function() {
          this.j && (this.j.release(), this.j = null);
          this.i && (this.i.release(), this.i = null);
          this.m && (this.m.stop(), this.m = null);
          this.h = this.j = this.g = this.l = null;
          this.A = function() {
          };
        };
        p.Ag = function(a) {
          Ml(this.j, Ul(this, a));
        };
        p.$e = function() {
          var a = Ll(this.j);
          return this.h.readyState > 0 && !this.h.paused ? Vl(this, a) : a;
        };
        p.Ci = function() {
          return this.i.H;
        };
        p.Ai = function() {
          return this.i.G;
        };
        p.Bi = function() {
          return this.i.D;
        };
        function Ul(a, b) {
          b == null ? b = a.g.getDuration() < Infinity ? a.g.fc() : a.g.Mb() : b instanceof Date ? b = b.getTime() / 1e3 - (a.g.m || a.g.i) : b < 0 && (b = a.g.Mb() + b);
          return Wl(a, Vl(a, b));
        }
        p.rj = function() {
          this.i.Sf();
        };
        p.fj = function() {
          if (this.g.U()) {
            var a = this.g.Sc(), b = Ej(this.h.buffered);
            if (b != null && b >= a) return true;
          }
          return false;
        };
        function Wl(a, b) {
          var c = a.g.getDuration();
          return b >= c ? c - a.l.durationBackoff : b;
        }
        function Tl(a, b) {
          var c = a.l.rebufferingGoal, d = a.l.safeSeekOffset, e = a.g.fc(), f = a.g.Mb(), g = a.g.getDuration();
          f - e < 3 && (e = f - 3);
          var h = a.g.oe(c), k2 = a.g.oe(d);
          c = a.g.oe(c + d);
          return b >= g ? Wl(a, b) : b > f ? f - a.l.safeSeekEndOffset : b < e ? a.g.U() && a.l.returnToEndOfLiveWindowWhenOutside ? f - a.l.safeSeekEndOffset : Fj(a.h.buffered, k2) ? k2 : c : b >= h || Fj(a.h.buffered, b) ? b : c;
        }
        function Vl(a, b) {
          var c = a.g.fc();
          if (b < c) return c;
          a = a.g.Mb();
          return b > a ? a : b;
        }
        ;
        function Xl(a) {
          this.g = a;
          this.m = null;
          this.i = 0;
          this.u = false;
        }
        p = Xl.prototype;
        p.getNumReferences = function() {
          return this.g.length;
        };
        p.getNumEvicted = function() {
          return this.i;
        };
        p.release = function() {
          this.u || (this.g = [], this.m && this.m.stop(), this.m = null);
        };
        p.Rl = function() {
          this.u = true;
        };
        p.Lb = function(a) {
          for (var b = u(this.g), c = b.next(); !c.done; c = b.next()) a(c.value);
        };
        function eg(a) {
          return a.g[0] || null;
        }
        p.find = function(a) {
          for (var b = this.g.length - 1, c = b; c >= 0; --c) {
            var d = this.g[c], e = c < b ? this.g[c + 1].startTime : d.endTime;
            if (a >= d.startTime && a < e) return c + this.i;
          }
          return this.g.length && a < this.g[0].startTime ? this.i : null;
        };
        p.get = function(a) {
          if (this.g.length == 0) return null;
          a -= this.i;
          return a < 0 || a >= this.g.length ? null : this.g[a];
        };
        p.offset = function(a) {
          if (!this.u) for (var b = u(this.g), c = b.next(); !c.done; c = b.next()) c.value.offset(a);
        };
        p.Lf = function(a) {
          if (!this.u && a.length) {
            var b = Math.round(a[0].startTime * 1e3) / 1e3;
            this.g = this.g.filter(function(c) {
              return Math.round(c.startTime * 1e3) / 1e3 < b;
            });
            this.g.push.apply(this.g, x(a));
          }
        };
        p.ze = function(a, b) {
          var c = this;
          a = a.filter(function(d) {
            return d.endTime > b && (c.g.length == 0 || d.endTime > c.g[0].startTime);
          });
          this.Lf(a);
          this.cb(b);
        };
        p.cb = function(a) {
          if (!this.u) {
            var b = this.g.length;
            this.g = this.g.filter(function(c) {
              return c.endTime > a;
            });
            this.i += b - this.g.length;
          }
        };
        p.Gd = function(a, b, c) {
          c = c === void 0 ? false : c;
          if (!this.u) {
            for (; this.g.length; ) if (this.g[this.g.length - 1].startTime >= b) this.g.pop();
            else break;
            for (; this.g.length; ) if (this.g[0].endTime <= a) this.g.shift(), c || this.i++;
            else break;
            this.g.length != 0 && (a = this.g[this.g.length - 1], b = new yj(a.startTime, b, a.D, a.startByte, a.endByte, a.ia, a.timestampOffset, a.appendWindowStart, a.appendWindowEnd, a.g, a.tilesLayout, a.C, a.h, a.status, a.aesKey), b.mimeType = a.mimeType, b.codecs = a.codecs, b.i = a.i, this.g[this.g.length - 1] = b);
          }
        };
        p.qg = function(a, b) {
          var c = this;
          this.u || (this.m && this.m.stop(), this.m = new Bf(function() {
            var d = b();
            d ? c.g.push.apply(c.g, x(d)) : (c.m.stop(), c.m = null);
          }), this.m.wa(a));
        };
        Xl.prototype[Symbol.iterator] = function() {
          return this.ec(0);
        };
        Xl.prototype.ec = function(a, b, c) {
          b = b === void 0 ? false : b;
          c = c === void 0 ? false : c;
          var d = this.find(a);
          if (d == null) return null;
          var e = this.get(d);
          c ? d++ : d--;
          var f = -1;
          if (e && e.g.length > 0) for (var g = e.g.length - 1; g >= 0; --g) {
            var h = e.g[g];
            if (a >= h.startTime && a < h.endTime) {
              if (!b) {
                for (; g && !h.l; ) g--, h = e.g[g];
                if (!h.l) return $a("No independent partial segment found!"), null;
              }
              c ? d-- : d++;
              f = g - 1;
              break;
            }
          }
          return new Yl(this, d, f, c);
        };
        Xl.prototype.nf = function() {
          return -1;
        };
        function Zl(a, b, c) {
          a = new yj(a, a + b, function() {
            return c;
          }, 0, null, null, a, a, a + b);
          return new Xl([a]);
        }
        S("shaka.media.SegmentIndex", Xl);
        Xl.forSingleSegment = Zl;
        Xl.prototype.getIteratorForTime = Xl.prototype.ec;
        Xl.prototype.updateEvery = Xl.prototype.qg;
        Xl.prototype.fit = Xl.prototype.Gd;
        Xl.prototype.evict = Xl.prototype.cb;
        Xl.prototype.mergeAndEvict = Xl.prototype.ze;
        Xl.prototype.offset = Xl.prototype.offset;
        Xl.prototype.get = Xl.prototype.get;
        Xl.prototype.find = Xl.prototype.find;
        Xl.prototype.markImmutable = Xl.prototype.Rl;
        Xl.prototype.release = Xl.prototype.release;
        Xl.prototype.getNumEvicted = Xl.prototype.getNumEvicted;
        Xl.prototype.getNumReferences = Xl.prototype.getNumReferences;
        function Yl(a, b, c, d) {
          this.i = a;
          this.h = b;
          this.g = c;
          this.reverse = d;
        }
        p = Yl.prototype;
        p.Yd = function(a) {
          this.reverse = a;
        };
        p.xk = function() {
          return this.h;
        };
        p.current = function() {
          var a = this.i.get(this.h);
          a && a.g.length > 0 && a.A && this.g >= a.g.length && (this.h++, this.g = 0, a = this.i.get(this.h));
          return a && a.g.length > 0 ? a.g[this.g] : a;
        };
        p.next = function() {
          var a = this.i.get(this.h);
          this.reverse ? a && a.g.length > 0 ? (this.g--, this.g < 0 && (this.h--, this.g = (a = this.i.get(this.h)) && a.g.length > 0 ? a.g.length - 1 : 0)) : (this.h--, this.g = 0) : a && a.g.length > 0 ? (this.g++, a.A && this.g == a.g.length && (this.h++, this.g = 0)) : (this.h++, this.g = 0);
          a = this.current();
          return { value: a, done: !a };
        };
        p.Wh = function() {
          var a = this.current();
          if (a.nd && !a.l && (a = this.i.get(this.h)) && a.g.length > 0) for (var b = a.g[this.g]; b.l && !(this.g <= 0); ) this.g--, b = a.g[this.g];
        };
        S("shaka.media.SegmentIterator", Yl);
        Yl.prototype.resetToLastIndependent = Yl.prototype.Wh;
        Yl.prototype.next = Yl.prototype.next;
        Yl.prototype.current = Yl.prototype.current;
        Yl.prototype.currentPosition = Yl.prototype.xk;
        Yl.prototype.setReverse = Yl.prototype.Yd;
        function $l() {
          Xl.call(this, []);
          this.h = [];
        }
        la($l, Xl);
        p = $l.prototype;
        p.clone = function() {
          var a = new $l();
          a.h = this.h.slice();
          a.i = this.i;
          return a;
        };
        p.release = function() {
          for (var a = u(this.h), b = a.next(); !b.done; b = a.next()) b.value.release();
          this.h = [];
        };
        p.Lb = function(a) {
          for (var b = u(this.h), c = b.next(); !c.done; c = b.next()) c.value.Lb(a);
        };
        function am(a, b) {
          a = u(a.h);
          for (var c = a.next(); !c.done; c = a.next()) b(c.value);
        }
        p.find = function(a) {
          for (var b = this.i, c = u(this.h), d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            var e = d.find(a);
            if (e != null) return e + b;
            b += d.getNumEvicted() + d.getNumReferences();
          }
          return null;
        };
        function bm(a, b) {
          a = u(a.h);
          for (var c = a.next(); !c.done; c = a.next()) if (c = c.value, c.find(b) != null) return c.nf();
          return -1;
        }
        p.get = function(a) {
          for (var b = this.i, c = u(this.h), d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            var e = d.get(a - b);
            if (e) return e;
            e = d.getNumReferences();
            b += d.getNumEvicted() + e;
          }
          return null;
        };
        p.offset = function() {
        };
        p.Lf = function() {
        };
        p.cb = function(a) {
          if (this.h.length) {
            var b = this.h[0];
            b.cb(a);
            b.getNumReferences() == 0 && (this.h.shift(), this.i += b.getNumEvicted(), b.release(), this.cb(a));
          }
        };
        p.ze = function() {
        };
        p.Gd = function() {
        };
        p.qg = function() {
        };
        S("shaka.media.MetaSegmentIndex", $l);
        $l.prototype.updateEvery = $l.prototype.qg;
        $l.prototype.fit = $l.prototype.Gd;
        $l.prototype.mergeAndEvict = $l.prototype.ze;
        $l.prototype.evict = $l.prototype.cb;
        $l.prototype.merge = $l.prototype.Lf;
        $l.prototype.offset = $l.prototype.offset;
        $l.prototype.get = $l.prototype.get;
        $l.prototype.find = $l.prototype.find;
        $l.prototype.forEachTopLevelReference = $l.prototype.Lb;
        $l.prototype.release = $l.prototype.release;
        function cm(a) {
          var b = this;
          this.g = a;
          this.j = false;
          this.i = this.g.wf();
          this.h = new Bf(function() {
            b.g.pj(b.i * 0.25);
          });
        }
        cm.prototype.release = function() {
          this.set(this.jd());
          this.h && (this.h.stop(), this.h = null);
          this.g = null;
        };
        cm.prototype.set = function(a) {
          this.i = a;
          dm(this);
        };
        cm.prototype.jd = function() {
          return this.g.jd();
        };
        function dm(a) {
          a.h.stop();
          var b = a.j ? 0 : a.i;
          if (b >= 0) try {
            a.g.wf() != b && a.g.gi(b);
            return;
          } catch (c) {
          }
          a.h.wa(0.25);
          a.g.wf() != 0 && a.g.gi(0);
        }
        ;
        function em(a) {
          var b = this;
          this.j = a;
          this.h = new Tc();
          this.g = /* @__PURE__ */ new Set();
          this.i = new Bf(function() {
            fm(b, false);
          }).La();
          a.paused || this.i.wa(0.25);
          this.h.o(a, "playing", function() {
            b.i.La().wa(0.25);
          });
          this.h.o(a, "pause", function() {
            b.i.stop();
          });
        }
        em.prototype.release = function() {
          this.h && (this.h.release(), this.h = null);
          this.i.stop();
          for (var a = u(this.g), b = a.next(); !b.done; b = a.next()) b.value.release();
          this.g.clear();
        };
        function fm(a, b) {
          var c = a.j.currentTime;
          a = u(a.g);
          for (var d = a.next(); !d.done; d = a.next()) d.value.j(c, b);
        }
        ;
        function gm(a) {
          kb.call(this);
          this.g = /* @__PURE__ */ new Map();
          this.h = a;
        }
        la(gm, kb);
        gm.prototype.release = function() {
          this.g.clear();
          kb.prototype.release.call(this);
        };
        function hm(a, b) {
          var c = a.g.get(b);
          c || (c = { Ee: [], Sg: null, contentType: b }, a.g.set(b, c));
          return c;
        }
        function im(a, b, c) {
          var d = hm(a, b.contentType);
          jm(a, d);
          a = { Od: b, position: c };
          d = d.Ee;
          b = d.findIndex(function(e) {
            return e.position >= c;
          });
          b >= 0 ? d.splice(b, d[b].position == c ? 1 : 0, a) : d.push(a);
        }
        gm.prototype.j = function(a) {
          for (var b = u(this.g.values()), c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            var d = c.Sg;
            a: {
              var e = c.Ee;
              for (var f = e.length - 1; f >= 0; f--) {
                var g = e[f];
                if (g.position <= a) {
                  e = g.Od;
                  break a;
                }
              }
              e = null;
            }
            f = e && !(d === e || d && e && d.bandwidth == e.bandwidth && d.audioSamplingRate == e.audioSamplingRate && d.codecs == e.codecs && d.contentType == e.contentType && d.frameRate == e.frameRate && d.height == e.height && d.mimeType == e.mimeType && d.channelsCount == e.channelsCount && d.pixelAspectRatio == e.pixelAspectRatio && d.width == e.width);
            g = e && d && e.label && d.label && d.label !== e.label;
            var h = e && d && e.language && d.language && d.language !== e.language;
            d = e && d && e.roles && d.roles && !Sc(d.roles, e.roles);
            (g || h || d) && km(this, a, e.contentType) && (c.Sg = e, d = new T("audiotrackchange", /* @__PURE__ */ new Map([["quality", e], ["position", a]])), this.dispatchEvent(d));
            f && km(this, a, e.contentType) && (c.Sg = e, JSON.stringify(e), c = new T("qualitychange", /* @__PURE__ */ new Map([["quality", e], ["position", a]])), this.dispatchEvent(c));
          }
        };
        function km(a, b, c) {
          return (a = a.h()[c]) && a.length > 0 && (c = a[a.length - 1].end, b >= a[0].start && b < c) ? true : false;
        }
        function jm(a, b) {
          if ((a = a.h()[b.contentType]) && a.length > 0) {
            var c = a[0].start, d = a[a.length - 1].end, e = b.Ee;
            b.Ee = e.filter(function(f, g) {
              return f.position <= c && g + 1 < e.length && e[g + 1].position <= c || f.position >= d ? false : true;
            });
          } else b.Ee = [];
        }
        function lm(a) {
          var b = { bandwidth: a.bandwidth || 0, audioSamplingRate: null, codecs: a.codecs, contentType: a.type, frameRate: null, height: null, mimeType: a.mimeType, channelsCount: null, pixelAspectRatio: null, width: null, label: null, roles: a.roles, language: null };
          a.type == "video" && (b.frameRate = a.frameRate || null, b.height = a.height || null, b.pixelAspectRatio = a.pixelAspectRatio || null, b.width = a.width || null);
          a.type == "audio" && (b.audioSamplingRate = a.audioSamplingRate, b.channelsCount = a.channelsCount, b.label = a.label || null, b.language = a.language);
          return b;
        }
        ;
        function mm(a) {
          kb.call(this);
          this.h = /* @__PURE__ */ new Map();
          this.i = a;
          this.g = null;
        }
        la(mm, kb);
        mm.prototype.release = function() {
          this.h.clear();
          this.g && (this.g.stop(), this.g = null);
          kb.prototype.release.call(this);
        };
        function nm(a, b) {
          var c = b.schemeIdUri + "_" + b.id + "_" + (b.startTime.toFixed(1) + "_" + b.endTime.toFixed(1));
          a.h.has(c) || (a.h.set(c, b), b = new T("regionadd", /* @__PURE__ */ new Map([["region", b]])), a.dispatchEvent(b), om(a));
        }
        function om(a) {
          a.g || (a.g = new Bf(function() {
            for (var b = a.i(), c = u(a.h), d = c.next(); !d.done; d = c.next()) {
              var e = u(d.value);
              d = e.next().value;
              e = e.next().value;
              e.endTime < b.start && (a.h.delete(d), d = new T("regionremove", /* @__PURE__ */ new Map([["region", e]])), a.dispatchEvent(d));
            }
            !a.h.size && a.g && (a.g.stop(), a.g = null);
          }).wa(2));
        }
        ;
        function pm(a, b, c, d, e) {
          function f(g, h) {
            return h.fastSwitching && g.nd && g.xe ? false : true;
          }
          this.m = a;
          this.i = b;
          this.l = c;
          this.h = /* @__PURE__ */ new Map();
          this.j = /* @__PURE__ */ new Map();
          this.g = null;
          this.u = d;
          this.A = e || f;
        }
        function qm(a, b) {
          a.l = b;
          a = u(a.h.values());
          for (var c = a.next(); !c.done; c = a.next()) c.value.g = b;
        }
        function rm(a, b, c) {
          c = c === void 0 ? false : c;
          if (!a.i.segmentIndex) return Promise.resolve();
          a.g || (a.g = a.i.segmentIndex.ec(b, true, a.u));
          if (!a.g) return Promise.resolve();
          c && a.g.next();
          for (b = []; a.h.size < a.m; ) {
            c = a.g.next().value;
            if (!c) break;
            var d = true;
            c.isPreload() && c.endByte != null && (d = false);
            c.Uc() == 2 && (d = false);
            c.hc(false) && (d = false);
            d && c.ia && b.push(sm(a, c.ia));
            d && !a.h.has(c) && (d = new tm(a.l), b.push(um(d, c, a.i)), a.h.set(c, d));
            if (!a.A(c, a.i)) break;
          }
          vm(a);
          return Promise.all(b);
        }
        function sm(a, b) {
          if (!a.i.segmentIndex || b.hc() || Array.from(a.j.keys()).some(function(e) {
            return xj(e, b);
          })) return Promise.resolve();
          var c = new tm(a.l), d = um(c, b, a.i);
          a.j.set(b, c);
          return d;
        }
        function wm(a, b) {
          b = u(b.keys());
          for (var c = b.next(); !c.done; c = b.next()) (c = c.value) && xm(a, c);
        }
        function ym(a) {
          wm(a, a.h);
          wm(a, a.j);
          a.g = null;
        }
        pm.prototype.cb = function(a, b) {
          b = b === void 0 ? false : b;
          for (var c = u(this.h.keys()), d = c.next(); !d.done; d = c.next()) d = d.value, a > d.endTime && xm(this, d);
          b && vm(this);
        };
        pm.prototype.Yd = function(a) {
          this.u = a;
          this.g && this.g.Yd(a);
        };
        function vm(a) {
          for (var b = Array.from(a.h.keys()), c = u(a.j.keys()), d = c.next(), e = {}; !d.done; e = { Eh: void 0 }, d = c.next()) e.Eh = d.value, b.some(/* @__PURE__ */ function(f) {
            return function(g) {
              return xj(g.ia, f.Eh);
            };
          }(e)) || xm(a, e.Eh);
        }
        function zm(a, b) {
          a.m = b;
          for (var c = Array.from(a.h.keys()); c.length > b; ) {
            var d = c.pop();
            d && xm(a, d);
          }
          vm(a);
        }
        function Am(a, b) {
          b && b !== a.i && (ym(a), a.i = b);
        }
        function xm(a, b) {
          var c = a.h;
          b instanceof wj && (c = a.j);
          a = c.get(b);
          c.delete(b);
          a && a.abort();
        }
        function tm(a) {
          this.g = a;
          this.Ce = this.ni = null;
        }
        function um(a, b, c) {
          var d = new Uint8Array(0);
          a.Ce = a.g(b, c, function(e) {
            return Q(function(f) {
              if (f.g == 1) return d.byteLength > 0 ? d = lc(d, e) : d = e, a.ni ? F(f, a.ni(d), 3) : f.B(0);
              d = new Uint8Array(0);
              H(f);
            });
          });
          return a.Ce.promise.catch(function(e) {
            return e instanceof U && e.code == 7001 ? Promise.resolve() : Promise.reject(e);
          });
        }
        tm.prototype.abort = function() {
          this.Ce && this.Ce.abort();
        };
        S("shaka.config.CrossBoundaryStrategy", { KEEP: "keep", RESET: "reset", RESET_TO_ENCRYPTED: "reset_to_encrypted", RESET_ON_ENCRYPTION_CHANGE: "RESET_ON_ENCRYPTION_CHANGE" });
        function Bm(a) {
          var b = mf(a), c = b.split("/")[0];
          a = nf(a);
          return { type: c, mimeType: b, codecs: a, language: null, height: null, width: null, channelCount: null, sampleRate: null, closedCaptions: /* @__PURE__ */ new Map(), Ne: null, colorGamut: null, frameRate: null };
        }
        function Cm(a, b, c) {
          function d(B) {
            z = B.name;
            var G = B.reader;
            G.skip(24);
            var I = G.Ha(), J = G.Ha();
            G.skip(50);
            q = String(I);
            n = String(J);
            B.reader.Pa() && th(B);
          }
          function e(B) {
            var G = Mi(B.reader);
            r = G.channelCount;
            t = G.sampleRate;
            f(B.name);
          }
          function f(B) {
            B = B.toLowerCase();
            switch (B) {
              case "avc1":
              case "avc3":
                h.push(B + ".42E01E");
                l = true;
                break;
              case "hev1":
              case "hvc1":
                h.push(B + ".1.6.L93.90");
                l = true;
                break;
              case "dvh1":
              case "dvhe":
                h.push(B + ".05.04");
                l = true;
                break;
              case "vp09":
                h.push(B + ".00.10.08");
                l = true;
                break;
              case "av01":
                h.push(B + ".0.01M.08");
                l = true;
                break;
              case "mp4a":
                g.push("mp4a.40.2");
                k2 = true;
                break;
              case "ac-3":
              case "ec-3":
              case "ac-4":
              case "opus":
              case "flac":
                g.push(B);
                k2 = true;
                break;
              case "apac":
                g.push("apac.31.00"), k2 = true;
            }
          }
          var g = [], h = [], k2 = false, l = false, m = null, n = null, q = null, r = null, t = null, w = null, v = null, z;
          new oh().box("moov", th).box("trak", th).box("mdia", th).W("mdhd", function(B) {
            m = Ki(B.reader, B.version).language;
          }).box("minf", th).box("stbl", th).W("stsd", vh).box("mp4a", function(B) {
            var G = Mi(B.reader);
            r = G.channelCount;
            t = G.sampleRate;
            B.reader.Pa() ? th(B) : f(B.name);
          }).box(
            "esds",
            function(B) {
              B = B.reader;
              for (var G = "mp4a", I, J; B.Pa(); ) {
                I = B.ba();
                for (var L = B.ba(); L & 128; ) L = B.ba();
                if (I == 3) B.Ha(), L = B.ba(), L & 128 && B.Ha(), L & 64 && B.skip(B.ba()), L & 32 && B.Ha();
                else if (I == 4) J = B.ba(), B.skip(12);
                else if (I == 5) break;
              }
              J && (G += "." + Pi(J), I == 5 && B.Pa() && (I = B.ba(), J = (I & 248) >> 3, J === 31 && B.Pa() && (J = 32 + ((I & 7) << 3) + ((B.ba() & 224) >> 5)), G += "." + J));
              g.push(G);
              k2 = true;
            }
          ).box("ac-3", e).box("ec-3", e).box("ac-4", e).box("Opus", e).box("fLaC", e).box("apac", e).box("avc1", d).box("avc3", d).box("hev1", d).box("hvc1", d).box(
            "dva1",
            d
          ).box("dvav", d).box("dvh1", d).box("dvhe", d).box("vp09", d).box("av01", d).box("avcC", function(B) {
            var G = z || "";
            switch (z) {
              case "dvav":
                G = "avc3";
                break;
              case "dva1":
                G = "avc1";
            }
            B = B.reader;
            B.skip(1);
            B = G + "." + Pi(B.ba()) + Pi(B.ba()) + Pi(B.ba());
            h.push(B);
            l = true;
          }).box("hvcC", function(B) {
            var G = z || "";
            switch (z) {
              case "dvh1":
                G = "hvc1";
                break;
              case "dvhe":
                G = "hev1";
            }
            var I = B.reader;
            I.skip(1);
            B = I.ba();
            var J = ["", "A", "B", "C"][B >> 6], L = B & 31, K = I.Z(), N = (B & 32) >> 5 ? "H" : "L";
            B = [I.ba(), I.ba(), I.ba(), I.ba(), I.ba(), I.ba()];
            I = I.ba();
            for (var P = 0, O = 0; O < 32; O++) {
              P |= K & 1;
              if (O == 31) break;
              P <<= 1;
              K >>= 1;
            }
            G = G + ("." + J + L) + ("." + Pi(P, true));
            G += "." + N + I;
            J = "";
            for (L = B.length; L--; ) if ((N = B[L]) || J) J = "." + N.toString(16).toUpperCase() + J;
            G += J;
            h.push(G);
            l = true;
          }).box("dvcC", function(B) {
            var G = z || "";
            switch (z) {
              case "hvc1":
                G = "dvh1";
                break;
              case "hev1":
                G = "dvhe";
                break;
              case "avc1":
                G = "dva1";
                break;
              case "avc3":
                G = "dvav";
                break;
              case "av01":
                G = "dav1";
            }
            var I = B.reader;
            I.skip(2);
            B = I.ba();
            I = I.ba();
            h.push(G + "." + Qi(B >> 1 & 127) + "." + Qi(B << 5 & 32 | I >> 3 & 31));
            l = true;
          }).box("dvvC", function(B) {
            var G = z || "";
            switch (z) {
              case "hvc1":
                G = "dvh1";
                break;
              case "hev1":
                G = "dvhe";
                break;
              case "avc1":
                G = "dva1";
                break;
              case "avc3":
                G = "dvav";
                break;
              case "av01":
                G = "dav1";
            }
            var I = B.reader;
            I.skip(2);
            B = I.ba();
            I = I.ba();
            h.push(G + "." + Qi(B >> 1 & 127) + "." + Qi(B << 5 & 32 | I >> 3 & 31));
            l = true;
          }).W("vpcC", function(B) {
            var G = z || "", I = B.reader;
            B = I.ba();
            var J = I.ba();
            I = I.ba() >> 4 & 15;
            h.push(G + "." + Qi(B) + "." + Qi(J) + "." + Qi(I));
            l = true;
          }).box("av1C", function(B) {
            var G = z || "";
            switch (z) {
              case "dav1":
                G = "av01";
            }
            var I = B.reader;
            I.skip(1);
            B = I.ba();
            I = I.ba();
            var J = B >>> 5, L = (I & 64) >> 6;
            h.push(G + "." + J + "." + Qi(B & 31) + (I >>> 7 ? "H" : "M") + "." + Qi(J === 2 && L ? (I & 32) >> 5 ? 12 : 10 : L ? 10 : 8) + "." + ((I & 16) >> 4) + "." + ((I & 8) >> 3) + ((I & 4) >> 2) + (I & 3) + "." + Qi(1) + "." + Qi(1) + "." + Qi(1) + ".0");
            l = true;
          }).box("enca", xh).box("encv", wh).box("sinf", th).box("frma", function(B) {
            B = Ni(B.reader).codec;
            f(B);
          }).box("colr", function(B) {
            h = h.map(function(J) {
              if (J.startsWith("av01.")) {
                var L = B.reader, K = L.Wa(), N = L.ac(4);
                var P = String.fromCharCode(N[0]);
                P += String.fromCharCode(N[1]);
                P += String.fromCharCode(N[2]);
                P += String.fromCharCode(N[3]);
                if (P === "nclx") {
                  N = L.Ha();
                  P = L.Ha();
                  var O = L.Ha(), M = L.ba() >> 7, R = J.split(".");
                  R.length == 10 && (R[6] = Qi(N), R[7] = Qi(P), R[8] = Qi(O), R[9] = String(M), J = R.join("."));
                }
                L.seek(K);
              }
              return J;
            });
            var G = Oi(B.reader), I = G.colorGamut;
            w = G.Ne;
            v = I;
          }).parse(a || b, true, true);
          if (!g.length && !h.length) return null;
          var y = k2 && !l, A = /* @__PURE__ */ new Map();
          if (l && !c) {
            c = new od("video/mp4");
            a && c.init(a);
            try {
              c.Uf(b);
              for (var C = u(c.zg()), E = C.next(); !E.done; E = C.next()) {
                var D = E.value;
                A.set(D, D);
              }
            } catch (B) {
            }
            c.ce();
          }
          return {
            type: y ? "audio" : "video",
            mimeType: y ? "audio/mp4" : "video/mp4",
            codecs: Dm(g.concat(h)).join(", "),
            language: m,
            height: n,
            width: q,
            channelCount: r,
            sampleRate: t,
            closedCaptions: A,
            Ne: w,
            colorGamut: v,
            frameRate: null
          };
        }
        function Dm(a) {
          var b = /* @__PURE__ */ new Set(), c = [];
          a = u(a);
          for (var d = a.next(); !d.done; d = a.next()) {
            d = d.value;
            var e = lf(d);
            b.has(e) || (c.push(d), b.add(e));
          }
          b = tc("audio", c);
          d = tc("video", c);
          a = tc(sc, c);
          d = Em(d);
          b = b.concat(d).concat(a);
          return c.length && !b.length ? c : b;
        }
        function Em(a) {
          if (a.length <= 1) return a;
          var b = a.find(function(c) {
            return c.startsWith("dvav.") || c.startsWith("dva1.") || c.startsWith("dvh1.") || c.startsWith("dvhe.") || c.startsWith("dav1.") || c.startsWith("dvc1.") || c.startsWith("dvi1.");
          });
          return b ? gd('video/mp4; codecs="' + b + '"') ? [b] : a.filter(function(c) {
            return c != b;
          }) : a;
        }
        function Fm(a) {
          var b = null;
          new oh().box("moov", th).box("trak", th).box("mdia", th).box("minf", th).box("stbl", th).W("stsd", vh).box("encv", wh).box("enca", xh).box("sinf", th).box("schi", th).W("tenc", function(c) {
            c = c.reader;
            c.ba();
            c.ba();
            c.ba();
            c.ba();
            b = jc(c.ac(16));
          }).parse(a, true);
          return b;
        }
        function Gm(a, b, c) {
          var d, e, f, g, h;
          return Q(function(k2) {
            if (k2.g == 1) return d = b, d.cryptoKey ? k2.B(2) : F(k2, d.fetchKey(), 3);
            e = d.iv;
            if (!e) for (e = Kb(new ArrayBuffer(16)), f = d.firstMediaSequenceNumber + c, g = e.byteLength - 1; g >= 0; g--) e[g] = f & 255, f >>= 8;
            b.blockCipherMode == "CBC" ? h = { name: "AES-CBC", iv: e } : h = { name: "AES-CTR", counter: e, length: 64 };
            return k2.return(window2.crypto.subtle.decrypt(h, d.cryptoKey, a));
          });
        }
        ;
        function Hm(a, b, c, d, e) {
          a = $g(a, d, e);
          if (b != 0 || c != null) a.headers.Range = c ? "bytes=" + b + "-" + c : "bytes=" + b + "-";
          return a;
        }
        ;
        function Im(a, b) {
          var c = this;
          this.g = b;
          this.j = a;
          this.i = null;
          this.M = /* @__PURE__ */ new Map();
          this.F = 1;
          this.C = this.u = null;
          this.S = 0;
          this.h = /* @__PURE__ */ new Map();
          this.L = false;
          this.V = null;
          this.D = false;
          this.l = new hh(function() {
            return Jm(c);
          });
          this.P = Date.now() / 1e3;
          this.m = /* @__PURE__ */ new Map();
          this.R = { projection: null, hfov: null };
          this.Y = 0;
          this.X = Infinity;
          this.H = null;
          this.O = [];
          this.A = new Bf(function() {
            if (c.j && c.g) if (c.j.presentationTimeline.U()) {
              var d = c.j.presentationTimeline.fc(), e = c.j.presentationTimeline.Mb();
              e - d > 1 ? cl(c.g.ha, d, e) : dl(c.g.ha);
            } else dl(c.g.ha), c.A && c.A.stop();
            else c.A && c.A.stop();
          });
          this.I = null;
          this.J = false;
          this.K = new Bf(function() {
            var d = c.g.video;
            !d.ended && c.I && (c.J = true, d.currentTime = c.I, c.I = null);
          });
          this.G = new Tc();
        }
        p = Im.prototype;
        p.destroy = function() {
          return this.l.destroy();
        };
        function Jm(a) {
          var b, c, d, e, f, g, h;
          return Q(function(k2) {
            if (k2.g == 1) {
              a.A && a.A.stop();
              a.A = null;
              a.K && a.K.stop();
              a.K = null;
              a.G && (a.G.release(), a.G = null);
              b = [];
              c = u(a.h.values());
              for (d = c.next(); !d.done; d = c.next()) e = d.value, Km(e), b.push(Lm(e)), e.ka && (ym(e.ka), e.ka = null);
              f = u(a.m.values());
              for (g = f.next(); !g.done; g = f.next()) h = g.value, ym(h);
              return F(k2, Promise.all(b), 2);
            }
            a.h.clear();
            a.m.clear();
            a.g = null;
            a.j = null;
            a.i = null;
            a.I = null;
            H(k2);
          });
        }
        p.configure = function(a) {
          this.i = a;
          this.V = new Eg({ maxAttempts: Math.max(a.retryParameters.maxAttempts, 2), baseDelay: a.retryParameters.baseDelay, backoffFactor: a.retryParameters.backoffFactor, fuzzFactor: a.retryParameters.fuzzFactor, timeout: 0, stallTimeout: 0, connectionTimeout: 0 }, true);
          if (a.disableAudioPrefetch) {
            var b = this.h.get("audio");
            b && b.ka && (ym(b.ka), b.ka = null);
            b = u(this.m.keys());
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, ym(this.m.get(c)), this.m.delete(c);
          }
          a.disableTextPrefetch && (b = this.h.get(sc)) && b.ka && (ym(b.ka), b.ka = null);
          a.disableVideoPrefetch && (b = this.h.get("video")) && b.ka && (ym(b.ka), b.ka = null);
          b = u(this.h.keys());
          for (c = b.next(); !c.done; c = b.next()) c = this.h.get(c.value), c.ka ? (zm(c.ka, a.segmentPrefetchLimit), a.segmentPrefetchLimit > 0 || (ym(c.ka), c.ka = null)) : a.segmentPrefetchLimit > 0 && (c.ka = Mm(this, c.stream));
          a.disableAudioPrefetch || Nm(this);
        };
        function Om(a, b, c) {
          a.j.presentationTimeline.U() || (a.Y = b, a.X = c);
        }
        p.start = function(a) {
          var b = this;
          return Q(function(c) {
            if (c.g == 1) return F(c, Pm(b, a || /* @__PURE__ */ new Map()), 2);
            ih(b.l);
            b.L = true;
            H(c);
          });
        };
        function Qm(a, b) {
          var c, d, e, f, g, h, k2;
          Q(function(l) {
            switch (l.g) {
              case 1:
                return c = uc, a.S++, d = a.S, ra(l, 2), F(l, Xk(a.g.ha, c.Va), 4);
              case 4:
                ta(l, 3);
                break;
              case 2:
                if (e = ua(l), a.g) a.g.onError(e);
              case 3:
                f = df(b.mimeType, b.codecs), Fk(a.g.ha, f, a.j.sequenceMode, b.external), g = a.g.ha.Y, (h = g.isTextVisible() || a.i.alwaysStreamText) && a.S == d && (k2 = Rm(a, b), a.h.set(c.Va, k2), Sm(a, k2, 0)), H(l);
            }
          });
        }
        function Tm(a) {
          var b = a.h.get(sc);
          b && (Km(b), Lm(b).catch(function() {
          }), a.H = a.h.get(sc), a.h.delete(sc), b.stream && b.stream.closeSegmentIndex && b.stream.closeSegmentIndex());
          a.C = null;
        }
        function Um(a, b) {
          for (var c = a.g.Za() < 0, d = u(a.h.values()), e = d.next(); !e.done; e = d.next()) e = e.value, e.Ba && e.Ba.Yd(c), e.ka && e.ka.Yd(c);
          d = u(a.m.values());
          for (e = d.next(); !e.done; e = d.next()) e.value.Yd(c);
          if (c = a.h.get("video")) {
            if (d = c.stream) {
              if (b) (b = d.trickModeVideo) && !c.Yc && (Vm(a, b, false, 0, false), c.Yc = d);
              else if (b = c.Yc) c.Yc = null, Vm(a, b, true, 0, false);
            }
          }
        }
        function Wm(a, b, c, d, e, f) {
          c = c === void 0 ? false : c;
          d = d === void 0 ? 0 : d;
          e = e === void 0 ? false : e;
          f = f === void 0 ? false : f;
          a.u = b;
          a.L && (b.video && Vm(a, b.video, c, d, e, f), b.audio && Vm(a, b.audio, c, d, e, f));
        }
        function Xm(a, b) {
          Q(function(c) {
            if (c.g == 1) return a.H = null, a.C = b, a.L ? b.segmentIndex ? c.B(2) : F(c, b.createSegmentIndex(), 2) : c.return();
            Vm(a, b, true, 0, false);
            H(c);
          });
        }
        function Ym(a) {
          var b = a.h.get(sc);
          b && Vm(a, b.stream, true, 0, true);
        }
        function Zm(a, b) {
          for (var c = u(a.M.entries()), d = c.next(); !d.done; d = c.next()) {
            var e = u(d.value);
            d = e.next().value;
            e = e.next().value;
            d.includes(b.type) && (e(), a.M.delete(d));
          }
        }
        function Vm(a, b, c, d, e, f) {
          var g = a.h.get(b.type);
          g || b.type != sc ? g && (g.Yc && (b.trickModeVideo ? (g.Yc = b, b = b.trickModeVideo) : g.Yc = null), g.stream != b || e) && (a.m.has(b) ? g.ka = a.m.get(b) : g.ka && Am(g.ka, b), b.type == sc && g.stream != b && (e = df(b.mimeType, b.codecs), Fk(a.g.ha, e, a.j.sequenceMode, b.external)), !a.m.has(g.stream) && g.stream.closeSegmentIndex && (g.Ra ? (e = "(" + g.type + ":" + g.stream.id + ")", a.M.has(e) || a.M.set(e, g.stream.closeSegmentIndex)) : g.stream.closeSegmentIndex()), e = g.stream.isAudioMuxedInVideo != b.isAudioMuxedInVideo, g.stream = b, g.Ba = null, g.Gg = !!f, b.dependencyStream ? g.Oc = Rm(a, b.dependencyStream) : g.Oc = null, $m(a), e && (g.yb = null, g.Ac = null, g.zc = null, b.isAudioMuxedInVideo && (b = null, g.type === "video" ? b = a.h.get("audio") : g.type === "audio" && (b = a.h.get("video")), b && (Lm(b).catch(function() {
          }), b.yb = null, b.Ac = null, b.zc = null, an(a, b), bn(a, b).catch(function(h) {
            if (a.g) a.g.onError(h);
          })))), c ? g.dc ? g.ae = true : g.Ra ? (g.uc = true, g.Cd = d, g.ae = true) : (Km(g), cn(a, g, true, d).catch(function(h) {
            if (a.g) a.g.onError(h);
          })) : g.Ra || g.Ab || Sm(a, g, 0), bn(a, g).catch(function(h) {
            if (a.g) a.g.onError(h);
          })) : Qm(a, b);
        }
        function bn(a, b) {
          var c, d, e;
          return Q(function(f) {
            if (f.g == 1) {
              if (!b.$a) return f.return();
              c = b.stream;
              d = b.$a;
              return c.segmentIndex ? f.B(2) : F(f, c.createSegmentIndex(), 2);
            }
            if (f.g != 4) return e = c.dependencyStream, !e || e.segmentIndex ? f.B(4) : F(f, e.createSegmentIndex(), 4);
            if (b.$a != d || b.stream != c) return f.return();
            var g = a.g.Rc();
            var h = Mk(a.g.ha, b.type), k2 = b.stream.segmentIndex.find(b.Ua ? b.Ua.endTime : g), l = k2 == null ? null : b.stream.segmentIndex.get(k2);
            k2 = l ? l.endByte ? l.endByte - l.startByte : null : null;
            l && !k2 && (k2 = (l.endTime - l.getStartTime()) * (b.stream.bandwidth || 0) / 8);
            k2 ? ((l = l.ia) && (k2 += (l.endByte ? l.endByte - l.startByte : null) || 0), l = a.g.getBandwidthEstimate(), g = k2 * 8 / l < (h || 0) - g - a.i.rebufferingGoal || b.$a.h.g > k2 ? true : false) : g = false;
            g && b.$a.abort();
            H(f);
          });
        }
        p.rd = function() {
          if (this.g) {
            for (var a = this.g.Rc(), b = u(this.h.keys()), c = b.next(); !c.done; c = b.next()) {
              var d = c.value;
              c = this.h.get(d);
              var e;
              if (e = !this.J) e = this.g.ha, d == sc ? (e = e.h, e = e.g == null || e.h == null ? false : a >= e.g && a < e.h) : (e = Lk(e, d), e = Fj(e, a)), e = !e;
              if (e) {
                this.P = 0;
                c.ka && (c.ka.g = null);
                if (c.type === "audio") {
                  e = u(this.m.values());
                  for (var f = e.next(); !f.done; f = e.next()) f.value.g = null;
                }
                c.Ba = null;
                (Mk(this.g.ha, d) != null || c.Ra) && an(this, c);
                c.$a && (c.$a.abort(), c.$a = null);
                d === sc && (d = this.g.ha, d.K && d.K.ce());
                c.rd = true;
              }
              !this.J || c.dc || c.Ra || c.Ab || Sm(this, c, 0);
            }
            dn(this) && en(this);
          }
        };
        function an(a, b) {
          b.dc || b.uc || (b.Ra ? (b.uc = true, b.Cd = 0) : Kk(a.g.ha, b.type) == null ? b.Ab == null && Sm(a, b, 0) : (Km(b), cn(a, b, false, 0).catch(function(c) {
            if (a.g) a.g.onError(c);
          })));
        }
        function Pm(a, b) {
          var c, d, e, f, g, h, k2, l;
          return Q(function(m) {
            if (m.g == 1) {
              if (!a.u) throw new U(2, 5, 5006);
              c = fn(a, true);
              d = a.g.ha;
              return F(m, d.init(c, a.j.sequenceMode, a.j.type, a.j.ignoreManifestTimestampsInSegmentsMode), 2);
            }
            ih(a.l);
            a.updateDuration();
            e = u(c.keys());
            for (f = e.next(); !f.done; f = e.next()) g = f.value, h = c.get(g), a.h.has(g) || (k2 = Rm(a, h), b.has(h.id) && (l = b.get(h.id), qm(l, function(n, q, r) {
              return gn(n, q, r || null, a.i.retryParameters, a.g.Dc);
            }), k2.ka = l), a.h.set(g, k2), Sm(a, k2, 0));
            $m(a);
            H(m);
          });
        }
        function Rm(a, b) {
          var c = { stream: b, type: b.type, Ba: null, ka: Mm(a, b), Ua: null, yb: null, If: null, Ac: null, zc: null, Gf: null, Hf: null, Yc: null, endOfStream: false, Ra: false, Ab: null, uc: false, Cd: 0, ae: false, dc: false, rd: true, Gg: false, Th: false, qe: false, $a: null, Oc: null };
          b.dependencyStream && (c.Oc = Rm(a, b.dependencyStream));
          return c;
        }
        function Mm(a, b) {
          if (b.type === "video" && a.i.disableVideoPrefetch || b.type === "audio" && a.i.disableAudioPrefetch || b.type === sc && (b.mimeType == "application/cea-608" || b.mimeType == "application/cea-708") || b.type === sc && a.i.disableTextPrefetch) return null;
          if (a.m.has(b)) return a.m.get(b);
          var c = a.h.get(b.type);
          return (c = c && c.ka) && b === c.i ? c : a.i.segmentPrefetchLimit > 0 ? new pm(a.i.segmentPrefetchLimit, b, function(d, e, f) {
            return gn(d, e, f || null, a.i.retryParameters, a.g.Dc);
          }, a.g.Za() < 0, a.g.ym) : null;
        }
        function Nm(a) {
          for (var b = a.i.segmentPrefetchLimit, c = a.i.prefetchAudioLanguages, d = u(a.j.variants), e = d.next(), f = {}; !e.done; f = { Tb: void 0 }, e = d.next()) if (f.Tb = e.value, f.Tb.audio) if (a.m.has(f.Tb.audio)) {
            if (e = a.m.get(f.Tb.audio), zm(e, b), !(b > 0 && c.some(/* @__PURE__ */ function(h) {
              return function(k2) {
                return xc(h.Tb.audio.language, k2);
              };
            }(f)))) {
              var g = a.h.get(f.Tb.audio.type);
              e !== (g && g.ka) && ym(e);
              a.m.delete(f.Tb.audio);
            }
          } else b <= 0 || !c.some(/* @__PURE__ */ function(h) {
            return function(k2) {
              return xc(h.Tb.audio.language, k2);
            };
          }(f)) || !(e = Mm(a, f.Tb.audio)) || (f.Tb.audio.segmentIndex || f.Tb.audio.createSegmentIndex(), a.m.set(f.Tb.audio, e));
        }
        p.updateDuration = function() {
          var a = kd(), b = this.j.presentationTimeline.getDuration();
          b < Infinity ? (a && (this.A && this.A.stop(), dl(this.g.ha)), this.g.ha.zb(b)) : a ? (this.A && this.A.wa(0.5), this.g.ha.zb(Infinity)) : this.g.ha.zb(4294967296);
        };
        function hn(a, b) {
          var c, d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            switch (n.g) {
              case 1:
                ih(a.l);
                c = uc;
                if (b.Ra || b.Ab == null || b.dc) return n.return();
                b.Ab = null;
                if (!b.uc) {
                  n.B(2);
                  break;
                }
                return F(n, cn(a, b, b.ae, b.Cd), 3);
              case 3:
                return n.return();
              case 2:
                Zm(a, b);
                if (b.stream.segmentIndex) {
                  n.B(4);
                  break;
                }
                d = b.stream;
                ra(n, 5);
                return F(n, b.stream.createSegmentIndex(), 7);
              case 7:
                ta(n, 6);
                break;
              case 5:
                return e = ua(n), F(n, jn(a, b, e), 8);
              case 8:
                return n.return();
              case 6:
                if (d != b.stream) return d.closeSegmentIndex && d.closeSegmentIndex(), b.Ra || b.Ab || Sm(a, b, 0), n.return();
              case 4:
                if (!b.Oc) {
                  n.B(9);
                  break;
                }
                if (b.Oc.stream.segmentIndex) {
                  n.B(9);
                  break;
                }
                ra(n, 11);
                return F(n, b.Oc.stream.createSegmentIndex(), 13);
              case 13:
                ta(n, 9);
                break;
              case 11:
                ua(n);
              case 9:
                ra(n, 14);
                f = kn(a, b);
                f != null && (Sm(a, b, f), b.qe = false);
                ta(n, 15);
                break;
              case 14:
                return g = ua(n), F(n, jn(a, b, g), 16);
              case 16:
                return n.return();
              case 15:
                if (b.type === c.Va) return n.return();
                h = [b];
                k2 = b.type === c.na ? c.Ia : c.na;
                (l = a.h.get(k2)) && h.push(l);
                if (!a.L || !h.every(function(q) {
                  return q.endOfStream;
                })) {
                  n.B(0);
                  break;
                }
                return F(
                  n,
                  a.g.ha.endOfStream(),
                  18
                );
              case 18:
                ih(a.l), m = a.g.ha.getDuration(), m != 0 && m < a.j.presentationTimeline.getDuration() && a.j.presentationTimeline.zb(m), H(n);
            }
          });
        }
        function kn(a, b) {
          if (ln(b)) return Uk(a.g.ha, b.stream.originalId || ""), null;
          b.type == sc && Vk(a.g.ha);
          if (b.stream.isAudioMuxedInVideo && b.type == "audio") return null;
          if (b.type != sc && Dk(a.g.ha)) return mn(a, true), null;
          var c = a.i.updateIntervalSeconds / Math.max(1, Math.abs(a.g.Za()));
          if (!Jk(a.g.ha) && b.type != sc) return c / 2;
          var d = a.g.Rc();
          if (b.type === "audio") for (var e = u(a.m.keys()), f = e.next(); !f.done; f = e.next()) f = a.m.get(f.value), f.cb(d, true), rm(f, d);
          e = b.Ua ? b.Ua.endTime : d;
          var g = Nk(a.g.ha, b.type, d);
          f = Math.max(1, Math.max(
            a.i.rebufferingGoal,
            a.i.bufferingGoal
          ) * a.F);
          var h = a.j.presentationTimeline.getDuration() - e, k2 = Mk(a.g.ha, b.type);
          if (h < 1e-6 && k2) return b.endOfStream = true, b.type == "video" && (a = a.h.get(sc)) && ln(a) && (a.endOfStream = true), null;
          b.endOfStream = false;
          if (g >= f) return c / 2;
          h = !b.Ba;
          k2 = nn(a, b, d, k2);
          if (!k2) return c;
          g = b.yb;
          var l = k2.ia;
          g && l && xj(l, g) && (g.g = l.g);
          g = false;
          h && b.Gg && (g = true, b.Gg = false);
          h = Infinity;
          l = Array.from(a.h.values());
          l = u(l);
          for (var m = l.next(); !m.done; m = l.next()) m = m.value, ln(m) || m.Ba && !m.Ba.current() || (h = Math.min(h, m.Ua ? m.Ua.endTime : d));
          if (e >= h + a.j.presentationTimeline.h) return c;
          b.ka && b.Ba && !a.m.has(b.stream) && (b.ka.cb(k2.startTime + 1e-3), rm(b.ka, k2.startTime).catch(function() {
          }));
          if (dn(a) && on(a, b, k2)) return null;
          pn(a, b, d, k2, g).catch(function() {
          });
          b.Oc && qn(a, b.Oc, d, f);
          return null;
        }
        function nn(a, b, c, d) {
          if (b.Ba) return (c = b.Ba.current()) && b.Ua && Math.abs(b.Ua.startTime - c.startTime) < 1e-3 && (c = b.Ba.next().value), c;
          if (b.Ua || d) return c = b.Ua ? b.Ua.endTime : d, a = a.g.Za() < 0, b.stream.segmentIndex && (b.Ba = b.stream.segmentIndex.ec(c, false, a)), b.Ba && b.Ba.next().value;
          d = a.j.sequenceMode || dn(a) ? 0 : a.i.inaccurateManifestTolerance;
          var e = Math.max(c - d, 0);
          a = a.g.Za() < 0;
          var f = null;
          d && (b.stream.segmentIndex && (b.Ba = b.stream.segmentIndex.ec(e, false, a)), f = b.Ba && b.Ba.next().value);
          f || (b.stream.segmentIndex && (b.Ba = b.stream.segmentIndex.ec(c, false, a)), f = b.Ba && b.Ba.next().value);
          return f;
        }
        function pn(a, b, c, d, e) {
          var f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D;
          return Q(function(B) {
            switch (B.g) {
              case 1:
                f = uc;
                g = b.stream;
                h = b.Ba;
                b.Ra = true;
                ra(B, 2);
                if (d.Uc() == 2) throw new U(1, 1, 1011);
                return F(B, rn(a, b, d, e), 4);
              case 4:
                ih(a.l);
                if (a.D) return B.return();
                k2 = g.mimeType == "video/mp4" || g.mimeType == "audio/mp4";
                l = window2.ReadableStream;
                if ((m = a.i.lowLatencyMode && a.j.isLowLatency) && l && k2 && (a.j.type != "HLS" || d.m)) return r = new Uint8Array(0), w = t = false, z = function(G) {
                  var I, J, L, K;
                  return Q(function(N) {
                    switch (N.g) {
                      case 1:
                        if (t) return N.return();
                        w = true;
                        ih(a.l);
                        if (a.D) return N.return();
                        ra(N, 2);
                        r = lc(r, G);
                        I = false;
                        J = 0;
                        new oh().box("mdat", function(P) {
                          J = P.size + P.start;
                          I = true;
                        }).parse(r, false, true);
                        if (!I) {
                          N.B(4);
                          break;
                        }
                        L = r.subarray(0, J);
                        r = r.subarray(J);
                        return F(N, sn(a, b, c, g, d, L, true, e), 5);
                      case 5:
                        b.ka && b.Ba && rm(b.ka, d.startTime, true);
                      case 4:
                        ta(N, 0);
                        break;
                      case 2:
                        v = K = ua(N), H(N);
                    }
                  });
                }, F(B, tn(a, b, d, z), 9);
                n = tn(a, b, d);
                return F(B, n, 7);
              case 7:
                q = B.h;
                ih(a.l);
                if (a.D) return B.return();
                ih(a.l);
                return b.uc ? (b.Ra = false, Sm(a, b, 0), B.return()) : F(B, sn(a, b, c, g, d, q, false, e), 6);
              case 9:
                y = B.h;
                if (v) throw v;
                if (w) {
                  B.B(10);
                  break;
                }
                t = true;
                ih(a.l);
                return a.D ? B.return() : b.uc ? (b.Ra = false, Sm(a, b, 0), B.return()) : F(B, sn(a, b, c, g, d, y, false, e), 10);
              case 10:
                b.ka && b.Ba && rm(b.ka, d.startTime, true);
              case 6:
                ih(a.l);
                if (a.D) return B.return();
                b.Ua = d;
                h.next();
                b.Ra = false;
                b.Th = false;
                A = a.g.ha.Pc();
                C = A[b.type];
                eb(JSON.stringify(C));
                b.uc || (E = null, b.type === f.Ia ? E = a.h.get(f.na) : b.type === f.na && (E = a.h.get(f.Ia)), E && E.type == f.na ? a.g.Sf(d, b.stream, E.stream.isAudioMuxedInVideo) : a.g.Sf(d, b.stream, b.stream.codecs.includes(",")));
                Km(b);
                Sm(a, b, 0);
                ta(B, 0);
                break;
              case 2:
                D = ua(B);
                ih(a.l, D);
                if (a.D) return B.return();
                b.Ra = false;
                if (D.code == 7001) b.Ra = false, Km(b), Sm(a, b, 0), B.B(0);
                else if (b.type == f.Va && a.i.ignoreTextStreamFailures) a.h.delete(f.Va), B.B(0);
                else {
                  if (D.code == 3017) return F(B, un(a, b, D), 0);
                  b.qe = true;
                  D.category == 1 && b.ka && xm(b.ka, d);
                  D.severity = 2;
                  return F(B, jn(a, b, D), 0);
                }
            }
          });
        }
        function qn(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, t;
          return Q(function(w) {
            switch (w.g) {
              case 1:
                e = b.stream;
                for (h = (g = (f = e.segmentIndex) && f.ec(c)) && g.next().value; h && a.O.includes(h.startTime); ) h = g && g.next().value;
                if (!h) {
                  w.B(0);
                  break;
                }
                k2 = h.ia;
                if (!k2 || xj(k2, b.yb)) {
                  w.B(3);
                  break;
                }
                b.yb = k2;
                ra(w, 4);
                return F(w, tn(a, b, k2), 6);
              case 6:
                l = w.h;
                var v = a.g.ha;
                v.H && dd(v.H, l, 0, e);
                a.O = [];
                ta(w, 3);
                break;
              case 4:
                throw m = ua(w), b.yb = null, m;
              case 3:
                if (b.Ua && b.Ua == h) {
                  w.B(0);
                  break;
                }
                b.Ua = h;
                ra(w, 8);
                return F(w, tn(a, b, h), 10);
              case 10:
                n = w.h;
                v = a.g.ha;
                v.H && dd(v.H, n, 0, e);
                a.O.push(h.startTime);
                ta(w, 9);
                break;
              case 8:
                throw q = ua(w), b.Ua = null, q;
              case 9:
                r = Math.max.apply(Math, [0].concat(x(a.O)));
                t = a.g.Rc();
                if (t + d > r) return F(w, qn(a, b, h.startTime, d), 0);
                w.B(0);
            }
          });
        }
        function un(a, b, c) {
          var d, e, f, g, h, k2;
          return Q(function(l) {
            if (l.g == 1) {
              d = Array.from(a.h.values());
              if (e = d.some(function(m) {
                return m != b && m.Th;
              })) return l.B(2);
              f = a.i.maxDisabledTime === 0 && c.code == 1011 ? 1 : a.i.maxDisabledTime;
              if (g = a.g.disableStream(b.stream, f)) return l.return();
              if (a.i.avoidEvictionOnQuotaExceededError) return Sm(a, b, 4), l.return();
              h = Math.round(100 * a.F);
              if (h > 20) a.F -= 0.2;
              else if (h > 4) a.F -= 0.04;
              else return b.qe = true, a.D = true, a.g.onError(c), l.return();
              b.Th = true;
              k2 = a.g.Rc();
              return F(l, vn(a, b, k2), 2);
            }
            Sm(a, b, 4);
            H(l);
          });
        }
        function rn(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A;
          return Q(function(C) {
            switch (C.g) {
              case 1:
                e = uc;
                f = b.Ua == null;
                g = [];
                h = Math.max(0, Math.max(c.appendWindowStart, a.Y) - 0.1);
                k2 = Math.min(c.appendWindowEnd, a.X) + 0.1;
                l = c.codecs || b.stream.codecs;
                m = lf(l);
                n = mf(c.mimeType || b.stream.mimeType);
                q = c.timestampOffset;
                if (q == b.If && h == b.Ac && k2 == b.zc && m == b.Gf && n == b.Hf) {
                  C.B(2);
                  break;
                }
                r = b.Gf && b.Hf && pl(a.g.ha, b.type, n, l, fn(a));
                if (!r) {
                  C.B(3);
                  break;
                }
                t = null;
                b.type === e.Ia ? t = a.h.get(e.na) : b.type === e.na && (t = a.h.get(e.Ia));
                if (!t) {
                  C.B(3);
                  break;
                }
                return F(
                  C,
                  Lm(t).catch(function() {
                  }),
                  5
                );
              case 5:
                t.yb = null, t.Ac = null, t.zc = null, an(a, t);
              case 3:
                return F(C, wn(a, b, q, h, k2, c, m, n), 2);
              case 2:
                return xj(c.ia, b.yb) || (b.yb = c.ia, c.l && c.ia && (w = tn(a, b, c.ia), v = function() {
                  var E, D, B, G, I, J, L, K, N, P, O;
                  return Q(function(M) {
                    switch (M.g) {
                      case 1:
                        return ra(M, 2), F(M, w, 4);
                      case 4:
                        return E = M.h, ih(a.l), D = null, B = /* @__PURE__ */ new Map(), G = { projection: null, hfov: null }, b.stream && (I = b.stream.videoLayout) && (J = I.split("/"), J.includes("PROJ-RECT") ? G.projection = "rect" : J.includes("PROJ-EQUI") ? G.projection = "equi" : J.includes("PROJ-HEQU") ? G.projection = "hequ" : J.includes("PROJ-PRIM") ? G.projection = "prim" : J.includes("PROJ-AIV") && (G.projection = "hequ")), L = new oh(), L.box("moov", th).box("trak", th).box("mdia", th).W("mdhd", function(R) {
                          D = Ki(R.reader, R.version).timescale;
                        }).box("hdlr", function(R) {
                          R = R.reader;
                          R.skip(8);
                          switch (R.od()) {
                            case "soun":
                              B.set(e.na, D);
                              break;
                            case "vide":
                              B.set(e.Ia, D);
                          }
                          D = null;
                        }), b.type !== e.Ia || G.projection || L.box("minf", th).box("stbl", th).W("stsd", vh).box("encv", wh).box("avc1", wh).box("avc3", wh).box("hev1", wh).box("hvc1", wh).box(
                          "dvav",
                          wh
                        ).box("dva1", wh).box("dvh1", wh).box("dvhe", wh).box("dvc1", wh).box("dvi1", wh).box("vexu", th).box("proj", th).W("prji", function(R) {
                          R = R.reader.od();
                          G.projection = R;
                        }).box("hfov", function(R) {
                          R = R.reader.Z() / 1e3;
                          G.hfov = R;
                        }), L.parse(E, true, true), b.type === e.Ia && xn(a, G), B.has(b.type) ? c.ia.timescale = B.get(b.type) : D != null && (c.ia.timescale = D), K = b.stream.segmentIndex, K instanceof $l && (N = bm(K, c.startTime)), P = b.stream.closedCaptions && b.stream.closedCaptions.size > 0, F(M, a.g.Ji(b.type, E), 5);
                      case 5:
                        return F(M, Pk(
                          a.g.ha,
                          b.type,
                          E,
                          null,
                          b.stream,
                          P,
                          b.rd,
                          d,
                          false,
                          false,
                          N
                        ), 6);
                      case 6:
                        ta(M, 0);
                        break;
                      case 2:
                        throw O = ua(M), b.yb = null, O;
                    }
                  });
                }, z = c.startTime, f && (y = Mk(a.g.ha, b.type), y != null && (z = y)), a.g.Vl(z, c.ia), g.push(v()))), A = b.Ua ? b.Ua.i : -1, c.i != A && g.push(al(a.g.ha, b.type, c.startTime)), F(C, Promise.all(g), 0);
            }
          });
        }
        function wn(a, b, c, d, e, f, g, h) {
          var k2, l, m, n, q;
          return Q(function(r) {
            switch (r.g) {
              case 1:
                k2 = uc;
                l = fn(a);
                ra(r, 2);
                b.Ac = d;
                b.zc = e;
                g && (b.Gf = g);
                h && (b.Hf = h);
                b.If = c;
                m = a.j.sequenceMode || a.j.type == "HLS";
                n = null;
                b.type === k2.Ia ? n = a.h.get(k2.na) : b.type === k2.na && (n = a.h.get(k2.Ia));
                if (!(n && n.stream && n.stream.isAudioMuxedInVideo)) {
                  r.B(4);
                  break;
                }
                return F(r, Yk(a.g.ha, n.type, c, d, e, m, n.stream.mimeType, n.stream.codecs, l), 4);
              case 4:
                return F(r, Yk(a.g.ha, b.type, c, d, e, m, f.mimeType || b.stream.mimeType, f.codecs || b.stream.codecs, l), 6);
              case 6:
                ta(
                  r,
                  0
                );
                break;
              case 2:
                throw q = ua(r), b.Ac = null, b.zc = null, b.Gf = null, b.Hf = null, b.If = null, q;
            }
          });
        }
        function sn(a, b, c, d, e, f, g, h) {
          g = g === void 0 ? false : g;
          h = h === void 0 ? false : h;
          var k2, l, m, n, q;
          return Q(function(r) {
            switch (r.g) {
              case 1:
                return k2 = d.closedCaptions && d.closedCaptions.size > 0, a.i.shouldFixTimestampOffset && (l = d.mimeType == "video/mp4" || d.mimeType == "audio/mp4", m = null, e.ia && (m = e.ia.timescale), (n = l && m && d.type === "video" && a.j.type == "DASH") && new oh().box("moof", th).box("traf", th).W("tfdt", function(t) {
                  var w, v, z, y, A, C;
                  return Q(function(E) {
                    w = Ji(t.reader, t.version);
                    v = w.baseMediaDecodeTime;
                    if (!v) return E.return();
                    z = -v / m;
                    y = Number(b.If) || 0;
                    if (!(y < z)) return E.B(0);
                    A = b.Ac;
                    C = b.zc;
                    return F(E, wn(a, b, z, A, C, e), 0);
                  });
                }).parse(f, false, g)), F(r, vn(a, b, c), 2);
              case 2:
                return ih(a.l), q = b.rd, b.rd = false, F(r, a.g.Ji(b.type, f), 3);
              case 3:
                return F(r, Pk(a.g.ha, b.type, f, e, d, k2, q, h, g), 4);
              case 4:
                ih(a.l), H(r);
            }
          });
        }
        function vn(a, b, c) {
          var d, e, f, g, h, k2, l, m, n;
          return Q(function(q) {
            if (q.g == 1) {
              d = b.stream.segmentIndex;
              d instanceof $l && (d.cb(a.j.presentationTimeline.Nb()), e = [], am(d, function(r) {
                e.push(r.nf());
              }));
              f = Math.max(a.i.bufferBehind * a.F, a.j.presentationTimeline.h);
              g = Kk(a.g.ha, b.type);
              if (g == null) return a.H == b && (a.H = null), q.return();
              h = c - g;
              k2 = a.i.evictionGoal;
              l = a.j.presentationTimeline.fc();
              m = a.j.presentationTimeline.Mb();
              n = h - f;
              m - l > k2 && (n = Math.max(h - f, l - k2 - g));
              return n <= k2 ? q.return() : F(
                q,
                a.g.ha.remove(b.type, g, g + n, e),
                2
              );
            }
            if (q.g != 4) return ih(a.l), a.H ? F(q, vn(a, a.H, c), 4) : q.B(0);
            ih(a.l);
            H(q);
          });
        }
        function ln(a) {
          return a && a.type == sc && (a.stream.mimeType == "application/cea-608" || a.stream.mimeType == "application/cea-708");
        }
        function tn(a, b, c, d) {
          var e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                if (e = c.hc()) return l.return(e);
                f = null;
                if (b.ka) {
                  var m = b.ka, n = m.h;
                  c instanceof wj && (n = m.j);
                  n.has(c) ? (m = n.get(c), d && (m.ni = d), f = m.Ce) : f = null;
                }
                f || (f = gn(c, b.stream, d || null, a.i.retryParameters, a.g.Dc));
                g = 0;
                b.Ba && (g = b.Ba.h);
                b.$a = f;
                return F(l, f.promise, 2);
              case 2:
                h = l.h;
                b.$a = null;
                k2 = h.data;
                if (!c.aesKey) {
                  l.B(3);
                  break;
                }
                return F(l, Gm(k2, c.aesKey, g), 4);
              case 4:
                k2 = l.h;
              case 3:
                return l.return(k2);
            }
          });
        }
        function gn(a, b, c, d, e, f) {
          f = f === void 0 ? false : f;
          var g = a instanceof yj ? a : void 0, h = g ? 1 : 0;
          a = Hm(a.T(), a.startByte, a.endByte, d, c);
          a.contentType = b.type;
          return e.request(fh, a, { type: h, stream: b, segment: g, isPreload: f });
        }
        function cn(a, b, c, d) {
          var e, f;
          return Q(function(g) {
            if (g.g == 1) return b.uc = false, b.ae = false, b.Cd = 0, b.dc = true, b.Ua = null, b.Ba = null, b.ka && !a.m.has(b.stream) && ym(b.ka), d ? (e = a.g.Rc(), f = a.g.ha.getDuration(), F(g, a.g.ha.remove(b.type, e + d, f), 3)) : F(g, Xk(a.g.ha, b.type), 4);
            if (g.g != 3) return ih(a.l), c ? F(g, a.g.ha.flush(b.type), 3) : g.B(3);
            ih(a.l);
            b.dc = false;
            b.endOfStream = false;
            b.Ra || b.Ab || Sm(a, b, 0);
            H(g);
          });
        }
        function Sm(a, b, c) {
          var d = b.type;
          if (d != sc || a.h.has(d)) b.Ab = new Af(function() {
            var e;
            return Q(function(f) {
              if (f.g == 1) return ra(f, 2), F(f, hn(a, b), 4);
              if (f.g != 2) return ta(f, 0);
              e = ua(f);
              if (a.g) a.g.onError(e);
              H(f);
            });
          }).$(c);
        }
        function Km(a) {
          a.Ab != null && (a.Ab.stop(), a.Ab = null);
        }
        function Lm(a) {
          return Q(function(b) {
            return a.$a ? F(b, a.$a.abort(), 0) : b.B(0);
          });
        }
        function jn(a, b, c) {
          var d;
          return Q(function(e) {
            if (e.g == 1) return c.code == 3024 ? (b.Ra = false, Km(b), Sm(a, b, 0), e.return()) : F(e, Gg(a.V), 2);
            ih(a.l);
            if (c.category === 1 && c.code != 1003) {
              if (b.Yc) return Um(a, false), e.return();
              d = a.i.maxDisabledTime === 0 && c.code == 1011 ? 1 : a.i.maxDisabledTime;
              c.handled = a.g.disableStream(b.stream, d);
              c.handled && (c.severity = 1);
            }
            if (!c.handled || c.code != 1011) a.g.onError(c);
            c.handled || a.i.failureCallback(c);
            H(e);
          });
        }
        function mn(a, b) {
          b = b === void 0 ? false : b;
          var c, d, e, f, g, h;
          return Q(function(k2) {
            if (k2.g == 1) {
              c = Date.now() / 1e3;
              d = a.i.minTimeBetweenRecoveries;
              if (!b) {
                if (!a.i.allowMediaSourceRecoveries || c - a.P < d) return k2.return(false);
                a.P = c;
              }
              e = uc;
              if (f = a.h.get(e.na)) Km(f), f.$a && (f.$a.abort(), f.$a = null), f.yb = null, f.Ac = null, f.zc = null, f.Ra = false, f.uc = false, f.Cd = 0, f.ae = false, f.dc = false, f.Ba && f.Ba.Wh();
              if (g = a.h.get(e.Ia)) Km(g), g.$a && (g.$a.abort(), g.$a = null), g.yb = null, g.Ac = null, g.zc = null, g.Ra = false, g.uc = false, g.Cd = 0, g.ae = false, g.dc = false, g.Ba && g.Ba.Wh();
              h = a.g.video.paused;
              return F(k2, jl(a.g.ha, fn(a)), 2);
            }
            !g || g.dc || g.Ra || g.Ab || Sm(a, g, 0);
            !f || f.dc || f.Ra || f.Ab || Sm(a, f, 0);
            h || a.g.video.play();
            return k2.return(true);
          });
        }
        function xn(a, b) {
          if (a.R.projection != b.projection || a.R.hfov != b.hfov) {
            if (b.projection != null || b.hfov != null) {
              var c = (/* @__PURE__ */ new Map()).set("detail", b);
              c = new T("spatialvideoinfo", c);
            } else c = new T("nospatialvideoinfo");
            c.cancelable = true;
            a.g.onEvent(c);
            a.R = b;
          }
        }
        function dn(a) {
          if (a.i.crossBoundaryStrategy !== "keep") return true;
          var b = Rb();
          if (!id() || !b.bd()) {
            b = u(a.h.keys());
            for (var c = b.next(); !c.done; c = b.next()) if (c = a.h.get(c.value), c.type !== uc.Va && (c = c.stream) && c.fullMimeTypes && c.fullMimeTypes.size > 1) return true;
          } else if (!b.lg()) {
            for (b = u(a.h.keys()), c = b.next(); !c.done; c = b.next()) if (c = a.h.get(c.value), c.type !== uc.Va && (c = c.stream) && c.fullMimeTypes && c.fullMimeTypes.size > 1) {
              a = /* @__PURE__ */ new Set();
              b = u(c.fullMimeTypes);
              for (c = b.next(); !c.done; c = b.next()) a.add(hf(c.value));
              return a.size > 1;
            }
          }
          return false;
        }
        function $m(a) {
          a.G.Sa();
          dn(a) && (a.G.o(a.g.video, "waiting", function() {
            return en(a);
          }), a.G.o(a.g.video, "timeupdate", function() {
            return en(a);
          }));
        }
        function en(a) {
          if (dn(a)) {
            a.K.stop();
            var b = a.g.Rc(), c = a.h.get("video") || a.h.get("audio");
            c && (c = c.yb) && c.g !== null && (b = c.g - b, b < 0 || b > 1 || (a.I = c.g + 0.1, a.K.$(b)));
          }
        }
        function on(a, b, c) {
          if (b.type === sc) return false;
          var d = b.yb;
          if (!d) return false;
          var e = c.ia;
          c = d.g !== e.g;
          a.i.crossBoundaryStrategy === "reset_to_encrypted" && (d.encrypted || e.encrypted || (c = false), d.encrypted && (a.i.crossBoundaryStrategy = "keep"));
          a.i.crossBoundaryStrategy === "RESET_ON_ENCRYPTION_CHANGE" && d.encrypted == e.encrypted && (c = false);
          if (a.i.crossBoundaryStrategy === "keep" && d.mimeType && e.mimeType) {
            var f = jf(nf(d.mimeType)), g = jf(nf(d.mimeType));
            d.mimeType == e.mimeType && f == g && (c = false);
          }
          c && (a.J || b.rd) && (a.J = false, mn(a, true).then(function() {
            var h = (/* @__PURE__ */ new Map()).set("oldEncrypted", d.encrypted).set("newEncrypted", e.encrypted);
            a.g.onEvent(new T("boundarycrossed", h));
          }));
          return c;
        }
        function fn(a, b) {
          function c(f) {
            if (f.fullMimeTypes && f.fullMimeTypes.size > 1 && a.h.has(f.type)) {
              var g = a.h.get(f.type), h = Mk(a.g.ha, g.type), k2 = a.g.Rc();
              (g = nn(a, g, k2, h)) && g.codecs && g.mimeType && (f.codecs = g.codecs, f.mimeType = g.mimeType);
            }
          }
          b = b === void 0 ? false : b;
          var d = /* @__PURE__ */ new Map(), e = a.u.audio;
          e && (c(e), d.set("audio", e));
          if (e = a.u.video) c(e), d.set("video", e);
          b && a.C && d.set(sc, a.C);
          return d;
        }
        ;
        function yn() {
        }
        function zn(a, b, c, d, e) {
          var f = e in d;
          var g = f ? c.constructor == Object && Object.keys(d).length == 0 : c.constructor == Object && Object.keys(c).length == 0;
          var h = f || g, k2 = true, l;
          for (l in b) {
            var m = e + "." + l, n = f ? d[e] : c[l];
            h || l in c ? b[l] === void 0 ? n === void 0 || h ? delete a[l] : a[l] = Gd(n) : g ? a[l] = b[l] : n.constructor == Object && b[l] && b[l].constructor == Object ? (a[l] || (a[l] = Gd(n)), m = zn(a[l], b[l], n, d, m), k2 = k2 && m) : typeof b[l] != typeof n || b[l] == null || typeof b[l] != "function" && b[l].constructor != n.constructor ? ($a("Invalid config, wrong type for " + m), k2 = false) : typeof c[l] == "function" && c[l].length != b[l].length ? (ab("Unexpected number of arguments for " + m), a[l] = b[l]) : a[l] = Array.isArray(a[l]) ? b[l].slice() : b[l] : ($a("Invalid config, unrecognized key " + m), k2 = false);
          }
          return k2;
        }
        function An(a, b) {
          for (var c = {}, d = c, e = 0, f = 0; ; ) {
            e = a.indexOf(".", e);
            if (e < 0) break;
            if (e == 0 || a[e - 1] != "\\") f = a.substring(f, e).replace(/\\\./g, "."), d[f] = {}, d = d[f], f = e + 1;
            e += 1;
          }
          d[a.substring(f).replace(/\\\./g, ".")] = b;
          return c;
        }
        function Bn(a, b) {
          return a && b;
        }
        function Cn(a, b) {
          function c(f) {
            for (var g = u(Object.keys(f)), h = g.next(); !h.done; h = g.next()) if (h = h.value, !(f[h] instanceof HTMLElement)) if (e(f[h]) && Object.keys(f[h]).length === 0) delete f[h];
            else {
              var k2 = f[h];
              Array.isArray(k2) && k2.length === 0 ? delete f[h] : typeof f[h] == "function" ? delete f[h] : e(f[h]) && (c(f[h]), Object.keys(f[h]).length === 0 && delete f[h]);
            }
          }
          function d(f, g) {
            return Object.keys(f).reduce(function(h, k2) {
              var l = f[k2];
              if (g.hasOwnProperty(k2)) if (l instanceof HTMLElement && g[k2] instanceof HTMLElement) l.isEqualNode(g[k2]) || (h[k2] = l);
              else if (e(l) && e(g[k2])) {
                if (l = d(l, g[k2]), Object.keys(l).length > 0 || !e(l)) h[k2] = l;
              } else Array.isArray(l) && Array.isArray(g[k2]) ? Rc(l, g[k2]) || (h[k2] = l) : Number.isNaN(l) && Number.isNaN(g[k2]) || l !== g[k2] && (h[k2] = l);
              else h[k2] = l;
              return h;
            }, {});
          }
          function e(f) {
            return f && typeof f === "object" && !Array.isArray(f);
          }
          a = d(a, b);
          c(a);
          return a;
        }
        S("shaka.util.ConfigUtils", yn);
        yn.getDifferenceFromConfigObjects = Cn;
        yn.convertToConfigObject = An;
        yn.mergeConfigObjects = zn;
        S("shaka.config.RepeatMode", { OFF: 0, ALL: 1, SINGLE: 2 });
        function Dn() {
        }
        function En(a) {
          a = Zb(a);
          return new qb(a).Jb;
        }
        function Fn(a, b, c) {
          function d(h) {
            Ob(f).setUint32(g, h.byteLength, true);
            g += 4;
            f.set(Kb(h), g);
            g += h.byteLength;
          }
          if (!c || !c.byteLength) throw new U(2, 6, 6015);
          var e;
          typeof b == "string" ? e = ac(b, true) : e = b;
          a = Zb(a);
          a = ac(a, true);
          var f = new Uint8Array(12 + a.byteLength + e.byteLength + c.byteLength), g = 0;
          d(a);
          d(e);
          d(c);
          return f;
        }
        function Gn(a, b, c) {
          if (b !== "skd") return a;
          b = c.serverCertificate;
          c = Zb(a).split("skd://").pop();
          return Fn(a, c, b);
        }
        function Hn(a, b) {
          a === 2 && (a = b.drmInfo) && Bg(a.keySystem) && (b.headers["Content-Type"] = "application/octet-stream");
        }
        S("shaka.drm.FairPlay", Dn);
        Dn.commonFairPlayResponse = function(a, b) {
          if (a === 2 && (a = b.originalRequest.drmInfo) && Bg(a.keySystem)) {
            try {
              var c = Wb(b.data);
            } catch (e) {
              return;
            }
            a = false;
            c = c.trim();
            c.substr(0, 5) === "<ckc>" && c.substr(-6) === "</ckc>" && (c = c.slice(5, -6), a = true);
            if (!a) try {
              var d = JSON.parse(c);
              d.ckc && (c = d.ckc, a = true);
              d.CkcMessage && (c = d.CkcMessage, a = true);
              d.License && (c = d.License, a = true);
            } catch (e) {
            }
            a && (b.data = Lb(hc(c)));
          }
        };
        Dn.muxFairPlayRequest = function(a, b) {
          Hn(a, b);
        };
        Dn.expressplayFairPlayRequest = function(a, b) {
          if (a === 2) {
            var c = b.drmInfo;
            c && Bg(c.keySystem) && Hn(a, b);
          }
        };
        Dn.conaxFairPlayRequest = function(a, b) {
          Hn(a, b);
        };
        Dn.ezdrmFairPlayRequest = function(a, b) {
          Hn(a, b);
        };
        Dn.verimatrixFairPlayRequest = function(a, b) {
          a === 2 && (a = b.drmInfo) && Bg(a.keySystem) && (a = Kb(b.body), a = fc(a), b.headers["Content-Type"] = "application/x-www-form-urlencoded", b.body = $b("spc=" + a));
        };
        Dn.muxInitDataTransform = function(a, b, c) {
          return Gn(a, b, c);
        };
        Dn.expressplayInitDataTransform = function(a, b, c) {
          return Gn(a, b, c);
        };
        Dn.conaxInitDataTransform = function(a, b, c) {
          if (b !== "skd") return a;
          b = c.serverCertificate;
          c = Zb(a).split("skd://").pop().split("?").shift();
          c = window2.atob(c);
          var d = new ArrayBuffer(c.length * 2);
          d = Nb(d);
          for (var e = 0, f = c.length; e < f; e++) d[e] = c.charCodeAt(e);
          return Fn(a, d, b);
        };
        Dn.ezdrmInitDataTransform = function(a, b, c) {
          if (b !== "skd") return a;
          b = c.serverCertificate;
          c = Zb(a).split(";").pop();
          return Fn(a, c, b);
        };
        Dn.verimatrixInitDataTransform = function(a, b, c) {
          return Gn(a, b, c);
        };
        Dn.initDataTransform = Fn;
        Dn.defaultGetContentId = En;
        Dn.isFairPlaySupported = function() {
          var a;
          return Q(function(b) {
            if (b.g == 1) return a = { initDataTypes: ["cenc", "sinf", "skd"], videoCapabilities: [{ contentType: 'video/mp4; codecs="avc1.42E01E"' }] }, ra(b, 2), F(b, navigator.requestMediaKeySystemAccess("com.apple.fps", [a]), 4);
            if (b.g != 2) return b.return(true);
            ua(b);
            return b.return(false);
          });
        };
        function In(a, b, c) {
          c = c === void 0 ? true : c;
          this.h = a;
          this.g = /* @__PURE__ */ new Set([a]);
          b = b || [];
          a = u(b);
          for (b = a.next(); !b.done; b = a.next()) this.add(b.value, c);
        }
        In.prototype.add = function(a, b) {
          var c = this.h;
          b = b === void 0 ? true : b;
          var d;
          if (!(d = !!c.audio != !!a.audio || !!c.video != !!a.video || c.language != a.language) && (d = c.audio && a.audio)) {
            d = c.audio;
            var e = a.audio;
            d = !(!((!d.channelsCount || !e.channelsCount || d.channelsCount > 2 || e.channelsCount > 2) && d.channelsCount != e.channelsCount || d.spatialAudio !== e.spatialAudio || b && !Jn(d, e)) && Kn(d.roles, e.roles) && d.groupId === e.groupId);
          }
          !d && (d = c.video && a.video) && (c = c.video, d = a.video, d = !((!b || Jn(c, d)) && Kn(c.roles, d.roles)));
          return d ? false : (this.g.add(a), true);
        };
        In.prototype.values = function() {
          return this.g.values();
        };
        function Jn(a, b) {
          if (a.mimeType != b.mimeType) return false;
          a = a.codecs.split(",").map(function(d) {
            return lf(d);
          });
          b = b.codecs.split(",").map(function(d) {
            return lf(d);
          });
          if (a.length != b.length) return false;
          a.sort();
          b.sort();
          for (var c = 0; c < a.length; c++) if (a[c] != b[c]) return false;
          return true;
        }
        function Kn(a, b) {
          a = new Set(a);
          b = new Set(b);
          a.delete("main");
          b.delete("main");
          if (a.size != b.size) return false;
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) if (!b.has(c.value)) return false;
          return true;
        }
        S("shaka.media.AdaptationSet", In);
        function Ln() {
          this.g = null;
        }
        Ln.prototype.configure = function(a) {
          this.g = a;
        };
        Ln.prototype.getConfiguration = function() {
          return this.g;
        };
        Ln.prototype.create = function(a) {
          var b;
          if (this.g.language) {
            var c = Mn(a, this.g.language);
            c.length && (b = c);
          }
          b || (b = a.filter(function(f) {
            return f.primary;
          }), b = b.length ? b : a);
          a = Nn(b, this.g.role);
          a.length && (b = a);
          a = On(b, this.g.videoRole);
          a.length && (b = a);
          this.g.videoLayout && (a = Pn(b, this.g.videoLayout), a.length && (b = a));
          this.g.hdrLevel && (a = Qn(b, this.g.hdrLevel), a.length && (b = a));
          var d = [this.g.channelCount, this.g.preferredAudioChannelCount];
          a = d.filter(function(f, g) {
            return f && d.indexOf(f) === g;
          });
          if (a.length) {
            for (a = u(a), c = a.next(); !c.done; c = a.next()) if (c = Rn(b, c.value), c.length) {
              b = c;
              break;
            }
          }
          this.g.audioLabel && (a = Sn(b, this.g.audioLabel), a.length && (b = a));
          this.g.videoLabel && (a = Tn(b, this.g.videoLabel), a.length && (b = a));
          a = Un(b, this.g.spatialAudio);
          a.length && (b = a);
          var e = [this.g.audioCodec, this.g.activeAudioCodec].concat(x(this.g.preferredAudioCodecs));
          a = e.filter(function(f, g) {
            return f && e.indexOf(f) === g;
          });
          if (a.length) {
            for (a = u(a), c = a.next(); !c.done; c = a.next()) if (c = Vn(b, c.value), c.length) {
              b = c;
              break;
            }
          }
          return new In(b[0], b, !(this.g.codecSwitchingStrategy == "smooth" && id()));
        };
        function Mn(a, b) {
          b = yc(b);
          var c = Gc(b, a.map(function(d) {
            return Fc(d);
          }));
          return c ? a.filter(function(d) {
            return c == Fc(d);
          }) : [];
        }
        function Nn(a, b) {
          return a.filter(function(c) {
            return c.audio ? b ? c.audio.roles.includes(b) : c.audio.roles.length == 0 : false;
          });
        }
        function On(a, b) {
          return a.filter(function(c) {
            return c.video ? b ? c.video.roles.includes(b) : c.video.roles.length == 0 : false;
          });
        }
        function Sn(a, b) {
          return a.filter(function(c) {
            return c.audio && c.audio.label ? c.audio.label.toLowerCase() == b.toLowerCase() : false;
          });
        }
        function Tn(a, b) {
          return a.filter(function(c) {
            return c.video && c.video.label ? c.video.label.toLowerCase() == b.toLowerCase() : false;
          });
        }
        function Rn(a, b) {
          return a.filter(function(c) {
            return c.audio && c.audio.channelsCount && c.audio.channelsCount > b ? false : true;
          }).sort(function(c, d) {
            return c.audio || d.audio ? c.audio ? d.audio ? (d.audio.channelsCount || 0) - (c.audio.channelsCount || 0) : 1 : -1 : 0;
          });
        }
        function Qn(a, b) {
          if (b == "AUTO") {
            var c = a.some(function(d) {
              return d.video && d.video.hdr && d.video.hdr == "HLG" ? true : false;
            });
            b = Rb().Id(c);
          }
          return a.filter(function(d) {
            return d.video && d.video.hdr && d.video.hdr != b ? false : true;
          });
        }
        function Pn(a, b) {
          return a.filter(function(c) {
            return c.video && c.video.videoLayout && c.video.videoLayout != b ? false : true;
          });
        }
        function Un(a, b) {
          return a.filter(function(c) {
            return c.audio && c.audio.spatialAudio != b ? false : true;
          });
        }
        function Vn(a, b) {
          return a.filter(function(c) {
            return c.audio && c.audio.codecs != b ? false : true;
          });
        }
        ;
        function Wn() {
        }
        function Xn() {
          var a = Infinity, b = Rb();
          navigator.connection && navigator.connection.saveData && (a = 360);
          var c = {
            retryParameters: Fg(),
            servers: {},
            clearKeys: {},
            advanced: {},
            delayLicenseRequestUntilPlayed: false,
            persistentSessionOnlinePlayback: false,
            persistentSessionsMetadata: [],
            initDataTransform: function(h, k2, l) {
              "apple" === window2.shakaMediaKeysPolyfill && k2 == "skd" && (k2 = l.serverCertificate, l = En(h), h = Fn(h, l, k2));
              return h;
            },
            logLicenseExchange: false,
            updateExpirationTime: 1,
            preferredKeySystems: [],
            keySystemsMapping: {},
            parseInbandPsshEnabled: false,
            minHdcpVersion: "",
            ignoreDuplicateInitData: true,
            defaultAudioRobustnessForWidevine: "SW_SECURE_CRYPTO",
            defaultVideoRobustnessForWidevine: "SW_SECURE_DECODE"
          }, d = "reload";
          id() && b.bd() && (d = "smooth");
          var e = {
            retryParameters: Fg(),
            availabilityWindowOverride: NaN,
            disableAudio: false,
            disableVideo: false,
            disableText: false,
            disableThumbnails: false,
            disableIFrames: false,
            defaultPresentationDelay: 0,
            segmentRelativeVttTiming: false,
            raiseFatalErrorOnManifestUpdateRequestFailure: false,
            continueLoadingWhenPaused: true,
            ignoreSupplementalCodecs: false,
            updatePeriod: -1,
            ignoreDrmInfo: false,
            enableAudioGroups: true,
            dash: { clockSyncUri: "", disableXlinkProcessing: true, xlinkFailGracefully: false, ignoreMinBufferTime: false, autoCorrectDrift: true, initialSegmentLimit: 1e3, ignoreSuggestedPresentationDelay: false, ignoreEmptyAdaptationSet: false, ignoreMaxSegmentDuration: false, keySystemsByURI: {
              "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey",
              "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e": "org.w3.clearkey",
              "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha",
              "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
              "urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready",
              "urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2": "com.apple.fps",
              "urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c": "com.huawei.wiseplay"
            }, manifestPreprocessor: Yn, manifestPreprocessorTXml: Zn, sequenceMode: false, useStreamOnceInPeriodFlattening: false, enableFastSwitching: true },
            hls: {
              ignoreTextStreamFailures: false,
              ignoreImageStreamFailures: false,
              defaultAudioCodec: "mp4a.40.2",
              defaultVideoCodec: "avc1.42E01E",
              ignoreManifestProgramDateTime: false,
              ignoreManifestProgramDateTimeForTypes: [],
              mediaPlaylistFullMimeType: 'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',
              liveSegmentsDelay: 3,
              sequenceMode: b.vd(),
              ignoreManifestTimestampsInSegmentsMode: false,
              disableCodecGuessing: false,
              disableClosedCaptionsDetection: false,
              allowLowLatencyByteRangeOptimization: true,
              allowRangeRequestsToGuessMimeType: false
            },
            mss: { manifestPreprocessor: Yn, manifestPreprocessorTXml: Zn, sequenceMode: false, keySystemsBySystemId: { "9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready", "79f0049a-4098-8642-ab92-e65be0885f95": "com.microsoft.playready" } }
          }, f = { trackSelectionCallback: function(h) {
            return Q(function(k2) {
              return k2.return(h);
            });
          }, downloadSizeCallback: function(h) {
            var k2;
            return Q(function(l) {
              if (l.g == 1) return navigator.storage && navigator.storage.estimate ? F(l, navigator.storage.estimate(), 3) : l.return(true);
              k2 = l.h;
              return l.return(k2.usage + h < k2.quota * 0.95);
            });
          }, progressCallback: function(h, k2) {
            return Bn([h, k2]);
          }, usePersistentLicense: true, numberOfParallelDownloads: 5 }, g = {
            drm: c,
            manifest: e,
            streaming: {
              retryParameters: Fg(),
              failureCallback: function(h) {
                return Bn([h]);
              },
              rebufferingGoal: 0,
              bufferingGoal: 10,
              bufferBehind: 30,
              evictionGoal: 1,
              ignoreTextStreamFailures: false,
              alwaysStreamText: false,
              startAtSegmentBoundary: false,
              gapDetectionThreshold: 0.5,
              gapPadding: 0,
              gapJumpTimerTime: 0.25,
              durationBackoff: 1,
              safeSeekOffset: 5,
              safeSeekEndOffset: 0,
              stallEnabled: true,
              stallThreshold: 1,
              stallSkip: 0.1,
              useNativeHlsForFairPlay: true,
              inaccurateManifestTolerance: 2,
              lowLatencyMode: true,
              preferNativeDash: false,
              preferNativeHls: false,
              updateIntervalSeconds: 1,
              observeQualityChanges: false,
              maxDisabledTime: 30,
              segmentPrefetchLimit: 1,
              prefetchAudioLanguages: [],
              disableAudioPrefetch: false,
              disableTextPrefetch: false,
              disableVideoPrefetch: false,
              liveSync: { enabled: false, targetLatency: 0.5, targetLatencyTolerance: 0.5, maxPlaybackRate: 1.1, minPlaybackRate: 0.95, panicMode: false, panicThreshold: 60, dynamicTargetLatency: { enabled: false, stabilityThreshold: 60, rebufferIncrement: 0.5, maxAttempts: 10, maxLatency: 4, minLatency: 1 } },
              allowMediaSourceRecoveries: true,
              minTimeBetweenRecoveries: 5,
              vodDynamicPlaybackRate: false,
              vodDynamicPlaybackRateLowBufferRate: 0.95,
              vodDynamicPlaybackRateBufferRatio: 0.5,
              preloadNextUrlWindow: 30,
              loadTimeout: 30,
              clearDecodingCache: false,
              dontChooseCodecs: false,
              shouldFixTimestampOffset: false,
              avoidEvictionOnQuotaExceededError: false,
              crossBoundaryStrategy: "keep",
              returnToEndOfLiveWindowWhenOutside: false
            },
            networking: { forceHTTP: false, forceHTTPS: false, minBytesForProgressEvents: 16e3 },
            mediaSource: {
              codecSwitchingStrategy: d,
              addExtraFeaturesToSourceBuffer: function(h) {
                return Bn([h], "");
              },
              forceTransmux: false,
              insertFakeEncryptionInInit: true,
              correctEc3Enca: false,
              modifyCueCallback: function(h, k2) {
                return Bn([h, k2]);
              },
              dispatchAllEmsgBoxes: false,
              useSourceElements: true,
              durationReductionEmitsUpdateEnd: true
            },
            offline: f,
            abrFactory: function() {
              return new rg();
            },
            adaptationSetCriteriaFactory: function() {
              return new (Function.prototype.bind.apply(Ln, [null].concat(x(Ma.apply(0, arguments)))))();
            },
            abr: { enabled: true, useNetworkInformation: true, defaultBandwidthEstimate: 1e6, switchInterval: 8, bandwidthUpgradeTarget: 0.85, bandwidthDowngradeTarget: 0.95, restrictions: {
              minWidth: 0,
              maxWidth: Infinity,
              minHeight: 0,
              maxHeight: a,
              minPixels: 0,
              maxPixels: Infinity,
              minFrameRate: 0,
              maxFrameRate: Infinity,
              minBandwidth: 0,
              maxBandwidth: Infinity,
              minChannelsCount: 0,
              maxChannelsCount: Infinity
            }, advanced: { minTotalBytes: 128e3, minBytes: 16e3, fastHalfLife: 2, slowHalfLife: 5 }, restrictToElementSize: false, restrictToScreenSize: false, ignoreDevicePixelRatio: false, clearBufferSwitch: false, safeMarginSwitch: 0, cacheLoadThreshold: 5, minTimeToSwitch: 0, preferNetworkInformationBandwidth: false, removeLatencyFromFirstPacketTime: true },
            autoShowText: 3,
            preferredAudioLanguage: "",
            preferredAudioLabel: "",
            preferredTextLanguage: "",
            preferredAudioRole: "",
            preferredVideoRole: "",
            preferredTextRole: "",
            preferredAudioChannelCount: 2,
            preferredVideoHdrLevel: "AUTO",
            preferredVideoLayout: "",
            preferredVideoLabel: "",
            preferredVideoCodecs: [],
            preferredAudioCodecs: [],
            preferredTextFormats: [],
            preferForcedSubs: false,
            preferSpatialAudio: false,
            preferredDecodingAttributes: [],
            restrictions: { minWidth: 0, maxWidth: Infinity, minHeight: 0, maxHeight: Infinity, minPixels: 0, maxPixels: Infinity, minFrameRate: 0, maxFrameRate: Infinity, minBandwidth: 0, maxBandwidth: Infinity, minChannelsCount: 0, maxChannelsCount: Infinity },
            playRangeStart: 0,
            playRangeEnd: Infinity,
            textDisplayer: { captionsUpdatePeriod: 0.25, fontScaleFactor: 1 },
            textDisplayFactory: function() {
              return null;
            },
            cmcd: { enabled: false, sessionId: "", contentId: "", rtpSafetyFactor: 5, useHeaders: false, includeKeys: [], version: 1, targets: [] },
            cmsd: { enabled: true, applyMaximumSuggestedBitrate: true, estimatedThroughputWeightRatio: 0.5 },
            lcevc: { enabled: false, dynamicPerformanceScaling: true, logLevel: 0, drawLogo: false, poster: true },
            ads: {
              customPlayheadTracker: false,
              skipPlayDetection: false,
              supportsMultipleMediaElements: true,
              disableHLSInterstitial: false,
              disableDASHInterstitial: false,
              allowPreloadOnDomElements: true,
              allowStartInMiddleOfInterstitial: true
            },
            ignoreHardwareResolution: false,
            queue: { preloadNextUrlWindow: Infinity, preloadPrevItem: true, repeatMode: 0 }
          };
          f.trackSelectionCallback = function(h) {
            return Q(function(k2) {
              return k2.return($n(h, g.preferredAudioLanguage, g.preferredVideoHdrLevel));
            });
          };
          return b.ab(g);
        }
        function ao() {
          return { streaming: { inaccurateManifestTolerance: 0, segmentPrefetchLimit: 2, updateIntervalSeconds: 0.1, maxDisabledTime: 1, retryParameters: { baseDelay: 100 } }, manifest: { dash: { autoCorrectDrift: false }, retryParameters: { baseDelay: 100 } }, drm: { retryParameters: { baseDelay: 100 } } };
        }
        function bo(a, b, c) {
          var d = { ".drm.keySystemsMapping": "", ".drm.servers": "", ".drm.clearKeys": "", ".drm.advanced": { distinctiveIdentifierRequired: false, persistentStateRequired: false, videoRobustness: [], audioRobustness: [], sessionType: "", serverCertificate: new Uint8Array(0), serverCertificateUri: "", individualizationServer: "", headers: {} } };
          return zn(a, b, c || Xn(), d, "");
        }
        function $n(a, b, c) {
          var d = c;
          d == "AUTO" && (c = a.some(function(h) {
            return h.hdr && h.hdr == "HLG" ? true : false;
          }), d = Rb().Id(c));
          var e = a.filter(function(h) {
            return h.type != "variant" || h.hdr && h.hdr != d ? false : true;
          });
          c = [];
          var f = Gc(b, e.map(function(h) {
            return h.language;
          }));
          f && (c = e.filter(function(h) {
            return yc(h.language) == f;
          }));
          c.length == 0 && (c = e.filter(function(h) {
            return h.primary;
          }));
          c.length == 0 && (e.map(function(h) {
            return h.language;
          }), c = e);
          var g = c.filter(function(h) {
            return h.height && h.height <= 480;
          });
          g.length && (g.sort(function(h, k2) {
            return k2.height - h.height;
          }), c = g.filter(function(h) {
            return h.height == g[0].height;
          }));
          b = [];
          c.length && (e = Math.floor(c.length / 2), c.sort(function(h, k2) {
            return h.bandwidth - k2.bandwidth;
          }), b.push(c[e]));
          a = u(a);
          for (c = a.next(); !c.done; c = a.next()) c = c.value, c.type != sc && c.type != "image" || b.push(c);
          return b;
        }
        function Yn(a) {
          return Bn([a], a);
        }
        function Zn(a) {
          return Bn([a], a);
        }
        S("shaka.util.PlayerConfiguration", Wn);
        Wn.mergeConfigObjects = bo;
        Wn.createDefaultForLL = ao;
        Wn.createDefault = Xn;
        function co() {
          this.g = null;
          this.h = [];
        }
        function eo(a, b) {
          var c = 0;
          a.g && a.g.state == b && (c += a.g.duration);
          a = u(a.h);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, c += d.state == b ? d.duration : 0;
          return c;
        }
        function fo(a) {
          function b(f) {
            return { timestamp: f.timestamp, state: f.state, duration: f.duration };
          }
          for (var c = [], d = u(a.h), e = d.next(); !e.done; e = d.next()) c.push(b(e.value));
          a.g && c.push(b(a.g));
          return c;
        }
        ;
        function go() {
          this.i = this.h = null;
          this.g = [];
        }
        function ho(a, b, c) {
          a.i != b && (a.i = b, a.g.push({ timestamp: Date.now() / 1e3, id: b.id, type: "text", fromAdaptation: c, bandwidth: null }));
        }
        ;
        function io() {
          this.D = this.V = NaN;
          this.l = "";
          this.j = this.jj = this.A = this.C = this.K = this.F = this.u = this.m = this.J = this.G = this.i = this.R = this.S = this.M = this.O = this.P = NaN;
          this.L = 0;
          this.H = this.I = NaN;
          this.g = new co();
          this.h = new go();
        }
        function jo(a, b, c) {
          a.P = b;
          a.O = c;
        }
        function ko(a, b, c) {
          a.V = b;
          a.D = c;
        }
        function lo(a, b) {
          a.i = isNaN(a.i) ? b : Math.max(a.i, b);
        }
        function mo(a, b) {
          a.j = isNaN(a.j) ? b : a.j + b;
        }
        function no(a) {
          var b = a.V, c = a.D, d = a.l, e = a.C, f = a.O, g = a.P, h = a.M, k2 = a.S, l = a.R, m = a.A, n = a.i, q = a.G, r = a.J, t = a.m, w = eo(a.g, "playing"), v = eo(a.g, "paused"), z = eo(a.g, "buffering"), y = a.u, A = a.F, C = a.K, E = a.jj, D = a.j, B = a.L, G = a.I, I = a.H, J = fo(a.g), L = [];
          a = u(a.h.g);
          for (var K = a.next(); !K.done; K = a.next()) K = K.value, L.push({ timestamp: K.timestamp, id: K.id, type: K.type, fromAdaptation: K.fromAdaptation, bandwidth: K.bandwidth });
          return {
            width: b,
            height: c,
            currentCodecs: d,
            streamBandwidth: e,
            decodedFrames: f,
            droppedFrames: g,
            corruptedFrames: h,
            stallsDetected: k2,
            gapsJumped: l,
            estimatedBandwidth: m,
            completionPercent: n,
            loadLatency: q,
            manifestTimeSeconds: r,
            drmTimeSeconds: t,
            playTime: w,
            pauseTime: v,
            bufferingTime: z,
            licenseTime: y,
            liveLatency: A,
            maxSegmentDuration: C,
            manifestSizeBytes: E,
            bytesDownloaded: D,
            nonFatalErrorCount: B,
            manifestPeriodCount: G,
            manifestGapCount: I,
            stateHistory: J,
            switchHistory: L
          };
        }
        ;
        function oo(a, b, c, d) {
          kb.call(this);
          this.M = a;
          this.S = b;
          this.xa = d.networkingEngine;
          this.m = c;
          this.D = null;
          this.sa = 0;
          this.Ma = d.Dd;
          this.G = d.Ol;
          this.Oa = d.Pl;
          this.g = d.config;
          this.l = this.H = this.h = null;
          this.ea = false;
          this.I = d.$l;
          this.oa = false;
          this.i = null;
          this.Y = false;
          this.A = null;
          this.L = /* @__PURE__ */ new Map();
          this.ra = false;
          this.Fa = d.Zl;
          this.V = new io();
          this.aa = new Lg();
          this.C = new Lg();
          this.O = null;
          this.j = false;
          this.X = d.lk;
          this.R = this.u = null;
          this.P = false;
          this.K = [];
          this.J = [];
          this.F = true;
        }
        la(oo, kb);
        function po(a, b, c) {
          (a = b ? a.J : a.K) ? a.push(c) : c();
        }
        function qo(a) {
          if (a.J) for (var b = u(a.J), c = b.next(); !c.done; c = b.next()) c = c.value, c();
          a.J = null;
        }
        function ro(a, b) {
          a.O = b;
          a.P = true;
          if (a.K) {
            b = u(a.K);
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, c();
          }
          a.K = null;
        }
        p = oo.prototype;
        p.getStartTime = function() {
          return this.m;
        };
        p.hd = function() {
          return this.M;
        };
        p.rh = function() {
          return this.h;
        };
        function so(a) {
          a.oa = true;
          return a.I;
        }
        p.getStats = function() {
          return this.V;
        };
        function to(a) {
          a.Y = true;
          return a.i;
        }
        p.cl = function() {
          return this.u ? bg(this.u) : null;
        };
        p.al = function() {
          return this.R ? cg(this.R) : null;
        };
        function uo(a) {
          a.ra = true;
          return a.L;
        }
        p.start = function() {
          var a = this;
          (function() {
            var b;
            return Q(function(c) {
              switch (c.g) {
                case 1:
                  return F(c, Promise.resolve(), 2);
                case 2:
                  return ra(c, 3), F(c, vo(a), 5);
                case 5:
                  wo(a);
                  if ("webkit" === window2.shakaMediaKeysPolyfill) {
                    c.B(6);
                    break;
                  }
                  return F(c, xo(a), 7);
                case 7:
                  wo(a);
                case 6:
                  if (!a.X) {
                    c.B(8);
                    break;
                  }
                  return F(c, yo(a), 9);
                case 9:
                  wo(a);
                case 8:
                  if (!a.X || !a.i) {
                    c.B(10);
                    break;
                  }
                  return F(c, ii(a.i), 11);
                case 11:
                  wo(a);
                case 10:
                  a.C.resolve();
                  ta(c, 0);
                  break;
                case 3:
                  b = ua(c), b instanceof U && (b.code == 7001 || b.code == 7003) || a.C.reject(b), H(c);
              }
            });
          })();
        };
        p.dispatchEvent = function(a) {
          return this.O ? this.O.dispatchEvent(a) : kb.prototype.dispatchEvent.call(this, a);
        };
        p.onError = function(a) {
          a.severity === 2 && (this.C.reject(a), this.destroy());
          var b = (/* @__PURE__ */ new Map()).set("detail", a);
          b = new T("error", b);
          this.dispatchEvent(b);
          b.defaultPrevented && (a.handled = true);
        };
        function wo(a) {
          if (a.j) throw new U(2, 7, 7003);
        }
        function zo(a, b) {
          a.dispatchEvent(new T("onstatechange", (/* @__PURE__ */ new Map()).set("state", b)));
        }
        function vo(a) {
          var b, c, d, e, f, g;
          return Q(function(h) {
            switch (h.g) {
              case 1:
                zo(a, "manifest-parser");
                a.l || (a.H = Hi(a.M, a.S), a.l = a.H(), a.l.configure(a.g.manifest, function() {
                  return a.F;
                }));
                b = Date.now() / 1e3;
                zo(a, "manifest");
                if (a.h) {
                  h.B(2);
                  break;
                }
                return F(h, a.l.start(a.M, a.Oa), 3);
              case 3:
                return a.h = h.h, F(h, Ao(a), 2);
              case 2:
                return a.aa.resolve(), c = new T("manifestparsed", void 0), F(h, Promise.resolve(), 5);
              case 5:
                a.dispatchEvent(c);
                if (a.h.variants.length == 0) throw new U(2, 4, 4036);
                Bo(a.h);
                d = xi(a.G, a.h);
                if (!d) {
                  h.B(6);
                  break;
                }
                e = new T("trackschanged", void 0);
                return F(h, Promise.resolve(), 7);
              case 7:
                wo(a), a.dispatchEvent(e);
              case 6:
                f = Date.now() / 1e3, g = f - b, a.V.J = g, H(h);
            }
          });
        }
        function xo(a, b) {
          var c, d, e, f;
          return Q(function(g) {
            switch (g.g) {
              case 1:
                if (!a.h || a.i) return g.return();
                zo(a, "drm-engine");
                a.sa = Date.now() / 1e3;
                a.i = a.Ma();
                a.G.h = a.i;
                a.i.configure(a.g.drm, function() {
                  return a.F;
                });
                c = kg(a.h.variants);
                d = true;
                a.h && a.h.presentationTimeline && (d = a.h.presentationTimeline.U());
                return F(g, Ih(a.i, c, a.h.offlineSessionIds, d), 2);
              case 2:
                wo(a);
                if (!b) {
                  g.B(3);
                  break;
                }
                return F(g, a.i.cc(b), 4);
              case 4:
                wo(a);
              case 3:
                return F(g, vi(a.G, a.h), 5);
              case 5:
                e = g.h;
                if (!e) {
                  g.B(0);
                  break;
                }
                f = new T(
                  "trackschanged",
                  void 0
                );
                return F(g, Promise.resolve(), 7);
              case 7:
                a.dispatchEvent(f), H(g);
            }
          });
        }
        p.configure = function(a, b) {
          a = An(a, b);
          bo(this.g, a);
        };
        p.getConfiguration = function() {
          return Gd(this.g);
        };
        function Ao(a) {
          var b, c, d, e, f;
          return Q(function(g) {
            a.D || (a.D = a.g.adaptationSetCriteriaFactory(), a.D.configure({
              language: a.g.preferredAudioLanguage,
              role: a.g.preferredAudioRole,
              videoRole: a.g.preferredVideoRole,
              channelCount: a.g.preferredAudioChannelCount,
              hdrLevel: a.g.preferredVideoHdrLevel,
              spatialAudio: a.g.preferSpatialAudio,
              videoLayout: a.g.preferredVideoLayout,
              audioLabel: a.g.preferredAudioLabel,
              videoLabel: a.g.preferredVideoLabel,
              codecSwitchingStrategy: a.g.mediaSource.codecSwitchingStrategy,
              audioCodec: "",
              activeAudioCodec: "",
              activeAudioChannelCount: 0,
              preferredAudioCodecs: a.g.preferredAudioCodecs,
              preferredAudioChannelCount: a.g.preferredAudioChannelCount
            }));
            if (a.h.variants.length != 1 && a.h.type != "HLS") return g.B(0);
            b = Co(a);
            if (!b) return g.B(0);
            c = [];
            d = u([b.video, b.audio]);
            for (e = d.next(); !e.done; e = d.next()) (f = e.value) && !f.segmentIndex && c.push(f.createSegmentIndex());
            return c.length > 0 ? F(g, Promise.all(c), 0) : g.B(0);
          });
        }
        function yo(a) {
          var b, c, d, e, f;
          return Q(function(g) {
            !a.u && (b = Co(a)) && (a.u = b);
            if (!a.u) return g.B(0);
            c = a.h.presentationTimeline.U();
            d = [];
            e = a.u;
            e.video && d.push(Do(a, e.video, c));
            e.audio && d.push(Do(a, e.audio, c));
            (f = lg(a.h.textStreams, a.g.preferredTextLanguage, a.g.preferredTextRole, a.g.preferForcedSubs)[0] || null) && pg(e.audio, f, a.g) && (d.push(Do(a, f, c)), a.R = f);
            return F(g, Promise.all(d), 0);
          });
        }
        function Co(a) {
          if (!a.A) {
            var b = a.g.abrFactory;
            a.A = b();
            a.A.configure(a.g.abr);
          }
          b = kg(a.h.variants);
          b = a.D.create(b);
          a.A.setVariants(Array.from(b.values()));
          return a.A.chooseVariant(true);
        }
        function Do(a, b, c) {
          var d, e, f, g, h;
          return Q(function(k2) {
            if (k2.g == 1) return d = a.g.streaming.segmentPrefetchLimit || 2, e = new pm(d, b, function(l, m, n) {
              return gn(l, m, n || null, a.g.streaming.retryParameters, a.xa, a.F);
            }, false), a.L.set(b.id, e), b.segmentIndex ? k2.B(2) : F(k2, b.createSegmentIndex(), 2);
            f = typeof a.m === "number" ? a.m : 0;
            g = b.segmentIndex.ec(f);
            h = null;
            g && (h = g.current(), h || (h = g.next().value));
            h || (h = eg(b.segmentIndex));
            return h ? c ? h.ia ? F(k2, sm(e, h.ia), 0) : k2.B(0) : F(k2, rm(e, h.startTime), 0) : k2.B(0);
          });
        }
        p.Fm = function() {
          return this.C;
        };
        p.destroy = function() {
          var a = this, b, c, d;
          return Q(function(e) {
            if (e.g == 1) return a.j = true, !a.l || a.ea ? e.B(2) : F(e, a.l.stop(), 2);
            if (e.g != 4) return a.A && a.A.release(), a.I && !a.oa && a.I.release(), !a.i || a.Y ? e.B(4) : F(e, a.i.destroy(), 4);
            if (a.L.size > 0 && !a.ra) for (b = u(a.L.values()), c = b.next(); !c.done; c = b.next()) d = c.value, ym(d);
            H(e);
          });
        };
        function Bo(a) {
          function b(c) {
            return c.video && c.audio || c.video && c.video.codecs.includes(",");
          }
          a.variants.some(b) && (a.variants = a.variants.filter(b));
        }
        S("shaka.media.PreloadManager", oo);
        oo.prototype.destroy = oo.prototype.destroy;
        oo.prototype.waitForFinish = oo.prototype.Fm;
        oo.prototype.getPrefetchedTextTrack = oo.prototype.al;
        oo.prototype.getPrefetchedVariantTrack = oo.prototype.cl;
        function Eo(a, b) {
          kb.call(this);
          var c = this;
          this.i = a;
          this.l = b;
          this.g = /* @__PURE__ */ new Map();
          this.m = [{ zd: null, yd: Fo, kd: function(d, e) {
            return Go(c, "enter", d, e);
          } }, { zd: Ho, yd: Fo, kd: function(d, e) {
            return Go(c, "enter", d, e);
          } }, { zd: Io, yd: Fo, kd: function(d, e) {
            return Go(c, "enter", d, e);
          } }, { zd: Fo, yd: Ho, kd: function(d, e) {
            return Go(c, "exit", d, e);
          } }, { zd: Fo, yd: Io, kd: function(d, e) {
            return Go(c, "exit", d, e);
          } }, { zd: Ho, yd: Io, kd: function(d, e) {
            e ? Go(c, "skip", d, e) : (Go(c, "enter", d, e), Go(c, "exit", d, e));
          } }, { zd: Io, yd: Ho, kd: function(d, e) {
            return Go(
              c,
              "skip",
              d,
              e
            );
          } }];
          this.h = new Tc();
          this.h.o(this.i, "regionremove", function(d) {
            c.g.delete(d.region);
          });
        }
        la(Eo, kb);
        Eo.prototype.release = function() {
          this.i = null;
          this.g.clear();
          this.h.release();
          this.h = null;
          kb.prototype.release.call(this);
        };
        Eo.prototype.j = function(a, b) {
          if (!this.l || a != 0) {
            this.l = false;
            for (var c = u(this.i.h.values()), d = c.next(); !d.done; d = c.next()) {
              d = d.value;
              var e = this.g.get(d), f = a < d.startTime ? Ho : a > d.endTime ? Io : Fo;
              this.g.set(d, f);
              for (var g = u(this.m), h = g.next(); !h.done; h = g.next()) h = h.value, h.zd == e && h.yd == f && h.kd(d, b);
            }
          }
        };
        function Go(a, b, c, d) {
          b = new T(b, /* @__PURE__ */ new Map([["region", c], ["seeking", d]]));
          a.dispatchEvent(b);
        }
        var Ho = 1, Fo = 2, Io = 3;
        function Jo(a, b, c) {
          var d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                var n = new qb(a).qb.split("/").pop().split(".");
                d = n.length == 1 ? "" : n.pop().toLowerCase();
                if (e = Ko.get(d)) return m.return(e);
                f = 0;
                g = $g([a], c);
                ra(m, 2);
                g.method = "HEAD";
                return F(m, b.request(f, g).promise, 4);
              case 4:
                h = m.h;
                e = h.headers["content-type"];
                ta(m, 3);
                break;
              case 2:
                k2 = ua(m);
                if (!k2 || k2.code != 1002 && k2.code != 1001) {
                  m.B(3);
                  break;
                }
                g.method = "GET";
                return F(m, b.request(f, g).promise, 6);
              case 6:
                l = m.h, e = l.headers["content-type"];
              case 3:
                return m.return(e ? e.toLowerCase().split(";").shift() : "");
            }
          });
        }
        var Ko = (/* @__PURE__ */ new Map()).set("mp4", "video/mp4").set("m4v", "video/mp4").set("m4a", "audio/mp4").set("webm", "video/webm").set("weba", "audio/webm").set("mkv", "video/webm").set("ts", "video/mp2t").set("ogv", "video/ogg").set("ogg", "audio/ogg").set("mpg", "video/mpeg").set("mpeg", "video/mpeg").set("mov", "video/quicktime").set("m3u8", "application/x-mpegurl").set("mpd", "application/dash+xml").set("ism", "application/vnd.ms-sstr+xml").set("mp3", "audio/mpeg").set("aac", "audio/aac").set("flac", "audio/flac").set("wav", "audio/wav").set(
          "sbv",
          "text/x-subviewer"
        ).set("srt", "text/srt").set("vtt", "text/vtt").set("webvtt", "text/vtt").set("ttml", "application/ttml+xml").set("lrc", "application/x-subtitle-lrc").set("ssa", "text/x-ssa").set("ass", "text/x-ssa").set("jpeg", "image/jpeg").set("jpg", "image/jpeg").set("png", "image/png").set("svg", "image/svg+xml").set("webp", "image/webp").set("avif", "image/avif").set("html", "text/html").set("htm", "text/html");
        for (var Lo = {
          ach: "Lwo",
          ady: "",
          af: "Afrikaans",
          "af-NA": "Afrikaans (Namibia)",
          "af-ZA": "Afrikaans (South Africa)",
          ak: "Ti",
          ar: "",
          "ar-AR": "",
          "ar-MA": "",
          "ar-SA": " ()",
          "ay-BO": "Aymar aru",
          az: "Azrbaycan dili",
          "az-AZ": "Azrbaycan dili",
          "be-BY": "",
          bg: "",
          "bg-BG": "",
          bn: "",
          "bn-IN": " ()",
          "bn-BD": "()",
          "bs-BA": "Bosanski",
          ca: "Catal",
          "ca-ES": "Catal",
          cak: "Maya Kaqchikel",
          "ck-US": " (tsalagi)",
          cs: "etina",
          "cs-CZ": "etina",
          cy: "Cymraeg",
          "cy-GB": "Cymraeg",
          da: "Dansk",
          "da-DK": "Dansk",
          de: "Deutsch",
          "de-AT": "Deutsch (sterreich)",
          "de-DE": "Deutsch (Deutschland)",
          "de-CH": "Deutsch (Schweiz)",
          dsb: "Dolnoserbina",
          el: "",
          "el-GR": "",
          en: "English",
          "en-GB": "English (UK)",
          "en-AU": "English (Australia)",
          "en-CA": "English (Canada)",
          "en-IE": "English (Ireland)",
          "en-IN": "English (India)",
          "en-PI": "English (Pirate)",
          "en-UD": "English (Upside Down)",
          "en-US": "English (US)",
          "en-ZA": "English (South Africa)",
          "en@pirate": "English (Pirate)",
          eo: "Esperanto",
          "eo-EO": "Esperanto",
          es: "Espaol",
          "es-AR": "Espaol (Argentine)",
          "es-419": "Espaol (Latinoamrica)",
          "es-CL": "Espaol (Chile)",
          "es-CO": "Espaol (Colombia)",
          "es-EC": "Espaol (Ecuador)",
          "es-ES": "Espaol (Espaa)",
          "es-LA": "Espaol (Latinoamrica)",
          "es-NI": "Espaol (Nicaragua)",
          "es-MX": "Espaol (Mxico)",
          "es-US": "Espaol (Estados Unidos)",
          "es-VE": "Espaol (Venezuela)",
          et: "eesti keel",
          "et-EE": "Eesti (Estonia)",
          eu: "Euskara",
          "eu-ES": "Euskara",
          fa: "",
          "fa-IR": "",
          "fb-LT": "Leet Speak",
          ff: "Fulah",
          fi: "Suomi",
          "fi-FI": "Suomi",
          "fo-FO": "Froyskt",
          fr: "Franais",
          "fr-CA": "Franais (Canada)",
          "fr-FR": "Franais (France)",
          "fr-BE": "Franais (Belgique)",
          "fr-CH": "Franais (Suisse)",
          "fy-NL": "Frysk",
          ga: "Gaeilge",
          "ga-IE": "Gaeilge (Gaelic)",
          gl: "Galego",
          "gl-ES": "Galego",
          "gn-PY": "Avae'",
          "gu-IN": "",
          "gx-GR": " ",
          he: "",
          "he-IL": "",
          hi: "",
          "hi-IN": "",
          hr: "Hrvatski",
          "hr-HR": "Hrvatski",
          hsb: "Hornjoserbina",
          ht: "Kreyl",
          hu: "Magyar",
          "hu-HU": "Magyar",
          "hy-AM": "",
          id: "Bahasa Indonesia",
          "id-ID": "Bahasa Indonesia",
          is: "slenska",
          "is-IS": "slenska (Iceland)",
          it: "Italiano",
          "it-IT": "Italiano",
          ja: "",
          "ja-JP": "",
          "jv-ID": "Basa Jawa",
          "ka-GE": "",
          "kk-KZ": "",
          km: "",
          "km-KH": "",
          kab: "Taqbaylit",
          kn: "",
          "kn-IN": " (India)",
          ko: "",
          "ko-KR": " ()",
          ku: "Kurd",
          "ku-TR": "Kurd",
          la: "Latin",
          "la-VA": "Latin",
          lb: "Ltzebuergesch",
          "li-NL": "Lmbrgs",
          lt: "Lietuvi",
          "lt-LT": "Lietuvi",
          lv: "Latvieu",
          "lv-LV": "Latvieu",
          mai: ", ",
          "mg-MG": "Malagasy",
          mk: "",
          "mk-MK": " ()",
          ml: "",
          "ml-IN": "",
          "mn-MN": "",
          mr: "",
          "mr-IN": "",
          ms: "Bahasa Melayu",
          "ms-MY": "Bahasa Melayu",
          mt: "Malti",
          "mt-MT": "Malti",
          my: "",
          nb: "Norsk (bokml)",
          "nb-NO": "Norsk (bokml)",
          ne: "",
          "ne-NP": "",
          nl: "Nederlands",
          "nl-BE": "Nederlands (Belgi)",
          "nl-NL": "Nederlands (Nederland)",
          "nn-NO": "Norsk (nynorsk)",
          no: "Norsk",
          oc: "Occitan",
          "or-IN": "",
          pa: "",
          "pa-IN": " ( )",
          pl: "Polski",
          "pl-PL": "Polski",
          "ps-AF": "",
          pt: "Portugus",
          "pt-BR": "Portugus (Brasil)",
          "pt-PT": "Portugus (Portugal)",
          "qu-PE": "Qhichwa",
          "rm-CH": "Rumantsch",
          ro: "Romn",
          "ro-RO": "Romn",
          ru: "",
          "ru-RU": "",
          "sa-IN": "",
          "se-NO": "Davvismegiella",
          "si-LK": "",
          sk: "Slovenina",
          "sk-SK": "Slovenina (Slovakia)",
          sl: "Slovenina",
          "sl-SI": "Slovenina",
          "so-SO": "Soomaaliga",
          sq: "Shqip",
          "sq-AL": "Shqip",
          sr: "",
          "sr-RS": " (Serbia)",
          su: "Basa Sunda",
          sv: "Svenska",
          "sv-SE": "Svenska",
          sw: "Kiswahili",
          "sw-KE": "Kiswahili",
          ta: "",
          "ta-IN": "",
          te: "",
          "te-IN": "",
          tg: " ",
          "tg-TJ": "",
          th: "",
          "th-TH": " ()",
          tl: "Filipino",
          "tl-PH": "Filipino",
          tlh: "tlhIngan-Hol",
          tr: "Trke",
          "tr-TR": "Trke",
          "tt-RU": "",
          uk: "",
          "uk-UA": "",
          ur: "",
          "ur-PK": "",
          uz: "O'zbek",
          "uz-UZ": "O'zbek",
          vi: "Ting Vit",
          "vi-VN": "Ting Vit",
          "xh-ZA": "isiXhosa",
          yi: "",
          "yi-DE": " (German)",
          zh: "",
          "zh-HANS": "",
          "zh-HANT": "",
          "zh-CN": "",
          "zh-HK": "",
          "zh-SG": "",
          "zh-TW": "",
          "zu-ZA": "isiZulu"
        }, Mo = u(Object.keys(Lo)), No = Mo.next(); !No.done; No = Mo.next()) {
          var Oo = No.value;
          Lo[Oo.toLowerCase()] = Lo[Oo];
        }
        ;
        function Po(a, b) {
          if (a.lineBreak) return "\n";
          if (a.nestedCues.length) return a.nestedCues.map(function(g) {
            return Po(g, a);
          }).join("");
          if (!a.payload) return a.payload;
          var c = [], d = a.fontWeight >= Oe, e = a.fontStyle == Pe, f = a.textDecoration.includes(Qe);
          d && c.push(["b"]);
          e && c.push(["i"]);
          f && c.push(["u"]);
          e = a.color;
          e == "" && b && (e = b.color);
          d = "";
          (e = Qo(e)) && (d += "." + e);
          e = a.backgroundColor;
          e == "" && b && (e = b.backgroundColor);
          (b = Qo(e)) && (d += ".bg_" + b);
          d && c.push(["c", d]);
          return c.reduceRight(function(g, h) {
            var k2 = u(h);
            h = k2.next().value;
            k2 = k2.next().value;
            return "<" + h + (k2 === void 0 ? "" : k2) + ">" + g + "</" + h + ">";
          }, a.payload);
        }
        function Qo(a) {
          a = a.toLowerCase();
          var b = a.replace(/\s/g, "").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);
          b ? a = "#" + (parseInt(b[1], 10) | 256).toString(16).slice(1) + (parseInt(b[2], 10) | 256).toString(16).slice(1) + (parseInt(b[3], 10) | 256).toString(16).slice(1) : a.startsWith("#") && a.length > 7 && (a = a.slice(0, 7));
          switch (a) {
            case "white":
            case "#fff":
            case "#ffffff":
              return "white";
            case "lime":
            case "#0f0":
            case "#00ff00":
              return "lime";
            case "cyan":
            case "#0ff":
            case "#00ffff":
              return "cyan";
            case "red":
            case "#f00":
            case "#ff0000":
              return "red";
            case "yellow":
            case "#ff0":
            case "#ffff00":
              return "yellow";
            case "magenta":
            case "#f0f":
            case "#ff00ff":
              return "magenta";
            case "blue":
            case "#00f":
            case "#0000ff":
              return "blue";
            case "black":
            case "#000":
            case "#000000":
              return "black";
          }
          return null;
        }
        function Ro(a, b) {
          var c = [];
          a = u(So(a));
          for (var d = a.next(); !d.done; d = a.next()) if (d = d.value, d.isContainer) c.push.apply(c, x(Ro(d.nestedCues, d)));
          else {
            var e = d.clone();
            e.nestedCues = [];
            e.payload = Po(d, b);
            c.push(e);
          }
          return c;
        }
        function So(a) {
          var b = [];
          a = u(a);
          for (var c = a.next(), d = {}; !c.done; d = { Pg: void 0 }, c = a.next()) d.Pg = c.value, b.some(/* @__PURE__ */ function(e) {
            return function(f) {
              return Ce(e.Pg, f);
            };
          }(d)) || b.push(d.Pg);
          return b;
        }
        function To(a) {
          function b(d) {
            for (var e = 5381, f = d.length; f; ) e = e * 33 ^ d.charCodeAt(--f);
            return (e >>> 0).toString();
          }
          if (a.startTime >= a.endTime) return null;
          var c = new VTTCue(a.startTime, a.endTime, a.payload);
          c.id = b(a.startTime.toString()) + b(a.endTime.toString()) + b(a.payload);
          c.lineAlign = a.lineAlign;
          c.positionAlign = a.positionAlign;
          a.size && (c.size = a.size);
          try {
            c.align = a.textAlign;
          } catch (d) {
          }
          a.textAlign == "center" && c.align != "center" && (c.align = "middle");
          a.writingMode == "vertical-lr" ? c.vertical = "lr" : a.writingMode == "vertical-rl" && (c.vertical = "rl");
          a.lineInterpretation == 1 && (c.snapToLines = false);
          a.line != null && (c.line = a.line);
          a.position != null && (c.position = a.position);
          return c;
        }
        function Uo(a, b) {
          var c = Ro(b), d = [];
          b = a.cues ? Array.from(a.cues) : [];
          c = u(c);
          for (var e = c.next(), f = {}; !e.done; f = { Kd: void 0 }, e = c.next()) f.Kd = e.value, !b.some(/* @__PURE__ */ function(g) {
            return function(h) {
              return h.startTime == g.Kd.startTime && h.endTime == g.Kd.endTime && h.text == g.Kd.payload ? true : false;
            };
          }(f)) && f.Kd.payload && (e = To(f.Kd)) && d.push(e);
          b = d.slice().sort(function(g, h) {
            return g.startTime != h.startTime ? g.startTime - h.startTime : g.endTime != h.endTime ? g.endTime - h.startTime : "line" in VTTCue.prototype ? d.indexOf(h) - d.indexOf(g) : d.indexOf(g) - d.indexOf(h);
          });
          b = u(b);
          for (c = b.next(); !c.done; c = b.next()) a.addCue(c.value);
        }
        function Vo(a, b) {
          var c = false;
          a.mode === "disabled" && (c = true, a.mode = "hidden");
          for (var d = 0; d < a.cues.length; ) {
            var e = a.cues[d];
            b(e) ? a.removeCue(e) : d++;
          }
          c && (a.mode = "disabled");
        }
        ;
        function Wo(a) {
          var b = this;
          this.i = a;
          this.l = new Tc();
          this.j = null;
          this.h = /* @__PURE__ */ new Map();
          this.g = -1;
          this.A = false;
          this.u = null;
          this.D = function() {
            b.l.Ea(b.i, "textchanged", b.m);
            b.l.Ea(b.j.textTracks, "change", b.C);
            for (var c = u(b.h.values()), d = c.next(); !d.done; d = c.next()) d.value.remove();
            b.h.clear();
            b.g = -1;
            b.j = null;
          };
          this.m = function() {
            var c = /* @__PURE__ */ new Map(), d = b.i.yc();
            d = u(d);
            for (var e = d.next(); !e.done; e = d.next()) {
              e = e.value;
              if (b.h.has(e.id)) {
                var f = b.h.get(e.id);
                e.active || f.track.mode === "disabled" || (f.track.mode = "disabled");
                b.h.delete(e.id);
              } else {
                f = b.j.ownerDocument.createElement("track");
                f.kind = Xo(e);
                var g = f, h = void 0;
                if (e.label) h = e.label;
                else if (e.language) if (e.language in Lo) h = Lo[e.language];
                else {
                  var k2 = Dc(e.language);
                  k2 in Lo && (h = Lo[k2] + " (" + e.language + ")");
                }
                h || (h = e.originalTextId, e.language && e.language !== e.originalTextId && (h += " (" + e.language + ")"));
                g.label = h;
                e.language in Lo && (f.srclang = e.language);
                Rb().Ja() === "CHROMIUM" && (f.src = "data:,WEBVTT");
                f.track.mode = "disabled";
                b.j.appendChild(f);
              }
              c.set(e.id, f);
              e.active && (b.g = e.id);
            }
            d = u(b.h.values());
            for (e = d.next(); !e.done; e = d.next()) e.value.remove();
            b.g > -1 && (c.has(b.g) ? (d = c.get(b.g).track, d.mode === "disabled" && (d.mode = b.A ? "showing" : "hidden")) : b.g = -1);
            b.h = c;
          };
          this.C = function() {
            if (!b.u) {
              var c = b.j;
              b.u = new Bf(function() {
                b.u = null;
                if (b.j === c) {
                  var d = -1, e = false;
                  if (b.h.has(b.g)) {
                    var f = b.h.get(b.g);
                    f.track.mode === "showing" ? (d = b.g, e = true) : f.track.mode === "hidden" && (d = b.g);
                  }
                  if (!e) for (e = u(b.h), f = e.next(); !f.done; f = e.next()) {
                    var g = u(f.value);
                    f = g.next().value;
                    g = g.next().value;
                    if (g.track.mode === "showing") {
                      d = f;
                      break;
                    } else d < 0 && g.track.mode === "hidden" && (d = f);
                  }
                  e = u(b.h);
                  for (f = e.next(); !f.done; f = e.next()) g = u(f.value), f = g.next().value, g = g.next().value, f !== d && g.track.mode !== "disabled" && (g.track.mode = "disabled");
                  b.g !== d && (b.g = d, d > -1 && b.i.fg({ id: d }));
                  b.i.Zd(d > -1 && b.h.get(d).track.mode === "showing");
                }
              }).$(0);
            }
          };
          this.l.o(a, "loaded", function() {
            return b.enableTextDisplayer();
          });
          this.enableTextDisplayer();
        }
        p = Wo.prototype;
        p.configure = function() {
        };
        p.remove = function(a, b) {
          if (this.i) this.h.has(this.g) && Vo(this.h.get(this.g).track, function(c) {
            return c.startTime < b && c.endTime > a;
          });
          else return false;
          return true;
        };
        p.append = function(a) {
          this.h.has(this.g) && Uo(this.h.get(this.g).track, a);
        };
        p.destroy = function() {
          this.i && (this.j && this.D(), this.i = null);
          this.l && (this.l.release(), this.l = null);
          return Promise.resolve();
        };
        p.isTextVisible = function() {
          return this.A;
        };
        p.setTextVisibility = function(a) {
          this.A = a;
          if (this.h.has(this.g)) {
            var b = this.h.get(this.g).track;
            b.mode !== "disabled" && (a = a ? "showing" : "hidden", b.mode !== a && (b.mode = a));
          } else if (this.i && this.i.l === 3) if (b = Array.from(this.i.h.textTracks).filter(function(d) {
            return ["captions", "subtitles", "forced"].includes(d.kind);
          }), a) {
            a = null;
            b = u(b);
            for (var c = b.next(); !c.done; c = b.next()) if (c = c.value, c.mode === "showing") {
              a = null;
              break;
            } else a || c.mode !== "hidden" || (a = c);
            a && (a.mode = "showing");
          } else for (a = u(b), b = a.next(); !b.done; b = a.next()) b = b.value, b.mode === "showing" && (b.mode = "hidden");
        };
        p.setTextLanguage = function() {
        };
        p.enableTextDisplayer = function() {
          !this.j && this.i && this.i.l === 2 && (this.j = this.i.h, this.l.ua(this.i, "unloading", this.D), this.l.o(this.i, "textchanged", this.m), this.l.o(this.j.textTracks, "change", this.C), this.m());
        };
        function Xo(a) {
          var b = Rb();
          return a.forced && b.Ja() === "WEBKIT" ? "forced" : a.kind === "caption" || a.roles && a.roles.some(function(c) {
            return c.includes("transcribes-spoken-dialog");
          }) && a.roles.some(function(c) {
            return c.includes("describes-music-and-sound");
          }) ? "captions" : "subtitles";
        }
        S("shaka.text.NativeTextDisplayer", Wo);
        Wo.prototype.enableTextDisplayer = Wo.prototype.enableTextDisplayer;
        Wo.prototype.setTextLanguage = Wo.prototype.setTextLanguage;
        Wo.prototype.setTextVisibility = Wo.prototype.setTextVisibility;
        Wo.prototype.isTextVisible = Wo.prototype.isTextVisible;
        Wo.prototype.destroy = Wo.prototype.destroy;
        Wo.prototype.append = Wo.prototype.append;
        Wo.prototype.remove = Wo.prototype.remove;
        Wo.prototype.configure = Wo.prototype.configure;
        function Yo(a, b) {
          Zc("SimpleTextDisplayer", "Please migrate to NativeTextDisplayer");
          this.h = a;
          this.i = b;
          this.g = null;
          a = u(Array.from(this.h.textTracks));
          for (b = a.next(); !b.done; b = a.next()) b = b.value, b.kind !== "metadata" && b.kind !== "chapters" && (b.mode = "disabled", b.label == this.i && (this.g = b));
          this.g && (this.g.mode = "hidden");
        }
        p = Yo.prototype;
        p.configure = function() {
        };
        p.remove = function(a, b) {
          if (!this.g) return false;
          Vo(this.g, function(c) {
            return c.startTime < b && c.endTime > a;
          });
          return true;
        };
        p.append = function(a) {
          this.g && Uo(this.g, a);
        };
        p.destroy = function() {
          this.g && (Vo(this.g, function() {
            return true;
          }), this.g.mode = "disabled");
          this.g = this.h = null;
          return Promise.resolve();
        };
        p.isTextVisible = function() {
          return this.g ? this.g.mode == "showing" : false;
        };
        p.setTextVisibility = function(a) {
          a && !this.g && Zo(this);
          this.g && (this.g.mode = a ? "showing" : "hidden");
        };
        p.setTextLanguage = function() {
        };
        p.enableTextDisplayer = function() {
          Zo(this);
        };
        function Zo(a) {
          a.h && !a.g && (a.g = a.h.addTextTrack("subtitles", a.i), a.g.mode = "hidden");
        }
        S("shaka.text.SimpleTextDisplayer", Yo);
        Yo.prototype.enableTextDisplayer = Yo.prototype.enableTextDisplayer;
        Yo.prototype.setTextLanguage = Yo.prototype.setTextLanguage;
        Yo.prototype.setTextVisibility = Yo.prototype.setTextVisibility;
        Yo.prototype.isTextVisible = Yo.prototype.isTextVisible;
        Yo.prototype.destroy = Yo.prototype.destroy;
        Yo.prototype.append = Yo.prototype.append;
        Yo.prototype.remove = Yo.prototype.remove;
        Yo.prototype.configure = Yo.prototype.configure;
        function $o() {
        }
        p = $o.prototype;
        p.configure = function() {
        };
        p.remove = function() {
        };
        p.append = function() {
        };
        p.destroy = function() {
        };
        p.isTextVisible = function() {
          return false;
        };
        p.setTextVisibility = function() {
        };
        p.setTextLanguage = function() {
        };
        p.enableTextDisplayer = function() {
        };
        S("shaka.text.StubTextDisplayer", $o);
        $o.prototype.enableTextDisplayer = $o.prototype.enableTextDisplayer;
        $o.prototype.setTextLanguage = $o.prototype.setTextLanguage;
        $o.prototype.setTextVisibility = $o.prototype.setTextVisibility;
        $o.prototype.isTextVisible = $o.prototype.isTextVisible;
        $o.prototype.destroy = $o.prototype.destroy;
        $o.prototype.append = $o.prototype.append;
        $o.prototype.remove = $o.prototype.remove;
        $o.prototype.configure = $o.prototype.configure;
        function ap(a, b) {
          var c = this;
          this.m = false;
          this.h = [];
          this.j = a;
          this.u = b;
          this.D = this.A = null;
          this.g = V("div");
          this.g.classList.add("shaka-text-container");
          this.g.style.textAlign = "center";
          this.g.style.display = "flex";
          this.g.style.flexDirection = "column";
          this.g.style.alignItems = "center";
          this.g.style.justifyContent = "flex-end";
          this.C = new Bf(function() {
            c.j.paused || bp(c);
          });
          cp(this);
          this.l = /* @__PURE__ */ new Map();
          this.i = new Tc();
          this.i.o(document, "fullscreenchange", function() {
            bp(c, true);
          });
          this.i.o(this.j, "seeking", function() {
            bp(c, true);
          });
          this.i.o(this.j, "ratechange", function() {
            cp(c);
          });
          this.i.o(this.j, "resize", function() {
            var d = c.j, e = d.videoWidth;
            d = d.videoHeight;
            e && d ? c.A = e / d : c.A = null;
          });
          this.F = null;
          "ResizeObserver" in window2 && (this.F = new ResizeObserver(function() {
            bp(c, true);
          }), this.F.observe(this.g));
          this.G = /* @__PURE__ */ new Map();
        }
        p = ap.prototype;
        p.configure = function(a) {
          this.D = a;
          cp(this);
          bp(this, true);
        };
        p.append = function(a) {
          var b = [].concat(x(this.h));
          a = u(So(a));
          for (var c = a.next(), d = {}; !c.done; d = { Qg: void 0 }, c = a.next()) d.Qg = c.value, b.some(/* @__PURE__ */ function(e) {
            return function(f) {
              return Ce(f, e.Qg);
            };
          }(d)) || this.h.push(d.Qg);
          this.h.length && cp(this);
          bp(this);
        };
        p.destroy = function() {
          if (!this.g) return Promise.resolve();
          this.g.parentElement && this.u.removeChild(this.g);
          this.g = null;
          this.m = false;
          this.h = [];
          this.C && (this.C.stop(), this.C = null);
          this.l.clear();
          this.i && (this.i.release(), this.i = null);
          this.F && (this.F.disconnect(), this.F = null);
          return Promise.resolve();
        };
        p.remove = function(a, b) {
          if (!this.g) return false;
          var c = this.h.length;
          this.h = this.h.filter(function(d) {
            return d.startTime < a || d.endTime >= b;
          });
          bp(this, c > this.h.length);
          this.h.length || cp(this);
          return true;
        };
        p.isTextVisible = function() {
          return this.m;
        };
        p.setTextVisibility = function(a) {
          (this.m = a) ? (this.g.parentElement || this.u.appendChild(this.g), bp(this, true)) : this.g.parentElement && this.u.removeChild(this.g);
        };
        p.setTextLanguage = function(a) {
          a && a != "und" ? this.g.setAttribute("lang", a) : this.g.setAttribute("lang", "");
        };
        p.enableTextDisplayer = function() {
        };
        function cp(a) {
          a.C && (a.h.length ? a.C.wa((a.D ? a.D.captionsUpdatePeriod : 0.25) / Math.max(1, Math.abs(a.j.playbackRate))) : a.C.stop());
        }
        function dp(a, b) {
          for (; b != null; ) {
            if (b == a.g) return true;
            b = b.parentElement;
          }
          return false;
        }
        function ep(a, b, c, d, e) {
          var f = false, g = [], h = [];
          b = u(b);
          for (var k2 = b.next(); !k2.done; k2 = b.next()) {
            k2 = k2.value;
            e.push(k2);
            var l = a.l.get(k2), m = k2.startTime <= d && k2.endTime > d, n = l ? l.hk : null;
            l && (g.push(l.Rg), l.qd && g.push(l.qd), m || (f = true, a.l.delete(k2), l = null));
            m && (h.push(k2), l ? dp(a, n) || (f = true) : (fp(a, k2, e), l = a.l.get(k2), n = l.hk, f = true));
            k2.nestedCues.length > 0 && n && ep(a, k2.nestedCues, n, d, e);
            e.pop();
          }
          if (f) {
            d = u(g);
            for (e = d.next(); !e.done; e = d.next()) e = e.value, e.parentElement && e.parentElement.removeChild(e);
            h.sort(function(q, r) {
              return q.startTime != r.startTime ? q.startTime - r.startTime : q.endTime - r.endTime;
            });
            h = u(h);
            for (d = h.next(); !d.done; d = h.next()) d = a.l.get(d.value), d.qd ? (d.qd.contains(c) && d.qd.removeChild(c), c.appendChild(d.qd), d.qd.appendChild(d.Rg)) : c.appendChild(d.Rg);
          }
        }
        function bp(a, b) {
          if (a.g) {
            var c = a.j.currentTime;
            if (!a.m || (b === void 0 ? 0 : b)) {
              b = u(a.G.values());
              for (var d = b.next(); !d.done; d = b.next()) Pj(d.value);
              Pj(a.g);
              a.l.clear();
              a.G.clear();
            }
            a.m && ep(a, a.h, a.g, c, []);
          }
        }
        function fp(a, b, c) {
          var d = c.length > 1, e = d ? "span" : "div";
          b.lineBreak && (e = "br");
          b.rubyTag && (e = b.rubyTag);
          d = !d && b.nestedCues.length > 0;
          var f = V(e);
          e != "br" && gp(a, f, b, c, d);
          c = null;
          if (b.region && b.region.id) {
            var g = b.region, h = a.A === 4 / 3 ? 2.5 : 1.9;
            c = g.id + "_" + g.width + "x" + g.height + (g.heightUnits == ud ? "%" : "px") + "-" + g.viewportAnchorX + "x" + g.viewportAnchorY + (g.viewportAnchorUnits == ud ? "%" : "px");
            if (a.G.has(c)) c = a.G.get(c);
            else {
              e = V("span");
              var k2 = g.heightUnits == ud ? "%" : "px", l = g.widthUnits == ud ? "%" : "px", m = g.viewportAnchorUnits == ud ? "%" : "px";
              e.id = "shaka-text-region---" + c;
              e.classList.add("shaka-text-region");
              e.style.position = "absolute";
              var n = g.height, q = g.width;
              g.heightUnits === 2 && (n = g.height * 5.33, k2 = "%");
              g.widthUnits === 2 && (q = g.width * h, l = "%");
              e.style.height = n + k2;
              e.style.width = q + l;
              g.viewportAnchorUnits === 2 ? (h = g.viewportAnchorY / 75 * 100, k2 = g.viewportAnchorX / (a.A === 4 / 3 ? 160 : 210) * 100, h -= g.regionAnchorY * n / 100, k2 -= g.regionAnchorX * q / 100, e.style.top = h + "%", e.style.left = k2 + "%") : (e.style.top = g.viewportAnchorY - g.regionAnchorY * n / 100 + m, e.style.left = g.viewportAnchorX - g.regionAnchorX * q / 100 + m);
              g.heightUnits !== 0 && g.widthUnits !== 0 && g.viewportAnchorUnits !== 0 && (g = Math.max(0, Math.min(100 - (parseInt(e.style.width.slice(0, -1), 10) || 0), parseInt(e.style.left.slice(0, -1), 10) || 0)), e.style.top = Math.max(0, Math.min(100 - (parseInt(e.style.height.slice(0, -1), 10) || 0), parseInt(e.style.top.slice(0, -1), 10) || 0)) + "%", e.style.left = g + "%");
              e.style.display = "flex";
              e.style.flexDirection = "column";
              e.style.alignItems = "center";
              e.style.justifyContent = b.displayAlign == "before" ? "flex-start" : b.displayAlign == "center" ? "center" : "flex-end";
              a.G.set(c, e);
              c = e;
            }
          }
          e = f;
          d && (e = V("span"), e.classList.add("shaka-text-wrapper"), e.style.backgroundColor = b.backgroundColor, e.style.lineHeight = "normal", f.appendChild(e));
          a.l.set(b, { Rg: f, hk: e, qd: c });
        }
        function hp(a) {
          var b = a.direction, c = a.positionAlign;
          a = a.textAlign;
          return c !== se ? c : a === "left" || a === "start" && b === ue || a === "end" && b === "rtl" ? "line-left" : a === "right" || a === "start" && b === "rtl" || a === "end" && b === ue ? "line-right" : "center";
        }
        function gp(a, b, c, d, e) {
          var f = b.style, g = c.nestedCues.length == 0, h = d.length > 1;
          f.whiteSpace = "pre-wrap";
          var k2 = c.payload.replace(/\s+$/g, function(m) {
            return "".repeat(m.length);
          });
          f.webkitTextStrokeColor = c.textStrokeColor;
          f.webkitTextStrokeWidth = c.textStrokeWidth;
          f.color = c.color;
          f.direction = c.direction;
          f.opacity = c.opacity;
          f.paddingLeft = ip(c.linePadding, c, a.u);
          f.paddingRight = ip(c.linePadding, c, a.u);
          f.textCombineUpright = c.textCombineUpright;
          f.textShadow = c.textShadow;
          if (c.backgroundImage) f.backgroundImage = "url('" + c.backgroundImage + "')", f.backgroundRepeat = "no-repeat", f.backgroundSize = "contain", f.backgroundPosition = "center", c.backgroundColor && (f.backgroundColor = c.backgroundColor), f.width = "100%", f.height = "100%";
          else {
            if (c.nestedCues.length) var l = b;
            else l = V("span"), b.appendChild(l);
            c.border && (l.style.border = c.border);
            e || ((b = jp(d, function(m) {
              return m.backgroundColor;
            })) ? l.style.backgroundColor = b : k2 && (l.style.backgroundColor = "rgba(0, 0, 0, 0.8)"));
            k2 && (l.setAttribute("translate", "no"), l.textContent = k2);
          }
          if (h && !d[d.length - 1].isContainer) f.display = "inline";
          else {
            f.display = "flex";
            f.flexDirection = "column";
            f.alignItems = "center";
            if (c.textAlign == "left" || c.textAlign == "start") f.width = "100%", f.alignItems = "start";
            else if (c.textAlign == "right" || c.textAlign == "end") f.width = "100%", f.alignItems = "end";
            f.justifyContent = c.displayAlign == "before" ? "flex-start" : c.displayAlign == "center" ? "center" : "flex-end";
          }
          g || (f.margin = "0");
          f.fontFamily = c.fontFamily;
          f.fontWeight = c.fontWeight.toString();
          f.fontStyle = c.fontStyle;
          f.letterSpacing = c.letterSpacing;
          f.fontSize = ip(c.fontSize, c, a.u, a.D ? a.D.fontScaleFactor : 1);
          d = c.line;
          d != null && (g = c.lineInterpretation, g == we && (g = 1, h = 16, a.A && a.A < 1 && (h = 32), d = d < 0 ? 100 + d / h * 100 : d / h * 100), g == 1 && (f.position = "absolute", c.writingMode == ve ? (f.width = "100%", c.lineAlign == xe ? f.top = d + "%" : c.lineAlign == "end" && (f.bottom = 100 - d + "%")) : c.writingMode == "vertical-lr" ? (f.height = "100%", c.lineAlign == xe ? f.left = d + "%" : c.lineAlign == "end" && (f.right = 100 - d + "%")) : (f.height = "100%", c.lineAlign == xe ? f.right = d + "%" : c.lineAlign == "end" && (f.left = 100 - d + "%"))));
          f.lineHeight = c.lineHeight;
          a = hp(c);
          a == "line-left" ? (f.cssFloat = "left", c.position !== null && (f.position = "absolute", c.writingMode == ve ? (f.left = c.position + "%", f.width = "auto") : f.top = c.position + "%")) : a == "line-right" ? (f.cssFloat = "right", c.position !== null && (f.position = "absolute", c.writingMode == ve ? (f.right = 100 - c.position + "%", f.width = "auto") : f.bottom = c.position + "%")) : c.position !== null && c.position != 50 && (f.position = "absolute", c.writingMode == ve ? (f.left = c.position + "%", f.width = "auto") : f.top = c.position + "%", c.size && (f.transform = "translateX(-50%)"));
          f.textAlign = c.textAlign;
          f.textDecoration = c.textDecoration.join(" ");
          f.writingMode = c.writingMode;
          "writingMode" in document.documentElement.style && f.writingMode == c.writingMode || (f.webkitWritingMode = c.writingMode);
          c.size && (c.writingMode == ve ? f.width = c.size + "%" : f.height = c.size + "%");
        }
        function ip(a, b, c, d) {
          d = d === void 0 ? 1 : d;
          var e = (e = new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(a)) ? { value: Number(e[1]), unit: e[2] } : null;
          if (!e) return a;
          a = e.unit;
          d *= e.value;
          switch (a) {
            case "%":
              return d / 100 * c.clientHeight / b.cellResolution.rows + "px";
            case "c":
              return c.clientHeight * d / b.cellResolution.rows + "px";
            default:
              return d + a;
          }
        }
        function jp(a, b) {
          for (var c = a.length - 1; c >= 0; c--) {
            var d = b(a[c]);
            if (d || d === 0) return d;
          }
          return null;
        }
        S("shaka.text.UITextDisplayer", ap);
        ap.prototype.enableTextDisplayer = ap.prototype.enableTextDisplayer;
        ap.prototype.setTextLanguage = ap.prototype.setTextLanguage;
        ap.prototype.setTextVisibility = ap.prototype.setTextVisibility;
        ap.prototype.isTextVisible = ap.prototype.isTextVisible;
        ap.prototype.remove = ap.prototype.remove;
        ap.prototype.destroy = ap.prototype.destroy;
        ap.prototype.append = ap.prototype.append;
        ap.prototype.configure = ap.prototype.configure;
        function kp(a, b) {
          function c(f) {
            for (var g = f, h = u(b), k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, k2.end && k2.start < f && (g += k2.end - k2.start);
            f = Math.floor(g / 3600);
            h = Math.floor(g / 60 % 60);
            k2 = Math.floor(g % 60);
            g = Math.floor(g * 1e3 % 1e3);
            return (f < 10 ? "0" : "") + f + ":" + (h < 10 ? "0" : "") + h + ":" + (k2 < 10 ? "0" : "") + k2 + "." + (g < 100 ? g < 10 ? "00" : "0" : "") + g;
          }
          var d = Ro(a);
          a = "WEBVTT\n\n";
          d = u(d);
          for (var e = d.next(); !e.done; e = d.next()) e = e.value, a += c(e.startTime) + " --> " + c(e.endTime) + function(f) {
            var g = [];
            switch (f.textAlign) {
              case "left":
                g.push("align:left");
                break;
              case "right":
                g.push("align:right");
                break;
              case te:
                g.push("align:middle");
                break;
              case "start":
                g.push("align:start");
                break;
              case "end":
                g.push("align:end");
            }
            switch (f.writingMode) {
              case "vertical-lr":
                g.push("vertical:lr");
                break;
              case "vertical-rl":
                g.push("vertical:rl");
            }
            return g.length ? " " + g.join(" ") : "";
          }(e) + "\n", a += e.payload + "\n\n";
          return a;
        }
        S("shaka.text.WebVttGenerator", function() {
        });
        function lp(a, b) {
          this.g = b;
          this.j = a;
          this.F = /* @__PURE__ */ new Map();
          this.l = void 0;
          this.D = false;
          this.J = true;
          this.u = this.I = false;
          this.C = this.A = void 0;
          this.H = 0;
          this.K = { request: false, response: false, event: false };
          this.m = {};
          this.i = new Tc();
          this.G = [];
          this.h = null;
        }
        lp.prototype.setMediaElement = function(a) {
          this.h = a;
          mp(this);
        };
        lp.prototype.configure = function(a) {
          this.g = a;
          np(this);
        };
        function op(a) {
          a.F.clear();
          a.D = false;
          a.J = true;
          a.I = false;
          a.u = false;
          a.A = 0;
          a.C = 0;
          a.H = 0;
          a.K = { request: false, response: false, event: false };
          pp(a);
          a.m = {};
          a.h = null;
          a.i.Sa();
        }
        function qp(a, b) {
          a.u = b;
          a.u ? a.l == rp ? a.l = sp : a.l == tp && (a.l = up) : a.l == sp ? a.l = rp : a.l == up && (a.l = tp);
        }
        function vp(a, b) {
          if (a.g && a.g.enabled && (wp(a, "ps", { td: "d" }), a.h && a.h.autoplay)) {
            var c = a.h.play();
            c && c.then(function() {
              a.H = b;
            }).catch(function() {
              a.H = 0;
            });
          }
        }
        function xp(a, b, c) {
          try {
            if (!a.g.enabled) return b;
            var d = yp(a);
            a: {
              switch (c.toLowerCase()) {
                case "audio/mp4":
                case "audio/webm":
                case "audio/ogg":
                case "audio/mpeg":
                case "audio/aac":
                case "audio/flac":
                case "audio/wav":
                  var e = zp;
                  break a;
                case "video/webm":
                case "video/mp4":
                case "video/mpeg":
                case "video/mp2t":
                  e = Ap;
                  break a;
                case "application/x-mpegurl":
                case "application/vnd.apple.mpegurl":
                case "application/dash+xml":
                case "video/vnd.mpeg.dash.mpd":
                case "application/vnd.ms-sstr+xml":
                  e = Bp;
                  break a;
              }
              e = void 0;
            }
            d.ot = e;
            d.su = true;
            var f = Cp(d);
            return Dp(b, f);
          } catch (g) {
            return bb("CMCD_SRC_ERROR", "Could not generate src CMCD data.", g), b;
          }
        }
        function mp(a) {
          a.i.o(a.h, "playing", function() {
            a.C || (a.C = Date.now());
            wp(a, "ps", { td: "p" });
          });
          a.i.o(a.h, "volumechange", function() {
            wp(a, a.h.muted ? "m" : "um");
          });
          a.i.o(a.h, "play", function() {
            a.A || (a.A = Date.now(), wp(a, "ps", { td: "s" }));
          });
          a.i.o(a.h, "pause", function() {
            wp(a, "ps", { td: "a" });
          });
          a.i.o(a.j, "buffering", function() {
            wp(a, "ps", { td: "w" });
          });
          a.i.o(a.h, "seeking", function() {
            return wp(a, "ps", { td: "k" });
          });
          a.i.o(document, "fullscreenchange", function() {
            wp(a, document.fullscreenElement ? "pe" : "pc");
          });
          var b = a.h;
          (b.webkitPresentationMode || b.webkitSupportsFullscreen) && a.i.o(b, "webkitpresentationmodechanged", function() {
            b.webkitPresentationMode ? wp(a, b.webkitPresentationMode !== "inline" ? "pe" : "pc") : b.webkitSupportsFullscreen && wp(a, b.webkitDisplayingFullscreen ? "pe" : "pc");
          });
          a.i.o(a.h, "enterpictureinpicture", function() {
            wp(a, "pe");
          });
          a.i.o(a.h, "leavepictureinpicture", function() {
            wp(a, "pc");
          });
          "documentPictureInPicture" in window2 && a.i.o(window2.documentPictureInPicture, "enter", function(c) {
            wp(a, "pe");
            a.i.ua(c.window, "pagehide", function() {
              wp(a, "pc");
            });
          });
          a.i.o(document, "visibilitychange", function() {
            document.hidden ? wp(a, "b", { bg: true }) : wp(a, "b");
          });
          a.i.o(a.j, "complete", function() {
            wp(a, "ps", { td: "e" });
          });
        }
        function np(a) {
          pp(a);
          var b = Ep(a);
          b = u(b);
          for (var c = b.next(); !c.done; c = b.next()) if (c = c.value.timeInterval, c === void 0 && (c = Fp), c >= 1) {
            var d = new Bf(function() {
              return wp(a, Gp);
            });
            d.wa(c);
            a.G.push(d);
          }
        }
        function pp(a) {
          if (a.G) for (var b = u(a.G), c = b.next(); !c.done; c = b.next()) c.value.stop();
          a.G = [];
        }
        function Ep(a) {
          return (a = a.g.targets) ? a.filter(function(b) {
            return b.mode === Hp && b.enabled;
          }) : [];
        }
        function yp(a) {
          a.g.sessionId || (a.g.sessionId = window2.crypto.randomUUID());
          return { v: a.g.version, sf: a.l, sid: a.g.sessionId, cid: a.g.contentId, mtp: a.j.getBandwidthEstimate() / 1e3 };
        }
        function wp(a, b, c) {
          c = c === void 0 ? {} : c;
          b = Object.assign({ e: b, ts: Date.now() }, c);
          b = Ip(a, b, Hp);
          c = a.g.targets;
          if (!(a.g.version < Jp) && c) {
            var d = Ep(a);
            c = Array.from(new Set([].concat(x(Kp), x(Lp))));
            d = u(d);
            for (var e = d.next(); !e.done; e = d.next()) {
              e = e.value;
              var f = Mp(e.includeKeys || [], c);
              f.includes(Np) || f.push(Np);
              f = Op(b, f);
              var g = e.events || [], h = f.e, k2 = f.sta;
              h && (!Pp.includes(h) || !(h !== "ps" || k2 && Qp.includes(k2)) || g && g.length > 0 && !g.includes(h)) || Rp(a, f, e);
            }
          }
        }
        function Sp(a, b, c) {
          if (a.g.enabled) {
            c = Ip(a, c, Tp);
            var d = Up({ mode: Tp, useHeaders: a.g.useHeaders, includeKeys: a.g.includeKeys || [] });
            a.m[d] || (a.m[d] = { request: 1, response: 1 });
            c.sn = a.m[d].request++;
            d = a.g.includeKeys || [];
            var e = a.g.version == Jp ? Array.from(new Set([].concat(x(Kp), x(iq)))) : jq;
            d = Mp(d, e);
            c = Op(c, d);
            kq(c, b, a.g.useHeaders);
          }
        }
        function lq(a, b, c) {
          var d = a.g.targets;
          if (d) {
            var e = d.filter(function(k2) {
              return k2.mode === mq && k2.enabled === true;
            });
            d = a.g.version == Jp ? Array.from(new Set([].concat(x(Kp), x(nq)))) : jq;
            c.rc = b.status || 0;
            c = Ip(a, c, mq);
            b.headers && b.headers["CMSD-Static"] && (c.cmsds = btoa(b.headers["CMSD-Static"]));
            b.headers && b.headers["CMSD-Dynamic"] && (c.cmsdd = btoa(b.headers["CMSD-Dynamic"]));
            e = u(e);
            for (var f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              var g = Mp(f.includeKeys || [], d), h = Up(f);
              a.m[h] || (a.m[h] = { request: 1, response: 1 });
              c.sn = a.m[h].response++;
              g = Op(c, g);
              Rp(a, g, f, b);
            }
          }
        }
        function Rp(a, b, c, d) {
          var e = Fg(), f = c.url;
          if (c.useHeaders) {
            b = oq(b);
            if (!Object.keys(b).length) return;
            d && Object.assign(d.headers, b);
            d = $g([f], e);
            Object.assign(d.headers, b);
          } else {
            b = Cp(b);
            if (!b) return;
            f = Dp(f, b);
            d && (d.uri = f);
            d = $g([f], e);
          }
          a.j.Vb().request(9, d);
        }
        function kq(a, b, c) {
          if (c) a = oq(a), Object.keys(a).length && Object.assign(b.headers, a);
          else {
            var d = Cp(a);
            d && (b.uris = b.uris.map(function(e) {
              return Dp(e, d);
            }));
          }
        }
        function Mp(a, b) {
          if (!a || a.length === 0) return b;
          for (var c = u(a), d = c.next(); !d.done; d = c.next()) b.includes(d.value);
          return a = a.filter(function(e) {
            return b.includes(e);
          });
        }
        function Op(a, b) {
          return Object.keys(a).reduce(function(c, d) {
            b.includes(d) && (c[d] = a[d]);
            return c;
          }, {});
        }
        function pq(a) {
          if (a.type === 0) return qq;
          if (a = a.stream) {
            var b = a.type;
            if (b == "video") return a.codecs && a.codecs.includes(",") ? Ap : rq;
            if (b == "audio") return zp;
            if (b == "text") return a.mimeType === "application/mp4" ? sq : tq;
          }
        }
        function Up(a) {
          var b = Object.keys(a).sort().reduce(function(c, d) {
            d !== "enabled" && (c[d] = a[d]);
            return c;
          }, {});
          return JSON.stringify(b);
        }
        function uq(a, b) {
          b = a.j.Pc()[b];
          if (!b.length) return NaN;
          var c = a.h ? a.h.currentTime : 0;
          return (a = b.find(function(d) {
            return d.start <= c && d.end >= c;
          })) ? (a.end - c) * 1e3 : NaN;
        }
        function vq(a, b) {
          b = a.j.Pc()[b];
          if (!b.length) return 0;
          var c = a.h ? a.h.currentTime : 0;
          return (a = b.find(function(d) {
            return d.start <= c && d.end >= c;
          })) ? (a.end - c) * 1e3 : 0;
        }
        function wq(a, b) {
          var c = a.j.Ob();
          if (!c.length) return NaN;
          a = c[0];
          c = u(c);
          for (var d = c.next(); !d.done; d = c.next()) d = d.value, d.type === "variant" && d.bandwidth > a.bandwidth && (a = d);
          switch (b) {
            case rq:
              return a.videoBandwidth || NaN;
            case zp:
              return a.audioBandwidth || NaN;
            default:
              return a.bandwidth;
          }
        }
        function xq(a, b, c) {
          var d = b.segment, e = 0;
          d && (e = d.endTime - d.startTime);
          e = { d: e * 1e3, st: a.j.U() ? yq : zq };
          e.ot = pq(b);
          var f = e.ot === rq || e.ot === zp || e.ot === Ap || e.ot === sq;
          if (b = b.stream) {
            var g = a.j.Za();
            if (f && (e.bl = uq(a, b.type), e.ot !== sq)) {
              var h = vq(a, b.type);
              e.dl = g ? h / Math.abs(g) : h;
            }
            b.bandwidth && (e.br = b.bandwidth / 1e3);
            if (b.segmentIndex && d) {
              if ((g = b.segmentIndex.ec(d.endTime, true, g < 0)) && (g = g.next().value) && g != d) {
                if (c && !Sc(d.T(), g.T())) {
                  h = g.T()[0];
                  var k2 = new URL(h);
                  c = new URL(c);
                  if (k2.origin !== c.origin) c = h;
                  else {
                    h = k2.pathname.split("/").slice(1);
                    for (c = c.pathname.split("/").slice(1, -1); h[0] === c[0]; ) h.shift(), c.shift();
                    for (; c.length; ) c.shift(), h.unshift("..");
                    c = h.join("/");
                  }
                  e.nor = c;
                }
                !g.startByte && !g.endByte || d.startByte == g.startByte && d.endByte == g.endByte || (c = g.startByte + "-", g.endByte && (c += g.endByte), e.nrr = c);
              }
              c = a.j.Za() || 1;
              g = vq(a, b.type) || 500;
              d = (b = b.bandwidth) ? b * (d.endTime - d.startTime) / 1e3 / (g / c / 1e3) * a.g.rtpSafetyFactor : NaN;
              isNaN(d) || (e.rtp = d);
            }
          }
          f && e.ot !== sq && (e.tb = wq(a, e.ot) / 1e3);
          return e;
        }
        function Ip(a, b, c) {
          Object.assign(b, yp(a));
          b.pr = a.j.Za();
          var d = b.ot === rq || b.ot === Ap;
          a.I && d && (b.bs = true, b.su = true, a.I = false);
          b.su == null && (b.su = a.J);
          a.j.U() && (d = Aq(a.j), b.ltc = d || void 0);
          document.hidden && (b.bg = true);
          d = a.C && a.A ? a.C - (a.H || a.A) : void 0;
          d == void 0 || a.K[c] || (b.msd = d, a.K[c] = true);
          return b;
        }
        function Cp(a) {
          function b(n) {
            return c(n / 100) * 100;
          }
          function c(n) {
            return Math.round(n);
          }
          function d(n) {
            return !Number.isNaN(n) && n != null && n !== "" && n !== false;
          }
          var e = [], f = { br: c, d: c, bl: b, dl: b, mtp: b, nor: function(n) {
            return encodeURIComponent(n);
          }, rtp: b, tb: c, ttfb: c, ttlb: c }, g = Object.keys(a || {}).sort();
          g = u(g);
          for (var h = g.next(); !h.done; h = g.next()) {
            h = h.value;
            var k2 = a[h];
            if (d(k2) && (h !== "v" || k2 !== 1) && (h != "pr" || k2 !== 1)) {
              var l = f[h];
              l && (k2 = l(k2));
              l = typeof k2;
              var m = void 0;
              m = l === "string" && h !== "ot" && h !== "sf" && h !== "st" ? h + "=" + JSON.stringify(k2) : l === "boolean" ? h : l === "symbol" ? h + "=" + k2.description : h + "=" + k2;
              e.push(m);
            }
          }
          return e.join(",");
        }
        function oq(a) {
          var b = Object.keys(a), c = {}, d = ["Object", "Request", "Session", "Status"], e = [{}, {}, {}, {}], f = { br: 0, d: 0, ot: 0, tb: 0, url: 0, bl: 1, dl: 1, mtp: 1, nor: 1, nrr: 1, su: 1, ltc: 1, ttfb: 1, ttlb: 1, ts: 1, rc: 1, cmsdd: 1, cmsds: 1, sn: 1, cid: 2, pr: 2, sf: 2, sid: 2, st: 2, v: 2, msd: 2, bs: 3, rtp: 3, bg: 3 };
          b = u(b);
          for (var g = b.next(); !g.done; g = b.next()) g = g.value, e[f[g] != null ? f[g] : 1][g] = a[g];
          for (a = 0; a < e.length; a++) (f = Cp(e[a])) && (c["CMCD-" + d[a]] = f);
          return c;
        }
        function Dp(a, b) {
          if (!b || a.includes("offline:")) return a;
          a = new qb(a);
          a.g.set("CMCD", b);
          return a.toString();
        }
        var Bp = "m", zp = "a", rq = "v", Ap = "av", qq = "i", tq = "c", sq = "tt", Jp = 2, zq = "v", yq = "l", rp = "d", sp = "ld", tp = "h", up = "lh";
        S("shaka.util.CmcdManager.StreamingFormat", { DASH: rp, hn: sp, HLS: tp, jn: up, zn: "s", OTHER: "o" });
        var jq = "br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "), Kp = "br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(" "), iq = "ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(" "), nq = "d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "), Lp = ["e", "sta"], Pp = "ps e t c b m um pe pc".split(" "), Qp = "spawkrfeqd".split(""), Fp = 10, Np = "ts", Gp = "t", Tp = "request", mq = "response", Hp = "event";
        function Bq(a) {
          this.h = a;
          this.g = null;
        }
        p = Bq.prototype;
        p.configure = function(a) {
          this.h = a;
        };
        p.Yi = function() {
          return this.h.enabled && this.h.applyMaximumSuggestedBitrate && this.g && this.g.has(Cq) ? this.g.get(Cq) * 1e3 : null;
        };
        p.Xi = function() {
          return this.h.enabled && this.g && this.g.has(Dq) ? this.g.get(Dq) * 1e3 : null;
        };
        p.hl = function() {
          return this.h.enabled && this.g && this.g.has(Eq) ? this.g.get(Eq) : null;
        };
        p.il = function() {
          return this.h.enabled && this.g && this.g.has(Fq) ? this.g.get(Fq) : null;
        };
        p.getBandwidthEstimate = function(a) {
          var b = this.Xi();
          if (!b) return a;
          var c = this.h.estimatedThroughputWeightRatio;
          return c > 0 && c <= 1 ? a * (1 - c) + b * c : a;
        };
        function Gq(a) {
          return a ? a.toLowerCase() === "false" ? false : /^[-0-9]/.test(a) ? parseInt(a, 10) : a.replace(/["]+/g, "") : true;
        }
        S("shaka.util.CmsdManager", Bq);
        Bq.prototype.getBandwidthEstimate = Bq.prototype.getBandwidthEstimate;
        Bq.prototype.getRoundTripTime = Bq.prototype.il;
        Bq.prototype.getResponseDelay = Bq.prototype.hl;
        Bq.prototype.getEstimatedThroughput = Bq.prototype.Xi;
        Bq.prototype.getMaxBitrate = Bq.prototype.Yi;
        var Dq = "etp", Cq = "mb", Eq = "rd", Fq = "rtt";
        function Hq() {
          this.g = null;
          this.h = [];
        }
        function Iq(a, b) {
          return Q(function(c) {
            if (c.g == 1) return a.g ? F(c, new Promise(function(d) {
              return a.h.push(d);
            }), 2) : c.B(2);
            a.g = b;
            H(c);
          });
        }
        Hq.prototype.release = function() {
          this.h.length > 0 ? this.h.shift()() : this.g = null;
        };
        function X(a, b, c) {
          b = b === void 0 ? null : b;
          kb.call(this);
          var d = this;
          this.l = Jq;
          this.h = null;
          this.Oe = b;
          this.X = false;
          this.Ze = new Tc();
          this.Pe = new Tc();
          this.j = new Tc();
          this.kc = new Tc();
          this.Hc = new Tc();
          this.G = this.H = this.F = this.J = null;
          this.bf = 0;
          this.ea = new Hq();
          this.O = this.Y = this.V = this.i = this.Ec = this.I = this.m = this.Le = this.R = this.Ei = this.ra = this.K = this.fb = this.Fa = this.Me = this.P = this.Ma = this.L = this.jb = null;
          this.aa = false;
          this.Ue = this.u = null;
          this.Te = 1e9;
          this.Ye = [];
          this.ib = [];
          this.Bg = -1;
          this.g = Kq(this);
          this.Dg = ao();
          this.S = null;
          this.cf = -1;
          this.Pb = null;
          this.sa = { width: Infinity, height: Infinity };
          this.Se = new ui(this.g, this.sa, null);
          this.We = [];
          this.C = null;
          this.M = this.g.adaptationSetCriteriaFactory();
          this.M.configure({
            language: this.g.preferredAudioLanguage,
            role: this.g.preferredAudioRole,
            videoRole: this.g.preferredVideoRole,
            channelCount: 0,
            hdrLevel: this.g.preferredVideoHdrLevel,
            spatialAudio: this.g.preferSpatialAudio,
            videoLayout: this.g.preferredVideoLayout,
            audioLabel: this.g.preferredAudioLabel,
            videoLabel: this.g.preferredVideoLabel,
            codecSwitchingStrategy: this.g.mediaSource.codecSwitchingStrategy,
            audioCodec: "",
            activeAudioCodec: "",
            activeAudioChannelCount: 0,
            preferredAudioCodecs: this.g.preferredAudioCodecs,
            preferredAudioChannelCount: this.g.preferredAudioChannelCount
          });
          this.Ic = this.g.preferredTextLanguage;
          this.be = this.g.preferredTextRole;
          this.Re = this.g.preferForcedSubs;
          this.Qe = [];
          c && c(this);
          this.K = new lp(this, this.g.cmcd);
          this.ra = new Bq(this.g.cmsd);
          this.J = Lq(this);
          this.Vd = this.oa = this.xa = this.D = null;
          this.Fg = false;
          this.Cg = [];
          this.Eg = new Bf(function() {
            return Q(function(e) {
              if (e.g == 1) return d.oa ? F(e, d.cc(d.Vd, true), 3) : e.B(0);
              if (e.g != 4) return F(e, d.load(d.oa), 4);
              d.Fg ? d.Vd.pause() : d.Vd.play();
              d.oa = null;
              d.Fg = false;
              H(e);
            });
          });
          Mq && (this.D = Mq(), this.D.configure(this.g.ads), this.Hc.o(this.D, "ad-content-pause-requested", function(e) {
            var f;
            return Q(function(g) {
              if (g.g == 1) {
                d.Eg.stop();
                if (d.oa) return g.B(0);
                d.Vd = d.h;
                d.Fg = d.isEnded();
                f = e.saveLivePosition || false;
                return F(g, d.Si(true, f), 3);
              }
              d.oa = g.h;
              H(g);
            });
          }), this.Hc.o(this.D, "ad-content-resume-requested", function(e) {
            e = e.offset || 0;
            if (d.oa) {
              var f = d.oa;
              f.m && e && (typeof f.m === "number" ? f.m += e : f.m.setTime(f.m.getTime() + e * 1e3));
            }
            d.Eg.$(0.1);
          }), this.Hc.o(this.D, "ad-content-attach-requested", function() {
            return Q(function(e) {
              return d.h || !d.Vd ? e.B(0) : F(e, d.cc(d.Vd, true), 0);
            });
          }));
          Nq && (this.xa = Nq(this), this.xa.configure(this.g.queue));
          this.Ze.o(window2, "online", function() {
            Oq(d);
            d.Xh();
          });
          this.Ve = new Bf(function() {
            for (var e = Date.now() / 1e3, f = false, g = true, h = u(d.i.variants), k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, k2.disabledUntilTime > 0 && k2.disabledUntilTime <= e && (k2.disabledUntilTime = 0, f = true), k2.disabledUntilTime > 0 && (g = false);
            g && d.Ve.stop();
            f && Pq(d, false, void 0, false, false);
          });
          this.Oa = null;
          a && (Zc("Player w/ mediaElement", "Please migrate from initializing Player with a mediaElement; use the attach method instead."), this.cc(a, true));
          this.A = null;
        }
        la(X, kb);
        function Qq(a) {
          a.R != null && (ed(a.R), a.R.release(), a.R = null);
        }
        function Rq(a, b, c) {
          c || b.lcevc.enabled ? (Qq(a), a.R == null && (a.R = new cd(a.h, a.Ei, b.lcevc, c), a.H && (a.H.H = a.R))) : Qq(a);
        }
        function Sq(a, b) {
          return new T(a, b);
        }
        p = X.prototype;
        p.destroy = function() {
          var a = this, b;
          return Q(function(c) {
            switch (c.g) {
              case 1:
                if (a.l == Tq) return c.return();
                Qq(a);
                b = a.detach();
                a.l = Tq;
                return F(c, b, 2);
              case 2:
                return F(c, a.Ug(), 3);
              case 3:
                a.Ze && (a.Ze.release(), a.Ze = null);
                a.Pe && (a.Pe.release(), a.Pe = null);
                a.j && (a.j.release(), a.j = null);
                a.kc && (a.kc.release(), a.kc = null);
                a.Hc && (a.Hc.release(), a.Hc = null);
                a.Ue = null;
                a.g = null;
                a.C = null;
                a.Oe = null;
                a.K = null;
                a.ra = null;
                if (!a.J) {
                  c.B(4);
                  break;
                }
                return F(c, a.J.destroy(), 5);
              case 5:
                a.J = null;
              case 4:
                a.u && (a.u.release(), a.u = null), a.xa && (a.xa.destroy(), a.xa = null), kb.prototype.release.call(a), H(c);
            }
          });
        };
        function Uq(a, b) {
          Vq.set(a, b);
        }
        function Wq() {
          window2.Promise || ab("A Promise implementation or polyfill is required");
          if (!(window2.Promise && window2.Uint8Array && Array.prototype.forEach) || (navigator.userAgent || "").includes("Trident/")) return false;
          Rb();
          return Fi() ? true : Gi().canPlayType("application/x-mpegurl") != "";
        }
        function Xq(a, b) {
          a.dispatchEvent(Sq("onstatechange", (/* @__PURE__ */ new Map()).set("state", b)));
        }
        p.cc = function(a, b) {
          b = b === void 0 ? true : b;
          var c = this, d, e, f;
          return Q(function(g) {
            switch (g.g) {
              case 1:
                if (c.l == Tq) throw new U(2, 7, 7e3);
                d = c.h && c.h == a;
                if (!c.h || c.h == a) {
                  g.B(2);
                  break;
                }
                return F(g, c.detach(), 2);
              case 2:
                return F(g, Yq(c, "attach"), 4);
              case 4:
                if (g.h) return g.return();
                ra(g, 5, 6);
                d || (Xq(c, "attach"), e = function() {
                  var h = Zq(c, false);
                  h && $q(c, h);
                }, c.Pe.o(a, "error", e), c.h = a, c.K && c.K.setMediaElement(a));
                Rb();
                if (!b || !Fi() || c.H) {
                  g.B(6);
                  break;
                }
                return F(g, ar(c), 6);
              case 6:
                va(g);
                c.ea.release();
                xa(g, 0);
                break;
              case 5:
                return f = ua(g), F(g, c.detach(), 10);
              case 10:
                throw f;
            }
          });
        };
        p.Gi = function(a) {
          this.Ei = a;
        };
        p.detach = function(a) {
          a = a === void 0 ? false : a;
          var b = this;
          return Q(function(c) {
            if (c.g == 1) {
              if (b.l == Tq) throw new U(2, 7, 7e3);
              return F(c, b.tc(false, a), 2);
            }
            if (c.g != 3) return F(c, Yq(b, "detach"), 3);
            if (c.h) return c.return();
            try {
              b.h && (b.Pe.Sa(), b.h = null), Xq(b, "detach"), b.D && !a && b.D.release();
            } finally {
              b.ea.release();
            }
            H(c);
          });
        };
        function Yq(a, b) {
          var c;
          return Q(function(d) {
            return d.g == 1 ? (c = ++a.bf, F(d, Iq(a.ea, b), 2)) : c != a.bf ? (a.ea.release(), d.return(true)) : d.return(false);
          });
        }
        p.tc = function(a, b) {
          a = a === void 0 ? true : a;
          b = b === void 0 ? false : b;
          var c = this, d, e, f, g, h, k2, l, m, n, q, r, t, w;
          return Q(function(v) {
            switch (v.g) {
              case 1:
                return c.l != Tq && (c.l = Jq), F(v, Yq(c, "unload"), 2);
              case 2:
                if (v.h) return v.return();
                sa(v, 3);
                c.aa = false;
                Xq(c, "unload");
                Qq(c);
                d = c.Qe.map(function(z) {
                  return z();
                });
                c.Qe = [];
                return F(v, Promise.all(d), 5);
              case 5:
                c.dispatchEvent(Sq("unloading"));
                c.Me && (c.Me.release(), c.Me = null);
                c.Fa && (c.Fa.release(), c.Fa = null);
                c.fb && (c.fb.release(), c.fb = null);
                c.h && (c.j.Sa(), c.kc.Sa());
                c.Ve.stop();
                c.jb && (c.jb.release(), c.jb = null);
                c.Ma && (c.Ma.stop(), c.Ma = null);
                if (!c.I) {
                  v.B(6);
                  break;
                }
                return F(v, c.I.stop(), 7);
              case 7:
                c.I = null, c.Ec = null;
              case 6:
                c.u && c.u.stop();
                if (!c.m) {
                  v.B(8);
                  break;
                }
                return F(v, c.m.destroy(), 9);
              case 9:
                c.m = null;
              case 8:
                c.L && (c.L.release(), c.L = null);
                c.G && (c.G.release(), c.G = null);
                if ("webkit" !== window2.shakaMediaKeysPolyfill || !c.F) {
                  v.B(10);
                  break;
                }
                return F(v, c.F.destroy(), 11);
              case 11:
                c.F = null;
              case 10:
                if (!c.H) {
                  v.B(12);
                  break;
                }
                return F(v, c.H.destroy(), 13);
              case 13:
                c.H = null;
              case 12:
                if (c.D && !b) c.D.onAssetUnload();
                c.oa && !b && (c.oa.destroy(), c.oa = null);
                b || c.Eg.stop();
                c.K && op(c.K);
                c.ra && (c.ra.g = null);
                if (!c.A) {
                  v.B(14);
                  break;
                }
                return F(v, c.A.destroy(), 15);
              case 15:
                c.A = null;
              case 14:
                c.X = false;
                if (c.h) {
                  e = u(c.Cg);
                  for (f = e.next(); !f.done; f = e.next()) g = f.value, g.src.startsWith("blob:") && URL.revokeObjectURL(g.src), g.remove();
                  c.Cg = [];
                  Nj(c.h) && c.h.load();
                }
                if (!c.F) {
                  v.B(16);
                  break;
                }
                return F(v, c.F.destroy(), 17);
              case 17:
                c.F = null;
              case 16:
                c.Oa && c.V != c.Oa.hd() && (c.Oa.j || c.Oa.destroy(), c.Oa = null);
                c.V = null;
                c.Y = null;
                c.P = null;
                if (c.i) {
                  h = u(c.i.variants);
                  for (k2 = h.next(); !k2.done; k2 = h.next()) for (l = k2.value, m = u([l.audio, l.video]), n = m.next(); !n.done; n = m.next()) (q = n.value) && q.segmentIndex && q.segmentIndex.release();
                  r = u(c.i.textStreams);
                  for (t = r.next(); !t.done; t = r.next()) w = t.value, w.segmentIndex && w.segmentIndex.release();
                }
                c.g && c.g.streaming.clearDecodingCache && (Uf.clear(), Dg.clear());
                c.i = null;
                c.C = new io();
                c.Di = null;
                c.Pb = null;
                c.S = null;
                c.cf = -1;
                c.Ye = [];
                c.ib = [];
                c.Bg = -1;
                c.J && c.J.Ni();
                br(c);
              case 3:
                va(v);
                c.ea.release();
                xa(v, 4);
                break;
              case 4:
                Rb();
                if (a && Fi() && !c.H && c.h) return F(
                  v,
                  ar(c),
                  0
                );
                v.B(0);
            }
          });
        };
        p.Em = function(a) {
          this.O = a;
        };
        p.load = function(a, b, c) {
          b = b === void 0 ? null : b;
          var d = this, e, f, g, h, k2, l, m, n, q, r, t, w, v, z;
          return Q(function(y) {
            switch (y.g) {
              case 1:
                if (d.l == Tq) throw new U(2, 7, 7e3);
                e = null;
                f = "";
                if (a instanceof oo) {
                  if (a.j) throw new U(2, 7, 7006);
                  e = a;
                  f = e.hd() || "";
                } else f = a || "";
                return F(y, Iq(d.ea, "load"), 2);
              case 2:
                d.ea.release();
                if (!d.h) throw new U(2, 7, 7002);
                if (!d.V) {
                  y.B(3);
                  break;
                }
                d.V = f;
                return F(y, d.tc(false), 3);
              case 3:
                g = ++d.bf;
                h = function() {
                  return Q(function(A) {
                    if (A.g == 1) return d.bf == g ? A.B(0) : e ? F(A, e.destroy(), 3) : A.B(3);
                    throw new U(
                      2,
                      7,
                      7e3
                    );
                  });
                };
                k2 = function(A, C) {
                  return Q(function(E) {
                    switch (E.g) {
                      case 1:
                        return sa(E, 2), F(E, Iq(d.ea, C), 4);
                      case 4:
                        return F(E, h(), 5);
                      case 5:
                        return F(E, A(), 6);
                      case 6:
                        return F(E, h(), 7);
                      case 7:
                        e && d.g && (e.g = d.g);
                      case 2:
                        va(E), d.ea.release(), xa(E, 0);
                    }
                  });
                };
                ra(y, 5, 6);
                b == null && e && (b = e.getStartTime());
                d.O = b;
                d.aa = false;
                d.dispatchEvent(Sq("loading"));
                if (e) {
                  c = e.S;
                  y.B(8);
                  break;
                }
                if (c) {
                  y.B(8);
                  break;
                }
                return F(y, k2(function() {
                  return Q(function(A) {
                    if (A.g == 1) return F(A, cr(d, f), 2);
                    c = A.h;
                    H(A);
                  });
                }, "guessMimeType_"), 8);
              case 8:
                l = !!e;
                if (e) {
                  ro(
                    e,
                    d
                  );
                  d.C = e.getStats();
                  y.B(11);
                  break;
                }
                return F(y, dr(d, f, b, c, true, d.g), 12);
              case 12:
                (e = y.h) ? (e.F = false, ro(e, d), d.C = e.getStats(), e.start(), e.C.catch(function() {
                })) : d.C = new io();
              case 11:
                m = !e;
                n = Date.now() / 1e3;
                d.C = e ? e.getStats() : new io();
                d.V = f;
                d.Y = c || null;
                br(d);
                q = function() {
                  var A = d.h ? d.h.buffered : null;
                  return { start: Dj(A) || 0, end: Ej(A) || 0 };
                };
                d.Fa = new mm(q);
                d.Fa.addEventListener("regionadd", function(A) {
                  er(d, A.region, "metadataadded");
                });
                if (m) return F(
                  y,
                  k2(function() {
                    return Q(function(A) {
                      return F(A, fr(d, c), 0);
                    });
                  }, "initializeSrcEqualsDrmInner_"),
                  23
                );
                d.fb = new mm(q);
                return F(y, k2(function() {
                  return Q(function(A) {
                    if (A.g == 1) return F(A, Promise.race([e.aa, e.C]), 2);
                    d.Ec = e.H;
                    var C = e;
                    C.ea = true;
                    d.I = C.l;
                    d.i = e.rh();
                    H(A);
                  });
                }, "waitForFinish"), 15);
              case 15:
                if (d.H) {
                  y.B(16);
                  break;
                }
                return F(y, k2(function() {
                  return Q(function(A) {
                    return F(A, ar(d), 0);
                  });
                }, "initializeMediaSourceEngineInner_"), 16);
              case 16:
                return d.i && d.i.textStreams.length && (d.A.enableTextDisplayer ? d.A.enableTextDisplayer() : Zc("Text displayer w/ enableTextDisplayer", 'Text displayer should have a "enableTextDisplayer" method!')), F(y, k2(function() {
                  return Q(function(A) {
                    return F(A, e.C, 0);
                  });
                }, "waitForFinish"), 18);
              case 18:
                d.g = e.getConfiguration();
                d.Se = e.G;
                d.I && d.I.setMediaElement && d.h && d.I.setMediaElement(d.h);
                d.Me = so(e);
                d.Le = e.Fa;
                if (r = e.D) d.M = r;
                l && d.h && d.h.nodeName === "AUDIO" && (gr(d), d.configure("manifest.disableVideo", true));
                if (e.i) {
                  y.B(19);
                  break;
                }
                return F(y, k2(function() {
                  return Q(function(A) {
                    return F(A, xo(e, d.h), 0);
                  });
                }, "drmEngine_.init"), 19);
              case 19:
                return d.F = to(e), F(y, k2(
                  function() {
                    return Q(function(A) {
                      return F(A, d.F.cc(d.h), 0);
                    });
                  },
                  "drmEngine_.attach"
                ), 21);
              case 21:
                return t = d.g.abrFactory, d.u && d.Ue == t || (d.Ue = t, d.u && d.u.release(), d.u = t(), typeof d.u.setMediaElement != "function" && (Zc("AbrManager w/o setMediaElement", "Please use an AbrManager with setMediaElement function."), d.u.setMediaElement = function() {
                }), typeof d.u.setCmsdManager != "function" && (Zc("AbrManager w/o setCmsdManager", "Please use an AbrManager with setCmsdManager function."), d.u.setCmsdManager = function() {
                }), typeof d.u.trySuggestStreams != "function" && (Zc(
                  "AbrManager w/o trySuggestStreams",
                  "Please use an AbrManager with trySuggestStreams function."
                ), d.u.trySuggestStreams = function() {
                }), d.u.configure(d.g.abr)), w = uo(e), v = e.u, F(y, k2(function() {
                  return Q(function(A) {
                    return F(A, hr(d, n, v, w), 0);
                  });
                }, "loadInner_"), 22);
              case 22:
                qo(e);
                d.Y && Rb().kg() && of(d.Y) && Ak(d.H, d.V, d.Y);
                y.B(14);
                break;
              case 23:
                return F(y, k2(function() {
                  return Q(function(A) {
                    return F(A, ir(d, n, c), 0);
                  });
                }, "srcEqualsInner_"), 14);
              case 14:
                d.dispatchEvent(Sq("loaded"));
              case 6:
                va(y);
                if (!e) {
                  y.B(25);
                  break;
                }
                return F(y, e.destroy(), 25);
              case 25:
                d.Oa = null;
                xa(y, 0);
                break;
              case 5:
                z = ua(y);
                if (!z || z.code == 7e3) {
                  y.B(27);
                  break;
                }
                return F(y, d.tc(false), 27);
              case 27:
                throw z;
            }
          });
        };
        function gr(a) {
          for (var b = u(a.i.variants), c = b.next(); !c.done; c = b.next()) c = c.value, c.video && (c.video.closeSegmentIndex(), c.video = null), c.bandwidth = c.audio && c.audio.bandwidth ? c.audio.bandwidth : 0;
          a.i.variants = a.i.variants.filter(function(d) {
            return d.audio;
          });
        }
        p.ck = function(a, b) {
          a = a === void 0 ? true : a;
          b = b === void 0 ? false : b;
          var c = this, d;
          return Q(function(e) {
            return e.g == 1 ? F(e, jr(c), 2) : e.g != 3 ? (d = e.h, F(e, c.tc(a, b), 3)) : e.return(d);
          });
        };
        p.Si = function(a, b) {
          a = a === void 0 ? false : a;
          b = b === void 0 ? false : b;
          var c = this, d;
          return Q(function(e) {
            return e.g == 1 ? F(e, jr(c, b), 2) : e.g != 3 ? (d = e.h, F(e, c.detach(a), 3)) : e.return(d);
          });
        };
        function jr(a, b) {
          b = b === void 0 ? false : b;
          var c, d, e;
          return Q(function(f) {
            if (f.g == 1) {
              c = null;
              if (!(a.i && a.I && a.Ec && a.V && a.g)) return f.B(2);
              d = a.h.currentTime;
              a.U() && !b && (d = null);
              return F(f, kr(a, a.V, d, a.Y, a.g, true, false), 3);
            }
            if (f.g != 2) {
              c = f.h;
              a.We.push(c);
              a.I && a.I.setMediaElement && a.I.setMediaElement(null);
              if (e = a.m ? a.m.u : null) c.u = e;
              var g = c, h = a.I, k2 = a.Ec;
              g.h = a.i;
              g.l = h;
              g.H = k2;
              c.D = a.M;
              c.start();
              a.i = null;
              a.I = null;
              a.Ec = null;
              a.u = null;
              a.Ue = null;
            }
            return f.return(c);
          });
        }
        p.preload = function(a, b, c, d) {
          b = b === void 0 ? null : b;
          var e = this, f, g;
          return Q(function(h) {
            if (h.g == 1) return f = Kq(e), bo(f, d || e.g, Kq(e)), F(h, dr(e, a, b, c, false, f), 2);
            (g = h.h) ? g.start() : $q(e, new U(2, 7, 7005));
            return h.return(g);
          });
        };
        p.Ug = function() {
          var a = this, b, c, d, e;
          return Q(function(f) {
            b = [];
            c = u(a.We);
            for (d = c.next(); !d.done; d = c.next()) e = d.value, e.j || b.push(e.destroy());
            a.We = [];
            return F(f, Promise.all(b), 0);
          });
        };
        function dr(a, b, c, d, e, f) {
          e = e === void 0 ? false : e;
          var g, h, k2, l;
          return Q(function(m) {
            if (m.g == 1) return d ? m.B(2) : F(m, cr(a, b), 3);
            m.g != 2 && (d = m.h);
            if (g = lr(a, d)) return m.return(null);
            h = f || a.g;
            k2 = false;
            e && a.h && a.h.nodeName === "AUDIO" && (k2 = true);
            l = kr(a, b, c, d || null, h, !e, k2);
            l = e ? l.then(function(n) {
              n.F = false;
              return n;
            }) : l.then(function(n) {
              a.We.push(n);
              return n;
            });
            return m.return(l);
          });
        }
        function kr(a, b, c, d, e, f, g) {
          f = f === void 0 ? true : f;
          g = g === void 0 ? false : g;
          var h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E;
          return Q(function(D) {
            if (D.g == 1) {
              h = null;
              k2 = Gd(e);
              g && (k2.manifest.disableVideo = true);
              l = function() {
                return h.P && h.j ? null : h;
              };
              m = function() {
                return l() ? l().getConfiguration() : a.g;
              };
              if (a.sa.width != Infinity || a.sa.height != Infinity || a.g.ignoreHardwareResolution) return D.B(2);
              n = Rb();
              return F(D, n.wc(), 3);
            }
            D.g != 2 && (q = D.h, a.sa.width = q.width, a.sa.height = q.height);
            r = new ui(k2, a.sa, null);
            t = { networkingEngine: a.J, filter: function(B) {
              var G, I;
              return Q(function(J) {
                if (J.g == 1) return F(J, vi(r, B), 2);
                if (J.g != 4) {
                  G = J.h;
                  if (!G) return J.B(0);
                  I = Sq("trackschanged");
                  return F(J, Promise.resolve(), 4);
                }
                h.dispatchEvent(I);
                H(J);
              });
            }, makeTextStreamsForClosedCaptions: function(B) {
              return mr(a, B);
            }, onTimelineRegionAdded: function(B) {
              nm(h.I, B);
            }, onEvent: function(B) {
              return h.dispatchEvent(B);
            }, onError: function(B) {
              return h.onError(B);
            }, isLowLatencyMode: function() {
              return m().streaming.lowLatencyMode;
            }, updateDuration: function() {
              a.m && h.P && a.m.updateDuration();
            }, newDrmInfo: function(B) {
              var G = h.i, I = G ? G.g : null;
              I && G.C && yi(r, I.keySystem, B);
            }, onManifestUpdated: function() {
              var B = (/* @__PURE__ */ new Map()).set("isLive", a.U());
              h.dispatchEvent(Sq("manifestupdated", B));
              po(h, false, function() {
                if (a.D) a.D.onManifestUpdated(a.U());
              });
            }, getBandwidthEstimate: function() {
              return a.u.getBandwidthEstimate();
            }, onMetadata: function(B, G, I, J) {
              var L = B;
              if (B == "com.apple.hls.interstitial" || B == "com.apple.hls.overlay") {
                if (L = "com.apple.quicktime.HLS", B = { startTime: G, endTime: I, values: J }, a.D) a.D.onHLSInterstitialMetadata(a, a.h, B);
              }
              J = u(J);
              B = J.next();
              for (var K = {}; !B.done; K = { Rh: void 0 }, B = J.next()) K.Rh = B.value, K.Rh.name != "ID" && po(h, false, /* @__PURE__ */ function(N) {
                return function() {
                  nr(a, G, I, L, N.Rh);
                };
              }(K));
            }, disableStream: function(B) {
              return a.disableStream(B, a.g.streaming.maxDisabledTime);
            }, addFont: function(B, G) {
              return a.addFont(B, G);
            } };
            w = new mm(function() {
              return a.za();
            });
            w.addEventListener("regionadd", function(B) {
              var G = B.region;
              or(a, "timelineregionadded", G, h);
              po(h, false, function() {
                a.D && (a.D.onDashTimedMetadata(G), a.D.onDASHInterstitialMetadata(a, a.h, G));
              });
            });
            v = null;
            k2.streaming.observeQualityChanges && (v = new gm(function() {
              return a.Pc();
            }), v.addEventListener("qualitychange", function(B) {
              pr(a, B.quality, B.position);
            }), v.addEventListener("audiotrackchange", function(B) {
              pr(a, B.quality, B.position, true);
            }));
            z = true;
            y = { Dc: a.J, onError: function(B) {
              return h.onError(B);
            }, Rf: function(B) {
              po(h, true, function() {
                a.F && qr(a, B);
              });
            }, onExpirationUpdated: function(B, G) {
              var I = Sq("expirationupdated");
              h.dispatchEvent(I);
              if ((I = h.l) && I.onExpirationUpdated) I.onExpirationUpdated(B, G);
            }, onEvent: function(B) {
              h.dispatchEvent(B);
              B.type == "drmsessionupdate" && z && (z = false, B = Date.now() / 1e3 - h.sa, (a.C || h.getStats()).m = B, a.R && ed(a.R));
            } };
            A = Lq(a, l);
            Zg(a.J, A);
            C = function() {
              return a.Dd(y);
            };
            E = { config: k2, Pl: t, $l: w, Zl: v, Dd: C, Ol: r, networkingEngine: A, lk: f };
            h = new oo(b, d, c, E);
            return D.return(h);
          });
        }
        function cr(a, b) {
          var c, d, e, f;
          return Q(function(g) {
            if (g.g == 1) return c = a.g.manifest.retryParameters, F(g, Jo(b, a.J, c), 2);
            d = g.h;
            d == "application/x-mpegurl" && (e = Rb(), e.Ja() === "WEBKIT" && (d = "application/vnd.apple.mpegurl"));
            d == "video/quicktime" && (f = Rb(), f.Ja() === "CHROMIUM" && (d = "video/mp4"));
            return g.return(d);
          });
        }
        function lr(a, b) {
          if (!Fi(Rb())) return true;
          if (b) {
            if ((a.h || Gi()).canPlayType(b) == "") return false;
            if (!Fi(Rb()) || !Di.has(b)) return true;
            if (of(b)) return Rb().Ja() === "WEBKIT" && (a.g.drm.servers["com.apple.fps"] || a.g.drm.servers["com.apple.fps.1_0"]) ? a.g.streaming.useNativeHlsForFairPlay : a.g.streaming.preferNativeHls;
            if (b === "application/dash+xml" || b === "video/vnd.mpeg.dash.mpd") return a.g.streaming.preferNativeDash;
          }
          return false;
        }
        function rr(a, b) {
          var c = a.g.textDisplayFactory;
          a.Di !== c || (b === void 0 ? 0 : b) ? (b = a.A, a.A = c(), a.A.configure ? a.A.configure(a.g.textDisplayer) : Zc("Text displayer w/ configure", 'Text displayer should have a "configure" method!'), a.A.setTextLanguage || Zc("Text displayer w/ setTextLanguage", 'Text displayer should have a "setTextLanguage" method!'), b ? (a.A.setTextVisibility(b.isTextVisible()), b.destroy().catch(function() {
          })) : a.A.setTextVisibility(a.X), a.H && gl(a.H, a.A), a.Di = c, a.m && Ym(a.m)) : a.A && a.A.configure && a.A.configure(a.g.textDisplayer);
        }
        function ar(a) {
          var b, c, d;
          return Q(function(e) {
            if (e.g == 1) return Rb(), Xq(a, "media-source"), a.g.mediaSource.useSourceElements && Nj(a.h), rr(a), b = sr(a.h, a.A, { Rk: function() {
              return a.keySystem();
            }, onMetadata: function(f, g, h) {
              f = u(f);
              for (var k2 = f.next(); !k2.done; k2 = f.next()) if (k2 = k2.value, k2.data && typeof k2.cueTime == "number" && k2.frames) {
                var l = k2.cueTime + g, m = h;
                m && l > m && (m = l);
                for (var n = u(k2.frames), q = n.next(); !q.done; q = n.next()) nr(a, l, m, "org.id3", q.value);
                if (a.D) a.D.onHlsTimedMetadata(k2, l);
              }
            }, Ul: function(f) {
              a.fb && nm(
                a.fb,
                { schemeIdUri: f.schemeIdUri, startTime: f.startTime, endTime: f.endTime, id: String(f.id), emsg: f }
              );
            }, onEvent: function(f) {
              return a.dispatchEvent(f);
            }, Wl: function() {
              a.I && a.I.update && a.I.update();
            } }, a.R, a.g.mediaSource), c = a.g.manifest, d = c.segmentRelativeVttTiming, b.Fa = d, F(e, b.L, 2);
            a.H = b;
            H(e);
          });
        }
        function tr(a, b, c) {
          function d() {
            return ur(a);
          }
          a.j.o(b, "playing", d);
          a.j.o(b, "pause", d);
          a.j.o(b, "ended", d);
          a.j.o(b, "ratechange", function() {
            var f = a.h.playbackRate;
            f != 0 && (a.L && (a.L.set(f), a.l == vr && a.u.playbackRateChanged(f), wr(a, f)), f = Sq("ratechange"), a.dispatchEvent(f));
          });
          b.remote && (a.j.o(b.remote, "connect", function() {
            a.m && b.remote.state == "connected" && xr(a);
            yr(a);
          }), a.j.o(b.remote, "connecting", function() {
            return yr(a);
          }), a.j.o(b.remote, "disconnect", function() {
            return Q(function(f) {
              if (f.g == 1) return a.m && b.remote.state == "disconnected" ? F(f, mn(a.m), 3) : f.B(2);
              f.g != 2 && xr(a);
              yr(a);
              H(f);
            });
          }));
          b.audioTracks && (a.j.o(b.audioTracks, "addtrack", function() {
            return yr(a);
          }), a.j.o(b.audioTracks, "removetrack", function() {
            return yr(a);
          }), a.j.o(b.audioTracks, "change", function() {
            return yr(a);
          }));
          b.videoTracks && (a.j.o(b.videoTracks, "addtrack", function() {
            return yr(a);
          }), a.j.o(b.videoTracks, "removetrack", function() {
            return yr(a);
          }), a.j.o(b.videoTracks, "change", function() {
            return yr(a);
          }));
          (b.webkitPresentationMode || b.webkitSupportsFullscreen) && a.j.o(b, "webkitpresentationmodechanged", function() {
            a.Oe && rr(a, true);
          });
          if (b.textTracks) {
            var e = function() {
              a.l === zr && a.A instanceof Wo && xr(a);
              yr(a);
            };
            a.j.o(b.textTracks, "addtrack", function(f) {
              if (f.track) switch (f = f.track, f.kind) {
                case "metadata":
                  Ar(a, f);
                  break;
                case "chapters":
                  Br(a, f);
                  break;
                default:
                  e();
              }
            });
            a.j.o(b.textTracks, "removetrack", e);
            a.j.o(b.textTracks, "change", e);
          }
          b.preload != "none" && a.j.ua(b, "loadedmetadata", function() {
            a.C.G = Date.now() / 1e3 - c;
          });
        }
        function hr(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P, O;
          return Q(function(M) {
            switch (M.g) {
              case 1:
                Xq(a, "load");
                e = a.h;
                a.L = new cm({ wf: function() {
                  return e.playbackRate;
                }, jd: function() {
                  return e.defaultPlaybackRate;
                }, gi: function(R) {
                  e.playbackRate = R;
                }, pj: function(R) {
                  e.currentTime += R;
                } });
                tr(a, e, b);
                "onchange" in window2.screen && a.j.o(window2.screen, "change", function() {
                  if (a.M.getConfiguration) {
                    var R = a.M.getConfiguration();
                    R.hdrLevel == "AUTO" ? Cr(a) : a.g.preferredVideoHdrLevel == "AUTO" && a.g.abr.enabled && (R.hdrLevel = "AUTO", a.M.configure(R), Cr(a));
                  }
                });
                f = false;
                g = u(a.i.variants);
                for (h = g.next(); !h.done; h = g.next()) k2 = h.value, (l = k2.video && k2.video.dependencyStream) && (f = fd(l));
                Rq(a, a.g, f);
                a.Ic = a.g.preferredTextLanguage;
                a.be = a.g.preferredTextRole;
                a.Re = a.g.preferForcedSubs;
                Dr(a.i.presentationTimeline, a.g.playRangeStart, a.g.playRangeEnd);
                a.u.init(function(R, W, wa) {
                  a.i && a.m && R != a.m.u && Er(a, R, true, W === void 0 ? false : W, wa === void 0 ? 0 : wa);
                });
                a.u.setMediaElement(e);
                a.u.setCmsdManager(a.ra);
                a.m = Fr(a);
                a.m.configure(a.g.streaming);
                a.l = vr;
                a.dispatchEvent(Sq("streaming"));
                m = c;
              case 2:
                (q = a.m.u) || m || (m = Gr(a, true));
                r = [];
                n = q || m;
                t = u([n.video, n.audio]);
                for (w = t.next(); !w.done; w = t.next()) (v = w.value) && !v.segmentIndex && (r.push(v.createSegmentIndex()), v.dependencyStream && r.push(v.dependencyStream.createSegmentIndex()));
                if (!(r.length > 0)) {
                  M.B(4);
                  break;
                }
                return F(M, Promise.all(r), 4);
              case 4:
                if (!n || n.disabledUntilTime != 0) {
                  M.B(2);
                  break;
                }
                if (a.I && a.I.onInitialVariantChosen) a.I.onInitialVariantChosen(n);
                a.i.isLowLatency && (a.g.streaming.lowLatencyMode ? a.configure(a.Dg) : ab("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."));
                a.K && (qp(a.K, a.i.isLowLatency && a.g.streaming.lowLatencyMode), vp(a.K, b * 1e3));
                Dr(a.i.presentationTimeline, a.g.playRangeStart, a.g.playRangeEnd);
                Om(a.m, a.g.playRangeStart, a.g.playRangeEnd);
                a.aa = true;
                a.dispatchEvent(Sq("canupdatestarttime"));
                z = function(R) {
                  a.G = Hr(a, R);
                  a.jb = Ir(a, R);
                  Jr(a, e, false);
                };
                a.g.streaming.startAtSegmentBoundary || (y = a.O, y == null && a.i.startTime && (y = a.i.startTime), z(y));
                if (q) {
                  M.B(7);
                  break;
                }
                if (!a.g.streaming.startAtSegmentBoundary) {
                  M.B(8);
                  break;
                }
                A = a.i.presentationTimeline;
                a.O instanceof Date && (E = A.m || A.i, D = a.O.getTime() / 1e3 - E, D != null && (C = D));
                C == null && (C = typeof a.O === "number" ? a.O : a.h.currentTime);
                a.O == null && a.i.startTime && (C = a.i.startTime);
                B = A.fc();
                G = A.Mb();
                C < B ? C = B : C > G && (C = G);
                return F(M, Kr(m, C), 9);
              case 9:
                I = M.h, z(I);
              case 8:
                Er(a, m, true, false, 0);
              case 7:
                return a.G.ready(), J = a.yc().find(function(R) {
                  return R.active;
                }), J || ((L = lg(a.i.textStreams, a.Ic, a.be, a.Re)[0] || null) && ho(a.C.h, L, true), m && (L ? (pg(m.audio, L, a.g) && (a.X = true), a.X && a.A.setTextVisibility(true)) : (a.X = false, a.A.setTextVisibility(false)), Lr(a)), L && (a.g.streaming.alwaysStreamText || a.Xc()) && (Xm(a.m, L), Mr(a))), F(M, a.m.start(d), 10);
              case 10:
                a.g.abr.enabled && (a.u.enable(), Nr(a));
                yr(a);
                Cr(a);
                a.i.variants.some(function(R) {
                  return R.primary;
                });
                if ((K = a.U()) && (a.g.streaming.liveSync && a.g.streaming.liveSync.enabled || a.i.serviceDescription || a.g.streaming.liveSync.panicMode) || a.g.streaming.vodDynamicPlaybackRate) N = function() {
                  return Or(a);
                }, a.j.o(e, "timeupdate", N);
                K || (P = function() {
                  return Pr(a);
                }, a.j.o(e, "timeupdate", P), Pr(a), a.i.nextUrl && (a.g.streaming.preloadNextUrlWindow > 0 && (O = function() {
                  var R;
                  return Q(function(W) {
                    if (W.g == 1) {
                      R = a.za().end - a.h.currentTime;
                      if (isNaN(R) || !(R <= a.g.streaming.preloadNextUrlWindow)) return W.B(0);
                      a.j.Ea(e, "timeupdate", O);
                      return F(W, a.preload(a.i.nextUrl), 4);
                    }
                    a.Oa = W.h;
                    H(W);
                  });
                }, a.j.o(e, "timeupdate", O)), a.j.o(e, "ended", function() {
                  a.load(a.Oa || a.i.nextUrl);
                })));
                if (a.D) a.D.onManifestUpdated(K);
                H(M);
            }
          });
        }
        function fr(a, b) {
          var c, d, e;
          return Q(function(f) {
            return f.g == 1 ? (c = Date.now() / 1e3, d = true, a.F = a.Dd({ Dc: a.J, onError: function(g) {
              $q(a, g);
            }, Rf: function() {
            }, onExpirationUpdated: function() {
              var g = Sq("expirationupdated");
              a.dispatchEvent(g);
            }, onEvent: function(g) {
              a.dispatchEvent(g);
              g.type == "drmsessionupdate" && d && (d = false, a.C.m = Date.now() / 1e3 - c);
            } }), a.F.configure(a.g.drm), e = qg([b]), a.F.O = true, F(f, Ih(a.F, [e], []), 2)) : F(f, a.F.cc(a.h), 0);
          });
        }
        function ir(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, t;
          return Q(function(w) {
            switch (w.g) {
              case 1:
                Xq(a, "src-equals");
                d = a.h;
                a.G = new Pl(d);
                e = false;
                a.Qe.push(function() {
                  e = true;
                });
                a.dispatchEvent(Sq("canupdatestarttime"));
                a.O != null && a.G.Ag(a.O);
                a.jb = Qr(a, a.O || 0);
                a.L = new cm({ wf: function() {
                  return d.playbackRate;
                }, jd: function() {
                  return d.defaultPlaybackRate;
                }, gi: function(v) {
                  d.playbackRate = v;
                }, pj: function(v) {
                  d.currentTime += v;
                } });
                Jr(a, d, true);
                d.textTracks && (rr(a), f = function(v) {
                  if (!(a.A instanceof Wo)) {
                    var z = Rr(a).find(function(y) {
                      return y.mode !== "disabled";
                    });
                    z && (z.mode = v ? "showing" : "hidden");
                    a.A instanceof Yo && (z = Sr(a)) && (z.mode = !v && a.A.isTextVisible() ? "showing" : "hidden");
                  }
                }, a.j.o(d, "enterpictureinpicture", function() {
                  return f(true);
                }), a.j.o(d, "leavepictureinpicture", function() {
                  return f(false);
                }), d.remote ? (a.j.o(d.remote, "connect", function() {
                  return f(false);
                }), a.j.o(d.remote, "connecting", function() {
                  return f(false);
                }), a.j.o(d.remote, "disconnect", function() {
                  return f(false);
                })) : "webkitCurrentPlaybackTargetIsWireless" in d && a.j.o(
                  d,
                  "webkitcurrentplaybacktargetiswirelesschanged",
                  function() {
                    return f(false);
                  }
                ), g = d, (g.webkitPresentationMode || g.webkitSupportsFullscreen) && a.j.o(g, "webkitpresentationmodechanged", function() {
                  g.webkitPresentationMode ? f(g.webkitPresentationMode !== "inline") : g.webkitSupportsFullscreen && f(g.webkitDisplayingFullscreen);
                }));
                tr(a, d, b);
                h = xp(a.K, a.V, c);
                !h.includes("#t=") && (a.g.playRangeStart > 0 || isFinite(a.g.playRangeEnd)) && (h += "#t=", a.g.playRangeStart > 0 && (h += a.g.playRangeStart), isFinite(a.g.playRangeEnd) && (h += "," + a.g.playRangeEnd));
                if (!a.H) {
                  w.B(2);
                  break;
                }
                return F(
                  w,
                  a.H.destroy(),
                  3
                );
              case 3:
                a.H = null;
              case 2:
                return Nj(d), d.src = h, k2 = Rb(), k2.Ka() == "TV" && d.load(), d.preload != "none" && !d.autoplay && of(c) && k2.Ja() === "WEBKIT" && d.load(), a.l = zr, a.dispatchEvent(Sq("streaming")), l = new Lg(), Gl(d, HTMLMediaElement.HAVE_METADATA, a.j, function() {
                  a.G.ready();
                  a.Y && of(a.Y) || l.resolve();
                }), m = function() {
                  return new Promise(function(v) {
                    var z = new Bf(v);
                    a.j.o(d.textTracks, "change", function() {
                      return z.$(0.5);
                    });
                    z.$(0.5);
                  });
                }, Gl(d, HTMLMediaElement.HAVE_CURRENT_DATA, a.j, function() {
                  var v, z, y, A, C;
                  return Q(function(E) {
                    if (E.g == 1) return F(E, m(), 2);
                    if (e) return E.return();
                    Tr(a);
                    v = Rr(a);
                    v.some(function(D) {
                      return D.mode === "showing";
                    }) && (a.X = true, a.A.setTextVisibility(true));
                    if (!(a.A instanceof Wo)) for (v.length && (a.A.enableTextDisplayer ? a.A.enableTextDisplayer() : Zc("Text displayer w/ enableTextDisplayer", 'Text displayer should have a "enableTextDisplayer" method')), z = false, y = u(v), A = y.next(); !A.done; A = y.next()) C = A.value, C.mode !== "disabled" && (z ? (C.mode = "disabled", ab("Found more than one enabled text track, disabling it", C)) : (Ur(a, C), z = true));
                    Vr(a);
                    a.Y && of(a.Y) && l.resolve();
                    H(E);
                  });
                }), d.error ? l.reject(Zq(a)) : d.preload == "none" && (ab('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'), l.resolve()), a.j.ua(d, "error", function() {
                  l.reject(Zq(a));
                }), F(w, Ff(a.g.streaming.loadTimeout, l), 4);
              case 4:
                if ((n = a.U()) && (a.g.streaming.liveSync && a.g.streaming.liveSync.enabled || a.g.streaming.liveSync.panicMode) || a.g.streaming.vodDynamicPlaybackRate) q = function() {
                  return Or(a);
                }, a.j.o(d, "timeupdate", q);
                n || (r = function() {
                  return Pr(a);
                }, a.j.o(d, "timeupdate", r), Pr(a));
                a.D && (a.D.onManifestUpdated(n), n && (t = a.za().end, a.j.o(d, "progress", function() {
                  var v = a.za().end;
                  t != v && (a.D.onManifestUpdated(a.U()), t = v);
                })));
                a.aa = true;
                H(w);
            }
          });
        }
        function Tr(a) {
          var b = a.g.preferredAudioLanguage;
          b != "" && a.Gj(b, a.g.preferredAudioRole);
        }
        function Vr(a) {
          var b = a.g.preferredTextLanguage;
          b != "" && a.ai(b, a.g.preferredTextRole, a.g.preferForcedSubs);
        }
        function Ar(a, b) {
          if (b.kind == "metadata") {
            b.mode = "hidden";
            a.j.o(b, "cuechange", function() {
              if (b.activeCues) {
                for (var d = u(b.activeCues), e = d.next(); !e.done; e = d.next()) if (e = e.value, nr(a, e.startTime, e.endTime, e.type, e.value), a.D) a.D.onCueMetadataChange(e.value);
              }
              if (b.cues) {
                d = [];
                e = u(b.cues);
                for (var f = e.next(), g = {}; !f.done; g = { Nc: void 0 }, f = e.next()) g.Nc = f.value, g.Nc.type == "com.apple.quicktime.HLS" && g.Nc.startTime != null && (f = d.find(/* @__PURE__ */ function(h) {
                  return function(k2) {
                    return k2.startTime == h.Nc.startTime && k2.endTime == h.Nc.endTime;
                  };
                }(g)), f || (f = { startTime: g.Nc.startTime, endTime: g.Nc.endTime, values: [] }, d.push(f)), f.values.push(g.Nc.value));
                d = u(d);
                for (e = d.next(); !e.done; e = d.next()) e = e.value, e.values.some(function(h) {
                  return h.key == "X-ASSET-URI" || h.key == "X-ASSET-LIST";
                }) && a.D && (e.values.push({ key: "CUE", description: "", data: e.startTime != 0 || a.U() ? "ONCE" : "ONCE,PRE", mimeType: null, pictureType: null }), a.D.onHLSInterstitialMetadata(a, a.h, e));
              }
            });
            var c = new Bf(function() {
              var d = Wr(a);
              d = u(d);
              for (var e = d.next(); !e.done; e = d.next()) e.value.mode = "hidden";
            }).La().$(0.5);
            a.Qe.push(function() {
              c.stop();
            });
          }
        }
        function er(a, b, c) {
          b = (/* @__PURE__ */ new Map()).set("startTime", b.startTime).set("endTime", b.endTime).set("metadataType", b.schemeIdUri).set("payload", b.payload);
          a.dispatchEvent(Sq(c, b));
        }
        function nr(a, b, c, d, e) {
          a.Fa && (b = { schemeIdUri: d, startTime: b, endTime: c || Infinity, id: "", payload: e }, b.id = JSON.stringify(b), nm(a.Fa, b));
        }
        function Br(a, b) {
          if (b && b.kind == "chapters") {
            b.mode = "hidden";
            var c = new Bf(function() {
              b.mode = "hidden";
            }).La().$(0.5);
            a.Qe.push(function() {
              c.stop();
            });
          }
        }
        p.fm = function() {
          for (var a = this.ea; a.g; ) a.release();
        };
        p.Dd = function(a) {
          return new Bh(a);
        };
        function Lq(a, b) {
          function c(f) {
            b() ? b().dispatchEvent(f) : a.dispatchEvent(f);
          }
          function d(f) {
            b() ? po(b(), true, f) : f();
          }
          b || (b = function() {
            return null;
          });
          var e = new Vg(function(f, g, h, k2, l) {
            d(function() {
              a.u && a.u.segmentDownloaded(f, g, h, k2, l);
            });
          }, function(f, g, h) {
            g = (/* @__PURE__ */ new Map()).set("headers", f).set("request", g).set("requestType", h);
            c(Sq("downloadheadersreceived", g));
            d(function() {
              if (a.ra) {
                var k2 = a.ra;
                if (k2.h.enabled) {
                  var l = f["cmsd-static"];
                  if (l) try {
                    var m = /* @__PURE__ */ new Map(), n = l.split(",");
                    for (l = 0; l < n.length; l++) {
                      var q = n[l].split("=");
                      m.set(q[0], Gq(q[1]));
                    }
                  } catch (z) {
                  }
                  if (m = f["cmsd-dynamic"]) {
                    a: {
                      try {
                        var r = /* @__PURE__ */ new Map(), t = m.split(";");
                        for (m = 1; m < t.length; m++) {
                          var w = t[m].split("=");
                          r.set(w[0], Gq(w[1]));
                        }
                        var v = r;
                        break a;
                      } catch (z) {
                        v = null;
                        break a;
                      }
                      v = void 0;
                    }
                    v && (k2.g = v);
                  }
                }
              }
            });
          }, function(f, g) {
            f = (/* @__PURE__ */ new Map()).set("request", f).set("response", g);
            c(Sq("downloadcompleted", f));
          }, function(f, g, h, k2) {
            f = (/* @__PURE__ */ new Map()).set("request", f).set("error", g).set("httpResponseCode", h).set("aborted", k2);
            c(Sq("downloadfailed", f));
          }, function(f, g, h) {
            d(function() {
              if (a.K) {
                var k2 = a.K, l = h;
                l = l === void 0 ? {} : l;
                if (k2.g.enabled) if (g.method === "HEAD") Sp(k2, g, {});
                else switch (f) {
                  case 0:
                    try {
                      if (k2.g.enabled) {
                        if (l.type) {
                          a: {
                            switch (l.type) {
                              case 4:
                                var m = k2.u ? sp : rp;
                                break a;
                              case 3:
                              case 2:
                                m = k2.u ? up : tp;
                                break a;
                              case 5:
                                m = "s";
                                break a;
                            }
                            m = void 0;
                          }
                          k2.l = m;
                        }
                        Sp(k2, g, { ot: Bp, su: !k2.D });
                      }
                    } catch (q) {
                      bb("CMCD_MANIFEST_ERROR", "Could not generate manifest CMCD data.", q);
                    }
                    break;
                  case fh:
                    try {
                      if (k2.g.enabled) {
                        var n = xq(k2, l, g.uris[0]);
                        n.ts = Date.now();
                        k2.F.set(g, n.ts);
                        Sp(k2, g, n);
                      }
                    } catch (q) {
                      bb(
                        "CMCD_SEGMENT_ERROR",
                        "Could not generate segment CMCD data.",
                        q
                      );
                    }
                    break;
                  case 2:
                  case 5:
                  case 6:
                    Sp(k2, g, { ot: "k" });
                    break;
                  case 4:
                    Sp(k2, g, { ot: "o" });
                }
              }
            });
          }, function(f, g, h, k2) {
            (f = b() ? b().l : a.I) && f.banLocation && f.banLocation(k2);
          }, function(f, g, h) {
            if (g.data) {
              var k2 = g.data.byteLength, l = b() ? b().getStats() : a.C;
              l && (mo(l, k2), f === 0 && (l.jj = k2));
              k2 = a.K;
              h = h === void 0 ? {} : h;
              switch (f) {
                case fh:
                  try {
                    var m = xq(k2, h, g.uri);
                    g.originalRequest && g.originalRequest.timeToFirstByte != null && (m.ttfb = g.originalRequest.timeToFirstByte);
                    g.timeMs != null && (m.ttlb = g.timeMs);
                    var n = g.originalUri || g.uri;
                    if (n.includes("CMCD=")) try {
                      var q = new URL(n);
                      q.searchParams.delete("CMCD");
                      var r = q.toString();
                    } catch (t) {
                      r = n;
                    }
                    else r = n;
                    m.url = r;
                    k2.F.has(g.originalRequest) ? (m.ts = k2.F.get(g.originalRequest), k2.F.delete(g.originalRequest)) : m.ts || (m.ts = Date.now());
                    lq(k2, g, m);
                  } catch (t) {
                    bb("CMCD_SEGMENT_ERROR", "Could not generate response segment CMCD data.", t);
                  }
              }
            }
          });
          e.configure(a.g.networking);
          return e;
        }
        function Hr(a, b) {
          return new Sl(a.h, a.i, a.g.streaming, b, function() {
            a.jb && fm(a.jb, !a.G.Bi());
            a.m && a.m.rd();
            a.P && Xr(a, "seeking");
          }, function(c) {
            return a.dispatchEvent(c);
          });
        }
        function Ir(a, b) {
          var c = a.U() || typeof b === "number" && b > 0;
          b = new Eo(a.Me, c);
          b.addEventListener("enter", function(f) {
            or(a, "timelineregionenter", f.region);
          });
          b.addEventListener("exit", function(f) {
            or(a, "timelineregionexit", f.region);
          });
          b.addEventListener("skip", function(f) {
            var g = f.region;
            f.seeking || (or(a, "timelineregionenter", g), or(a, "timelineregionexit", g));
          });
          var d = new Eo(a.Fa, c);
          d.addEventListener("enter", function(f) {
            er(a, f.region, "metadata");
          });
          c = new Eo(a.fb, c);
          c.addEventListener("enter", function(f) {
            f = (/* @__PURE__ */ new Map()).set(
              "detail",
              f.region.emsg
            );
            a.dispatchEvent(Sq("emsg", f));
          });
          var e = new em(a.h);
          e.g.add(b);
          e.g.add(d);
          e.g.add(c);
          a.Le && e.g.add(a.Le);
          return e;
        }
        function Qr(a, b) {
          b = new Eo(a.Fa, b instanceof Date || b > 0);
          b.addEventListener("enter", function(d) {
            er(a, d.region, "metadata");
          });
          var c = new em(a.h);
          c.g.add(b);
          return c;
        }
        function Jr(a, b, c) {
          a.P = new ni();
          qi(a.P, pi);
          Yr(a);
          br(a);
          a.Ma = new Bf(function() {
            Xr(a);
          });
          a.g.streaming.rebufferingGoal && a.Ma.wa(0.25);
          a.j.o(b, "waiting", function() {
            return Xr(a, "waiting");
          });
          a.j.o(b, "canplaythrough", function() {
            return Xr(a, "canplaythrough");
          });
          a.j.o(b, "playing", function() {
            return Xr(a, "playing");
          });
          a.j.o(b, "seeked", function() {
            return Xr(a, "seeked");
          });
          c && (a.j.o(b, "stalled", function() {
            return Xr(a, "stalled");
          }), a.j.o(b, "progress", function() {
            return Xr(a, "progress");
          }), a.j.o(b, "timeupdate", function() {
            return Xr(
              a,
              "timeupdate"
            );
          }));
        }
        function Yr(a) {
          var b = a.g.streaming.rebufferingGoal;
          a.P.i.set(oi, Math.min(0.5, b / 2)).set(pi, b);
        }
        function Xr(a, b) {
          if (a.g.streaming.rebufferingGoal) {
            b = a.H ? Ck(a.H) : false;
            b = a.isEnded() || b || a.G.fj();
            var c = Gj(a.h.buffered, a.h.currentTime), d = a.P, e = d.i.get(d.g);
            qi(d, b || c >= e && c > 0 ? oi : pi) && br(a);
          } else if (b) {
            c = void 0;
            switch (b) {
              case "seeking":
              case "waiting":
                c = pi;
                break;
              case "canplaythrough":
              case "playing":
              case "seeked":
                c = oi;
            }
            c !== void 0 && qi(a.P, c) && br(a);
          }
        }
        function sr(a, b, c, d, e) {
          return new wk(a, b, c, e, d);
        }
        function Fr(a) {
          return new Im(a.i, { Rc: function() {
            return a.G ? a.G.$e() : 0;
          }, getBandwidthEstimate: function() {
            return a.u.getBandwidthEstimate();
          }, Za: function() {
            return a.Za();
          }, video: a.h, ha: a.H, Dc: a.J, onError: function(b) {
            return $q(a, b);
          }, onEvent: function(b) {
            return a.dispatchEvent(b);
          }, Sf: function(b, c, d) {
            var e = b.startTime, f = b.endTime, g = c.type;
            if (g != sc) {
              if (a.G) {
                a.G.rj();
                var h = Kk(a.H, g);
                !a.U() && a.h.paused && !a.h.seeking && h != null && h > 0 && a.G.$e() < h && a.G.Ag(h);
              }
              Xr(a);
            }
            d = (/* @__PURE__ */ new Map()).set("start", e).set("end", f).set(
              "contentType",
              g
            ).set("isMuxed", d);
            a.dispatchEvent(Sq("segmentappended", d));
            a.u && c.fastSwitching && b.nd && b.xe && a.u.trySuggestStreams();
          }, Vl: function(b, c) {
            (c = c.Od) && a.Le && im(a.Le, c, b);
          }, Ji: function(b, c) {
            var d = a.F;
            if (d.h.parseInbandPsshEnabled && !d.L && ["audio", "video"].includes(b)) {
              b = new zh(Kb(c));
              c = 0;
              for (var e = u(b.data), f = e.next(); !f.done; f = e.next()) c += f.value.length;
              if (c == 0) d = Promise.resolve();
              else {
                c = new Uint8Array(c);
                e = 0;
                b = u(b.data);
                for (f = b.next(); !f.done; f = b.next()) f = f.value, c.set(f, e), e += f.length;
                Rh(d, "cenc", c);
                d = d.m;
              }
            } else d = Promise.resolve();
            return d;
          }, disableStream: function(b, c) {
            return a.disableStream(b, c);
          }, ym: function(b, c) {
            return a.g.abr.enabled && c.fastSwitching && b.nd && b.xe ? false : true;
          } });
        }
        p.configure = function(a, b) {
          var c = this.getConfiguration();
          arguments.length == 2 && typeof a == "string" && (a = An(a, b));
          "preferredVariantRole" in a && (Zc("preferredVariantRole configuration", "Please Use preferredAudioRole instead."), a.preferredAudioRole = a.preferredVariantRole, delete a.preferredVariantRole);
          a.streaming && "forceTransmuxTS" in a.streaming && (Zc("streaming.forceTransmuxTS configuration", "Please Use mediaSource.forceTransmux instead."), a.mediaSource = a.mediaSource || {}, a.mediaSource.mediaSource = a.streaming.forceTransmuxTS, delete a.streaming.forceTransmuxTS);
          a.streaming && "forceTransmux" in a.streaming && (Zc("streaming.forceTransmux configuration", "Please Use mediaSource.forceTransmux instead."), a.mediaSource = a.mediaSource || {}, a.mediaSource.mediaSource = a.streaming.forceTransmux, delete a.streaming.forceTransmux);
          if (a.streaming && "useNativeHlsOnSafari" in a.streaming) {
            Zc("streaming.useNativeHlsOnSafari configuration", "Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");
            var d = Rb();
            a.streaming.preferNativeHls = a.streaming.useNativeHlsOnSafari && d.Ja() === "WEBKIT";
            delete a.streaming.useNativeHlsOnSafari;
          }
          a.streaming && typeof a.streaming.liveSync == "boolean" && (Zc("streaming.liveSync", "Please Use streaming.liveSync.enabled instead."), d = a.streaming.liveSync, a.streaming.liveSync = {}, a.streaming.liveSync.enabled = d);
          if (a.streaming && !(a.streaming.liveSync && "targetLatency" in a.streaming.liveSync) && ("liveSyncMinLatency" in a.streaming || "liveSyncMaxLatency" in a.streaming)) {
            d = a.streaming.liveSyncMinLatency || 0;
            var e = Math.abs((a.streaming.liveSyncMaxLatency || 1) - d) / 2;
            a.streaming.liveSync = a.streaming.liveSync || {};
            a.streaming.liveSync.targetLatency = d + e;
            a.streaming.liveSync.targetLatencyTolerance = e;
          }
          a.streaming && "liveSyncMaxLatency" in a.streaming && (Zc("streaming.liveSyncMaxLatency", "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"), delete a.streaming.liveSyncMaxLatency);
          a.streaming && "liveSyncMinLatency" in a.streaming && (Zc("streaming.liveSyncMinLatency", "Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"), delete a.streaming.liveSyncMinLatency);
          a.streaming && "liveSyncTargetLatency" in a.streaming && (Zc("streaming.liveSyncTargetLatency", "Please Use streaming.liveSync.targetLatency instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.targetLatency = a.streaming.liveSyncTargetLatency, delete a.streaming.liveSyncTargetLatency);
          a.streaming && "liveSyncTargetLatencyTolerance" in a.streaming && (Zc("streaming.liveSyncTargetLatencyTolerance", "Please Use streaming.liveSync.targetLatencyTolerance instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.targetLatencyTolerance = a.streaming.liveSyncTargetLatencyTolerance, delete a.streaming.liveSyncTargetLatencyTolerance);
          a.streaming && "liveSyncPlaybackRate" in a.streaming && (Zc("streaming.liveSyncPlaybackRate", "Please Use streaming.liveSync.maxPlaybackRate instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.maxPlaybackRate = a.streaming.liveSyncPlaybackRate, delete a.streaming.liveSyncPlaybackRate);
          a.streaming && "liveSyncMinPlaybackRate" in a.streaming && (Zc("streaming.liveSyncMinPlaybackRate", "Please Use streaming.liveSync.minPlaybackRate instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.minPlaybackRate = a.streaming.liveSyncMinPlaybackRate, delete a.streaming.liveSyncMinPlaybackRate);
          a.streaming && "liveSyncPanicMode" in a.streaming && (Zc("streaming.liveSyncPanicMode", "Please Use streaming.liveSync.panicMode instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.panicMode = a.streaming.liveSyncPanicMode, delete a.streaming.liveSyncPanicMode);
          a.streaming && "liveSyncPanicThreshold" in a.streaming && (Zc("streaming.liveSyncPanicThreshold", "Please Use streaming.liveSync.panicThreshold instead."), a.streaming.liveSync = a.streaming.liveSync || {}, a.streaming.liveSync.panicThreshold = a.streaming.liveSyncPanicThreshold, delete a.streaming.liveSyncPanicThreshold);
          if (a.mediaSource && "sourceBufferExtraFeatures" in a.mediaSource) {
            Zc("mediaSource.sourceBufferExtraFeatures configuration", "Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");
            var f = a.mediaSource.sourceBufferExtraFeatures;
            a.mediaSource.addExtraFeaturesToSourceBuffer = function() {
              return f;
            };
            delete a.mediaSource.sourceBufferExtraFeatures;
          }
          a.manifest && a.manifest.hls && "useSafariBehaviorForLive" in a.manifest.hls && (Zc("manifest.hls.useSafariBehaviorForLive configuration", "Please Use liveSync config to keep on live Edge instead."), delete a.manifest.hls.useSafariBehaviorForLive);
          a.streaming && "parsePrftBox" in a.streaming && (Zc("streaming.parsePrftBox configuration", "Now fired without needing a configuration."), delete a.streaming.parsePrftBox);
          a.manifest && a.manifest.dash && "enableAudioGroups" in a.manifest.dash && (Zc("manifest.dash.enableAudioGroups configuration", "Please Use manifest.enableAudioGroups instead."), a.manifest.enableAudioGroups = a.manifest.dash.enableAudioGroups, delete a.manifest.dash.enableAudioGroups);
          a.streaming && "dispatchAllEmsgBoxes" in a.streaming && (Zc("streaming.dispatchAllEmsgBoxes configuration", "Please Use mediaSource.dispatchAllEmsgBoxes instead."), a.mediaSource = a.mediaSource || {}, a.mediaSource.dispatchAllEmsgBoxes = a.streaming.dispatchAllEmsgBoxes, delete a.streaming.dispatchAllEmsgBoxes);
          a.streaming && "autoLowLatencyMode" in a.streaming && (Zc("streaming.autoLowLatencyMode configuration", "Please Use streaming.lowLatencyMode instead."), a.streaming.lowLatencyMode = a.streaming.autoLowLatencyMode, delete a.streaming.autoLowLatencyMode);
          a.manifest && a.manifest.dash && "ignoreSupplementalCodecs" in a.manifest.dash && (Zc("manifest.dash.ignoreSupplementalCodecs configuration", "Please Use manifest.ignoreSupplementalCodecs instead."), a.manifest.ignoreSupplementalCodecs = a.manifest.dash.ignoreSupplementalCodecs, delete a.manifest.dash.ignoreSupplementalCodecs);
          a.manifest && a.manifest.hls && "ignoreSupplementalCodecs" in a.manifest.hls && (Zc("manifest.hls.ignoreSupplementalCodecs configuration", "Please Use manifest.ignoreSupplementalCodecs instead."), a.manifest.ignoreSupplementalCodecs = a.manifest.hls.ignoreSupplementalCodecs, delete a.manifest.hls.ignoreSupplementalCodecs);
          a.manifest && a.manifest.dash && "updatePeriod" in a.manifest.dash && (Zc("manifest.dash.updatePeriod configuration", "Please Use manifest.updatePeriod instead."), a.manifest.updatePeriod = a.manifest.dash.updatePeriod, delete a.manifest.dash.updatePeriod);
          a.manifest && a.manifest.hls && "updatePeriod" in a.manifest.hls && (Zc("manifest.hls.updatePeriod configuration", "Please Use manifest.updatePeriod instead."), a.manifest.updatePeriod = a.manifest.hls.updatePeriod, delete a.manifest.hls.updatePeriod);
          a.manifest && a.manifest.dash && "ignoreDrmInfo" in a.manifest.dash && (Zc(
            "manifest.dash.ignoreDrmInfo configuration",
            "Please Use manifest.ignoreDrmInfo instead."
          ), a.manifest.ignoreDrmInfo = a.manifest.dash.ignoreDrmInfo, delete a.manifest.dash.ignoreDrmInfo);
          if (a.drm && a.drm.advanced) {
            d = false;
            for (var g in a.drm.advanced) {
              var h = a.drm.advanced[g];
              e = h.videoRobustness;
              h = h.audioRobustness;
              "videoRobustness" in a.drm.advanced[g] && !Array.isArray(a.drm.advanced[g].videoRobustness) && (a.drm.advanced[g].videoRobustness = [e], d = true);
              "audioRobustness" in a.drm.advanced[g] && !Array.isArray(a.drm.advanced[g].audioRobustness) && (a.drm.advanced[g].audioRobustness = [h], d = true);
            }
            d && Zc("AdvancedDrmConfiguration's videoRobustness and audioRobustness", "These properties are no longer strings but array of strings, please update your usage of these properties.");
          }
          a.streaming && "forceHTTP" in a.streaming && (Zc("streaming.forceHTTP configuration", "Please Use networking.forceHTTP instead."), a.networking = a.networking || {}, a.networking.forceHTTP = a.streaming.forceHTTP, delete a.streaming.forceHTTP);
          a.streaming && "forceHTTPS" in a.streaming && (Zc(
            "streaming.forceHTTPS configuration",
            "Please Use networking.forceHTTP instead."
          ), a.networking = a.networking || {}, a.networking.forceHTTPS = a.streaming.forceHTTPS, delete a.streaming.forceHTTPS);
          a.streaming && "minBytesForProgressEvents" in a.streaming && (Zc("streaming.minBytesForProgressEvents configuration", "Please Use networking.minBytesForProgressEvents instead."), a.networking = a.networking || {}, a.networking.minBytesForProgressEvents = a.streaming.minBytesForProgressEvents, delete a.streaming.minBytesForProgressEvents);
          g = bo(this.g, a, Kq(this));
          Zr(this, c);
          return g;
        };
        p.wk = function(a) {
          this.Dg = a;
        };
        function Zr(a, b) {
          a.Se = new ui(a.g, a.sa, a.F);
          if (a.I) {
            var c = Gd(a.g.manifest);
            a.h && a.h.nodeName === "AUDIO" && (c.disableVideo = true);
            a.I.configure(c);
          }
          a.F && a.F.configure(a.g.drm);
          if (a.m) {
            a.m.configure(a.g.streaming);
            try {
              a.l != Tq && wi(a.Se, a.i) && yr(a);
            } catch (e) {
              $q(a, e);
            }
            a.u && Cr(a);
            c = a.m.u;
            !c || c.allowedByApplication && c.allowedByKeySystem || Pq(a);
          }
          a.J && a.J.configure(a.g.networking);
          a.H && (a.H.configure(a.g.mediaSource), a.H.Fa = a.g.manifest.segmentRelativeVttTiming);
          a.A && rr(a);
          a.u && (a.u.configure(a.g.abr), a.g.abr.enabled ? a.u.enable() : a.u.disable(), Nr(a));
          a.P && Yr(a);
          a.Ma && (a.g.streaming.rebufferingGoal ? a.Ma.wa(0.25) : a.Ma.stop());
          a.i && Dr(a.i.presentationTimeline, a.g.playRangeStart, a.g.playRangeEnd);
          a.D && a.D.configure(a.g.ads);
          a.K && a.K.configure(a.g.cmcd);
          a.ra && a.ra.configure(a.g.cmsd);
          a.xa && a.xa.configure(a.g.queue);
          if (a.l == vr && a.M.getConfiguration) {
            c = a.M.getConfiguration();
            var d = false;
            b.preferredVideoHdrLevel != a.g.preferredVideoHdrLevel && c.hdrLevel != a.g.preferredVideoHdrLevel && (c.hdrLevel = a.g.preferredVideoHdrLevel, d = true);
            b.preferredVideoLayout != a.g.preferredVideoLayout && c.videoLayout != a.g.preferredVideoLayout && (c.videoLayout = a.g.preferredVideoLayout, d = true);
            b.preferSpatialAudio != a.g.preferSpatialAudio && c.spatialAudio != a.g.preferSpatialAudio && (c.spatialAudio = a.g.preferSpatialAudio, d = true);
            b.preferredVideoRole != a.g.preferredVideoRole && c.videoRole != a.g.preferredVideoRole && (c.videoRole = a.g.preferredVideoRole, d = true);
            d && (a.M.configure(c), Pq(a));
          }
        }
        p.getConfiguration = function() {
          var a = Kq(this);
          bo(a, this.g, Kq(this));
          return a;
        };
        p.Ik = function() {
          return this.Dg;
        };
        p.Zi = function() {
          var a = Kq(this);
          bo(a, this.g, Kq(this));
          return Cn(this.g, Kq(this));
        };
        p.Wi = function() {
          if (this.h) {
            var a = this.h.buffered.length;
            a = a ? this.h.buffered.end(a - 1) : 0;
            var b = this.getConfiguration().streaming.bufferingGoal;
            b = Math.min(this.h.currentTime + b, this.za().end);
            if (a >= b) return 1;
            if (!(a <= this.h.currentTime) && a < b) return (a - this.h.currentTime) / (b - this.h.currentTime);
          }
          return 0;
        };
        p.Bj = function() {
          var a = this.getConfiguration(), b;
          for (b in this.g) delete this.g[b];
          bo(this.g, Kq(this), Kq(this));
          Zr(this, a);
        };
        p.Sk = function() {
          return this.l;
        };
        p.sh = function() {
          return this.i ? this.i.type : null;
        };
        p.Zk = function() {
          return this.h;
        };
        p.Vb = function() {
          return this.J;
        };
        p.hd = function() {
          return this.V;
        };
        p.tf = function() {
          return this.D ? this.D : null;
        };
        p.vf = function() {
          return this.xa ? this.xa : null;
        };
        p.U = function() {
          return this.i && !this.Da() ? this.i.presentationTimeline.U() : this.h && (this.h.src || this.Da()) ? this.h.duration == Infinity : false;
        };
        p.ld = function() {
          return this.i ? this.i.presentationTimeline.ld() : false;
        };
        p.Ld = function() {
          if (this.i && !this.Da()) {
            var a = this.i.variants;
            return a.length ? !a[0].video : false;
          }
          return this.h && (this.h.src || this.Da()) ? this.h.videoTracks ? this.h.videoTracks.length == 0 : this.h.videoHeight == 0 : false;
        };
        p.Hh = function() {
          if (this.i && !this.Da()) {
            var a = this.i.variants;
            if (!a.length) return false;
            a = a[0];
            return a.audio || !a.video ? false : !a.video.codecs.includes(",");
          }
          return this.h && (this.h.src || this.Da()) && this.h.audioTracks ? this.h.audioTracks.length == 0 : false;
        };
        p.za = function() {
          if (this.i && !this.Da()) {
            if (!this.aa && this.i.type == "HLS") return { start: 0, end: 0 };
            var a = this.i.presentationTimeline;
            return { start: a.fc(), end: a.Mb() };
          }
          if (this.h && (this.h.src || this.Da()) && (a = this.h.seekable) && a.length) {
            var b = this.g ? this.g.playRangeStart : 0;
            b = Math.max(a.start(0), b);
            var c = this.g ? this.g.playRangeEnd : Infinity;
            a = Math.min(a.end(a.length - 1), c);
            return { start: b, end: a };
          }
          return { start: 0, end: 0 };
        };
        p.Al = function() {
          this.U() && (this.h.currentTime = this.za().end);
        };
        p.El = function() {
          return this.aa;
        };
        p.keySystem = function() {
          var a = this.drmInfo();
          return a ? a.keySystem : "";
        };
        p.drmInfo = function() {
          return this.F ? this.F.g : null;
        };
        p.me = function() {
          return this.F ? this.F.me() : Infinity;
        };
        p.nh = function() {
          return this.F ? this.F.nh() : [];
        };
        p.uf = function() {
          return this.F ? this.F.uf() : {};
        };
        p.Cf = function() {
          return this.P ? this.P.g == pi : !!this.V;
        };
        p.Za = function() {
          return this.h ? this.L ? this.L.i : 1 : 0;
        };
        p.zi = function(a) {
          this.l == vr && this.m && Um(this.m, a);
        };
        p.sc = function(a, b) {
          b = b === void 0 ? true : b;
          a == 0 ? ab("A trick play rate of 0 is unsupported!") : (this.L.set(a), this.l == vr && (this.u.playbackRateChanged(a), this.zi(b && a != 1)), wr(this, a));
        };
        p.Bd = function() {
          var a = this.L.jd();
          this.l == zr && this.L.set(a);
          this.l == vr && (this.L.set(a), this.u.playbackRateChanged(a), this.zi(false));
          this.kc.Sa();
        };
        p.Ob = function() {
          if (this.i && !this.Da()) {
            for (var a = this.m ? this.m.u : null, b = [], c = 0, d = u(this.i.variants), e = d.next(); !e.done; e = d.next()) if (e = e.value, jg(e)) {
              var f = bg(e);
              f.active = e == a;
              f.active || c == 1 || a == null || e.video != a.video || e.audio != a.audio || (f.active = true);
              f.active && c++;
              b.push(f);
            }
            return b;
          }
          if (this.h && this.h.audioTracks) {
            var g = $r(this);
            a = Array.from(this.h.audioTracks);
            return a.length ? a.map(function(h) {
              return ig(h, g);
            }) : g ? [ig(null, g)] : [];
          }
          return [];
        };
        p.yc = function() {
          if (this.i) {
            if (this.Da()) return [];
            for (var a = this.m ? this.m.C : null, b = [], c = u(this.i.textStreams), d = c.next(); !d.done; d = c.next()) {
              d = d.value;
              var e = cg(d);
              e.active = d == a;
              b.push(e);
            }
            return b;
          }
          return this.h && this.h.src && this.h.textTracks ? Rr(this).map(function(f) {
            return hg(f);
          }) : [];
        };
        p.qh = function() {
          var a = this.Ye;
          this.i && (a = this.i.imageStreams);
          return a.map(function(b) {
            return dg(b);
          });
        };
        p.zk = function(a) {
          var b = this, c, d;
          return Q(function(e) {
            if (e.g == 1) return F(e, as(b, a), 2);
            c = e.h;
            if (!c) return e.return(null);
            d = [];
            c.segmentIndex.Lb(function(f) {
              var g = bs(f.tilesLayout || c.tilesLayout);
              if (g) for (var h = g.rows * g.columns, k2 = f.j - f.startTime, l = 0; l < h; l++) {
                var m = cs(f, c, f.startTime + k2 * l / h, g);
                d.push(m);
              }
            });
            c.closeSegmentIndex && c.closeSegmentIndex();
            return e.return(d);
          });
        };
        function bs(a) {
          return a ? (a = /(\d+)x(\d+)/.exec(a)) ? { columns: parseInt(a[1], 10), rows: parseInt(a[2], 10) } : null : null;
        }
        p.$i = function(a, b) {
          var c = this, d, e, f, g;
          return Q(function(h) {
            if (h.g == 1) return F(h, as(c, a), 2);
            d = h.h;
            if (!d) return h.return(null);
            e = d.segmentIndex.find(b);
            if (e == null) return h.return(null);
            f = d.segmentIndex.get(e);
            return (g = bs(f.tilesLayout || d.tilesLayout)) ? h.return(cs(f, d, b, g)) : h.return(null);
          });
        };
        function as(a, b) {
          var c, d;
          return Q(function(e) {
            if (e.g == 1) {
              if (a.l != vr && a.l != zr) return e.return(null);
              c = a.Ye;
              a.i && (c = a.i.imageStreams);
              d = c[0];
              if (!d) return e.return(null);
              b != null && (d = c.find(function(f) {
                return f.id == b;
              }));
              return d ? d.segmentIndex ? e.B(2) : F(e, d.createSegmentIndex(), 2) : e.return(null);
            }
            return e.return(d);
          });
        }
        function cs(a, b, c, d) {
          var e = b.width || 0, f = b.height || 0, g = e / d.columns, h = f / d.rows, k2 = d.columns * d.rows, l = a.j - a.startTime;
          l = a.C || l / k2;
          var m = a.startTime, n = 0, q = 0;
          k2 > 1 && (q = Math.floor((c - a.startTime) / l), m = a.startTime + q * l, n = q % d.columns * g, q = Math.floor(q / d.columns) * h);
          d = false;
          if (c = a.thumbnailSprite) d = true, h = c.height, n = c.positionX, q = c.positionY, g = c.width;
          return { segment: a, imageHeight: f, imageWidth: e, height: h, positionX: n, positionY: q, startTime: m, duration: l, uris: a.T(), startByte: a.Tc(), endByte: a.Qc(), width: g, sprite: d, mimeType: a.mimeType || b.mimeType, codecs: a.codecs || b.codecs };
        }
        p.fg = function(a) {
          function b() {
            var d = c.i.textStreams.find(function(e) {
              return e.id == a.id;
            });
            d && d != c.m.C && (ho(c.C.h, d, false), Xm(c.m, d), xr(c), Mr(c), c.Ic = d.language);
          }
          var c = this;
          if (this.i && this.G && (b(), !this.Da())) return;
          (function() {
            if (c.h && c.h.textTracks) {
              var d = Rr(c), e = d.find(function(h) {
                return fg(h) === a.id;
              });
              if (e) {
                if (c.A instanceof Wo) {
                  d = u(d);
                  for (var f = d.next(); !f.done; f = d.next()) {
                    f = f.value;
                    var g = f === e ? c.X ? "showing" : "hidden" : "disabled";
                    f.mode !== g && (f.mode = g);
                  }
                } else d = d.find(function(h) {
                  return h.mode !== "disabled";
                }), d !== e && (d && (d.mode = "disabled", c.j.Ea(d, "cuechange"), c.A.remove(0, Infinity)), e && Ur(c, e));
                xr(c);
                Mr(c);
              }
            }
          })();
        };
        function Ur(a, b) {
          a.j.o(b, "cuechange", function() {
            a.A.remove(0, Math.max(0, a.h.currentTime - a.g.streaming.bufferBehind));
            var c = { periodStart: 0, segmentStart: 0, segmentEnd: a.h.duration, vttOffset: 0 }, d = [], e = Array.from(b.activeCues || []);
            e = u(e);
            for (var f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              if (f.endTime === Infinity || f.endTime < f.startTime) f = null;
              else {
                var g = new re(f.startTime, f.endTime, f.text);
                g.line = typeof f.line === "number" ? f.line : null;
                f.lineAlign && (g.lineAlign = f.lineAlign);
                g.lineInterpretation = f.snapToLines ? we : 1;
                g.position = typeof f.position === "number" ? f.position : null;
                f.positionAlign && (g.positionAlign = f.positionAlign);
                g.size = f.size;
                g.textAlign = f.align;
                f.vertical === "lr" ? g.writingMode = "vertical-lr" : f.vertical === "rl" && (g.writingMode = "vertical-rl");
                f.region && (g.region.id = f.region.id, g.region.height = f.region.lines, g.region.heightUnits = 2, g.region.regionAnchorX = f.region.regionAnchorX, g.region.regionAnchorY = f.region.regionAnchorY, g.region.scroll = f.region.scroll, g.region.viewportAnchorX = f.region.viewportAnchorX, g.region.viewportAnchorY = f.region.viewportAnchorY, g.region.viewportAnchorUnits = ud, g.region.width = f.region.width, g.region.widthUnits = ud);
                De(g);
                f = g;
              }
              f && ((g = a.g.mediaSource.modifyCueCallback) && g(f, null, c), d.push(f));
            }
            a.A.append(d);
          });
          b.mode = document.pictureInPictureElement ? "showing" : "hidden";
        }
        p.Ge = function(a, b, c) {
          function d() {
            var f = e.i.variants.find(function(h) {
              return h.id == a.id;
            });
            if (f && jg(f)) {
              var g = e.m.u;
              e.g.abr.enabled && (g.video != f.video || g.audio && f.audio && g.audio.language == f.audio.language && g.audio.channelsCount == f.audio.channelsCount && g.audio.label == f.audio.label) && ab("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack().");
              e.Da() ? Er(e, f, false, false, 0) : Er(e, f, false, b || false, c || 0);
              e.M.configure({
                language: f.language,
                role: f.audio && f.audio.roles && f.audio.roles[0] || "",
                videoRole: f.video && f.video.roles && f.video.roles[0] || "",
                channelCount: f.audio && f.audio.channelsCount ? f.audio.channelsCount : 0,
                hdrLevel: f.video && f.video.hdr ? f.video.hdr : "",
                spatialAudio: f.audio && f.audio.spatialAudio ? f.audio.spatialAudio : false,
                videoLayout: f.video && f.video.videoLayout ? f.video.videoLayout : "",
                audioLabel: f.audio && f.audio.label ? f.audio.label : "",
                videoLabel: f.video && f.video.label ? f.video.label : "",
                codecSwitchingStrategy: e.g.mediaSource.codecSwitchingStrategy,
                audioCodec: f.audio && f.audio.codecs ? f.audio.codecs : "",
                activeAudioCodec: g.audio && g.audio.codecs ? g.audio.codecs : "",
                activeAudioChannelCount: g.audio && g.audio.channelsCount ? g.audio.channelsCount : 0,
                preferredAudioCodecs: e.g.preferredAudioCodecs,
                preferredAudioChannelCount: e.g.preferredAudioChannelCount
              });
              Cr(e);
            }
          }
          var e = this;
          b = b === void 0 ? false : b;
          c = c === void 0 ? 0 : c;
          if (this.i && this.G && (d(), !this.Da())) return;
          (function() {
            if (a.originalAudioId && e.h && e.h.audioTracks) {
              var f = Array.from(e.h.audioTracks);
              f = u(f);
              for (var g = f.next(); !g.done; g = f.next()) if (g = g.value, fg(g) == a.id) {
                ds(e, g);
                break;
              }
            }
          })();
        };
        p.Hj = function(a, b) {
          function c() {
            var e = d.M.getConfiguration();
            e.audioCodec = a.codecs || "";
            e.audioLabel = a.label || "";
            e.channelCount = a.channelsCount || 0;
            e.language = a.language;
            e.role = a.roles[0] || "";
            e.spatialAudio = a.spatialAudio;
            d.M.configure(e);
            Pq(d, true, b, false, false);
          }
          var d = this;
          b = b === void 0 ? 0 : b;
          if (this.i && this.G && (c(), !this.Da())) return;
          (function() {
            if (d.h && d.h.audioTracks) {
              var e = yc(a.language), f = Array.from(d.h.audioTracks), g = null;
              f = u(f);
              for (var h = f.next(); !h.done; h = f.next()) {
                h = h.value;
                var k2 = h.language || "und";
                if (h.label == a.label && yc(k2) == e && h.kind == a.roles[0]) {
                  g = h;
                  break;
                }
              }
              g && ds(d, g);
            }
          })();
        };
        p.getAudioTracks = function() {
          if (this.i && !this.Da()) {
            var a = this.Ob();
            if (!a.length) return [];
            var b = a.find(function(f) {
              return f.active;
            });
            if (!b) return [];
            var c = a;
            this.l != vr || this.Da() || (c = a.filter(function(f) {
              return f.originalVideoId === b.originalVideoId && f.audioCodec;
            }));
            if (!c.length) return [];
            a = /* @__PURE__ */ new Map();
            c = u(c);
            for (var d = c.next(); !d.done; d = c.next()) {
              d = d.value;
              var e = d.originalAudioId;
              e || d.audioId == null || (e = String(d.audioId));
              e && (e += [d.language, d.label, d.channelsCount, d.spatialAudio].join("_"), a.set(e, {
                active: d.active,
                language: d.language,
                label: d.label,
                mimeType: d.audioMimeType,
                codecs: d.audioCodec,
                primary: d.primary,
                roles: d.audioRoles || [],
                accessibilityPurpose: d.accessibilityPurpose,
                channelsCount: d.channelsCount,
                audioSamplingRate: d.audioSamplingRate,
                spatialAudio: d.spatialAudio,
                originalLanguage: d.originalLanguage
              }));
            }
            return Array.from(a.values());
          }
          return this.h && this.h.audioTracks ? Array.from(this.h.audioTracks).map(function(f) {
            var g = f.language;
            g = {
              active: f.enabled,
              language: yc(g || "und"),
              label: f.label,
              mimeType: null,
              codecs: null,
              primary: f.kind == "main",
              roles: [],
              accessibilityPurpose: null,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: false,
              originalLanguage: g
            };
            f.kind && g.roles.push(f.kind);
            f.configuration && (f.configuration.codec && (g.codecs = f.configuration.codec), f.configuration.sampleRate && (g.audioSamplingRate = f.configuration.sampleRate), f.configuration.numberOfChannels && (g.channelsCount = f.configuration.numberOfChannels));
            return g;
          }) : [];
        };
        p.Ij = function(a, b, c) {
          b = b === void 0 ? false : b;
          c = c === void 0 ? 0 : c;
          var d = this.Ob();
          if (d.length) {
            var e = d.find(function(f) {
              return f.active;
            });
            e && (d = d.find(function(f) {
              return f.audioId === e.audioId && (f.videoBandwidth || f.bandwidth) == a.bandwidth && f.width == a.width && f.height == a.height && f.frameRate == a.frameRate && f.pixelAspectRatio == a.pixelAspectRatio && f.hdr == a.hdr && f.colorGamut == a.colorGamut && f.videoLayout == a.videoLayout && f.videoMimeType == a.mimeType && f.videoCodec == a.codecs && Sc(f.videoRoles, a.roles) && f.videoLabel == a.label;
            })) && !d.active && this.Ge(d, b, c);
          }
        };
        p.getVideoTracks = function() {
          if (this.l == zr || this.Da()) return [];
          var a = this.Ob();
          if (!a.length) return [];
          var b = a.find(function(f) {
            return f.active;
          });
          if (!b) return [];
          var c = a.filter(function(f) {
            return f.originalAudioId === b.originalAudioId && f.audioId === b.audioId && f.audioGroupId === b.audioGroupId && f.videoCodec;
          });
          if (!c.length) return [];
          a = /* @__PURE__ */ new Map();
          c = u(c);
          for (var d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            var e = d.originalVideoId;
            e || d.videoId == null || (e = String(d.videoId));
            e && a.set(e, { active: d.active, bandwidth: d.videoBandwidth || d.bandwidth, width: d.width, height: d.height, frameRate: d.frameRate, pixelAspectRatio: d.pixelAspectRatio, hdr: d.hdr, colorGamut: d.colorGamut, videoLayout: d.videoLayout, mimeType: d.videoMimeType, codecs: d.videoCodec, roles: d.videoRoles || [], label: d.videoLabel });
          }
          return Array.from(a.values());
        };
        p.Bk = function() {
          return es(this.Ob());
        };
        p.ol = function() {
          return es(this.yc());
        };
        p.Ak = function() {
          return Array.from(fs(this.Ob()));
        };
        p.ll = function() {
          return Array.from(fs(this.yc()));
        };
        p.Gj = function(a, b, c, d, e, f, g) {
          function h() {
            function l(t, w) {
              return t.video || w.video ? t.video && w.video ? Math.abs((t.video.height || 0) - (w.video.height || 0)) + Math.abs((t.video.width || 0) - (w.video.width || 0)) : Infinity : 0;
            }
            var m = k2.m.u;
            k2.M = k2.g.adaptationSetCriteriaFactory();
            k2.M.configure({
              language: a,
              role: b || "",
              videoRole: m.video && m.video.roles && m.video.roles[0] || "",
              channelCount: c || 0,
              hdrLevel: "",
              spatialAudio: f || false,
              videoLayout: "",
              audioLabel: g || "",
              videoLabel: "",
              codecSwitchingStrategy: k2.g.mediaSource.codecSwitchingStrategy,
              audioCodec: e || "",
              activeAudioCodec: m.audio && m.audio.codecs ? m.audio.codecs : "",
              activeAudioChannelCount: m.audio && m.audio.channelsCount ? m.audio.channelsCount : 0,
              preferredAudioCodecs: k2.g.preferredAudioCodecs,
              preferredAudioChannelCount: k2.g.preferredAudioChannelCount
            });
            var n = k2.M.create(k2.i.variants), q = null;
            n = u(n.values());
            for (var r = n.next(); !r.done; r = n.next()) r = r.value, jg(r) && (!q || l(q, m) > l(r, m)) && (q = r);
            q != m && (q ? (m = bg(q), k2.Ge(m, true, d || 0)) : Pq(k2));
          }
          var k2 = this;
          c = c === void 0 ? 0 : c;
          d = d === void 0 ? 0 : d;
          e = e === void 0 ? "" : e;
          f = f === void 0 ? false : f;
          g = g === void 0 ? "" : g;
          if (this.i && this.G && (h(), !this.Da())) return;
          (function() {
            if (k2.h && k2.h.audioTracks) {
              var l = lg(k2.Ob(), a, b || "", false)[0];
              l && k2.Ge(l);
            }
          })();
        };
        p.ai = function(a, b, c) {
          function d() {
            e.Ic = a;
            e.be = b || "";
            e.Re = c || false;
            var f = lg(e.i.textStreams, e.Ic, e.be, e.Re)[0] || null;
            f && f != e.m.C && (ho(e.C.h, f, false), e.g.streaming.alwaysStreamText || e.Xc()) && (Xm(e.m, f), xr(e), Mr(e));
          }
          var e = this;
          c = c === void 0 ? false : c;
          if (this.i && this.G && (d(), !this.Da())) return;
          (function() {
            var f = lg(e.yc(), a, b || "", c || false)[0];
            f && e.fg(f);
          })();
        };
        p.qm = function(a, b, c) {
          function d() {
            for (var f = null, g = u(e.i.variants), h = g.next(); !h.done; h = g.next()) if (h = h.value, h.audio.label == a) {
              f = h;
              break;
            }
            f != null && (e.M = e.g.adaptationSetCriteriaFactory(), e.M.configure({ language: f.language, role: "", videoRole: "", channelCount: 0, hdrLevel: "", spatialAudio: false, videoLayout: "", videoLabel: "", audioLabel: a, codecSwitchingStrategy: e.g.mediaSource.codecSwitchingStrategy, audioCodec: "", activeAudioCodec: "", activeAudioChannelCount: 0, preferredAudioCodecs: e.g.preferredAudioCodecs, preferredAudioChannelCount: e.g.preferredAudioChannelCount }), Pq(e, b, c));
          }
          var e = this;
          b = b === void 0 ? true : b;
          c = c === void 0 ? 0 : c;
          if (this.i && this.G && (d(), !this.Da())) return;
          (function() {
            if (e.h && e.h.audioTracks) {
              var f = Array.from(e.h.audioTracks), g = null;
              f = u(f);
              for (var h = f.next(); !h.done; h = f.next()) h = h.value, h.label == a && (g = h);
              g && ds(e, g);
            }
          })();
        };
        p.Xc = function() {
          var a = this.X;
          return this.A ? this.A.isTextVisible() : a;
        };
        p.Fk = function() {
          return this.ib.map(function(a) {
            return cg(a);
          });
        };
        p.Ek = function(a) {
          Zc("getChapters", "Please use an getChaptersAsync.");
          if (!this.ib.length) return [];
          var b = yc(a);
          a = this.ib.filter(function(f) {
            return yc(f.language) == b;
          });
          if (!a.length) return [];
          var c = [], d = /* @__PURE__ */ new Set();
          a = u(a);
          for (var e = a.next(); !e.done; e = a.next()) e = e.value, e.segmentIndex && e.segmentIndex.Lb(function(f) {
            var g = f.T()[0], h = f.startTime + "-" + f.endTime + "-" + g;
            f = { id: h, title: g, startTime: f.startTime, endTime: f.endTime };
            d.has(h) || (c.push(f), d.add(h));
          });
          return c;
        };
        p.oh = function(a) {
          var b = this, c, d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                if (!b.ib.length) return l.return([]);
                c = yc(a);
                d = b.ib.filter(function(m) {
                  return yc(m.language) == c;
                });
                if (!d.length) return l.return([]);
                e = [];
                f = /* @__PURE__ */ new Set();
                g = u(d);
                h = g.next();
              case 2:
                if (h.done) {
                  l.B(4);
                  break;
                }
                k2 = h.value;
                if (k2.segmentIndex) {
                  l.B(5);
                  break;
                }
                return F(l, k2.createSegmentIndex(), 5);
              case 5:
                k2.segmentIndex.Lb(function(m) {
                  var n = m.T()[0], q = m.startTime + "-" + m.endTime + "-" + n;
                  m = { id: q, title: n, startTime: m.startTime, endTime: m.endTime };
                  f.has(q) || (e.push(m), f.add(q));
                });
                h = g.next();
                l.B(2);
                break;
              case 4:
                return l.return(e);
            }
          });
        };
        function Rr(a) {
          return Array.from(a.h.textTracks).filter(function(b) {
            return b.kind != "metadata" && b.kind != "chapters" && b.label != "Shaka Player TextTrack";
          });
        }
        function Sr(a) {
          return Array.from(a.h.textTracks).find(function(b) {
            return b.label == "Shaka Player TextTrack";
          });
        }
        function Wr(a) {
          return Array.from(a.h.textTracks).filter(function(b) {
            return b.kind == "metadata";
          });
        }
        p.Zd = function(a) {
          a = !!a;
          this.X != a && (this.X = a, this.l == vr ? (this.A.setTextVisibility(a), this.g.streaming.alwaysStreamText || (a ? this.m.C || (a = lg(this.i.textStreams, this.Ic, this.be, this.Re), a.length > 0 && (Xm(this.m, a[0]), xr(this), Mr(this))) : Tm(this.m))) : this.h && this.h.src && this.h.textTracks && this.A.setTextVisibility(a), Lr(this));
        };
        p.$k = function() {
          if (this.G) var a = this.G.$e();
          else {
            if (this.O == null) return /* @__PURE__ */ new Date();
            if (this.O instanceof Date) return this.O;
            a = this.O;
          }
          if (this.i && !this.Da()) {
            var b = this.i.presentationTimeline;
            return new Date(((b.m || b.i) + a) * 1e3);
          }
          return this.h && this.h.getStartDate ? (b = this.h.getStartDate(), isNaN(b.getTime()) ? null : new Date(b.getTime() + a * 1e3)) : null;
        };
        p.uh = function() {
          if (this.i && !this.Da()) {
            var a = this.i.presentationTimeline;
            a = a.m || a.i;
            return a === null ? null : new Date(a * 1e3);
          }
          return this.h && this.h.getStartDate ? (a = this.h.getStartDate(), isNaN(a.getTime()) ? null : a) : null;
        };
        p.xf = function() {
          return this.U() ? this.i ? this.i.presentationTimeline.xf() : null : null;
        };
        p.Pc = function() {
          if (this.l == vr) return this.H.Pc();
          var a = { total: [], audio: [], video: [], text: [] };
          this.l == zr && (a.total = Hj(this.h.buffered));
          return a;
        };
        function Aq(a) {
          if (!a.h || !a.h.currentTime) return null;
          a = a.uh().getTime() + a.h.currentTime * 1e3;
          return Math.floor(Date.now() - a);
        }
        p.getBandwidthEstimate = function() {
          return this.u ? this.u.getBandwidthEstimate() : NaN;
        };
        p.getStats = function() {
          if (this.l != vr && this.l != zr) return {
            width: NaN,
            height: NaN,
            currentCodecs: "",
            streamBandwidth: NaN,
            decodedFrames: NaN,
            droppedFrames: NaN,
            corruptedFrames: NaN,
            stallsDetected: NaN,
            gapsJumped: NaN,
            estimatedBandwidth: NaN,
            completionPercent: NaN,
            loadLatency: NaN,
            manifestTimeSeconds: NaN,
            drmTimeSeconds: NaN,
            playTime: NaN,
            pauseTime: NaN,
            bufferingTime: NaN,
            licenseTime: NaN,
            liveLatency: NaN,
            maxSegmentDuration: NaN,
            manifestSizeBytes: NaN,
            bytesDownloaded: NaN,
            nonFatalErrorCount: NaN,
            manifestPeriodCount: NaN,
            manifestGapCount: NaN,
            switchHistory: [],
            stateHistory: []
          };
          ur(this);
          var a = this.h, b = a.currentTime / a.duration;
          isNaN(b) || this.U() || lo(this.C, Math.round(100 * b));
          this.G && (this.C.R = this.G.Ai(), this.C.S = this.G.Ci());
          a.getVideoPlaybackQuality && (b = a.getVideoPlaybackQuality(), jo(this.C, Number(b.droppedVideoFrames), Number(b.totalVideoFrames)), this.C.M = Number(b.corruptedVideoFrames));
          this.C.u = this.F ? ai(this.F) : NaN;
          ko(this.C, a.videoWidth || NaN, a.videoHeight || NaN);
          this.C.l = "";
          this.U() && this.uh() != null && (a = Aq(this) || 0, this.C.F = a / 1e3);
          b = this.Ob().find(function(e) {
            return e.active;
          });
          a = this.yc().find(function(e) {
            return e.active;
          });
          if (b) {
            if (b.bandwidth) {
              var c = this.L ? this.L.i : 1, d = c * b.bandwidth;
              a && a.bandwidth && (d += c * a.bandwidth);
              this.C.C = d;
            }
            b.width && b.height && ko(this.C, b.width || NaN, b.height || NaN);
            b = b.codecs;
            a && (b += "," + (a.codecs || a.mimeType));
            b && (this.C.l = b);
          }
          this.l != vr || this.Da() || (this.i && (this.C.I = this.i.periodCount, this.C.H = this.i.gapCount, this.i.presentationTimeline && (this.C.K = this.i.presentationTimeline.h)), a = this.u.getBandwidthEstimate(), this.C.A = a);
          this.l == zr && mo(this.C, NaN);
          return no(this.C);
        };
        p.ee = function(a, b, c, d, e, f, g) {
          g = g === void 0 ? false : g;
          var h = this, k2, l, m, n, q, r, t, w, v, z, y, A;
          return Q(function(C) {
            switch (C.g) {
              case 1:
                if (h.l != vr && h.l != zr) throw new U(1, 7, 7004);
                c != "subtitles" && c != "captions" && ab("Using a kind value different of `subtitles` or `captions` can cause unwanted issues.");
                if (d) {
                  C.B(2);
                  break;
                }
                return F(C, gs(h, a), 3);
              case 3:
                d = C.h;
              case 2:
                k2 = [];
                h.D && (k2 = h.D.getCuePoints());
                if (h.l != zr) {
                  C.B(4);
                  break;
                }
                l = Rb();
                g && l.Ja() === "WEBKIT" && (c = "forced");
                return F(C, hs(h, a, b, c, d, f || "", k2), 5);
              case 5:
                m = C.h;
                if (m.track) return yr(h), C.return(hg(m.track));
                throw new U(1, 2, 2012);
              case 4:
                n = uc;
                q = h.za();
                r = q.end - q.start;
                h.i && (r = h.i.presentationTimeline.getDuration());
                if (r == Infinity) throw new U(1, 4, 4033);
                if (!k2.length) {
                  C.B(6);
                  break;
                }
                return F(C, is(h, a, h.J, h.g.streaming.retryParameters), 7);
              case 7:
                t = C.h, w = js(h, t, d, k2), v = new Blob([w], { type: "text/vtt" }), a = zk(v), d = "text/vtt";
              case 6:
                z = {
                  id: h.Te++,
                  originalId: null,
                  groupId: null,
                  createSegmentIndex: function() {
                    return Promise.resolve();
                  },
                  segmentIndex: Zl(0, r, [a]),
                  mimeType: d || "",
                  codecs: e || "",
                  kind: c,
                  encrypted: false,
                  drmInfos: [],
                  keyIds: /* @__PURE__ */ new Set(),
                  language: b,
                  originalLanguage: b,
                  label: f || null,
                  type: n.Va,
                  primary: false,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: !!g,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: false,
                  closedCaptions: null,
                  accessibilityPurpose: null,
                  external: true,
                  fastSwitching: false,
                  fullMimeTypes: /* @__PURE__ */ new Set([df(d || "", e || "")]),
                  isAudioMuxedInVideo: false,
                  baseOriginalId: null
                };
                y = df(z.mimeType, z.codecs);
                A = tf(y);
                if (!A) throw new U(2, 2, 2014, d);
                h.i.textStreams.push(z);
                yr(h);
                return C.return(cg(z));
            }
          });
        };
        p.ef = function(a, b) {
          var c = this, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C;
          return Q(function(E) {
            switch (E.g) {
              case 1:
                if (c.l != vr && c.l != zr) throw new U(1, 7, 7004);
                if (b) {
                  E.B(2);
                  break;
                }
                return F(E, gs(c, a), 3);
              case 3:
                b = E.h;
              case 2:
                if (b != "text/vtt") throw new U(1, 2, 2017, a);
                d = uc;
                e = c.za();
                f = e.end - e.start;
                c.i && (f = c.i.presentationTimeline.getDuration());
                if (f == Infinity) throw new U(1, 4, 4045);
                return F(E, is(c, a, c.J, c.g.streaming.retryParameters), 4);
              case 4:
                g = E.h;
                h = sf(b);
                if (!h) throw new U(2, 2, 2014, b);
                k2 = h();
                l = {
                  periodStart: 0,
                  segmentStart: 0,
                  segmentEnd: f,
                  vttOffset: 0
                };
                m = Kb(g);
                n = k2.parseMedia(m, l, a, []);
                q = [];
                r = u(n);
                t = r.next();
                for (w = {}; !t.done; w = { wg: void 0, Ed: void 0 }, t = r.next()) w.Ed = t.value, w.wg = null, v = /* @__PURE__ */ function(D) {
                  return function() {
                    D.wg == null && (D.wg = mc([a], [D.Ed.payload]));
                    return D.wg || [];
                  };
                }(w), z = new yj(w.Ed.startTime, w.Ed.endTime, v, 0, null, null, 0, 0, Infinity), w.Ed.payload.includes("#xywh") && (y = w.Ed.payload.split("#xywh=")[1].split(","), y.length === 4 && z.jg({ height: parseInt(y[3], 10), positionX: parseInt(y[0], 10), positionY: parseInt(y[1], 10), width: parseInt(
                  y[2],
                  10
                ) })), q.push(z);
                A = b;
                if (!q.length) {
                  E.B(5);
                  break;
                }
                return F(E, Jo(q[0].T()[0], c.J, c.g.manifest.retryParameters), 6);
              case 6:
                A = E.h;
              case 5:
                return C = {
                  id: c.Te++,
                  originalId: null,
                  groupId: null,
                  createSegmentIndex: function() {
                    return Promise.resolve();
                  },
                  segmentIndex: new Xl(q),
                  mimeType: A || "",
                  codecs: "",
                  kind: "",
                  encrypted: false,
                  drmInfos: [],
                  keyIds: /* @__PURE__ */ new Set(),
                  language: "und",
                  originalLanguage: null,
                  label: null,
                  type: d.yg,
                  primary: false,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: false,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: false,
                  closedCaptions: null,
                  tilesLayout: "1x1",
                  accessibilityPurpose: null,
                  external: true,
                  fastSwitching: false,
                  fullMimeTypes: /* @__PURE__ */ new Set([df(A || "", "")]),
                  isAudioMuxedInVideo: false,
                  baseOriginalId: null
                }, c.l == zr ? c.Ye.push(C) : c.i.imageStreams.push(C), yr(c), E.return(dg(C));
            }
          });
        };
        p.df = function(a, b, c) {
          var d = this, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y;
          return Q(function(A) {
            switch (A.g) {
              case 1:
                if (d.l != vr && d.l != zr) throw new U(1, 7, 7004);
                if (c) {
                  A.B(2);
                  break;
                }
                return F(A, gs(d, a), 3);
              case 3:
                c = A.h;
              case 2:
                e = uc;
                f = d.za();
                g = f.end - f.start;
                d.i && (g = d.i.presentationTimeline.getDuration());
                if (g == Infinity) throw new U(1, 4, 4054);
                return F(A, is(d, a, d.J, d.g.streaming.retryParameters), 4);
              case 4:
                h = A.h;
                k2 = sf(c);
                if (!k2) throw new U(2, 2, 2014, c);
                l = k2();
                m = { periodStart: 0, segmentStart: 0, segmentEnd: g, vttOffset: 0 };
                n = Kb(h);
                q = l.parseMedia(n, m, a, []);
                r = [];
                t = u(q);
                w = t.next();
                for (v = {}; !w.done; v = { pf: void 0 }, w = t.next()) v.pf = w.value, z = new yj(v.pf.startTime, v.pf.endTime, /* @__PURE__ */ function(C) {
                  return function() {
                    return [C.pf.payload];
                  };
                }(v), 0, null, null, 0, 0, Infinity), r.push(z);
                y = {
                  id: d.Te++,
                  originalId: null,
                  groupId: null,
                  createSegmentIndex: function() {
                    return Promise.resolve();
                  },
                  segmentIndex: new Xl(r),
                  mimeType: "text/plain",
                  codecs: "",
                  kind: "",
                  encrypted: false,
                  drmInfos: [],
                  keyIds: /* @__PURE__ */ new Set(),
                  language: b,
                  originalLanguage: b,
                  label: null,
                  type: e.Va,
                  primary: false,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: false,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: false,
                  closedCaptions: null,
                  accessibilityPurpose: null,
                  external: true,
                  fastSwitching: false,
                  fullMimeTypes: /* @__PURE__ */ new Set([df("text/plain", "")]),
                  isAudioMuxedInVideo: false,
                  baseOriginalId: null
                };
                d.ib.push(y);
                yr(d);
                return A.return(cg(y));
            }
          });
        };
        function gs(a, b) {
          var c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                return ra(d, 2), F(d, Jo(b, a.J, a.g.streaming.retryParameters), 4);
              case 4:
                c = d.h;
                ta(d, 3);
                break;
              case 2:
                ua(d);
              case 3:
                if (c) return d.return(c);
                throw new U(1, 2, 2011, b);
            }
          });
        }
        function hs(a, b, c, d, e, f, g) {
          var h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) return e != "text/vtt" || g.length ? F(n, is(a, b, a.J, a.g.streaming.retryParameters), 3) : n.B(2);
            n.g != 2 && (h = n.h, k2 = js(a, h, e, g), l = new Blob([k2], { type: "text/vtt" }), b = zk(l), e = "text/vtt");
            m = document.createElement("track");
            a: {
              var q = a.K, r = b;
              try {
                if (!q.g.enabled) {
                  var t = r;
                  break a;
                }
                var w = yp(q);
                w.ot = tq;
                w.su = true;
                var v = Cp(w);
                t = Dp(r, v);
                break a;
              } catch (z) {
                bb("CMCD_TEXT_TRACK_ERROR", "Could not generate text track CMCD data.", z);
                t = r;
                break a;
              }
              t = void 0;
            }
            m.src = t;
            m.label = f;
            m.kind = d;
            m.srclang = c;
            a.h.getAttribute("crossorigin") || a.h.setAttribute("crossorigin", "anonymous");
            a.h.appendChild(m);
            a.Cg.push(m);
            return n.return(m);
          });
        }
        function is(a, b, c, d) {
          var e, f, g;
          return Q(function(h) {
            if (h.g == 1) {
              e = fh;
              f = $g([b], d);
              f.method = "GET";
              var k2 = a.K;
              try {
                k2.g.enabled && Sp(k2, f, { ot: tq, su: true });
              } catch (l) {
                bb("CMCD_TEXT_ERROR", "Could not generate text CMCD data.", l);
              }
              return F(h, c.request(e, f).promise, 2);
            }
            g = h.h;
            return h.return(g.data);
          });
        }
        function js(a, b, c, d) {
          var e = sf(c);
          if (e) return c = e(), a = { periodStart: 0, segmentStart: 0, segmentEnd: a.h.duration, vttOffset: 0 }, b = Kb(b), b = c.parseMedia(b, a, null, []), kp(b, d);
          throw new U(2, 2, 2014, c);
        }
        p.wm = function(a, b) {
          this.sa.width = a;
          this.sa.height = b;
        };
        p.Xh = function(a) {
          if (this.l == vr) {
            var b = this.m;
            a = a === void 0 ? 0.1 : a;
            if (b.l.g) b = false;
            else if (b.D) b = false;
            else {
              for (var c = u(b.h.values()), d = c.next(); !d.done; d = c.next()) d = d.value, !d.qe || d.Ra || d.Ab || (d.qe = false, Sm(b, d, a));
              b = true;
            }
          } else b = false;
          return b;
        };
        p.rh = function() {
          ab("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.");
          return this.i;
        };
        p.Wk = function() {
          return this.Ec;
        };
        p.Ok = function() {
          var a = { video: null, audio: null, text: null };
          if (this.l != vr) return a;
          var b = this.m.u, c = this.h.currentTime;
          b = u([b.video, b.audio, this.m.C]);
          for (var d = b.next(); !d.done; d = b.next()) if ((d = d.value) && d.segmentIndex) {
            var e = d.segmentIndex.find(c);
            e = d.segmentIndex.get(e);
            e = { codecs: e.codecs || d.codecs, mimeType: e.mimeType || d.mimeType, bandwidth: e.bandwidth || d.bandwidth };
            d.type == "video" ? (e.width = d.width, e.height = d.height, a.video = e) : d.type == "audio" ? a.audio = e : d.type == sc && (a.text = e);
          }
          return a;
        };
        function Kq(a) {
          var b = Xn();
          b.streaming.failureCallback = function(c) {
            if (a.U()) {
              var d = null;
              c.code == 1001 || c.code == 1002 ? (d = 1, a.g.streaming.lowLatencyMode && (d = 0.1)) : c.code == 1003 && (d = 0.1);
              d != null && (c.severity = 1, a.Xh(d));
            }
          };
          b.textDisplayFactory = function() {
            if (a.Oe) {
              var c = a.h;
              c = c.webkitDisplayingFullscreen || c.webkitPresentationMode && c.webkitPresentationMode != "inline" ? false : true;
            } else c = false;
            return c ? new ap(a.h, a.Oe) : "track" in document.createElement("track") ? new Wo(a) : new $o();
          };
          return b;
        }
        p.ji = function(a) {
          this.Oe = a;
        };
        function mr(a, b) {
          for (var c = /* @__PURE__ */ new Set(), d = u(b.textStreams), e = d.next(); !e.done; e = d.next()) e = e.value, e.mimeType != "application/cea-608" && e.mimeType != "application/cea-708" || c.add(e.originalId);
          d = u(b.variants);
          for (e = d.next(); !e.done; e = d.next()) if ((e = e.value.video) && e.closedCaptions) {
            for (var f = u(e.closedCaptions.keys()), g = f.next(); !g.done; g = f.next()) if (g = g.value, !c.has(g)) {
              var h = g.startsWith("CC") ? "application/cea-608" : "application/cea-708", k2 = new $l(), l = e.closedCaptions.get(g);
              h = {
                id: a.Te++,
                originalId: g,
                groupId: null,
                createSegmentIndex: function() {
                  return Promise.resolve();
                },
                segmentIndex: k2,
                mimeType: h,
                codecs: "",
                kind: "caption",
                encrypted: false,
                drmInfos: [],
                keyIds: /* @__PURE__ */ new Set(),
                language: l,
                originalLanguage: l,
                label: null,
                type: sc,
                primary: false,
                trickModeVideo: null,
                dependencyStream: null,
                emsgSchemeIdUris: null,
                roles: e.roles,
                forced: false,
                channelsCount: null,
                audioSamplingRate: null,
                spatialAudio: false,
                closedCaptions: null,
                accessibilityPurpose: null,
                external: false,
                fastSwitching: false,
                fullMimeTypes: /* @__PURE__ */ new Set([df(h, "")]),
                isAudioMuxedInVideo: false,
                baseOriginalId: null
              };
              b.textStreams.push(h);
              c.add(g);
            }
          }
        }
        function Kr(a, b) {
          var c, d, e, f, g;
          return Q(function(h) {
            if (h.g == 1) return c = a.audio, d = a.video, e = function(k2, l) {
              var m, n, q;
              return Q(function(r) {
                if (r.g == 1) return k2 ? k2.segmentIndex ? r.B(2) : F(r, k2.createSegmentIndex(), 2) : r.return(null);
                n = (m = k2.segmentIndex.ec(l)) ? m.next().value : null;
                if (!n) return r.return(null);
                q = n.startTime;
                return r.return(q);
              });
            }, F(h, e(c, b), 2);
            if (h.g != 3) return f = h.h, F(h, e(d, b), 3);
            g = h.h;
            return g != null && f != null ? h.return(Math.max(g, f)) : g != null ? h.return(g) : f != null ? h.return(f) : h.return(b);
          });
        }
        function br(a) {
          var b = a.Cf();
          if (a.C && a.P && a.G) {
            if (a.g.streaming.rebufferingGoal == 0) {
              var c = a.L;
              c.j = false;
              dm(c);
            } else c = a.L, c.j = b, dm(c);
            a.K && (c = a.K, b || c.D || (c.D = true), c.D && b && (c.I = true, wp(c, "ps", { td: "r" })), c.J = b);
            ur(a);
            c = a.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
            if (a.g.streaming.liveSync.dynamicTargetLatency.enabled && b && a.cf < c) {
              c = a.g.streaming.liveSync.dynamicTargetLatency.maxLatency;
              var d = a.g.streaming.liveSync.targetLatencyTolerance, e = a.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;
              a.S && (a.S = Math.min(a.S + ++a.cf * e, c - d));
            }
          }
          b = (/* @__PURE__ */ new Map()).set("buffering", b);
          a.dispatchEvent(Sq("buffering", b));
        }
        function wr(a, b) {
          a.kc.Sa();
          a.kc.o(a.h, "timeupdate", function() {
            var c = a.h.currentTime, d = a.za(), e = a.U(), f = e ? a.g.streaming.safeSeekOffset : 0;
            b > 0 ? (!e || b >= 1) && Math.floor(c) >= Math.floor(d.end) && a.Bd() : Math.floor(c) <= Math.floor(d.start + f) && a.Bd();
          });
        }
        function ur(a) {
          if (a.C && a.P) {
            var b = a.C.g, c = "playing";
            a.P.g == pi ? c = "buffering" : a.isEnded() ? c = "ended" : a.h.paused && (c = "paused");
            var d = c;
            if (b.g == null) b.g = { timestamp: Date.now() / 1e3, state: d, duration: 0 }, b = true;
            else {
              var e = Date.now() / 1e3;
              b.g.duration = e - b.g.timestamp;
              b.g.state == d ? b = false : (b.h.push(b.g), b.g = { timestamp: e, state: d, duration: 0 }, b = true);
            }
            b && (c = (/* @__PURE__ */ new Map()).set("newstate", c), a.dispatchEvent(Sq("statechanged", c)));
          }
        }
        function Or(a) {
          var b = a.h.playbackRate, c = a.U();
          if (a.g.streaming.vodDynamicPlaybackRate && !c) {
            var d = a.g.streaming.vodDynamicPlaybackRateLowBufferRate, e = a.Wi();
            e <= a.g.streaming.vodDynamicPlaybackRateBufferRatio ? b != d && a.sc(d, false) : e == 1 && b !== a.L.jd() && a.Bd();
          }
          if (c && (c = a.za(), Number.isFinite(c.end) && !(a.h.currentTime < c.start || a.h.paused))) {
            d = a.g.streaming.liveSync.targetLatencyTolerance;
            e = a.g.streaming.liveSync.dynamicTargetLatency.enabled;
            var f = a.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;
            if (a.g.streaming.liveSync && a.g.streaming.liveSync.enabled) {
              var g = a.g.streaming.liveSync.targetLatency;
              var h = g + d;
              var k2 = Math.max(0, g - d);
              var l = a.g.streaming.liveSync.maxPlaybackRate;
              var m = a.g.streaming.liveSync.minPlaybackRate;
            } else a.i && a.i.serviceDescription && (g = a.i.serviceDescription.targetLatency, a.i.serviceDescription.targetLatency != null ? h = a.i.serviceDescription.targetLatency + d : a.i.serviceDescription.maxLatency != null && (h = a.i.serviceDescription.maxLatency), a.i.serviceDescription.targetLatency != null ? k2 = Math.max(0, a.i.serviceDescription.targetLatency - d) : a.i.serviceDescription.minLatency != null && (k2 = a.i.serviceDescription.minLatency), l = a.i.serviceDescription.maxPlaybackRate || a.g.streaming.liveSync.maxPlaybackRate, m = a.i.serviceDescription.minPlaybackRate || a.g.streaming.liveSync.minPlaybackRate);
            a.S || typeof g !== "number" || (a.S = g);
            var n = a.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;
            e && a.Pb && a.S !== null && typeof g === "number" && a.cf < n && Date.now() - a.Pb > f * 1e3 && (f = a.g.streaming.liveSync.dynamicTargetLatency.minLatency, a.S = Math.max(a.S - (g - f) / 2, f + d), a.Pb = Date.now());
            e && a.S !== null && (h = a.S + d, k2 = a.S - d);
            g = c.end - a.h.currentTime;
            d = 0;
            a.l == zr && (e = a.h.buffered, e.length > 0 && (d = e.end(e.length - 1), d = Math.max(l, d - c.end)));
            c = a.g.streaming.liveSync.panicMode;
            e = a.g.streaming.liveSync.panicThreshold * 1e3;
            f = Date.now() - a.P.h;
            c && !m && (m = a.g.streaming.liveSync.minPlaybackRate);
            c && m && f <= e ? b != m && a.sc(m, false) : h != void 0 && l && g - d > h ? (b != l && a.sc(l, false), a.Pb = null) : k2 != void 0 && m && g - d < k2 ? (b != m && a.sc(m, false), a.Pb = null) : b !== a.L.jd() && (a.Bd(), a.Pb = Date.now());
          }
        }
        function Pr(a) {
          if (a.h) {
            var b = function(e, f) {
              var g = g === void 0 ? Number.EPSILON : g;
              if (e === f) g = true;
              else {
                var h = Math.abs(e - f);
                g = h <= g ? true : g !== Number.EPSILON ? Math.abs(h - g) <= Number.EPSILON : false;
              }
              return (g || f > e) && a.Bg < e ? (a.Bg = e, true) : false;
            }, c = a.za();
            c = c.end - c.start;
            c = c > 0 ? a.h.currentTime / c : 0;
            if (!isNaN(c)) {
              c *= 100;
              if (b(0, c)) var d = Sq("started");
              else if (b(25, c)) d = Sq("firstquartile");
              else if (b(50, c)) d = Sq("midpoint");
              else if (b(75, c)) d = Sq("thirdquartile");
              else {
                if (b(100, c) || c > 100) d = Sq("complete");
                a.g && a.g.playRangeEnd != Infinity && a.isEnded() && a.h.pause();
              }
              d && a.dispatchEvent(d);
            }
          }
        }
        function Cr(a) {
          try {
            zi(a.Se, a.i);
          } catch (c) {
            return $q(a, c), false;
          }
          var b = kg(a.i.variants);
          b = a.M.create(b);
          a = a.u.setVariants(Array.from(b.values()));
          return typeof a == "boolean" ? a : true;
        }
        function Gr(a, b) {
          b = b === void 0 ? false : b;
          return Cr(a) ? a.u.chooseVariant(b) : null;
        }
        function Pq(a, b, c, d, e) {
          b = b === void 0 ? true : b;
          c = c === void 0 ? 0 : c;
          d = d === void 0 ? false : d;
          e = e === void 0 ? true : e;
          var f = Gr(a);
          f && Er(a, f, e, b, c, d);
        }
        function Er(a, b, c, d, e, f) {
          f = f === void 0 ? false : f;
          var g = a.m.u;
          if (b == g) d && Wm(a.m, b, d, e, true);
          else {
            var h = a.C.h;
            h.h != b && (h.h = b, h.g.push({ timestamp: Date.now() / 1e3, id: b.id, type: "variant", fromAdaptation: c, bandwidth: b.bandwidth }));
            Wm(a.m, b, d, e, f, c);
            d = null;
            g && (d = bg(g));
            g = bg(b);
            g.active = true;
            if (a.R && (e = a.R, b = b.video)) {
              b.dependencyStream && (b = b.dependencyStream);
              f = 0;
              h = -1;
              switch (b.mimeType) {
                case "video/webm":
                  f = 1;
                  break;
                case "video/mp4":
                  f = 2;
              }
              switch (a.sh()) {
                case "DASH":
                  h = 1;
                  break;
                case "HLS":
                  h = 0;
              }
              e.g && (e.g.setLevelSwitching(
                b.id,
                true
              ), e.g.setContainerFormat(f), e.j || e.g.setStreamingFormat(h));
            }
            c ? (c = (/* @__PURE__ */ new Map()).set("oldTrack", d).set("newTrack", g), c = Sq("adaptation", c), ks(a, c)) : ls(a, d, g);
            ms(a, d, g);
          }
        }
        function ds(a, b) {
          var c = Array.from(a.h.audioTracks).find(function(e) {
            return e.enabled;
          });
          b.enabled = true;
          if (c) {
            b.id !== c.id && (c.enabled = false);
            var d = $r(a);
            c = ig(c, d);
            b = ig(b, d);
            ls(a, c, b);
            ms(a, c, b);
          }
        }
        function $r(a) {
          return a.h && a.h.videoTracks ? Array.from(a.h.videoTracks).find(function(b) {
            return b.selected;
          }) : null;
        }
        function yr(a) {
          var b = Sq("trackschanged");
          ks(a, b);
          ns(a);
        }
        function ls(a, b, c) {
          b = (/* @__PURE__ */ new Map()).set("oldTrack", b).set("newTrack", c);
          b = Sq("variantchanged", b);
          ks(a, b);
        }
        function ms(a, b, c) {
          var d = false;
          b && b.audioId == c.audioId && b.audioGroupId == c.audioGroupId || (d = true);
          d && ns(a);
        }
        function ns(a) {
          var b = Sq("audiotrackschanged");
          ks(a, b);
        }
        function xr(a) {
          var b = Sq("textchanged");
          ks(a, b);
        }
        function Lr(a) {
          var b = Sq("texttrackvisibility");
          ks(a, b);
        }
        function Nr(a) {
          a.g.abr.enabled || Oq(a);
          var b = (/* @__PURE__ */ new Map()).set("newStatus", a.g.abr.enabled);
          ks(a, Sq("abrstatuschanged", b));
        }
        function Mr(a) {
          var b = a.yc().find(function(c) {
            return c.active;
          });
          b && a.A && a.A.setTextLanguage && a.A.setTextLanguage(b.language);
        }
        function Oq(a, b) {
          b = b === void 0 ? true : b;
          if (a.l == vr) {
            a.Ve.stop();
            for (var c = u(a.i.variants), d = c.next(); !d.done; d = c.next()) d.value.disabledUntilTime = 0;
            b && Cr(a);
          }
        }
        p.disableStream = function(a, b) {
          if (!this.g.abr.enabled || this.l === Tq || !navigator.onLine || b == 0 || !this.i) return false;
          if (this.i.variants.some(function(h) {
            var k2 = h[a.type];
            return k2 && k2.id !== a.id && !h.disabledUntilTime ? a.type == "audio" ? a.language === k2.language : true : false;
          })) {
            for (var c = false, d = false, e = u(this.i.variants), f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              var g = f[a.type];
              g && (g.id === a.id ? (f.disabledUntilTime = Date.now() / 1e3 + b, c = true) : g.trickModeVideo && g.trickModeVideo.id == a.id && (d = true));
            }
            if (!c && d) return false;
            this.Ve.wa(1);
            b = this.Pc().video.reduce(function(h, k2) {
              return h + k2.end - k2.start;
            }, 0);
            Pq(this, false, b, true, false);
            return true;
          }
          return false;
        };
        function $q(a, b) {
          var c, d, e, f, g;
          return Q(function(h) {
            switch (h.g) {
              case 1:
                if (a.l == Tq) return h.return();
                b.severity === 1 && a.C.L++;
                c = true;
                if (!(a.aa && a.i && a.m) || b.code != 3016 && b.code != 3014 && b.code != 3015 && b.code != 3024 && b.code != 3018) {
                  h.B(2);
                  break;
                }
                d = Rb();
                if (d.Ja() === "WEBKIT" && b.code == 3016) return h.return();
                ra(h, 3);
                return F(h, mn(a.m), 5);
              case 5:
                e = h.h;
                c = !e;
                e && (f = Sq("mediasourcerecovered"), a.dispatchEvent(f));
                ta(h, 2);
                break;
              case 3:
                ua(h), c = true;
              case 2:
                if (!c) return h.return();
                b.severity === 2 && Oq(a, false);
                g = Sq("error", (/* @__PURE__ */ new Map()).set(
                  "detail",
                  b
                ));
                a.dispatchEvent(g);
                g.defaultPrevented && (b.handled = true);
                H(h);
            }
          });
        }
        p.addFont = function(a, b) {
          return Sj(a, b);
        };
        function or(a, b, c, d) {
          d = d === void 0 ? a : d;
          a = (/* @__PURE__ */ new Map()).set("detail", { schemeIdUri: c.schemeIdUri, value: c.value, startTime: c.startTime, endTime: c.endTime, id: c.id, timescale: c.timescale, eventElement: c.eventElement, eventNode: c.eventNode });
          d.dispatchEvent(Sq(b, a));
        }
        function pr(a, b, c, d) {
          d = d === void 0 ? false : d;
          b = (/* @__PURE__ */ new Map()).set("mediaQuality", { bandwidth: b.bandwidth, audioSamplingRate: b.audioSamplingRate, codecs: b.codecs, contentType: b.contentType, frameRate: b.frameRate, height: b.height, mimeType: b.mimeType, channelsCount: b.channelsCount, pixelAspectRatio: b.pixelAspectRatio, width: b.width, label: b.label, roles: b.roles, language: b.language }).set("position", c);
          a.dispatchEvent(Sq(d ? "audiotrackchanged" : "mediaqualitychanged", b));
        }
        function Zq(a, b) {
          b = b === void 0 ? true : b;
          if (!a.h.error) return b ? new U(2, 3, 3016) : null;
          var c = a.h.error.code;
          if (!b && c == 1) return null;
          if (b = a.h.error.msExtendedCode) b < 0 && (b += 4294967296), b = b.toString(16);
          return new U(2, 3, 3016, c, b, a.h.error.message);
        }
        function qr(a, b) {
          var c = Sq("keystatuschanged");
          a.dispatchEvent(c);
          var d = Object.keys(b);
          d.length == 1 && d[0] == "" && (d = ["00"], b = { "00": b[""] });
          var e = d.length == 1 && d[0] == "00";
          c = false;
          if (d.length) {
            d = a.keySystem();
            for (var f = jh(a.g.drm.clearKeys), g = function(t, w) {
              t.allowedByKeySystem = true;
              w = u(w);
              for (var v = w.next(); !v.done; v = w.next()) if (v = v.value, (v = b[e ? "00" : v]) || a.F.L) t.allowedByKeySystem = t.allowedByKeySystem && !!v && !Ai.includes(v);
            }, h = u(a.i.variants), k2 = h.next(); !k2.done; k2 = h.next()) {
              k2 = k2.value;
              var l = ng(k2);
              l = u(l);
              for (var m = l.next(); !m.done; m = l.next()) {
                m = m.value;
                var n = k2.allowedByKeySystem;
                if (m.keyIds.size) if (m.drmInfos.length && !f.size && a.i.type == "HLS") for (var q = u(m.drmInfos), r = q.next(); !r.done; r = q.next()) r = r.value, r.keySystem == d && (r.keyIds.size ? g(k2, r.keyIds) : g(k2, m.keyIds));
                else g(k2, m.keyIds);
                n != k2.allowedByKeySystem && (c = true);
              }
            }
          }
          if (c && (yr(a), !Cr(a))) return;
          (c = a.m.u) && !c.allowedByKeySystem && Pq(a);
        }
        function Dr(a, b, c) {
          b > 0 && (a.U() || a.Pj(b));
          b = a.getDuration();
          c < b && (a.U() || a.zb(c));
        }
        function ks(a, b) {
          Q(function(c) {
            if (c.g == 1) return F(c, Promise.resolve(), 2);
            a.l != Tq && a.dispatchEvent(b);
            H(c);
          });
        }
        function fs(a) {
          var b = /* @__PURE__ */ new Set();
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) c = c.value, c.language ? b.add(yc(c.language)) : b.add("und");
          return b;
        }
        function es(a) {
          for (var b = /* @__PURE__ */ new Map(), c = /* @__PURE__ */ new Map(), d = 0; d < a.length; d++) {
            var e = a[d], f = "und", g = [];
            e.language && (f = yc(e.language));
            e.type == "variant" ? g = e.audioRoles : g = e.roles;
            g && g.length || (g = [""]);
            b.has(f) || b.set(f, /* @__PURE__ */ new Set());
            g = u(g);
            for (var h = g.next(); !h.done; h = g.next()) h = h.value, b.get(f).add(h), e.label && (c.has(f) || c.set(f, /* @__PURE__ */ new Map()), c.get(f).set(h, e.label));
          }
          var k2 = [];
          b.forEach(function(l, m) {
            l = u(l);
            for (var n = l.next(); !n.done; n = l.next()) {
              n = n.value;
              var q = null;
              c.has(m) && c.get(m).has(n) && (q = c.get(m).get(n));
              k2.push({
                language: m,
                role: n,
                label: q
              });
            }
          });
          return k2;
        }
        p.Da = function() {
          return this.h && this.h.remote ? this.h.remote.state != "disconnected" : false;
        };
        p.isEnded = function() {
          return !this.h || this.h.ended ? true : this.aa && !this.U() && this.h.currentTime >= this.za().end;
        };
        S("shaka.Player", X);
        X.prototype.isEnded = X.prototype.isEnded;
        X.prototype.isRemotePlayback = X.prototype.Da;
        X.prototype.addFont = X.prototype.addFont;
        X.prototype.setVideoContainer = X.prototype.ji;
        X.prototype.getFetchedPlaybackInfo = X.prototype.Ok;
        X.prototype.getManifestParserFactory = X.prototype.Wk;
        X.prototype.getManifest = X.prototype.rh;
        X.prototype.retryStreaming = X.prototype.Xh;
        X.prototype.setMaxHardwareResolution = X.prototype.wm;
        X.prototype.addChaptersTrack = X.prototype.df;
        X.prototype.addThumbnailsTrack = X.prototype.ef;
        X.prototype.addTextTrackAsync = X.prototype.ee;
        X.prototype.getStats = X.prototype.getStats;
        X.prototype.getBufferedInfo = X.prototype.Pc;
        X.prototype.getSegmentAvailabilityDuration = X.prototype.xf;
        X.prototype.getPresentationStartTimeAsDate = X.prototype.uh;
        X.prototype.getPlayheadTimeAsDate = X.prototype.$k;
        X.prototype.setTextTrackVisibility = X.prototype.Zd;
        X.prototype.getChaptersAsync = X.prototype.oh;
        X.prototype.getChapters = X.prototype.Ek;
        X.prototype.getChaptersTracks = X.prototype.Fk;
        X.prototype.isTextTrackVisible = X.prototype.Xc;
        X.prototype.selectVariantsByLabel = X.prototype.qm;
        X.prototype.selectTextLanguage = X.prototype.ai;
        X.prototype.selectAudioLanguage = X.prototype.Gj;
        X.prototype.getTextLanguages = X.prototype.ll;
        X.prototype.getAudioLanguages = X.prototype.Ak;
        X.prototype.getTextLanguagesAndRoles = X.prototype.ol;
        X.prototype.getAudioLanguagesAndRoles = X.prototype.Bk;
        X.prototype.getVideoTracks = X.prototype.getVideoTracks;
        X.prototype.selectVideoTrack = X.prototype.Ij;
        X.prototype.getAudioTracks = X.prototype.getAudioTracks;
        X.prototype.selectAudioTrack = X.prototype.Hj;
        X.prototype.selectVariantTrack = X.prototype.Ge;
        X.prototype.selectTextTrack = X.prototype.fg;
        X.prototype.getThumbnails = X.prototype.$i;
        X.prototype.getAllThumbnails = X.prototype.zk;
        X.prototype.getImageTracks = X.prototype.qh;
        X.prototype.getTextTracks = X.prototype.yc;
        X.prototype.getVariantTracks = X.prototype.Ob;
        X.prototype.cancelTrickPlay = X.prototype.Bd;
        X.prototype.trickPlay = X.prototype.sc;
        X.prototype.useTrickPlayTrackIfAvailable = X.prototype.zi;
        X.prototype.getPlaybackRate = X.prototype.Za;
        X.prototype.isBuffering = X.prototype.Cf;
        X.prototype.getKeyStatuses = X.prototype.uf;
        X.prototype.getActiveSessionsMetadata = X.prototype.nh;
        X.prototype.getExpiration = X.prototype.me;
        X.prototype.drmInfo = X.prototype.drmInfo;
        X.prototype.keySystem = X.prototype.keySystem;
        X.prototype.isFullyLoaded = X.prototype.El;
        X.prototype.goToLive = X.prototype.Al;
        X.prototype.seekRange = X.prototype.za;
        X.prototype.isVideoOnly = X.prototype.Hh;
        X.prototype.isAudioOnly = X.prototype.Ld;
        X.prototype.isInProgress = X.prototype.ld;
        X.prototype.isLive = X.prototype.U;
        X.prototype.getQueueManager = X.prototype.vf;
        X.prototype.getAdManager = X.prototype.tf;
        X.prototype.getAssetUri = X.prototype.hd;
        X.prototype.getNetworkingEngine = X.prototype.Vb;
        X.prototype.getMediaElement = X.prototype.Zk;
        X.prototype.getManifestType = X.prototype.sh;
        X.prototype.getLoadMode = X.prototype.Sk;
        X.prototype.resetConfiguration = X.prototype.Bj;
        X.prototype.getBufferFullness = X.prototype.Wi;
        X.prototype.getNonDefaultConfiguration = X.prototype.Zi;
        X.prototype.getConfigurationForLowLatency = X.prototype.Ik;
        X.prototype.getConfiguration = X.prototype.getConfiguration;
        X.prototype.configurationForLowLatency = X.prototype.wk;
        X.prototype.configure = X.prototype.configure;
        X.prototype.releaseAllMutexes = X.prototype.fm;
        X.prototype.destroyAllPreloads = X.prototype.Ug;
        X.prototype.preload = X.prototype.preload;
        X.prototype.detachAndSavePreload = X.prototype.Si;
        X.prototype.unloadAndSavePreload = X.prototype.ck;
        X.prototype.load = X.prototype.load;
        X.prototype.updateStartTime = X.prototype.Em;
        X.prototype.unload = X.prototype.tc;
        X.prototype.detach = X.prototype.detach;
        X.prototype.attachCanvas = X.prototype.Gi;
        X.prototype.attach = X.prototype.cc;
        X.probeSupport = function(a) {
          a = a === void 0 ? true : a;
          var b, c, d, e, f, g, h;
          return Q(function(k2) {
            switch (k2.g) {
              case 1:
                b = {};
                if (!a) {
                  k2.B(2);
                  break;
                }
                return F(k2, li(), 3);
              case 3:
                b = k2.h;
              case 2:
                return c = Ei(), d = Bk(), e = Rb(), F(k2, e.wc(), 4);
              case 4:
                return f = k2.h, g = { manifest: c, media: d, drm: b, hardwareResolution: f }, h = Vq, h.forEach(function(l, m) {
                  g[m] = l();
                }), k2.return(g);
            }
          });
        };
        X.isBrowserSupported = Wq;
        X.setQueueManagerFactory = function(a) {
          Nq = a;
        };
        X.setAdManagerFactory = function(a) {
          Mq = a;
        };
        X.registerSupportPlugin = Uq;
        X.prototype.destroy = X.prototype.destroy;
        var Tq = 0, Jq = 1, vr = 2, zr = 3;
        X.LoadMode = { DESTROYED: Tq, NOT_LOADED: Jq, MEDIA_SOURCE: vr, SRC_EQUALS: zr };
        X.version = "v4.16.0";
        var os = ["4", "16"];
        $c = new function(a) {
          this.g = a;
          this.i = ad;
          this.h = bd;
        }(new Yc(Number(os[0]), Number(os[1])));
        var Vq = /* @__PURE__ */ new Map(), Mq = null, Nq = null;
        function ps() {
          this.g = [];
          this.i = this.m = this.l = this.j = this.h = 0;
        }
        function qs(a) {
          return a.g.length ? a.g.reduce(function(b, c) {
            return b + c;
          }, 0) / a.g.length : 0;
        }
        ;
        function rs(a, b, c) {
          var d = this;
          this.g = a;
          this.h = b;
          this.m = c;
          this.i = false;
          this.j = this.h.getVolume();
          this.l = new Tc();
          this.l.o(this.h, google.ima.AdEvent.Type.PAUSED, function() {
            d.i = true;
          });
          this.l.o(this.h, google.ima.AdEvent.Type.RESUMED, function() {
            d.i = false;
          });
        }
        p = rs.prototype;
        p.needsSkipUI = function() {
          return false;
        };
        p.isClientRendering = function() {
          return true;
        };
        p.hasCustomClick = function() {
          return true;
        };
        p.isUsingAnotherMediaElement = function() {
          return true;
        };
        p.getDuration = function() {
          return this.g.getDuration();
        };
        p.getMinSuggestedDuration = function() {
          return this.g.getMinSuggestedDuration();
        };
        p.getRemainingTime = function() {
          return this.h.getRemainingTime();
        };
        p.isPaused = function() {
          return this.i;
        };
        p.isSkippable = function() {
          return this.g.getSkipTimeOffset() >= 0;
        };
        p.getTimeUntilSkippable = function() {
          var a = this.g.getSkipTimeOffset();
          a = this.getRemainingTime() - a;
          return Math.max(a, 0);
        };
        p.canSkipNow = function() {
          return this.h.getAdSkippableState();
        };
        p.skip = function() {
          return this.h.skip();
        };
        p.pause = function() {
          return this.h.pause();
        };
        p.play = function() {
          return this.h.resume();
        };
        p.getVolume = function() {
          return this.h.getVolume();
        };
        p.setVolume = function(a) {
          this.m.volume = a;
          return this.h.setVolume(a);
        };
        p.isMuted = function() {
          return this.h.getVolume() == 0;
        };
        p.isLinear = function() {
          return this.g.isLinear();
        };
        p.resize = function(a, b) {
          this.h.resize(a, b);
        };
        p.setMuted = function(a) {
          (this.m.muted = a) ? (this.j = this.getVolume(), this.h.setVolume(0)) : this.h.setVolume(this.j);
        };
        p.getSequenceLength = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 1 : a.getTotalAds();
        };
        p.getPositionInSequence = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 1 : a.getAdPosition();
        };
        p.getTitle = function() {
          return this.g.getTitle();
        };
        p.getDescription = function() {
          return this.g.getDescription();
        };
        p.getVastMediaBitrate = function() {
          return this.g.getVastMediaBitrate();
        };
        p.getVastMediaHeight = function() {
          return this.g.getVastMediaHeight();
        };
        p.getVastMediaWidth = function() {
          return this.g.getVastMediaWidth();
        };
        p.getVastAdId = function() {
          return "";
        };
        p.getAdId = function() {
          return this.g.getAdId();
        };
        p.getCreativeAdId = function() {
          return this.g.getCreativeAdId();
        };
        p.getAdvertiserName = function() {
          return this.g.getAdvertiserName();
        };
        p.getMediaUrl = function() {
          return this.g.getMediaUrl();
        };
        p.getTimeOffset = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 0 : a.getTimeOffset();
        };
        p.getPodIndex = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 0 : a.getPodIndex();
        };
        p.release = function() {
          this.h = this.g = null;
        };
        S("shaka.ads.ClientSideAd", rs);
        rs.prototype.release = rs.prototype.release;
        rs.prototype.getPodIndex = rs.prototype.getPodIndex;
        rs.prototype.getTimeOffset = rs.prototype.getTimeOffset;
        rs.prototype.getMediaUrl = rs.prototype.getMediaUrl;
        rs.prototype.getAdvertiserName = rs.prototype.getAdvertiserName;
        rs.prototype.getCreativeAdId = rs.prototype.getCreativeAdId;
        rs.prototype.getAdId = rs.prototype.getAdId;
        rs.prototype.getVastAdId = rs.prototype.getVastAdId;
        rs.prototype.getVastMediaWidth = rs.prototype.getVastMediaWidth;
        rs.prototype.getVastMediaHeight = rs.prototype.getVastMediaHeight;
        rs.prototype.getVastMediaBitrate = rs.prototype.getVastMediaBitrate;
        rs.prototype.getDescription = rs.prototype.getDescription;
        rs.prototype.getTitle = rs.prototype.getTitle;
        rs.prototype.getPositionInSequence = rs.prototype.getPositionInSequence;
        rs.prototype.getSequenceLength = rs.prototype.getSequenceLength;
        rs.prototype.setMuted = rs.prototype.setMuted;
        rs.prototype.resize = rs.prototype.resize;
        rs.prototype.isLinear = rs.prototype.isLinear;
        rs.prototype.isMuted = rs.prototype.isMuted;
        rs.prototype.setVolume = rs.prototype.setVolume;
        rs.prototype.getVolume = rs.prototype.getVolume;
        rs.prototype.play = rs.prototype.play;
        rs.prototype.pause = rs.prototype.pause;
        rs.prototype.skip = rs.prototype.skip;
        rs.prototype.canSkipNow = rs.prototype.canSkipNow;
        rs.prototype.getTimeUntilSkippable = rs.prototype.getTimeUntilSkippable;
        rs.prototype.isSkippable = rs.prototype.isSkippable;
        rs.prototype.isPaused = rs.prototype.isPaused;
        rs.prototype.getRemainingTime = rs.prototype.getRemainingTime;
        rs.prototype.getMinSuggestedDuration = rs.prototype.getMinSuggestedDuration;
        rs.prototype.getDuration = rs.prototype.getDuration;
        rs.prototype.isUsingAnotherMediaElement = rs.prototype.isUsingAnotherMediaElement;
        rs.prototype.hasCustomClick = rs.prototype.hasCustomClick;
        rs.prototype.isClientRendering = rs.prototype.isClientRendering;
        rs.prototype.needsSkipUI = rs.prototype.needsSkipUI;
        function ss() {
        }
        function ts(a, b) {
          var c = [];
          a = u(Rd(a, "Ad"));
          for (var d = a.next(); !d.done; d = a.next()) if (d = Vd(d.value, "InLine")) {
            if (d = Vd(d, "Creatives")) {
              d = u(Rd(d, "Creative"));
              for (var e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                var f = Vd(e, "Linear");
                f && us(c, b, f);
                if (e = Vd(e, "NonLinearAds")) {
                  e = Rd(e, "NonLinear");
                  e = u(e);
                  for (var g = e.next(); !g.done; g = e.next()) a: {
                    f = c;
                    var h = b, k2 = g.value, l = Vd(k2, "StaticResource");
                    if (l) g = l.attributes.creativeType;
                    else {
                      l = Vd(k2, "HTMLResource");
                      if (!l) break a;
                      g = "text/html";
                    }
                    if (l = Td(l)) {
                      g === "text/html" && (l = "data:text/html;charset=UTF-8," + encodeURIComponent(l));
                      var m = Zd(k2, "width", ee) || Zd(k2, "expandedWidth", ee), n = Zd(k2, "height", ee) || Zd(k2, "expandedHeight", ee);
                      if (m || n) {
                        var q = null, r = Vd(k2, "NonLinearClickThrough");
                        r && (r = Td(r)) && (q = r);
                        r = null;
                        (k2 = k2.attributes.minSuggestedDuration) && (r = Dd(k2));
                        k2 = 0;
                        h != null && (k2 = h);
                        f.push({ id: null, groupId: null, startTime: k2, endTime: null, uri: l, mimeType: g, isSkippable: false, skipOffset: null, skipFor: null, canJump: false, resumeOffset: 0, playoutLimit: r, once: true, pre: h == null, post: h == Infinity, timelineRange: false, loop: false, overlay: { viewport: {
                          x: 0,
                          y: 0
                        }, topLeft: { x: 0, y: 0 }, size: { x: m || 0, y: n || 0 } }, displayOnBackground: false, currentVideo: null, background: null, clickThroughUrl: q });
                      }
                    }
                  }
                }
              }
            }
          }
          return c;
        }
        function us(a, b, c) {
          var d = 0;
          b != null && (d = b);
          var e = null;
          c.attributes.skipoffset && (e = Dd(c.attributes.skipoffset), isNaN(e) && (e = null));
          var f = Vd(c, "MediaFiles");
          if (f) {
            var g = null;
            (c = Vd(c, "VideoClicks")) && (c = Vd(c, "ClickThrough")) && (c = Td(c)) && (g = c);
            f = c = Rd(f, "MediaFile");
            c = c.filter(function(k2) {
              return k2.attributes.delivery == "streaming";
            });
            c.length && (f = c);
            f = f.sort(function(k2, l) {
              return (parseInt(l.attributes.height, 10) || 0) - (parseInt(k2.attributes.height, 10) || 0);
            });
            f = u(f);
            for (c = f.next(); !c.done; c = f.next()) if (c = c.value, !c.attributes.apiFramework) {
              var h = Td(c);
              if (h) {
                a.push({ id: null, groupId: null, startTime: d, endTime: null, uri: h, mimeType: c.attributes.type || null, isSkippable: e != null, skipOffset: e, skipFor: null, canJump: false, resumeOffset: 0, playoutLimit: null, once: true, pre: b == null, post: b == Infinity, timelineRange: false, loop: false, overlay: null, displayOnBackground: false, currentVideo: null, background: null, clickThroughUrl: g });
                break;
              }
            }
          }
        }
        function vs(a) {
          var b = [];
          a = u(Rd(a, "vmap:AdBreak"));
          for (var c = a.next(); !c.done; c = a.next()) {
            var d = c.value, e = d.attributes.timeOffset;
            e && (c = null, e == "start" ? c = null : e == "end" ? c = Infinity : c = Dd(e), (d = Vd(d, "vmap:AdSource")) && (d = Vd(d, "vmap:AdTagURI")) && (d = Sd(d)) && b.push({ time: c, uri: d }));
          }
          return b;
        }
        S("shaka.ads.Utils", ss);
        ss.ADS_LOADED = "ads-loaded";
        ss.AD_STARTED = "ad-started";
        ss.AD_FIRST_QUARTILE = "ad-first-quartile";
        ss.AD_MIDPOINT = "ad-midpoint";
        ss.AD_THIRD_QUARTILE = "ad-third-quartile";
        ss.AD_COMPLETE = "ad-complete";
        ss.AD_STOPPED = "ad-stopped";
        ss.AD_SKIPPED = "ad-skipped";
        ss.AD_VOLUME_CHANGED = "ad-volume-changed";
        ss.AD_MUTED = "ad-muted";
        ss.AD_PAUSED = "ad-paused";
        ss.AD_RESUMED = "ad-resumed";
        ss.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed";
        ss.CUEPOINTS_CHANGED = "ad-cue-points-changed";
        ss.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded";
        ss.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded";
        ss.AD_CLICKED = "ad-clicked";
        ss.AD_PROGRESS = "ad-progress";
        ss.AD_BUFFERING = "ad-buffering";
        ss.AD_IMPRESSION = "ad-impression";
        ss.AD_DURATION_CHANGED = "ad-duration-changed";
        ss.AD_CLOSED = "ad-closed";
        ss.AD_LOADED = "ad-loaded";
        ss.ALL_ADS_COMPLETED = "all-ads-completed";
        ss.AD_LINEAR_CHANGED = "ad-linear-changed";
        ss.AD_METADATA = "ad-metadata";
        ss.AD_RECOVERABLE_ERROR = "ad-recoverable-error";
        ss.AD_ERROR = "ad-error";
        ss.AD_BREAK_READY = "ad-break-ready";
        ss.AD_INTERACTION = "ad-interaction";
        ss.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested";
        ss.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested";
        ss.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested";
        function ws(a, b, c, d, e) {
          var f = this;
          this.A = a;
          this.i = b;
          this.G = false;
          this.C = this.u = null;
          this.H = NaN;
          this.l = e;
          this.j = null;
          this.h = new Tc();
          google.ima.settings.setLocale(c);
          google.ima.settings.setDisableCustomPlaybackForIOS10Plus(true);
          this.F = new google.ima.AdDisplayContainer(this.A, this.i);
          this.F.initialize();
          this.m = new google.ima.AdsLoader(this.F);
          this.m.getSettings().setPlayerType("shaka-player");
          this.m.getSettings().setPlayerVersion("v4.16.0");
          this.g = null;
          this.D = d || new google.ima.AdsRenderingSettings();
          this.h.o(
            this.m,
            google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
            function(g) {
              xs(f, g);
            }
          );
          this.h.o(this.m, google.ima.AdErrorEvent.Type.AD_ERROR, function(g) {
            ys(f, g);
          });
          this.h.o(this.i, "ended", function() {
            f.m.contentComplete();
          });
          this.h.ua(this.i, "play", function() {
            f.G = true;
          });
        }
        ws.prototype.configure = function(a) {
          this.u = a;
        };
        ws.prototype.stop = function() {
          this.g && this.g.stop();
          this.A && Pj(this.A);
        };
        ws.prototype.release = function() {
          this.stop();
          this.C && this.C.disconnect();
          this.h && this.h.release();
          this.g && this.g.destroy();
          this.m.destroy();
          this.F.destroy();
        };
        function ys(a, b) {
          b.getError();
          b = (/* @__PURE__ */ new Map()).set("originalEvent", b);
          a.l(new T("ad-error", b));
          zs(a, null);
          a.l(new T("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", [])));
        }
        function xs(a, b) {
          a.l(new T("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", Date.now() / 1e3 - a.H)));
          if (a.u.customPlayheadTracker) {
            var c = { currentTime: a.i.currentTime };
            a.g = b.getAdsManager(c, a.D);
            a.i.muted ? a.g.setVolume(0) : a.g.setVolume(a.i.volume);
            a.h.o(a.i, "timeupdate", function() {
              a.i.duration && (c.currentTime = a.i.currentTime);
            });
            a.h.o(a.i, "volumechange", function() {
              a.j && (a.j.setVolume(a.i.volume), a.i.muted && a.j.setMuted(true));
            });
          } else a.g = b.getAdsManager(a.i, a.D);
          a.l(new T("ima-ad-manager-loaded", (/* @__PURE__ */ new Map()).set(
            "imaAdManager",
            a.g
          )));
          var d = a.g.getCuePoints();
          if (d.length) {
            b = [];
            d = u(d);
            for (var e = d.next(); !e.done; e = d.next()) b.push({ start: e.value, end: null });
            a.l(new T("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", b)));
          }
          As(a);
          try {
            a.g.init(a.i.offsetWidth, a.i.offsetHeight), a.h.o(a.i, "loadeddata", function() {
              a.g.resize(a.i.offsetWidth, a.i.offsetHeight);
            }), "ResizeObserver" in window2 ? (a.C = new ResizeObserver(function() {
              a.g.resize(a.i.offsetWidth, a.i.offsetHeight);
            }), a.C.observe(a.i)) : a.h.o(document, "fullscreenchange", function() {
              a.g.resize(
                a.i.offsetWidth,
                a.i.offsetHeight
              );
            }), a.G || a.u.skipPlayDetection ? a.g.start() : a.h.ua(a.i, "play", function() {
              a.G = true;
              a.g.start();
            });
          } catch (f) {
            zs(a, null);
          }
        }
        function As(a) {
          function b(c, d) {
            c = (/* @__PURE__ */ new Map()).set("originalEvent", c);
            a.l(new T(d, c));
          }
          a.h.o(a.g, google.ima.AdErrorEvent.Type.AD_ERROR, function(c) {
            ys(a, c);
          });
          a.h.o(a.g, google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED, function(c) {
            Bs(a, c);
          });
          a.h.o(a.g, google.ima.AdEvent.Type.STARTED, function(c) {
            Bs(a, c);
          });
          a.h.o(a.g, google.ima.AdEvent.Type.FIRST_QUARTILE, function(c) {
            b(c, "ad-first-quartile");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.MIDPOINT, function(c) {
            b(c, "ad-midpoint");
          });
          a.h.o(
            a.g,
            google.ima.AdEvent.Type.THIRD_QUARTILE,
            function(c) {
              b(c, "ad-third-quartile");
            }
          );
          a.h.o(a.g, google.ima.AdEvent.Type.COMPLETE, function(c) {
            b(c, "ad-complete");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED, function(c) {
            zs(a, c);
          });
          a.h.o(a.g, google.ima.AdEvent.Type.ALL_ADS_COMPLETED, function(c) {
            zs(a, c);
          });
          a.h.o(a.g, google.ima.AdEvent.Type.SKIPPED, function(c) {
            b(c, "ad-skipped");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.VOLUME_CHANGED, function(c) {
            b(c, "ad-volume-changed");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.VOLUME_MUTED, function(c) {
            b(c, "ad-muted");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.PAUSED, function(c) {
            a.j && (a.j.i = true, b(c, "ad-paused"));
          });
          a.h.o(a.g, google.ima.AdEvent.Type.RESUMED, function(c) {
            a.j && (a.j.i = false, b(c, "ad-resumed"));
          });
          a.h.o(a.g, google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED, function(c) {
            a.j && b(c, "ad-skip-state-changed");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.CLICK, function(c) {
            b(c, "ad-clicked");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.AD_PROGRESS, function(c) {
            b(c, "ad-progress");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.AD_BUFFERING, function(c) {
            b(c, "ad-buffering");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.IMPRESSION, function(c) {
            b(c, "ad-impression");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.DURATION_CHANGE, function(c) {
            b(c, "ad-duration-changed");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.USER_CLOSE, function(c) {
            b(c, "ad-closed");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.LOADED, function(c) {
            b(c, "ad-loaded");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.ALL_ADS_COMPLETED, function(c) {
            b(c, "all-ads-completed");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.LINEAR_CHANGED, function(c) {
            b(c, "ad-linear-changed");
          });
          a.h.o(
            a.g,
            google.ima.AdEvent.Type.AD_METADATA,
            function(c) {
              b(c, "ad-metadata");
            }
          );
          a.h.o(a.g, google.ima.AdEvent.Type.LOG, function(c) {
            b(c, "ad-recoverable-error");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.AD_BREAK_READY, function(c) {
            b(c, "ad-break-ready");
          });
          a.h.o(a.g, google.ima.AdEvent.Type.INTERACTION, function(c) {
            b(c, "ad-interaction");
          });
        }
        function Bs(a, b) {
          var c = b.getAd();
          c ? (a.j = new rs(c, a.g, a.i), b.type != google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED || a.u.supportsMultipleMediaElements || a.l(new T("ad-content-pause-requested")), b = (/* @__PURE__ */ new Map()).set("ad", a.j).set("sdkAdObject", c).set("originalEvent", b), a.l(new T("ad-started", b)), a.j.isLinear() && (a.A.setAttribute("ad-active", "true"), a.u.customPlayheadTracker || a.i.pause(), a.i.muted ? (b = a.j, b.j = a.i.volume, b.h.setVolume(0)) : a.j.setVolume(a.i.volume))) : ab("The IMA SDK fired a " + b.type + " event with no associated ad. Unable to play ad!");
        }
        function zs(a, b) {
          b && b.type == google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED && !a.u.supportsMultipleMediaElements && a.l(new T("ad-content-resume-requested"));
          a.l(new T("ad-stopped", (/* @__PURE__ */ new Map()).set("originalEvent", b)));
          a.j && a.j.isLinear() && (a.A.removeAttribute("ad-active"), a.u.customPlayheadTracker || a.i.ended || a.i.play());
        }
        ;
        function Cs(a, b, c, d, e, f) {
          this.g = a;
          this.h = b;
          this.j = (this.i = b.isSkippable) ? b.skipOffset || 0 : b.skipOffset;
          this.l = b.skipFor;
          this.C = c;
          this.u = d;
          this.m = e;
          this.A = f;
          this.D = b.overlay;
        }
        p = Cs.prototype;
        p.needsSkipUI = function() {
          return true;
        };
        p.isClientRendering = function() {
          return true;
        };
        p.hasCustomClick = function() {
          return this.h.clickThroughUrl != null;
        };
        p.isUsingAnotherMediaElement = function() {
          return this.A;
        };
        p.getDuration = function() {
          var a = this.g.duration;
          return isNaN(a) ? -1 : a;
        };
        p.getMinSuggestedDuration = function() {
          return this.getDuration();
        };
        p.getRemainingTime = function() {
          var a = this.g.duration;
          return isNaN(a) ? -1 : a - this.g.currentTime;
        };
        p.isPaused = function() {
          return this.g.paused;
        };
        p.isSkippable = function() {
          return this.i && this.l != null ? this.getDuration() - this.getRemainingTime() < this.j + this.l : this.i;
        };
        p.getTimeUntilSkippable = function() {
          if (this.isSkippable()) {
            var a = this.getRemainingTime() + this.j - this.getDuration();
            return Math.max(a, 0);
          }
          return Math.max(this.getRemainingTime(), 0);
        };
        p.canSkipNow = function() {
          return this.i && this.getTimeUntilSkippable() == 0;
        };
        p.skip = function() {
          this.canSkipNow() && this.C();
        };
        p.pause = function() {
          return this.g.pause();
        };
        p.play = function() {
          return this.g.play();
        };
        p.getVolume = function() {
          return this.g.volume;
        };
        p.setVolume = function(a) {
          this.g.volume = a;
        };
        p.isMuted = function() {
          return this.g.muted;
        };
        p.isLinear = function() {
          return this.D == null;
        };
        p.resize = function() {
        };
        p.setMuted = function(a) {
          this.g.muted = a;
        };
        p.getSequenceLength = function() {
          return this.u;
        };
        p.getPositionInSequence = function() {
          return this.m;
        };
        p.getTitle = function() {
          return "";
        };
        p.getDescription = function() {
          return "";
        };
        p.getVastMediaBitrate = function() {
          return 0;
        };
        p.getVastMediaHeight = function() {
          return 0;
        };
        p.getVastMediaWidth = function() {
          return 0;
        };
        p.getVastAdId = function() {
          return "";
        };
        p.getAdId = function() {
          return this.h.id || "";
        };
        p.getCreativeAdId = function() {
          return "";
        };
        p.getAdvertiserName = function() {
          return "";
        };
        p.getMediaUrl = function() {
          return this.h.uri;
        };
        p.getTimeOffset = function() {
          return 0;
        };
        p.getPodIndex = function() {
          return 0;
        };
        p.release = function() {
          this.g = null;
        };
        S("shaka.ads.InterstitialAd", Cs);
        Cs.prototype.release = Cs.prototype.release;
        Cs.prototype.getPodIndex = Cs.prototype.getPodIndex;
        Cs.prototype.getTimeOffset = Cs.prototype.getTimeOffset;
        Cs.prototype.getMediaUrl = Cs.prototype.getMediaUrl;
        Cs.prototype.getAdvertiserName = Cs.prototype.getAdvertiserName;
        Cs.prototype.getCreativeAdId = Cs.prototype.getCreativeAdId;
        Cs.prototype.getAdId = Cs.prototype.getAdId;
        Cs.prototype.getVastAdId = Cs.prototype.getVastAdId;
        Cs.prototype.getVastMediaWidth = Cs.prototype.getVastMediaWidth;
        Cs.prototype.getVastMediaHeight = Cs.prototype.getVastMediaHeight;
        Cs.prototype.getVastMediaBitrate = Cs.prototype.getVastMediaBitrate;
        Cs.prototype.getDescription = Cs.prototype.getDescription;
        Cs.prototype.getTitle = Cs.prototype.getTitle;
        Cs.prototype.getPositionInSequence = Cs.prototype.getPositionInSequence;
        Cs.prototype.getSequenceLength = Cs.prototype.getSequenceLength;
        Cs.prototype.setMuted = Cs.prototype.setMuted;
        Cs.prototype.resize = Cs.prototype.resize;
        Cs.prototype.isLinear = Cs.prototype.isLinear;
        Cs.prototype.isMuted = Cs.prototype.isMuted;
        Cs.prototype.setVolume = Cs.prototype.setVolume;
        Cs.prototype.getVolume = Cs.prototype.getVolume;
        Cs.prototype.play = Cs.prototype.play;
        Cs.prototype.pause = Cs.prototype.pause;
        Cs.prototype.skip = Cs.prototype.skip;
        Cs.prototype.canSkipNow = Cs.prototype.canSkipNow;
        Cs.prototype.getTimeUntilSkippable = Cs.prototype.getTimeUntilSkippable;
        Cs.prototype.isSkippable = Cs.prototype.isSkippable;
        Cs.prototype.isPaused = Cs.prototype.isPaused;
        Cs.prototype.getRemainingTime = Cs.prototype.getRemainingTime;
        Cs.prototype.getMinSuggestedDuration = Cs.prototype.getMinSuggestedDuration;
        Cs.prototype.getDuration = Cs.prototype.getDuration;
        Cs.prototype.isUsingAnotherMediaElement = Cs.prototype.isUsingAnotherMediaElement;
        Cs.prototype.hasCustomClick = Cs.prototype.hasCustomClick;
        Cs.prototype.isClientRendering = Cs.prototype.isClientRendering;
        Cs.prototype.needsSkipUI = Cs.prototype.needsSkipUI;
        function Ds(a, b, c) {
          this.g = a;
          this.j = b;
          this.h = c;
          this.i = a.overlay == null;
        }
        p = Ds.prototype;
        p.needsSkipUI = function() {
          return true;
        };
        p.isClientRendering = function() {
          return true;
        };
        p.hasCustomClick = function() {
          return this.g.clickThroughUrl != null;
        };
        p.isUsingAnotherMediaElement = function() {
          return false;
        };
        p.getDuration = function() {
          return -1;
        };
        p.getMinSuggestedDuration = function() {
          return this.getDuration();
        };
        p.getRemainingTime = function() {
          return -1;
        };
        p.isPaused = function() {
          return false;
        };
        p.isSkippable = function() {
          return false;
        };
        p.getTimeUntilSkippable = function() {
          return 0;
        };
        p.canSkipNow = function() {
          return false;
        };
        p.skip = function() {
        };
        p.pause = function() {
        };
        p.play = function() {
        };
        p.getVolume = function() {
          return 1;
        };
        p.setVolume = function() {
        };
        p.isMuted = function() {
          return false;
        };
        p.isLinear = function() {
          return this.i;
        };
        p.resize = function() {
        };
        p.setMuted = function() {
        };
        p.getSequenceLength = function() {
          return this.j;
        };
        p.getPositionInSequence = function() {
          return this.h;
        };
        p.getTitle = function() {
          return "";
        };
        p.getDescription = function() {
          return "";
        };
        p.getVastMediaBitrate = function() {
          return 0;
        };
        p.getVastMediaHeight = function() {
          return 0;
        };
        p.getVastMediaWidth = function() {
          return 0;
        };
        p.getVastAdId = function() {
          return "";
        };
        p.getAdId = function() {
          return this.g.id || "";
        };
        p.getCreativeAdId = function() {
          return "";
        };
        p.getAdvertiserName = function() {
          return "";
        };
        p.getMediaUrl = function() {
          return this.g.uri;
        };
        p.getTimeOffset = function() {
          return 0;
        };
        p.getPodIndex = function() {
          return 0;
        };
        p.release = function() {
        };
        S("shaka.ads.InterstitialStaticAd", Ds);
        Ds.prototype.release = Ds.prototype.release;
        Ds.prototype.getPodIndex = Ds.prototype.getPodIndex;
        Ds.prototype.getTimeOffset = Ds.prototype.getTimeOffset;
        Ds.prototype.getMediaUrl = Ds.prototype.getMediaUrl;
        Ds.prototype.getAdvertiserName = Ds.prototype.getAdvertiserName;
        Ds.prototype.getCreativeAdId = Ds.prototype.getCreativeAdId;
        Ds.prototype.getAdId = Ds.prototype.getAdId;
        Ds.prototype.getVastAdId = Ds.prototype.getVastAdId;
        Ds.prototype.getVastMediaWidth = Ds.prototype.getVastMediaWidth;
        Ds.prototype.getVastMediaHeight = Ds.prototype.getVastMediaHeight;
        Ds.prototype.getVastMediaBitrate = Ds.prototype.getVastMediaBitrate;
        Ds.prototype.getDescription = Ds.prototype.getDescription;
        Ds.prototype.getTitle = Ds.prototype.getTitle;
        Ds.prototype.getPositionInSequence = Ds.prototype.getPositionInSequence;
        Ds.prototype.getSequenceLength = Ds.prototype.getSequenceLength;
        Ds.prototype.setMuted = Ds.prototype.setMuted;
        Ds.prototype.resize = Ds.prototype.resize;
        Ds.prototype.isLinear = Ds.prototype.isLinear;
        Ds.prototype.isMuted = Ds.prototype.isMuted;
        Ds.prototype.setVolume = Ds.prototype.setVolume;
        Ds.prototype.getVolume = Ds.prototype.getVolume;
        Ds.prototype.play = Ds.prototype.play;
        Ds.prototype.pause = Ds.prototype.pause;
        Ds.prototype.skip = Ds.prototype.skip;
        Ds.prototype.canSkipNow = Ds.prototype.canSkipNow;
        Ds.prototype.getTimeUntilSkippable = Ds.prototype.getTimeUntilSkippable;
        Ds.prototype.isSkippable = Ds.prototype.isSkippable;
        Ds.prototype.isPaused = Ds.prototype.isPaused;
        Ds.prototype.getRemainingTime = Ds.prototype.getRemainingTime;
        Ds.prototype.getMinSuggestedDuration = Ds.prototype.getMinSuggestedDuration;
        Ds.prototype.getDuration = Ds.prototype.getDuration;
        Ds.prototype.isUsingAnotherMediaElement = Ds.prototype.isUsingAnotherMediaElement;
        Ds.prototype.hasCustomClick = Ds.prototype.hasCustomClick;
        Ds.prototype.isClientRendering = Ds.prototype.isClientRendering;
        Ds.prototype.needsSkipUI = Ds.prototype.needsSkipUI;
        function Es(a, b, c, d) {
          var e = this;
          this.M = null;
          this.u = a;
          this.F = b;
          this.g = c;
          this.H = null;
          this.D = true;
          this.h = this.g;
          this.i = d;
          this.S = /* @__PURE__ */ new Set();
          this.I = /* @__PURE__ */ new Set();
          this.G = /* @__PURE__ */ new Map();
          this.L = /* @__PURE__ */ new Map();
          this.j = new X();
          Fs(this);
          this.J = new Tc();
          this.l = new Tc();
          this.K = false;
          this.Y = this.A = this.C = this.m = null;
          this.aa = false;
          this.P = -1;
          this.X = function() {
            if (!e.K && e.m && !e.F.Da()) {
              e.m = e.g.currentTime;
              var f = Gs(e);
              f && Hs(e, f, 1, 1, Date.now());
            }
          };
          this.V = function() {
            if (!(e.K || e.m || e.F.Da())) {
              e.m = e.g.currentTime;
              var f = Gs(e, true);
              f || (f = Gs(e));
              f && Hs(e, f, 1, 1, Date.now());
            }
          };
          this.ea = function() {
            if (!e.K && e.m && !e.F.Da()) {
              var f = e.g.currentTime;
              e.C && !e.C.pre && !e.C.post && f < (e.C.endTime || e.C.startTime) && (e.C = null);
            }
          };
          this.R = new Bf(this.X);
          this.O = new Bf(function() {
            var f, g, h, k2, l, m, n, q, r, t, w;
            return Q(function(v) {
              switch (v.g) {
                case 1:
                  if (!e.I.size || e.m == null) {
                    v.B(0);
                    break;
                  }
                  f = e.F.l;
                  if (f == Tq || f == Jq) return v.return();
                  g = false;
                  h = Array.from(e.I);
                  k2 = e.F.za();
                  l = u(h);
                  m = l.next();
                case 3:
                  if (m.done) {
                    v.B(5);
                    break;
                  }
                  n = m.value;
                  if (n == e.C) {
                    v.B(4);
                    break;
                  }
                  q = n.endTime || n.startTime;
                  if (!(k2.start - q >= 1)) {
                    r = n.startTime - e.m;
                    r > 0 && r <= 10 && (!e.G.has(n) && Is(n) && e.G.set(n, e.j.preload(n.uri, null, n.mimeType || void 0)), Js(e, n));
                    v.B(4);
                    break;
                  }
                  if (!e.G.has(n)) {
                    v.B(7);
                    break;
                  }
                  return F(v, e.G.get(n), 8);
                case 8:
                  (t = v.h) && t.destroy(), e.G.delete(n);
                case 7:
                  Ks(e, n), w = JSON.stringify(n), e.S.has(w) && e.S.delete(w), e.I.delete(n), Ls(e), n.overlay || (g = true);
                case 4:
                  m = l.next();
                  v.B(3);
                  break;
                case 5:
                  g && Ms(e), H(v);
              }
            });
          });
          this.configure(this.F.getConfiguration().ads);
        }
        p = Es.prototype;
        p.configure = function(a) {
          this.M = a;
          Ns(this);
        };
        function Os(a) {
          if (!a.aa && a.I.size) {
            a.J.o(a.g, "playing", a.V);
            a.J.o(a.g, "timeupdate", a.V);
            a.J.o(a.g, "seeked", a.ea);
            a.J.o(a.g, "ended", a.X);
            if ("requestVideoFrameCallback" in a.g && !Ps()) {
              var b = a.g, c = function() {
                a.P != -1 && (a.X(), a.P != -1 && (a.P = b.requestVideoFrameCallback(c)));
              };
              a.P = b.requestVideoFrameCallback(c);
            } else a.R.wa(0.025);
            a.O && a.O.wa(1);
            a.aa = true;
          }
        }
        function Ls(a) {
          a.aa && !a.I.size && (a.J.Ea(a.g, "playing", a.V), a.J.Ea(a.g, "timeupdate", a.V), a.J.Ea(a.g, "seeked", a.ea), a.J.Ea(a.g, "ended", a.X), a.P != -1 && (a.g.cancelVideoFrameCallback(a.P), a.P = -1), a.R && a.R.stop(), a.O && a.O.stop(), a.aa = false);
        }
        function Ns(a) {
          if (a.u && a.M && !a.K) {
            var b = a.M.supportsMultipleMediaElements, c = a.g;
            c.webkitPresentationMode && c.webkitPresentationMode !== "inline" ? b = false : c.webkitDisplayingFullscreen && (b = false);
            a.D == b && (a.D = !b, a.D ? (a.h = a.g, a.H && (a.H.parentElement && a.u.removeChild(a.H), a.H = null)) : (a.H || (b = document.createElement(a.g.tagName), b.autoplay = true, b.style.position = "absolute", b.style.top = "0", b.style.left = "0", b.style.width = "100%", b.style.height = "100%", b.style.display = "none", b.setAttribute("playsinline", ""), a.H = b), a.h = a.H));
          } else a.D = true;
        }
        p.stop = function() {
          this.l && this.l.Sa();
          this.S.clear();
          this.I.clear();
          this.j.Ug();
          if (this.G.size) {
            var a = Array.from(this.G.values());
            a = u(a);
            for (var b = a.next(); !b.done; b = a.next()) (b = b.value) && b.then(function(c) {
              c && c.destroy();
            });
          }
          this.G.clear();
          if (this.L.size) for (a = Array.from(this.L.keys()), a = u(a), b = a.next(); !b.done; b = a.next()) Ks(this, b.value);
          this.L.clear();
          this.j.detach();
          this.K = false;
          this.C = this.m = null;
          this.D = true;
          this.h = this.g;
          this.H = null;
          Qs(this);
          Ls(this);
          this.u && Pj(this.u);
          this.A && (this.A.stop(), this.A = null);
        };
        p.release = function() {
          this.stop();
          this.J && this.J.release();
          this.l && this.l.release();
          this.R && (this.R.stop(), this.R = null);
          this.O && (this.O.stop(), this.O = null);
          this.j.destroy();
        };
        p.Wb = function() {
          return this.j;
        };
        function Rs(a, b) {
          var c;
          Q(function(d) {
            if (d.g == 1) return Fs(a), c = [], b && b.values.find(function(e) {
              return e.key == "X-OVERLAY-ID";
            }) ? (c = Ss(b), d.B(2)) : F(d, Ts(a, b), 3);
            d.g != 2 && (c = d.h);
            c.length ? Us(a, c) : ab("Unsupported HLS interstitial", b);
            H(d);
          });
        }
        function Vs(a, b) {
          var c = Vd(b.eventNode, "OverlayEvent"), d = c.attributes.uri, e = c.attributes.mimeType, f = c.attributes.loop == "true", g = Zd(c, "z", ee);
          if (d && g != 0) {
            var h = null, k2 = Vd(c, "Background");
            if (k2) {
              var l = k2.attributes.uri;
              l ? h = "center / contain no-repeat url('" + l + "')" : h = Td(k2);
            }
            k2 = 1920;
            l = 1080;
            var m = Vd(c, "Viewport");
            if (m) {
              k2 = Zd(m, "x", ee);
              if (k2 == null) return;
              l = Zd(m, "y", ee);
              if (l == null) return;
            }
            var n = { viewport: { x: k2, y: l }, topLeft: { x: 0, y: 0 }, size: { x: k2, y: l } }, q = Vd(c, "Overlay");
            if (m && q) {
              var r = Vd(q, "TopLeft"), t = Vd(q, "Size");
              if (r && t) {
                q = Zd(r, "x", ee);
                if (q == null) return;
                r = Zd(r, "y", ee);
                if (r == null) return;
                var w = Zd(t, "x", ee);
                if (w == null) return;
                t = Zd(t, "y", ee);
                if (t == null) return;
                n.topLeft.x = q;
                n.topLeft.y = r;
                n.size.x = w;
                n.size.y = t;
              }
            }
            q = null;
            c = Vd(c, "Squeeze");
            if (m && c && (t = Vd(c, "TopLeft"), c = Vd(c, "Size"), t && c)) {
              m = Zd(t, "x", ee);
              if (m == null) return;
              q = Zd(t, "y", ee);
              if (q == null) return;
              t = Zd(c, "x", ee);
              if (t == null) return;
              c = Zd(c, "y", ee);
              if (c == null) return;
              q = { viewport: { x: k2, y: l }, topLeft: { x: m, y: q }, size: { x: t, y: c } };
            }
            Us(a, [{
              id: b.id,
              groupId: null,
              startTime: b.startTime,
              endTime: b.endTime,
              uri: d,
              mimeType: e,
              isSkippable: false,
              skipOffset: null,
              skipFor: null,
              canJump: true,
              resumeOffset: null,
              playoutLimit: null,
              once: false,
              pre: false,
              post: false,
              timelineRange: true,
              loop: f,
              overlay: n,
              displayOnBackground: g == -1,
              currentVideo: q,
              background: h,
              clickThroughUrl: null
            }]);
          }
        }
        p.addAdUrlInterstitial = function(a) {
          var b = this, c, d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) return c = { type: 12 }, F(n, Ws(b, a, c), 2);
            if (n.g != 3) {
              d = n.h;
              e = Jd(d, "VAST,vmap:VMAP");
              if (!e) throw new U(2, 10, 10007);
              f = [];
              if (e.tagName == "VAST") return f = ts(e, b.m), n.B(3);
              if (e.tagName != "vmap:VMAP") return n.B(3);
              g = function(q) {
                var r, t;
                return Q(function(w) {
                  if (w.g == 1) return F(w, Ws(b, q.uri, c), 2);
                  r = w.h;
                  t = Jd(r, "VAST");
                  if (!t) throw new U(2, 10, 10007);
                  f.push.apply(f, x(ts(t, q.time)));
                  H(w);
                });
              };
              h = [];
              k2 = u(vs(e));
              for (l = k2.next(); !l.done; l = k2.next()) m = l.value, h.push(g(m));
              return h.length ? F(n, Promise.all(h), 3) : n.B(3);
            }
            Us(b, f);
            H(n);
          });
        };
        function Us(a, b) {
          var c, d, e, f, g, h, k2, l;
          Q(function(m) {
            switch (m.g) {
              case 1:
                c = false, d = u(b), e = d.next();
              case 2:
                if (e.done) {
                  m.B(4);
                  break;
                }
                f = e.value;
                if (!f.uri) {
                  ab("Missing URL in interstitial", f);
                  m.B(3);
                  break;
                }
                if (f.mimeType) {
                  m.B(5);
                  break;
                }
                ra(m, 6);
                g = a.j.Vb();
                return F(m, Jo(f.uri, g, a.F.getConfiguration().streaming.retryParameters), 8);
              case 8:
                f.mimeType = m.h;
                ta(m, 5);
                break;
              case 6:
                ua(m);
              case 5:
                h = f.id || JSON.stringify(f);
                if (a.S.has(h)) {
                  m.B(3);
                  break;
                }
                f.loop && !f.overlay && ab("Loop is only supported in overlay interstitials", f);
                f.overlay || (c = true);
                a.S.add(h);
                a.I.add(f);
                k2 = false;
                f.pre && a.m == null ? k2 = true : f.startTime != 0 || f.canJump ? a.m != null && (l = f.startTime - a.m, l > 0 && l <= 10 && (k2 = true)) : k2 = true;
                k2 && (!a.G.has(f) && Is(f) && a.G.set(f, a.j.preload(f.uri, null, f.mimeType || void 0)), Js(a, f));
              case 3:
                e = d.next();
                m.B(2);
                break;
              case 4:
                c && Ms(a), Os(a), H(m);
            }
          });
        }
        function Gs(a, b, c) {
          b = b === void 0 ? false : b;
          c = c === void 0 ? null : c;
          var d = 0, e = null;
          if (a.I.size && a.m != null) {
            var f = a.g.ended, g = Array.from(a.I).sort(function(n, q) {
              return q.startTime - n.startTime;
            }), h = g;
            h = b ? g.filter(function(n) {
              return n.pre;
            }) : f ? g.filter(function(n) {
              return n.post;
            }) : g.filter(function(n) {
              return !n.pre && !n.post;
            });
            g = u(h);
            for (h = g.next(); !h.done; h = g.next()) {
              h = h.value;
              var k2 = false;
              if (b) k2 = h.pre;
              else if (f) k2 = h.post;
              else if (!h.pre && !h.post) {
                var l = a.m - Math.round(h.startTime * 1e3) / 1e3, m = 1;
                a.M.allowStartInMiddleOfInterstitial && h.endTime && h.endTime != Infinity && (m = h.endTime - h.startTime);
                (l > 0 || l == 0 && a.m == 0) && (l <= m || !h.canJump) && (k2 = c == null && a.C && !a.C.pre && !a.C.post && a.C.startTime >= h.startTime ? false : true);
              }
              k2 && (!a.C || h.startTime >= a.C.startTime) && (d == (c || 0) ? e = h : e && !h.canJump && Math.round(h.startTime * 1e3) / 1e3 - Math.round(e.startTime * 1e3) / 1e3 > 1e-3 && (e = h, d = 0), d++);
            }
          }
          return e;
        }
        function Hs(a, b, c, d, e, f) {
          f = f === void 0 ? 0 : f;
          a.C = b;
          Ns(a);
          a.D || !a.u || a.h.parentElement || a.u.appendChild(a.h);
          d == 1 && c == 1 && (c = Array.from(a.I).filter(function(g) {
            return b.pre ? g.pre == b.pre : b.post ? g.post == b.post : Math.abs(g.startTime - b.startTime) < 1e-3;
          }).length);
          b.once && (f++, a.I.delete(b), Ls(a), b.overlay || Ms(a));
          b.mimeType && (b.mimeType.startsWith("image/") || b.mimeType === "text/html") ? b.overlay ? Xs(a, b, c, d, f) : ab("Unsupported interstitial", b) : a.D && b.overlay ? ab("Unsupported interstitial", b) : Ys(a, b, c, d, e, f);
        }
        function Xs(a, b, c, d, e) {
          function f() {
            a.A && (a.A.stop(), a.A = null);
            a.u.removeChild(k2);
            Qs(a, b);
            a.i(new T("ad-stopped"));
            a.l.Sa();
            var q = Gs(a, b.pre, d - e);
            q ? Hs(a, q, c, ++d, Date.now(), e) : a.K = false;
          }
          a.K = true;
          var g = b.overlay, h = b.mimeType == "text/html" ? "iframe" : "img", k2 = document.createElement(h);
          k2.style.objectFit = "contain";
          k2.style.position = "absolute";
          k2.style.border = "none";
          Zs(a, b);
          a.i(new T("ad-started", (/* @__PURE__ */ new Map()).set("ad", new Ds(b, c, d))));
          h == "iframe" ? k2.src = b.uri : (k2.src = b.uri, k2.onerror = function(q) {
            a.i(new T("ad-error", (/* @__PURE__ */ new Map()).set(
              "originalEvent",
              q
            )));
            f();
          });
          var l = g.viewport, m = g.topLeft;
          g = g.size;
          l.x == 0 && l.y == 0 ? (k2.width = b.overlay.size.x, k2.height = b.overlay.size.y, k2.style.bottom = "10%", k2.style.left = "0", k2.style.right = "0", k2.style.width = "100%", b.overlay.size.y || h != "iframe" || (k2.style.height = "auto")) : (k2.style.height = g.y / l.y * 100 + "%", k2.style.left = m.x / l.x * 100 + "%", k2.style.top = m.y / l.y * 100 + "%", k2.style.width = g.x / l.x * 100 + "%");
          a.u.appendChild(k2);
          var n = Date.now();
          a.A && a.A.stop();
          a.A = new Bf(function() {
            b.playoutLimit && (Date.now() - n) / 1e3 > b.playoutLimit ? (a.i(new T("ad-complete")), f()) : b.endTime && a.g.currentTime > b.endTime ? (a.i(new T("ad-complete")), f()) : a.g.currentTime < b.startTime && (a.i(new T("ad-skipped")), f());
          });
          b.playoutLimit && !b.endTime ? a.A.$(b.playoutLimit) : b.endTime && a.A.wa(0.025);
          a.l.o(a.g, "seeked", function() {
            var q = a.g.currentTime;
            if (q < b.startTime || b.endTime && q > b.endTime) a.A && a.A.stop(), a.i(new T("ad-skipped")), f();
          });
          b.clickThroughUrl && a.l.o(k2, "click", function() {
            b.clickThroughUrl && window2.open(b.clickThroughUrl, "_blank");
          });
        }
        function Ys(a, b, c, d, e, f) {
          var g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J;
          Q(function(L) {
            switch (L.g) {
              case 1:
                g = Date.now();
                a.K = true;
                h = false;
                k2 = function() {
                  if (!a.D && !b.overlay && b.resumeOffset == null) if (b.timelineRange && b.endTime && b.endTime != Infinity) a.g.currentTime != b.endTime && (a.g.currentTime = b.endTime);
                  else {
                    var K = Date.now();
                    a.g.currentTime += (K - e) / 1e3;
                    e = K;
                  }
                };
                l = function(K) {
                  var N, P;
                  return Q(function(O) {
                    if (O.g == 1) {
                      k2();
                      N = Gs(a, b.pre, d - f);
                      if (K && b.groupId) for (; N && N.groupId == b.groupId; ) d++, N = Gs(a, b.pre, d - f);
                      a.A && (!b.groupId || N && N.groupId != b.groupId) && (a.A.stop(), a.A = null);
                      Qs(a, b);
                      if (N && !N.overlay) return O.B(2);
                      b.post && (a.m = null, a.C = null);
                      return a.D ? F(O, a.j.detach(), 4) : F(O, a.j.tc(), 4);
                    }
                    O.g != 2 && (a.D && (P = b.resumeOffset, P == null && (P = b.timelineRange && b.endTime && b.endTime != Infinity ? b.endTime - (a.m || 0) : (Date.now() - e) / 1e3), a.i(new T("ad-content-resume-requested", (/* @__PURE__ */ new Map()).set("offset", P)))), a.i(new T("ad-stopped")), a.l.Sa(), a.K = false, a.D ? Ms(a) : (a.h.style.display = "none", k2(), a.g.ended || a.g.play()));
                    Ns(a);
                    N && (a.i(new T("ad-stopped")), a.l.Sa(), Hs(a, N, c, ++d, e, f));
                    H(O);
                  });
                };
                m = function(K) {
                  return Q(function(N) {
                    if (h) return N.return();
                    h = true;
                    a.i(new T("ad-error", (/* @__PURE__ */ new Map()).set("originalEvent", K)));
                    return F(N, l(false), 0);
                  });
                };
                n = function() {
                  return Q(function(K) {
                    if (K.g == 1) {
                      if (h) return K.return();
                      h = true;
                      return F(K, l(false), 2);
                    }
                    a.i(new T("ad-complete"));
                    H(K);
                  });
                };
                a.Y = function() {
                  return Q(function(K) {
                    if (h) return K.return();
                    h = true;
                    a.i(new T("ad-skipped"));
                    return F(K, l(true), 0);
                  });
                };
                q = new Cs(a.h, b, a.Y, c, d, !a.D);
                a.D || (q.setMuted(a.g.muted), q.setVolume(a.g.volume));
                a.i(new T(
                  "ad-started",
                  (/* @__PURE__ */ new Map()).set("ad", q)
                ));
                (r = q.canSkipNow()) && a.i(new T("ad-skip-state-changed"));
                a.l.ua(a.j, "error", m);
                a.l.o(a.h, "timeupdate", function() {
                  if (a.h.duration) {
                    var K = q.canSkipNow();
                    r != K && q.getRemainingTime() > 0 && q.getDuration() > 0 && a.i(new T("ad-skip-state-changed"));
                    r = K;
                  }
                });
                a.l.ua(a.j, "firstquartile", function() {
                  k2();
                  a.i(new T("ad-first-quartile"));
                });
                a.l.ua(a.j, "midpoint", function() {
                  k2();
                  a.i(new T("ad-midpoint"));
                });
                a.l.ua(a.j, "thirdquartile", function() {
                  k2();
                  a.i(new T("ad-third-quartile"));
                });
                a.l.ua(
                  a.j,
                  "complete",
                  n
                );
                a.l.o(a.h, "play", function() {
                  a.i(new T("ad-resumed"));
                });
                a.l.o(a.h, "pause", function() {
                  var K = a.j.getConfiguration();
                  a.h.currentTime >= K.playRangeEnd ? n() : a.i(new T("ad-paused"));
                });
                a.l.o(a.h, "volumechange", function() {
                  a.h.muted ? a.i(new T("ad-muted")) : a.i(new T("ad-volume-changed"));
                });
                b.clickThroughUrl && (t = a.u || a.h, a.l.o(t, "click", function() {
                  b.clickThroughUrl && (q.isPaused() || q.pause(), window2.open(b.clickThroughUrl, "_blank"));
                }));
                if (!a.D || d != 1) {
                  L.B(2);
                  break;
                }
                a.i(new T("ad-content-pause-requested", (/* @__PURE__ */ new Map()).set(
                  "saveLivePosition",
                  true
                )));
                w = new Lg();
                v = function(K) {
                  return Q(function(N) {
                    if (N.g == 1) return K.state != "detach" ? N.B(0) : Ps() ? F(N, new Promise(function(P) {
                      return new Bf(P).$(0.1);
                    }), 3) : N.B(3);
                    w.resolve();
                    a.l.Ea(a.F, "onstatechange", v);
                    H(N);
                  });
                };
                a.l.o(a.F, "onstatechange", v);
                return F(L, w, 2);
              case 2:
                return Zs(a, b), a.D || (a.h.style.display = "", b.overlay ? (a.h.loop = b.loop, z = b.overlay.viewport, y = b.overlay.topLeft, A = b.overlay.size, a.h.style.height = A.y / z.y * 100 + "%", a.h.style.left = y.x / z.x * 100 + "%", a.h.style.top = y.y / z.y * 100 + "%", a.h.style.width = A.x / z.x * 100 + "%") : (a.g.pause(), b.resumeOffset != null && b.resumeOffset != 0 && (a.g.currentTime += b.resumeOffset), a.h.loop = false, a.h.style.height = "100%", a.h.style.left = "0", a.h.style.top = "0", a.h.style.width = "100%")), ra(L, 4), Fs(a), b.startTime && b.endTime && b.endTime != Infinity && b.startTime != b.endTime && (C = b.endTime - b.startTime, C > 0 && a.j.configure("playRangeEnd", C)), b.playoutLimit && !a.A && (a.A = new Bf(function() {
                  a.Y();
                }).$(b.playoutLimit), a.j.configure("playRangeEnd", b.playoutLimit)), F(L, a.j.cc(a.h), 6);
              case 6:
                return E = null, a.M.allowStartInMiddleOfInterstitial && a.m != null && (D = a.m - b.startTime, Math.abs(D) > 0.25 && (E = D)), a.G.has(b) ? F(L, a.G.get(b), 10) : F(L, a.j.load(b.uri, E, b.mimeType || void 0), 8);
              case 10:
                return B = L.h, a.G.delete(b), B ? F(L, a.j.load(B), 8) : F(L, a.j.load(b.uri, E, b.mimeType || void 0), 8);
              case 8:
                a.h.play();
                G = (Date.now() - g) / 1e3;
                a.i(new T("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", G)));
                a.D && a.g.play();
                b.overlay && (I = function() {
                  var K = a.g.currentTime - b.startTime;
                  Math.abs(K - a.h.currentTime) > 0.1 && (a.h.currentTime = K);
                }, a.l.ua(
                  a.h,
                  "playing",
                  I
                ), a.l.o(a.g, "seeking", I), a.l.o(a.g, "seeked", function() {
                  var K = a.g.currentTime;
                  (K < b.startTime || b.endTime && K > b.endTime) && a.Y();
                }));
                ta(L, 0);
                break;
              case 4:
                J = ua(L);
                if (!a.K) return L.return();
                m(J);
                H(L);
            }
          });
        }
        function Zs(a, b) {
          b.displayOnBackground && (a.g.style.zIndex = "1");
          if (b.currentVideo != null) {
            var c = b.currentVideo;
            a.g.style.transformOrigin = "top left";
            var d = true, e = [], f = c.topLeft.x / c.viewport.x * 100;
            f > 0 && f <= 100 && (e.push("translateX(" + f + "%)"), d = false);
            f = c.topLeft.y / c.viewport.y * 100;
            f > 0 && f <= 100 && (e.push("translateY(" + f + "%)"), d = false);
            f = c.size.x / c.viewport.x;
            f < 1 && e.push("scaleX(" + f + ")");
            c = c.size.y / c.viewport.y;
            f < 1 && e.push("scaleY(" + c + ")");
            e.length && (a.g.style.transform = e.join(" "));
            d && (a.g.style.transition = "transform 250ms");
          }
          a.u && (b.clickThroughUrl ? (a.u.setAttribute("ad-active", "true"), a.u.style.pointerEvents = "") : a.u.style.pointerEvents = "none", b.background && (a.u.style.background = b.background));
          a.H && (a.H.style.background = b.overlay ? "" : "rgb(0, 0, 0)");
        }
        function Qs(a, b) {
          if (!b || b.displayOnBackground) a.g.style.zIndex = "";
          b && b.currentVideo == null || (a.g.style.transformOrigin = "", a.g.style.transition = "", a.g.style.transform = "");
          a.u && (a.u.removeAttribute("ad-active"), a.u.style.pointerEvents = "", !b || b.background) && (a.u.style.background = "");
          a.H && (a.H.style.background = "");
        }
        function Ts(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P, O, M, R, W, wa, Y, Ka, Na, La, Ea, za, Fa, Da;
          return Q(function(Aa) {
            switch (Aa.g) {
              case 1:
                c = [];
                if (!b) return Aa.return(c);
                d = b.values.find(function(Ca) {
                  return Ca.key == "X-ASSET-URI";
                });
                e = b.values.find(function(Ca) {
                  return Ca.key == "X-ASSET-LIST";
                });
                if (!d && !e) return Aa.return(c);
                f = null;
                if (g = b.values.find(function(Ca) {
                  return Ca.key == "ID";
                })) f = g.data;
                h = f == null ? Math.floor(b.startTime * 10) / 10 : b.startTime;
                (k2 = b.endTime) && b.endTime != Infinity && typeof b.endTime == "number" && (k2 = f == null ? Math.floor(b.endTime * 10) / 10 : b.endTime);
                l = b.values.find(function(Ca) {
                  return Ca.key == "X-RESTRICT";
                });
                n = m = true;
                l && l.data && (q = l.data, m = !q.includes("SKIP"), n = !q.includes("JUMP"));
                r = m ? 0 : null;
                if (t = b.values.find(function(Ca) {
                  return Ca.key == "X-ENABLE-SKIP-AFTER";
                })) w = t.data, r = parseFloat(w), isNaN(r) && (r = m ? 0 : null);
                v = null;
                if (z = b.values.find(function(Ca) {
                  return Ca.key == "X-ENABLE-SKIP-FOR";
                })) y = z.data, v = parseFloat(y), isNaN(r) && (v = null);
                A = null;
                if (C = b.values.find(function(Ca) {
                  return Ca.key == "X-RESUME-OFFSET";
                })) E = C.data, A = parseFloat(E), isNaN(A) && (A = null);
                D = null;
                if (B = b.values.find(function(Ca) {
                  return Ca.key == "X-PLAYOUT-LIMIT";
                })) G = B.data, D = parseFloat(G), isNaN(D) && (D = null);
                L = J = I = false;
                if (K = b.values.find(function(Ca) {
                  return Ca.key == "CUE";
                })) N = K.data, I = N.includes("ONCE"), J = N.includes("PRE"), L = N.includes("POST");
                P = false;
                (O = b.values.find(function(Ca) {
                  return Ca.key == "X-TIMELINE-OCCUPIES";
                })) ? (M = O.data, P = M.includes("RANGE")) : !C && a.F.U() && (P = !J && !L);
                if (d) {
                  R = d.data;
                  if (!R) return Aa.return(c);
                  c.push({
                    id: f,
                    groupId: null,
                    startTime: h,
                    endTime: k2,
                    uri: R,
                    mimeType: null,
                    isSkippable: m,
                    skipOffset: r,
                    skipFor: v,
                    canJump: n,
                    resumeOffset: A,
                    playoutLimit: D,
                    once: I,
                    pre: J,
                    post: L,
                    timelineRange: P,
                    loop: false,
                    overlay: null,
                    displayOnBackground: false,
                    currentVideo: null,
                    background: null,
                    clickThroughUrl: null
                  });
                  Aa.B(2);
                  break;
                }
                if (!e) {
                  Aa.B(2);
                  break;
                }
                W = e.data;
                if (!W) return Aa.return(c);
                ra(Aa, 4);
                wa = { type: 11 };
                return F(Aa, Ws(a, W, wa), 6);
              case 6:
                Y = Aa.h;
                Ka = Wb(Y);
                Na = JSON.parse(Ka);
                if (La = Na["SKIP-CONTROL"]) Ea = La["ENABLE-SKIP-AFTER"], typeof Ea == "number" && (r = parseFloat(Ea), isNaN(Ea) && (r = m ? 0 : null)), za = La["ENABLE-SKIP-FOR"], typeof za == "number" && (v = parseFloat(za), isNaN(za) && (v = null));
                for (Fa = 0; Fa < Na.ASSETS.length; Fa++) Da = Na.ASSETS[Fa], Da.URI && c.push({ id: f + "_shaka_asset_" + Fa, groupId: f, startTime: h, endTime: k2, uri: Da.URI, mimeType: null, isSkippable: m, skipOffset: r, skipFor: v, canJump: n, resumeOffset: A, playoutLimit: D, once: I, pre: J, post: L, timelineRange: P, loop: false, overlay: null, displayOnBackground: false, currentVideo: null, background: null, clickThroughUrl: null });
                ta(Aa, 2);
                break;
              case 4:
                ua(Aa);
              case 2:
                return Aa.return(c);
            }
          });
        }
        function Ss(a) {
          var b = [];
          if (!a) return b;
          var c = a.values.find(function(v) {
            return v.key == "X-ASSET-URI";
          });
          if (!c) return b;
          c = c.data;
          if (!c) return b;
          var d = null, e = a.values.find(function(v) {
            return v.key == "X-OVERLAY-ID";
          });
          e && (d = e.data);
          e = d == null ? Math.floor(a.startTime * 10) / 10 : a.startTime;
          var f = a.endTime;
          a.endTime && a.endTime != Infinity && typeof a.endTime == "number" && (f = d == null ? Math.floor(a.endTime * 10) / 10 : a.endTime);
          var g = false, h = false, k2 = false, l = a.values.find(function(v) {
            return v.key == "CUE";
          });
          l && (k2 = l.data, g = k2.includes("ONCE"), h = k2.includes("PRE"), k2 = k2.includes("POST"));
          l = null;
          var m = a.values.find(function(v) {
            return v.key == "X-ASSET-MIMETYPE";
          });
          m && (l = m.data);
          m = false;
          var n = a.values.find(function(v) {
            return v.key == "X-LOOP";
          });
          n && (m = n.data == "YES");
          n = 1;
          var q = a.values.find(function(v) {
            return v.key == "X-DEPTH";
          });
          q && (n = parseFloat(q.data), isNaN(n) && (n = 1));
          q = null;
          var r = a.values.find(function(v) {
            return v.key == "X-BACKGROUND";
          });
          r && (q = r.data);
          r = 1920;
          var t = 1080, w = a.values.find(function(v) {
            return v.key == "X-VIEWPORT";
          });
          if (w) {
            t = w.data.split("x");
            if (t.length != 2) return b;
            r = parseFloat(t[0]);
            t = parseFloat(t[1]);
          }
          r = { viewport: { x: r, y: t }, topLeft: { x: 0, y: 0 }, size: { x: r, y: t } };
          if (t = a.values.find(function(v) {
            return v.key == "X-OVERLAY-POSITION";
          })) {
            t = t.data.split("x");
            if (t.length != 2) return b;
            r.topLeft.x = parseFloat(t[0]);
            r.topLeft.y = parseFloat(t[1]);
          }
          if (t = a.values.find(function(v) {
            return v.key == "X-OVERLAY-SIZE";
          })) {
            t = t.data.split("x");
            if (t.length != 2) return b;
            r.size.x = parseFloat(t[0]);
            r.size.y = parseFloat(t[1]);
          }
          t = null;
          if (w = a.values.find(function(v) {
            return v.key == "X-SQUEEZECURRENT";
          })) {
            if (t = parseFloat(w.data), isNaN(t) && (t = 1), t = { viewport: { x: 1920, y: 1080 }, topLeft: { x: 0, y: 0 }, size: { x: 1920 * t, y: 1080 * t } }, a = a.values.find(function(v) {
              return v.key == "X-SQUEEZECURRENT-POSITION";
            })) {
              a = a.data.split("x");
              if (a.length != 2) return b;
              t.topLeft.x = parseFloat(a[0]);
              t.topLeft.y = parseFloat(a[1]);
            }
          }
          b.push({
            id: d,
            groupId: null,
            startTime: e,
            endTime: f,
            uri: c,
            mimeType: l,
            isSkippable: false,
            skipOffset: null,
            skipFor: null,
            canJump: true,
            resumeOffset: null,
            playoutLimit: null,
            once: g,
            pre: h,
            post: k2,
            timelineRange: true,
            loop: m,
            overlay: r,
            displayOnBackground: n == -1,
            currentVideo: t,
            background: q,
            clickThroughUrl: null
          });
          return b;
        }
        function Ms(a) {
          for (var b = [], c = u(a.I), d = c.next(), e = {}; !d.done; e = { Kc: void 0 }, d = c.next()) d = d.value, d.overlay || (e.Kc = { start: d.startTime, end: null }, d.pre ? (e.Kc.start = 0, e.Kc.end = null) : d.post ? (e.Kc.start = -1, e.Kc.end = null) : d.timelineRange && (e.Kc.end = d.endTime), b.find(/* @__PURE__ */ function(f) {
            return function(g) {
              return f.Kc.start == g.start && f.Kc.end == g.end;
            };
          }(e)) || b.push(e.Kc));
          a.i(new T("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", b)));
        }
        function Fs(a) {
          a.j.configure(a.F.Zi());
          a.j.configure("ads.disableHLSInterstitial", true);
          a.j.configure("ads.disableDASHInterstitial", true);
          a.j.configure("playRangeEnd", Infinity);
          Zg(a.F.Vb(), a.j.Vb());
        }
        function Ws(a, b, c) {
          var d, e, f;
          return Q(function(g) {
            if (g.g == 1) return d = $g([b], Fg()), e = a.F.Vb().request(7, d, c), F(g, e.promise, 2);
            f = g.h;
            return g.return(f.data);
          });
        }
        function Is(a) {
          return (a = a.mimeType) ? !a.startsWith("image/") && a !== "text/html" : true;
        }
        function Ps() {
          var a = Rb().Ka();
          return a == "TV" || a == "CONSOLE" || a == "CAST" ? true : false;
        }
        function Js(a, b) {
          if (!(a.L.has(b) || a.M && !a.M.allowPreloadOnDomElements)) {
            var c = function(f) {
              var g = document.createElement("link");
              g.rel = "preload";
              g.href = f;
              g.as = "image";
              document.head.appendChild(g);
              return g;
            }, d = [];
            if (b.background) {
              var e = b.background.match(/url\(('|")?([^'"()]+)('|")\)?/);
              e && d.push(c(e[2]));
            }
            b.mimeType.startsWith("image/") && d.push(c(b.uri));
            a.L.set(b, d);
          }
        }
        function Ks(a, b) {
          if (a.L.has(b)) {
            var c = a.L.get(b);
            c = u(c);
            for (var d = c.next(); !d.done; d = c.next()) d = d.value, d.parentNode.removeChild(d);
            a.L.delete(b);
          }
        }
        ;
        function $s(a, b, c, d, e) {
          this.h = a;
          this.j = Dd(this.h.skipOffset);
          this.g = e;
          this.i = b;
          this.l = c;
          this.u = d;
          this.m = false;
        }
        p = $s.prototype;
        p.needsSkipUI = function() {
          return true;
        };
        p.isClientRendering = function() {
          return false;
        };
        p.hasCustomClick = function() {
          return false;
        };
        p.isUsingAnotherMediaElement = function() {
          return false;
        };
        p.getDuration = function() {
          return this.h.durationInSeconds;
        };
        p.getMinSuggestedDuration = function() {
          return this.getDuration();
        };
        p.getRemainingTime = function() {
          return this.h.startTimeInSeconds + this.h.durationInSeconds - this.g.currentTime;
        };
        p.isPaused = function() {
          return this.g.paused;
        };
        p.isSkippable = function() {
          return typeof this.j == "number" ? true : false;
        };
        p.getTimeUntilSkippable = function() {
          if (typeof this.j != "number") return this.getRemainingTime();
          var a = this.getRemainingTime() + this.j - this.getDuration();
          return Math.max(a, 0);
        };
        p.canSkipNow = function() {
          return this.getTimeUntilSkippable() == 0;
        };
        p.skip = function() {
          this.m = true;
          this.g.currentTime += this.getRemainingTime();
        };
        p.pause = function() {
          return this.g.pause();
        };
        p.play = function() {
          return this.g.play();
        };
        p.getVolume = function() {
          return this.g.volume;
        };
        p.setVolume = function(a) {
          this.g.volume = a;
        };
        p.isMuted = function() {
          return this.g.muted;
        };
        p.isLinear = function() {
          return this.u;
        };
        p.resize = function() {
        };
        p.setMuted = function(a) {
          this.g.muted = a;
        };
        p.getSequenceLength = function() {
          return this.l ? this.l : 1;
        };
        p.getPositionInSequence = function() {
          return this.i ? this.i : 1;
        };
        p.getTitle = function() {
          return this.h.adTitle;
        };
        p.getDescription = function() {
          return "";
        };
        p.getVastMediaBitrate = function() {
          return 0;
        };
        p.getVastMediaHeight = function() {
          return 0;
        };
        p.getVastMediaWidth = function() {
          return 0;
        };
        p.getVastAdId = function() {
          return this.h.vastAdId || "";
        };
        p.getAdId = function() {
          return this.h.adId;
        };
        p.getCreativeAdId = function() {
          return this.h.creativeId;
        };
        p.getAdvertiserName = function() {
          return "";
        };
        p.getMediaUrl = function() {
          return null;
        };
        p.getTimeOffset = function() {
          return 0;
        };
        p.getPodIndex = function() {
          return 0;
        };
        p.release = function() {
          this.l = this.i = this.g = this.h = null;
        };
        S("shaka.ads.MediaTailorAd", $s);
        $s.prototype.release = $s.prototype.release;
        $s.prototype.getPodIndex = $s.prototype.getPodIndex;
        $s.prototype.getTimeOffset = $s.prototype.getTimeOffset;
        $s.prototype.getMediaUrl = $s.prototype.getMediaUrl;
        $s.prototype.getAdvertiserName = $s.prototype.getAdvertiserName;
        $s.prototype.getCreativeAdId = $s.prototype.getCreativeAdId;
        $s.prototype.getAdId = $s.prototype.getAdId;
        $s.prototype.getVastAdId = $s.prototype.getVastAdId;
        $s.prototype.getVastMediaWidth = $s.prototype.getVastMediaWidth;
        $s.prototype.getVastMediaHeight = $s.prototype.getVastMediaHeight;
        $s.prototype.getVastMediaBitrate = $s.prototype.getVastMediaBitrate;
        $s.prototype.getDescription = $s.prototype.getDescription;
        $s.prototype.getTitle = $s.prototype.getTitle;
        $s.prototype.getPositionInSequence = $s.prototype.getPositionInSequence;
        $s.prototype.getSequenceLength = $s.prototype.getSequenceLength;
        $s.prototype.setMuted = $s.prototype.setMuted;
        $s.prototype.resize = $s.prototype.resize;
        $s.prototype.isLinear = $s.prototype.isLinear;
        $s.prototype.isMuted = $s.prototype.isMuted;
        $s.prototype.setVolume = $s.prototype.setVolume;
        $s.prototype.getVolume = $s.prototype.getVolume;
        $s.prototype.play = $s.prototype.play;
        $s.prototype.pause = $s.prototype.pause;
        $s.prototype.skip = $s.prototype.skip;
        $s.prototype.canSkipNow = $s.prototype.canSkipNow;
        $s.prototype.getTimeUntilSkippable = $s.prototype.getTimeUntilSkippable;
        $s.prototype.isSkippable = $s.prototype.isSkippable;
        $s.prototype.isPaused = $s.prototype.isPaused;
        $s.prototype.getRemainingTime = $s.prototype.getRemainingTime;
        $s.prototype.getMinSuggestedDuration = $s.prototype.getMinSuggestedDuration;
        $s.prototype.getDuration = $s.prototype.getDuration;
        $s.prototype.isUsingAnotherMediaElement = $s.prototype.isUsingAnotherMediaElement;
        $s.prototype.hasCustomClick = $s.prototype.hasCustomClick;
        $s.prototype.isClientRendering = $s.prototype.isClientRendering;
        $s.prototype.needsSkipUI = $s.prototype.needsSkipUI;
        function at(a, b, c, d) {
          this.D = a;
          this.K = b;
          this.h = c;
          this.l = null;
          this.P = NaN;
          this.i = d;
          this.J = false;
          this.C = null;
          this.j = [];
          this.M = [];
          this.L = this.F = this.g = null;
          this.G = /* @__PURE__ */ new Map();
          this.m = [];
          this.A = [];
          this.H = "";
          this.O = true;
          this.I = "";
          this.u = new Tc();
        }
        at.prototype.stop = function() {
          for (var a = u(this.m), b = a.next(); !b.done; b = a.next()) b = b.value, this.u.Ea(b.target, b.type, b.listener);
          bt(this);
          this.m = [];
          this.A = [];
          this.H = "";
          this.O = true;
          this.I = "";
          this.C = null;
          this.j = [];
          this.M = [];
          this.G.clear();
        };
        at.prototype.release = function() {
          this.stop();
          this.u && this.u.release();
        };
        at.prototype.onManifestUpdated = function(a) {
          this.J = a;
          this.H != "" && (ct(this, this.H, this.O), this.O = false);
        };
        at.prototype.getCuePoints = function() {
          for (var a = [], b = u(this.j), c = b.next(); !c.done; c = b.next()) {
            c = u(c.value.ads);
            for (var d = c.next(); !d.done; d = c.next()) d = d.value, a.push({ start: d.startTimeInSeconds, end: d.startTimeInSeconds + d.durationInSeconds });
          }
          return a;
        };
        function dt(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, t;
          Q(function(w) {
            if (w.g == 1) return d = { type: 7 }, e = $g([b], Fg()), e.method = "POST", c && (f = JSON.stringify(c), e.body = $b(f)), g = a.K.request(7, e, d), ra(w, 2), F(w, g.promise, 4);
            if (w.g != 2) {
              h = w.h;
              k2 = Wb(h.data);
              l = JSON.parse(k2);
              if (l.manifestUrl && l.trackingUrl) m = new qb(b), n = new qb(l.trackingUrl), a.H = m.resolve(n).toString(), q = Date.now() / 1e3, r = q - a.P, a.i(new T("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", r))), t = new qb(l.manifestUrl), a.l.resolve(m.resolve(t).toString()), a.l = null;
              else throw Error("Insufficient data from MediaTailor.");
              return ta(w, 0);
            }
            ua(w);
            if (!a.I.length) return a.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."), a.l = null, w.return();
            a.l.resolve(a.I);
            a.l = null;
            H(w);
          });
        }
        function ct(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y;
          Q(function(A) {
            if (A.g == 1) return d = { type: 8 }, e = $g([b], Fg()), f = a.K.request(7, e, d), ra(A, 2), F(A, f.promise, 4);
            if (A.g != 2) {
              g = A.h;
              h = [];
              k2 = Wb(g.data);
              l = JSON.parse(k2);
              if (l.avails.length > 0) {
                if (JSON.stringify(a.j) != JSON.stringify(l.avails)) {
                  a.j = l.avails;
                  m = u(a.j);
                  for (n = m.next(); !n.done; n = m.next()) for (q = n.value, r = u(q.nonLinearAdsList), t = r.next(); !t.done; t = r.next()) for (w = t.value, v = u(w.nonLinearAdList), z = v.next(); !z.done; z = v.next()) y = z.value, et(a, y);
                  h = a.getCuePoints();
                  a.i(new T("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", h)));
                }
              } else a.j.length && a.i(new T("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", h))), bt(a), a.j = [];
              c && (a.J || h.length > 0) && ft(a);
              return ta(A, 0);
            }
            ua(A);
            H(A);
          });
        }
        function et(a, b) {
          var c, d, e, f, g, h, k2, l, m;
          Q(function(n) {
            if (n.g == 1) {
              if (!b.staticResource) return n.return();
              c = gt(b);
              if (d = a.G.get(c)) return n.return();
              e = { type: 9 };
              f = $g([b.staticResource], Fg());
              g = a.K.request(7, f, e);
              ra(n, 2);
              a.G.set(c, []);
              return F(n, g.promise, 4);
            }
            if (n.g != 2) return h = n.h, k2 = Wb(h.data), l = JSON.parse(k2), m = l.apps, a.G.set(c, m), ta(n, 0);
            ua(n);
            a.G.delete(c);
            H(n);
          });
        }
        function gt(a) {
          return [a.adId, a.adParameters, a.adSystem, a.adTitle, a.creativeAdId, a.creativeId, a.creativeSequence, a.height, a.width, a.staticResource].join("");
        }
        function ft(a) {
          ht(a);
          a.J || (it(a), a.u.o(a.h, "seeked", function() {
            it(a);
          }), a.u.o(a.h, "ended", function() {
            bt(a);
          }));
          a.u.o(a.h, "timeupdate", function() {
            ht(a);
          });
        }
        function it(a) {
          var b = a.h.currentTime;
          if (b != 0 && a.C == null) {
            for (var c, d, e = u(a.j), f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              for (var g = u(f.ads), h = g.next(); !h.done; h = g.next()) if (h = h.value, !d) h.startTimeInSeconds < b && (d = h, c = f);
              else if (h.startTimeInSeconds < b && h.startTimeInSeconds > d.startTimeInSeconds + d.durationInSeconds) {
                d = h;
                c = f;
                break;
              }
            }
            c && d && !a.M.includes(d.adId) && (a.C = b, a.h.currentTime = c.startTimeInSeconds);
          }
        }
        function ht(a) {
          if (a.h.duration && (a.g || a.j.length)) {
            var b = a.h.currentTime, c = false;
            if (a.g) {
              c = true;
              var d = a.F, e = d.startTimeInSeconds + 0.5 * d.durationInSeconds, f = d.startTimeInSeconds + 0.75 * d.durationInSeconds;
              b >= d.startTimeInSeconds + 0.25 * d.durationInSeconds && !a.A.includes("firstQuartile") ? (a.A.push("firstQuartile"), jt(a, "firstQuartile")) : b >= e && !a.A.includes("midpoint") ? (a.A.push("midpoint"), jt(a, "midpoint")) : b >= f && !a.A.includes("thirdQuartile") && (a.A.push("thirdQuartile"), jt(a, "thirdQuartile"));
              d = a.g.getRemainingTime();
              e = a.g.getDuration();
              a.g.canSkipNow() && d > 0 && e > 0 && jt(a, "skipStateChanged");
              e > 0 && (d <= 0 || d > e) && bt(a);
            }
            if (!a.g || !a.g.isLinear()) {
              a: for (d = u(a.j), e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                if (a.g && a.g.isLinear()) break;
                for (f = 0; f < e.ads.length; f++) {
                  var g = e.ads[f], h = g.startTimeInSeconds + g.durationInSeconds;
                  if (g.startTimeInSeconds <= b && h > b) {
                    if (a.M.includes(g.adId)) {
                      if (a.h.ended) continue;
                      a.h.currentTime = h;
                      break a;
                    }
                    bt(a);
                    a.L = e;
                    a.g = new $s(g, f + 1, e.ads.length, true, a.h);
                    a.F = g;
                    f === 0 && jt(a, "breakStart");
                    kt(a);
                    break;
                  }
                }
              }
              if (!a.g) for (d = u(a.j), e = d.next(); !e.done; e = d.next()) {
                e = e.value;
                if (a.g) break;
                for (f = 0; f < e.nonLinearAdsList.length; f++) if (g = e.nonLinearAdsList[f], g.nonLinearAdList.length) {
                  h = e.startTimeInSeconds;
                  var k2 = a.G.get(gt(g.nonLinearAdList[0]));
                  if (h <= b && k2 && k2.length) {
                    bt(a);
                    h = a;
                    k2 = u(k2);
                    for (var l = k2.next(); !l.done; l = k2.next()) if (l = l.value, l.data.source.length) {
                      var m = document.createElement("img");
                      m.src = l.data.source[0].url;
                      m.style.top = (l.placeholder.top || 0) + "%";
                      m.style.height = 100 - (l.placeholder.top || 0) + "%";
                      m.style.left = (l.placeholder.left || 0) + "%";
                      m.style.maxWidth = 100 - (l.placeholder.left || 0) + "%";
                      m.style.objectFit = "contain";
                      m.style.position = "absolute";
                      h.D.appendChild(m);
                    }
                    a.L = e;
                    a.g = new $s(g, f + 1, e.ads.length, false, a.h);
                    a.F = g;
                    f === 0 && jt(a, "breakStart");
                    kt(a);
                    break;
                  }
                }
              }
              c && !a.g && (b = a.h.currentTime, a.C && a.C > b && (a.h.currentTime = a.C), a.C = null);
            }
          }
        }
        function bt(a) {
          if (a.g) {
            for (; a.D.lastChild; ) a.D.removeChild(a.D.firstChild);
            a.J || a.M.push(a.F.adId);
            var b = a.g.m;
            (b === void 0 ? 0 : b) ? jt(a, "skip") : jt(a, "complete");
            b = u(a.m);
            for (var c = b.next(); !c.done; c = b.next()) c = c.value, a.u.Ea(c.target, c.type, c.listener);
            a.m = [];
            a.A = [];
            b = a.g.getPositionInSequence();
            c = a.g.getSequenceLength();
            b === c && jt(a, "breakEnd");
            a.g = null;
            a.F = null;
            a.L = null;
          }
        }
        function kt(a) {
          var b = false;
          a.h.paused ? b = true : (jt(a, "impression"), jt(a, "start"));
          a.m.push({ target: a.h, type: "volumechange", listener: function() {
            a.h.muted && jt(a, "mute");
          } });
          a.m.push({ target: a.h, type: "volumechange", listener: function() {
            a.h.muted || jt(a, "unmute");
          } });
          a.m.push({ target: a.h, type: "play", listener: function() {
            b ? (jt(a, "impression"), jt(a, "start"), b = false) : jt(a, "resume");
          } });
          a.m.push({ target: a.h, type: "pause", listener: function() {
            jt(a, "pause");
          } });
          for (var c = u(a.m), d = c.next(); !d.done; d = c.next()) d = d.value, a.u.o(
            d.target,
            d.type,
            d.listener
          );
        }
        function jt(a, b) {
          var c = a.F.trackingEvents.find(function(f) {
            return f.eventType == b;
          });
          c || (c = a.L.adBreakTrackingEvents.find(function(f) {
            return f.eventType == b;
          }));
          if (c) {
            var d = { type: 10 };
            c = u(c.beaconUrls);
            for (var e = c.next(); !e.done; e = c.next()) (e = e.value) && e != "" && (e = $g([e], Fg()), e.method = "POST", a.K.request(7, e, d));
          }
          switch (b) {
            case "impression":
              a.i(new T("ad-impression"));
              break;
            case "start":
              a.i(new T("ad-started", (/* @__PURE__ */ new Map()).set("ad", a.g)));
              break;
            case "mute":
              a.i(new T("ad-muted"));
              break;
            case "unmute":
              a.i(new T("ad-volume-changed"));
              break;
            case "resume":
              a.i(new T("ad-resumed"));
              break;
            case "pause":
              a.i(new T("ad-paused"));
              break;
            case "firstQuartile":
              a.i(new T("ad-first-quartile"));
              break;
            case "midpoint":
              a.i(new T("ad-midpoint"));
              break;
            case "thirdQuartile":
              a.i(new T("ad-third-quartile"));
              break;
            case "complete":
              a.i(new T("ad-complete"));
              a.i(new T("ad-stopped"));
              break;
            case "skip":
              a.i(new T("ad-skipped"));
              a.i(new T("ad-stopped"));
              break;
            case "breakStart":
              a.D.setAttribute("ad-active", "true");
              break;
            case "breakEnd":
              a.D.removeAttribute("ad-active");
              break;
            case "skipStateChanged":
              a.i(new T("ad-skip-state-changed"));
          }
        }
        ;
        function lt(a, b) {
          this.g = a;
          this.i = null;
          this.h = b;
        }
        p = lt.prototype;
        p.needsSkipUI = function() {
          return true;
        };
        p.isClientRendering = function() {
          return false;
        };
        p.hasCustomClick = function() {
          return true;
        };
        p.isUsingAnotherMediaElement = function() {
          return false;
        };
        p.getDuration = function() {
          return this.i ? this.i.duration : -1;
        };
        p.getMinSuggestedDuration = function() {
          return this.getDuration();
        };
        p.getRemainingTime = function() {
          return this.i ? this.i.duration - this.i.currentTime : -1;
        };
        p.isPaused = function() {
          return this.h.paused;
        };
        p.isSkippable = function() {
          return this.g.isSkippable();
        };
        p.getTimeUntilSkippable = function() {
          var a = this.g.getSkipTimeOffset();
          a = this.getRemainingTime() - a;
          return Math.max(a, 0);
        };
        p.canSkipNow = function() {
          return this.getTimeUntilSkippable() == 0;
        };
        p.skip = function() {
          this.h.currentTime += this.getRemainingTime();
        };
        p.pause = function() {
          return this.h.pause();
        };
        p.play = function() {
          return this.h.play();
        };
        p.getVolume = function() {
          return this.h.volume;
        };
        p.setVolume = function(a) {
          this.h.volume = a;
        };
        p.isMuted = function() {
          return this.h.muted;
        };
        p.isLinear = function() {
          return true;
        };
        p.resize = function() {
        };
        p.setMuted = function(a) {
          this.h.muted = a;
        };
        p.getSequenceLength = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 1 : a.getTotalAds();
        };
        p.getPositionInSequence = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 1 : a.getAdPosition();
        };
        p.getTitle = function() {
          return this.g.getTitle();
        };
        p.getDescription = function() {
          return this.g.getDescription();
        };
        p.getVastMediaBitrate = function() {
          return 0;
        };
        p.getVastMediaHeight = function() {
          return this.g.getVastMediaHeight();
        };
        p.getVastMediaWidth = function() {
          return this.g.getVastMediaWidth();
        };
        p.getVastAdId = function() {
          return "";
        };
        p.getAdId = function() {
          return this.g.getAdId();
        };
        p.getCreativeAdId = function() {
          return this.g.getCreativeAdId();
        };
        p.getAdvertiserName = function() {
          return this.g.getAdvertiserName();
        };
        p.getMediaUrl = function() {
          return null;
        };
        p.getTimeOffset = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 0 : a.getTimeOffset();
        };
        p.getPodIndex = function() {
          var a = this.g.getAdPodInfo();
          return a == null ? 0 : a.getPodIndex();
        };
        p.release = function() {
          this.h = this.i = this.g = null;
        };
        S("shaka.ads.ServerSideAd", lt);
        lt.prototype.release = lt.prototype.release;
        lt.prototype.getPodIndex = lt.prototype.getPodIndex;
        lt.prototype.getTimeOffset = lt.prototype.getTimeOffset;
        lt.prototype.getMediaUrl = lt.prototype.getMediaUrl;
        lt.prototype.getAdvertiserName = lt.prototype.getAdvertiserName;
        lt.prototype.getCreativeAdId = lt.prototype.getCreativeAdId;
        lt.prototype.getAdId = lt.prototype.getAdId;
        lt.prototype.getVastAdId = lt.prototype.getVastAdId;
        lt.prototype.getVastMediaWidth = lt.prototype.getVastMediaWidth;
        lt.prototype.getVastMediaHeight = lt.prototype.getVastMediaHeight;
        lt.prototype.getVastMediaBitrate = lt.prototype.getVastMediaBitrate;
        lt.prototype.getDescription = lt.prototype.getDescription;
        lt.prototype.getTitle = lt.prototype.getTitle;
        lt.prototype.getPositionInSequence = lt.prototype.getPositionInSequence;
        lt.prototype.getSequenceLength = lt.prototype.getSequenceLength;
        lt.prototype.setMuted = lt.prototype.setMuted;
        lt.prototype.resize = lt.prototype.resize;
        lt.prototype.isLinear = lt.prototype.isLinear;
        lt.prototype.isMuted = lt.prototype.isMuted;
        lt.prototype.setVolume = lt.prototype.setVolume;
        lt.prototype.getVolume = lt.prototype.getVolume;
        lt.prototype.play = lt.prototype.play;
        lt.prototype.pause = lt.prototype.pause;
        lt.prototype.skip = lt.prototype.skip;
        lt.prototype.canSkipNow = lt.prototype.canSkipNow;
        lt.prototype.getTimeUntilSkippable = lt.prototype.getTimeUntilSkippable;
        lt.prototype.isSkippable = lt.prototype.isSkippable;
        lt.prototype.isPaused = lt.prototype.isPaused;
        lt.prototype.getRemainingTime = lt.prototype.getRemainingTime;
        lt.prototype.getMinSuggestedDuration = lt.prototype.getMinSuggestedDuration;
        lt.prototype.getDuration = lt.prototype.getDuration;
        lt.prototype.isUsingAnotherMediaElement = lt.prototype.isUsingAnotherMediaElement;
        lt.prototype.hasCustomClick = lt.prototype.hasCustomClick;
        lt.prototype.isClientRendering = lt.prototype.isClientRendering;
        lt.prototype.needsSkipUI = lt.prototype.needsSkipUI;
        function mt(a, b, c, d) {
          var e = this;
          this.A = a;
          this.l = b;
          this.j = null;
          this.G = NaN;
          this.i = d;
          this.H = false;
          this.C = this.m = this.u = null;
          this.D = "";
          this.F = [];
          this.h = new Tc();
          a = new google.ima.dai.api.UiSettings();
          a.setLocale(c);
          this.g = new google.ima.dai.api.StreamManager(this.l, this.A, a);
          this.i(new T("ima-stream-manager-loaded", (/* @__PURE__ */ new Map()).set("imaStreamManager", this.g)));
          this.h.o(this.g, google.ima.dai.api.StreamEvent.Type.LOADED, function(f) {
            nt(e, f);
          });
          this.h.o(this.g, google.ima.dai.api.StreamEvent.Type.ERROR, function() {
            e.D.length ? e.j.resolve(e.D) : e.j.reject("IMA Stream request returned an error and there was no backup asset uri provided.");
            e.j = null;
          });
          this.h.o(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED, function() {
          });
          this.h.o(this.g, google.ima.dai.api.StreamEvent.Type.STARTED, function(f) {
            f = f.getAd();
            e.m = new lt(f, e.l);
            e.C && (e.m.i = e.C);
            e.i(new T("ad-started", (/* @__PURE__ */ new Map()).set("ad", e.m)));
            e.A.setAttribute("ad-active", "true");
          });
          this.h.o(this.g, google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED, function() {
            e.A.removeAttribute("ad-active");
            var f = e.l.currentTime;
            e.u && e.u > f && (e.l.currentTime = e.u, e.u = null);
          });
          this.h.o(this.g, google.ima.dai.api.StreamEvent.Type.AD_PROGRESS, function(f) {
            e.C = f.getStreamData().adProgressData;
            e.m && (e.m.i = e.C);
          });
          this.h.o(this.g, google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE, function() {
            e.i(new T("ad-first-quartile"));
          });
          this.h.o(this.g, google.ima.dai.api.StreamEvent.Type.MIDPOINT, function() {
            e.i(new T("ad-midpoint"));
          });
          this.h.o(this.g, google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE, function() {
            e.i(new T("ad-third-quartile"));
          });
          this.h.o(this.g, google.ima.dai.api.StreamEvent.Type.COMPLETE, function() {
            e.i(new T("ad-complete"));
            e.i(new T("ad-stopped"));
            e.A.removeAttribute("ad-active");
            e.m = null;
          });
          this.h.o(this.g, google.ima.dai.api.StreamEvent.Type.SKIPPED, function() {
            e.i(new T("ad-skipped"));
            e.i(new T("ad-stopped"));
          });
          this.h.o(this.g, google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED, function(f) {
            var g = f.getStreamData();
            f = [];
            g = u(g.cuepoints);
            for (var h = g.next(); !h.done; h = g.next()) h = h.value, f.push({ start: h.start, end: h.end });
            e.F = f;
            e.i(new T("ad-cue-points-changed", (/* @__PURE__ */ new Map()).set("cuepoints", f)));
          });
        }
        p = mt.prototype;
        p.configure = function() {
        };
        p.stop = function() {
          this.D = "";
          this.u = null;
          this.F = [];
        };
        p.release = function() {
          this.stop();
          this.h && this.h.release();
        };
        p.onCueMetadataChange = function(a) {
          if (a.key && a.data) {
            var b = {};
            b[a.key] = a.data;
            this.g.onTimedMetadata(b);
          }
        };
        p.getCuePoints = function() {
          return this.F;
        };
        function nt(a, b) {
          a.i(new T("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", Date.now() / 1e3 - a.G)));
          b = b.getStreamData().url;
          a.j.resolve(b);
          a.j = null;
          a.H || a.h.o(a.l, "seeked", function() {
            var c = a.l.currentTime;
            if (c != 0) {
              a.g.streamTimeForContentTime(c);
              var d = a.g.previousCuePointForStreamTime(c);
              d && !d.played && (a.u = c, a.l.currentTime = d.start);
            }
          });
        }
        ;
        function ot() {
          kb.call(this);
          this.h = this.i = this.j = this.g = null;
          this.m = new ps();
          this.u = navigator.language;
          this.l = null;
        }
        la(ot, kb);
        p = ot.prototype;
        p.setLocale = function(a) {
          this.u = a;
        };
        p.configure = function(a) {
          this.l = a;
          this.g && this.g.configure(this.l);
          this.j && this.j.configure(this.l);
          this.h && this.h.configure(this.l);
        };
        p.initInterstitial = function(a, b, c) {
          var d = this;
          this.g && this.g.release();
          this.g = new Es(a, b, c, function(e) {
            return pt(d, e);
          });
          this.g.configure(this.l);
        };
        p.initClientSide = function(a, b, c) {
          var d = this;
          if (!window2.google || !google.ima || !google.ima.AdsLoader) throw new U(2, 10, 1e4);
          this.j && this.j.release();
          this.j = new ws(a, b, this.u, c, function(e) {
            return pt(d, e);
          });
          this.j.configure(this.l);
        };
        p.release = function() {
          this.g && (this.g.release(), this.g = null);
          this.j && (this.j.release(), this.j = null);
          this.i && (this.i.release(), this.i = null);
          this.h && (this.h.release(), this.h = null);
          kb.prototype.release.call(this);
        };
        p.onAssetUnload = function() {
          this.g && this.g.stop();
          this.j && this.j.stop();
          this.i && this.i.stop();
          this.h && this.h.stop();
          this.dispatchEvent(new T("ad-stopped"));
          this.dispatchEvent(new T("ad-content-attach-requested"));
          this.m = new ps();
        };
        p.requestClientSideAds = function(a) {
          if (!this.j) throw new U(1, 10, 10001);
          var b = this.j;
          b.g && b.g.destroy();
          b.m && b.m.contentComplete();
          b.H = Date.now() / 1e3;
          b.m.requestAds(a);
        };
        p.updateClientSideAdsRenderingSettings = function(a) {
          if (!this.j) throw new U(1, 10, 10001);
          var b = this.j;
          b.D = a;
          b.g && b.g.updateAdsRenderingSettings(b.D);
        };
        p.initMediaTailor = function(a, b, c) {
          var d = this;
          this.i && this.i.release();
          this.i = new at(a, b, c, function(e) {
            return pt(d, e);
          });
        };
        p.requestMediaTailorStream = function(a, b, c) {
          if (!this.i) throw new U(1, 10, 10005);
          var d = this.i;
          c = c === void 0 ? "" : c;
          d.l ? a = Promise.reject(new U(1, 10, 10004)) : (d.l = new Lg(), dt(d, a, b), d.I = c || "", d.P = Date.now() / 1e3, a = d.l);
          return a;
        };
        p.addMediaTailorTrackingUrl = function(a) {
          if (!this.i) throw new U(1, 10, 10005);
          var b = this.i;
          b.H = a;
          b.i(new T("ads-loaded", (/* @__PURE__ */ new Map()).set("loadTime", 0)));
        };
        p.initServerSide = function(a, b) {
          var c = this;
          if (!window2.google || !google.ima || !google.ima.dai) throw new U(2, 10, 10002);
          this.h && this.h.release();
          this.h = new mt(a, b, this.u, function(d) {
            return pt(c, d);
          });
          this.h.configure(this.l);
        };
        p.requestServerSideStream = function(a, b) {
          b = b === void 0 ? "" : b;
          if (!this.h) throw new U(1, 10, 10003);
          a.adTagParameters || (a.adTagParameters = {});
          var c = a.adTagParameters;
          (c.mpt || c.mpv) && ab('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.');
          a.adTagParameters.mpt = "shaka-player";
          a.adTagParameters.mpv = "v4.16.0";
          c = this.h;
          c.j ? a = Promise.reject(new U(1, 10, 10004)) : (a instanceof google.ima.dai.api.LiveStreamRequest && (c.H = true), c.j = new Lg(), c.g.requestStream(a), c.D = b || "", c.G = Date.now() / 1e3, a = c.j);
          return a;
        };
        p.replaceServerSideAdTagParameters = function(a) {
          if (!this.h) throw new U(1, 10, 10003);
          (a.mpt || a.mpv) && ab('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.');
          a.mpt = "Shaka Player";
          a.mpv = "v4.16.0";
          this.h.g.replaceAdTagParameters(a);
        };
        p.getServerSideCuePoints = function() {
          Zc("AdManager.getServerSideCuePoints", "Please use getCuePoints function.");
          return this.getCuePoints();
        };
        p.getCuePoints = function() {
          var a = [];
          this.h && (a = a.concat(this.h.getCuePoints()));
          this.i && (a = a.concat(this.i.getCuePoints()));
          return a;
        };
        p.getStats = function() {
          var a = this.m;
          return { loadTimes: a.g, averageLoadTime: qs(a), started: a.h, overlayAds: a.j, playedCompletely: a.l, skipped: a.m, errors: a.i };
        };
        p.onManifestUpdated = function(a) {
          if (this.i) this.i.onManifestUpdated(a);
        };
        p.onDashTimedMetadata = function(a) {
          this.h && a.schemeIdUri == "urn:google:dai:2018" && this.h.g.processMetadata(a.schemeIdUri, a.eventNode ? a.eventNode.attributes.messageData : null, a.startTime);
        };
        p.onHlsTimedMetadata = function(a, b) {
          this.h && this.h.g.processMetadata("ID3", a.data, b);
        };
        p.onCueMetadataChange = function(a) {
          if (this.h) this.h.onCueMetadataChange(a);
        };
        p.onHLSInterstitialMetadata = function(a, b, c) {
          this.l && this.l.disableHLSInterstitial || (this.g || this.initInterstitial(null, a, b), this.g && Rs(this.g, c));
        };
        p.onDASHInterstitialMetadata = function(a, b, c) {
          if (!this.l || !this.l.disableDASHInterstitial) {
            var d = c.schemeIdUri;
            if (d == "urn:mpeg:dash:event:alternativeMPD:insert:2025" || d == "urn:mpeg:dash:event:alternativeMPD:replace:2025") {
              if (this.g || this.initInterstitial(null, a, b), this.g && (a = this.g, b = c.schemeIdUri == "urn:mpeg:dash:event:alternativeMPD:replace:2025", d = c.schemeIdUri == "urn:mpeg:dash:event:alternativeMPD:insert:2025", b || d)) {
                for (var e = c.startTime, f = c.endTime, g = null, h = 0, k2, l = u(c.eventNode.children), m = l.next(); !m.done; m = l.next()) if (m = m.value, m.tagName == "AlternativeMPD") {
                  if (m = m.attributes.uri) {
                    k2 = m;
                    break;
                  }
                } else if (m.tagName == "InsertPresentation" || m.tagName == "ReplacePresentation") {
                  var n = m.attributes.url;
                  if (n) {
                    k2 = cc(n);
                    (l = Zd(m, "maxDuration", ee)) && (g = l / c.timescale);
                    (l = Zd(m, "returnOffset", ee)) && (h = l / c.timescale);
                    b && h && (f = e + h);
                    break;
                  }
                }
                k2 && Us(a, [{ id: c.id, groupId: null, startTime: e, endTime: f, uri: k2, mimeType: null, isSkippable: false, skipOffset: null, skipFor: null, canJump: true, resumeOffset: d ? h : null, playoutLimit: g, once: false, pre: false, post: false, timelineRange: b && !d, loop: false, overlay: null, displayOnBackground: false, currentVideo: null, background: null, clickThroughUrl: null }]);
              }
            } else (d == "urn:mpeg:dash:event:2012" || d == "urn:scte:dash:scte214-events") && c.eventNode && Vd(c.eventNode, "OverlayEvent") && (this.g || this.initInterstitial(null, a, b), this.g && Vs(this.g, c));
          }
        };
        p.addCustomInterstitial = function(a) {
          if (!this.g) throw new U(1, 10, 10006);
          Us(this.g, [a]);
        };
        p.addAdUrlInterstitial = function(a) {
          if (!this.g) throw new U(1, 10, 10006);
          return this.g.addAdUrlInterstitial(a);
        };
        p.getInterstitialPlayer = function() {
          if (!this.g) throw new U(1, 10, 10006);
          return this.g.Wb();
        };
        function pt(a, b) {
          if (b && b.type) switch (b.type) {
            case "ads-loaded":
              a.m.g.push(b.loadTime);
              break;
            case "ad-started":
              a.m.h++;
              var c = b.ad;
              c && !c.isLinear() && a.m.j++;
              break;
            case "ad-complete":
              a.m.l++;
              break;
            case "ad-skipped":
              a.m.m++;
              break;
            case "ad-error":
              a.m.i++;
          }
          a.dispatchEvent(b);
        }
        S("shaka.ads.AdManager", ot);
        ot.prototype.getInterstitialPlayer = ot.prototype.getInterstitialPlayer;
        ot.prototype.addAdUrlInterstitial = ot.prototype.addAdUrlInterstitial;
        ot.prototype.addCustomInterstitial = ot.prototype.addCustomInterstitial;
        ot.prototype.onDASHInterstitialMetadata = ot.prototype.onDASHInterstitialMetadata;
        ot.prototype.onHLSInterstitialMetadata = ot.prototype.onHLSInterstitialMetadata;
        ot.prototype.onCueMetadataChange = ot.prototype.onCueMetadataChange;
        ot.prototype.onHlsTimedMetadata = ot.prototype.onHlsTimedMetadata;
        ot.prototype.onDashTimedMetadata = ot.prototype.onDashTimedMetadata;
        ot.prototype.onManifestUpdated = ot.prototype.onManifestUpdated;
        ot.prototype.getStats = ot.prototype.getStats;
        ot.prototype.getCuePoints = ot.prototype.getCuePoints;
        ot.prototype.getServerSideCuePoints = ot.prototype.getServerSideCuePoints;
        ot.prototype.replaceServerSideAdTagParameters = ot.prototype.replaceServerSideAdTagParameters;
        ot.prototype.requestServerSideStream = ot.prototype.requestServerSideStream;
        ot.prototype.initServerSide = ot.prototype.initServerSide;
        ot.prototype.addMediaTailorTrackingUrl = ot.prototype.addMediaTailorTrackingUrl;
        ot.prototype.requestMediaTailorStream = ot.prototype.requestMediaTailorStream;
        ot.prototype.initMediaTailor = ot.prototype.initMediaTailor;
        ot.prototype.updateClientSideAdsRenderingSettings = ot.prototype.updateClientSideAdsRenderingSettings;
        ot.prototype.requestClientSideAds = ot.prototype.requestClientSideAds;
        ot.prototype.onAssetUnload = ot.prototype.onAssetUnload;
        ot.prototype.release = ot.prototype.release;
        ot.prototype.initClientSide = ot.prototype.initClientSide;
        ot.prototype.initInterstitial = ot.prototype.initInterstitial;
        ot.prototype.configure = ot.prototype.configure;
        ot.prototype.setLocale = ot.prototype.setLocale;
        ot.ADS_LOADED = "ads-loaded";
        ot.AD_STARTED = "ad-started";
        ot.AD_FIRST_QUARTILE = "ad-first-quartile";
        ot.AD_MIDPOINT = "ad-midpoint";
        ot.AD_THIRD_QUARTILE = "ad-third-quartile";
        ot.AD_COMPLETE = "ad-complete";
        ot.AD_STOPPED = "ad-stopped";
        ot.AD_SKIPPED = "ad-skipped";
        ot.AD_VOLUME_CHANGED = "ad-volume-changed";
        ot.AD_MUTED = "ad-muted";
        ot.AD_PAUSED = "ad-paused";
        ot.AD_RESUMED = "ad-resumed";
        ot.AD_SKIP_STATE_CHANGED = "ad-skip-state-changed";
        ot.CUEPOINTS_CHANGED = "ad-cue-points-changed";
        ot.IMA_AD_MANAGER_LOADED = "ima-ad-manager-loaded";
        ot.IMA_STREAM_MANAGER_LOADED = "ima-stream-manager-loaded";
        ot.AD_CLICKED = "ad-clicked";
        ot.AD_PROGRESS = "ad-progress";
        ot.AD_BUFFERING = "ad-buffering";
        ot.AD_IMPRESSION = "ad-impression";
        ot.AD_DURATION_CHANGED = "ad-duration-changed";
        ot.AD_CLOSED = "ad-closed";
        ot.AD_LOADED = "ad-loaded";
        ot.ALL_ADS_COMPLETED = "all-ads-completed";
        ot.AD_LINEAR_CHANGED = "ad-linear-changed";
        ot.AD_METADATA = "ad-metadata";
        ot.AD_RECOVERABLE_ERROR = "ad-recoverable-error";
        ot.AD_ERROR = "ad-error";
        ot.AD_BREAK_READY = "ad-break-ready";
        ot.AD_INTERACTION = "ad-interaction";
        ot.AD_CONTENT_PAUSE_REQUESTED = "ad-content-pause-requested";
        ot.AD_CONTENT_RESUME_REQUESTED = "ad-content-resume-requested";
        ot.AD_CONTENT_ATTACH_REQUESTED = "ad-content-attach-requested";
        Mq = function() {
          return new ot();
        };
        function qt(a) {
          return JSON.stringify(a, function(b, c) {
            if (typeof c != "function") {
              if (c instanceof Event || c instanceof T) {
                var d = {};
                for (e in c) (b = c[e]) && typeof b == "object" ? e == "detail" && (d[e] = b) : e in Event || (d[e] = b);
                return d;
              }
              if (c instanceof Error) {
                var e = /* @__PURE__ */ new Set(["name", "message", "stack"]);
                for (d in c) e.add(d);
                d = u(Object.getOwnPropertyNames(c));
                for (b = d.next(); !b.done; b = d.next()) e.add(b.value);
                d = {};
                e = u(e);
                for (b = e.next(); !b.done; b = e.next()) b = b.value, d[b] = c[b];
                c = { __type__: "Error", contents: d };
              } else if (c instanceof TimeRanges) {
                e = { __type__: "TimeRanges", length: c.length, start: [], end: [] };
                c = u(Hj(c));
                for (d = c.next(); !d.done; d = c.next()) d = d.value, b = d.end, e.start.push(d.start), e.end.push(b);
                c = e;
              } else c = ArrayBuffer.isView(c) && c.BYTES_PER_ELEMENT === 1 ? { __type__: "Uint8Array", entries: Array.from(c) } : typeof c == "number" ? isNaN(c) ? "NaN" : isFinite(c) ? c : c < 0 ? "-Infinity" : "Infinity" : c;
              return c;
            }
          });
        }
        function rt(a) {
          return JSON.parse(a, function(b, c) {
            if (c == "NaN") var d = NaN;
            else if (c == "-Infinity") d = -Infinity;
            else if (c == "Infinity") d = Infinity;
            else if (c && typeof c == "object" && c.__type__ == "TimeRanges") d = st(c);
            else if (c && typeof c == "object" && c.__type__ == "Uint8Array") d = new Uint8Array(c.entries);
            else if (c && typeof c == "object" && c.__type__ == "Error") {
              b = c.contents;
              c = Error(b.message);
              for (d in b) c[d] = b[d];
              d = c;
            } else d = c;
            return d;
          });
        }
        function st(a) {
          return { length: a.length, start: function(b) {
            return a.start[b];
          }, end: function(b) {
            return a.end[b];
          } };
        }
        var tt = "ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "), ut = "buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "), vt = ["loop", "playbackRate"], wt = ["pause", "play"], xt = (/* @__PURE__ */ new Map()).set("getAssetUri", 2).set("getAudioLanguages", 4).set("getAudioLanguagesAndRoles", 4).set("getBufferFullness", 1).set("getBufferedInfo", 2).set("getExpiration", 2).set("getKeyStatuses", 2).set("getPlaybackRate", 2).set(
          "getTextLanguages",
          4
        ).set("getTextLanguagesAndRoles", 4).set("isAudioOnly", 10).set("isBuffering", 1).set("isInProgress", 1).set("isLive", 10).set("isTextTrackVisible", 1).set("isVideoOnly", 10).set("keySystem", 10).set("seekRange", 1).set("getLoadMode", 10).set("getManifestType", 10).set("isFullyLoaded", 1).set("isEnded", 1).set("getBandwidthEstimate", 1), yt = (/* @__PURE__ */ new Map()).set("getConfiguration", 4).set("getConfigurationForLowLatency", 4).set("getStats", 5).set("getAudioTracks", 2).set("getChaptersTracks", 2).set("getImageTracks", 2).set(
          "getVideoTracks",
          2
        ).set("getTextTracks", 2).set("getVariantTracks", 2), zt = (/* @__PURE__ */ new Map()).set("getPlayheadTimeAsDate", 1).set("getPresentationStartTimeAsDate", 20).set("getSegmentAvailabilityDuration", 20), At = [["getConfiguration", "configure", "getConfigurationForLowLatency", "configurationForLowLatency"]], Bt = [["isTextTrackVisible", "setTextTrackVisibility"]], Ct = "cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "), Dt = "addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");
        function Et(a, b, c, d, e, f, g) {
          var h = this;
          this.H = a;
          this.K = g;
          this.l = new Bf(b);
          this.L = c;
          this.A = false;
          this.C = d;
          this.G = e;
          this.M = f;
          this.i = this.m = false;
          this.J = "";
          this.u = null;
          this.D = function() {
            return Ft(h);
          };
          this.F = function(k2, l) {
            k2 = rt(l);
            switch (k2.type) {
              case "event":
                var m = k2.targetName, n = Xa(k2.event);
                h.C(m, n);
                break;
              case "update":
                m = k2.update;
                for (n in m) {
                  k2 = h.g[n] || {};
                  for (var q in m[n]) k2[q] = m[n][q];
                }
                h.A && (h.L(), h.A = false);
                break;
              case "asyncComplete":
                if (q = k2.id, n = k2.error, l = k2.res, k2 = h.h.get(q), h.h.delete(q), k2) if (n) {
                  q = new U(
                    n.severity,
                    n.category,
                    n.code
                  );
                  for (m in n) q[m] = n[m];
                  k2.reject(q);
                } else k2.resolve(l);
            }
          };
          this.g = { video: {}, player: {} };
          this.I = 0;
          this.h = /* @__PURE__ */ new Map();
          this.j = null;
          Gt.add(this);
        }
        p = Et.prototype;
        p.destroy = function() {
          Gt.delete(this);
          Ht(this);
          It && Jt(this);
          this.l && (this.l.stop(), this.l = null);
          this.G = this.C = null;
          this.i = this.m = false;
          this.F = this.D = this.j = this.h = this.g = this.u = null;
          return Promise.resolve();
        };
        p.Qa = function() {
          return this.i;
        };
        p.Yf = function() {
          return this.J;
        };
        p.init = function() {
          if (this.H.length) if (window2.chrome && chrome.cast && chrome.cast.isAvailable) {
            this.m = true;
            this.l.La();
            var a = new chrome.cast.SessionRequest(this.H, [], null, this.K, null);
            a = new chrome.cast.ApiConfig(a, function(b) {
              for (var c = u(Gt), d = c.next(); !d.done; d = c.next()) {
                d = d.value;
                var e = b;
                d.j = new Lg();
                d.A = true;
                Kt(d, e);
              }
            }, function(b) {
              for (var c = u(Gt), d = c.next(); !d.done; d = c.next()) d = d.value, Lt = b == "available", d.l.La();
            }, "origin_scoped");
            chrome.cast.initialize(a, function() {
            }, function() {
            });
            Lt && this.l.$(Mt);
            (a = It) && a.status != chrome.cast.SessionStatus.STOPPED ? (this.j = new Lg(), this.A = true, Kt(this, a)) : It = null;
          } else window2.__onGCastApiAvailable !== Nt && (Ot = window2.__onGCastApiAvailable || null, window2.__onGCastApiAvailable = Nt);
        };
        p.bi = function(a) {
          this.u = a;
          this.i && Pt(this, { type: "appData", appData: this.u });
        };
        p.cast = function() {
          var a = this;
          return Q(function(b) {
            if (!a.m) throw new U(1, 8, 8e3);
            if (!Lt) throw new U(1, 8, 8001);
            if (a.i) throw new U(1, 8, 8002);
            a.j = new Lg();
            chrome.cast.requestSession(function(c) {
              return Kt(a, c);
            }, function(c) {
              return Qt(a, c);
            });
            return F(b, a.j, 0);
          });
        };
        function Rt(a) {
          a.i && chrome.cast.requestSession(function(b) {
            return Kt(a, b);
          }, function(b) {
            return Qt(a, b);
          });
        }
        p.Hd = function() {
          if (this.i) {
            Ht(this);
            if (It) {
              Jt(this);
              try {
                It.stop(function() {
                }, function() {
                });
              } catch (a) {
              }
              It = null;
            }
            Ft(this);
          }
        };
        p.get = function(a, b) {
          var c = this;
          if (a == "video") {
            if (wt.includes(b)) return function() {
              return c.yj.apply(c, [a, b].concat(x(Ma.apply(0, arguments))));
            };
          } else if (a == "player") {
            if (zt.has(b) && !this.get("player", "isLive")()) return function() {
            };
            if (Ct.includes(b)) return function() {
              return c.yj.apply(c, [a, b].concat(x(Ma.apply(0, arguments))));
            };
            if (Dt.includes(b)) return function() {
              return c.gm.apply(c, [a, b].concat(x(Ma.apply(0, arguments))));
            };
            if (xt.has(b) || yt.has(b)) return function() {
              return c.g[a][b];
            };
          }
          return this.g[a][b];
        };
        p.set = function(a, b, c) {
          this.g[a][b] = c;
          Pt(this, { type: "set", targetName: a, property: b, value: c });
        };
        function Kt(a, b) {
          var c = a.M();
          It = b;
          b.addUpdateListener(a.D);
          b.addMessageListener("urn:x-cast:com.google.shaka.v2", a.F);
          Ft(a);
          Pt(a, { type: "init", initState: c, appData: a.u });
          a.j.resolve();
        }
        function Qt(a, b) {
          var c = 8003;
          switch (b.code) {
            case "cancel":
              c = 8004;
              break;
            case "timeout":
              c = 8005;
              break;
            case "receiver_unavailable":
              c = 8006;
          }
          a.j.reject(new U(2, 8, c, b));
        }
        p.yj = function(a, b) {
          Pt(this, { type: "call", targetName: a, methodName: b, args: Ma.apply(2, arguments) });
        };
        p.gm = function(a, b) {
          var c = Ma.apply(2, arguments), d = new Lg(), e = this.I.toString();
          this.I++;
          this.h.set(e, d);
          try {
            Pt(this, { type: "asyncCall", targetName: a, methodName: b, args: c, id: e });
          } catch (f) {
            d.reject(f);
          }
          return d;
        };
        function Jt(a) {
          var b = It;
          b.removeUpdateListener(a.D);
          b.removeMessageListener("urn:x-cast:com.google.shaka.v2", a.F);
        }
        function Ft(a) {
          var b = It ? It.status == "connected" : false;
          if (a.i && !b) {
            a.G();
            for (var c in a.g) a.g[c] = {};
            Ht(a);
          }
          a.i = b;
          a.J = b ? It.receiver.friendlyName : "";
          a.l.La();
        }
        function Ht(a) {
          if (a.h) for (var b = u(a.h.keys()), c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            var d = a.h.get(c);
            a.h.delete(c);
            d.reject(new U(1, 7, 7e3));
          }
        }
        function Pt(a, b) {
          b = qt(b);
          var c = It;
          try {
            c.sendMessage("urn:x-cast:com.google.shaka.v2", b, function() {
            }, db);
          } catch (d) {
            throw b = new U(2, 8, 8005, d), c = new T("error", (/* @__PURE__ */ new Map()).set("detail", b)), a.C("player", c), a.Hd(), b;
          }
        }
        var Mt = 0.02, Lt = false, It = null, Ot = null, Gt = /* @__PURE__ */ new Set();
        function Nt(a) {
          Ot ? window2.__onGCastApiAvailable = Ot : delete window2.__onGCastApiAvailable;
          Ot = null;
          if (a) for (var b = u(Gt), c = b.next(); !c.done; c = b.next()) c.value.init();
          typeof window2.__onGCastApiAvailable === "function" && window2.__onGCastApiAvailable(a);
        }
        ;
        function St(a, b, c, d) {
          d = d === void 0 ? false : d;
          kb.call(this);
          var e = this;
          this.i = a;
          this.h = b;
          this.l = this.u = this.m = this.A = this.j = null;
          this.I = c;
          this.H = d;
          this.F = [];
          this.D = [];
          this.C = [];
          this.G = /* @__PURE__ */ new Map();
          this.g = null;
          window2.chrome ? (this.g = new Et(c, function() {
            return Tt(e);
          }, function() {
            return Ut(e);
          }, function(f, g) {
            return Vt(e, f, g);
          }, function() {
            return Wt(e);
          }, function() {
            return Xt(e);
          }, d), Yt(this)) : (this.j = this.i, this.A = this.h);
        }
        la(St, kb);
        p = St.prototype;
        p.destroy = function(a) {
          this.g && (a === void 0 ? 0 : a) && this.g.Hd();
          this.l && (this.l.release(), this.l = null);
          a = [];
          this.h && (a.push(this.h.destroy()), this.h = null);
          this.g && (a.push(this.g.destroy()), this.g = null);
          this.A = this.j = this.i = null;
          kb.prototype.release.call(this);
          return Promise.all(a);
        };
        p.Vc = function() {
          return this.j;
        };
        p.Wb = function() {
          return this.A;
        };
        p.Kg = function() {
          return this.g ? this.g.m && Lt : false;
        };
        p.Qa = function() {
          return this.g ? this.g.Qa() : false;
        };
        p.Yf = function() {
          return this.g ? this.g.Yf() : "";
        };
        p.cast = function() {
          var a = this;
          return Q(function(b) {
            return b.g == 1 ? a.g ? F(b, a.g.cast(), 2) : b.return() : a.h ? F(b, a.h.tc(), 0) : b.return();
          });
        };
        p.bi = function(a) {
          this.g && this.g.bi(a);
        };
        p.Vj = function() {
          this.g && Rt(this.g);
        };
        p.Hd = function() {
          this.g && this.g.Hd();
        };
        p.Mi = function(a, b) {
          b = b === void 0 ? false : b;
          var c = this;
          return Q(function(d) {
            if (d.g == 1) {
              if (a == c.I && b == c.H) return d.return();
              c.I = a;
              c.H = b;
              if (!c.g) return d.return();
              c.g.Hd();
              return F(d, c.g.destroy(), 2);
            }
            c.g = null;
            c.g = new Et(a, function() {
              return Tt(c);
            }, function() {
              return Ut(c);
            }, function(e, f) {
              return Vt(c, e, f);
            }, function() {
              return Wt(c);
            }, function() {
              return Xt(c);
            }, b);
            c.g.init();
            H(d);
          });
        };
        function Yt(a) {
          a.g.init();
          a.l = new Tc();
          for (var b = u(tt), c = b.next(); !c.done; c = b.next()) a.l.o(a.i, c.value, function(f) {
            a.g.Qa() || (f = Xa(f), a.m.dispatchEvent(f));
          });
          for (var d in Ya) a.l.o(a.h, Ya[d], function(f) {
            a.g.Qa() || a.u.dispatchEvent(f);
          });
          a.j = {};
          b = {};
          for (var e in a.i) b = { we: b.we }, b.we = e, Object.defineProperty(a.j, b.we, { configurable: false, enumerable: true, get: /* @__PURE__ */ function(f) {
            return function() {
              return Zt(a, f.we);
            };
          }(b), set: /* @__PURE__ */ function(f) {
            return function(g) {
              var h = f.we;
              a.g.Qa() ? a.g.set("video", h, g) : a.i[h] = g;
            };
          }(b) });
          a.A = {};
          $t(
            a,
            function(f) {
              Object.defineProperty(a.A, f, { configurable: false, enumerable: true, get: function() {
                return au(a, f);
              } });
            }
          );
          bu(a);
          a.m = new kb();
          a.m.Xe = a.j;
          a.u = new kb();
          a.u.Xe = a.A;
          a.l.o(a.h, "unloading", function() {
            a.g && a.g.Qa() || cu(a);
          });
        }
        function bu(a) {
          var b = /* @__PURE__ */ new Map();
          $t(a, function(c, d) {
            b.has(d) ? (d = b.get(d), c.length < d.length ? a.G.set(c, d) : a.G.set(d, c)) : b.set(d, c);
          });
        }
        function $t(a, b) {
          function c(k2) {
            return k2 == "constructor" || typeof d[k2] != "function" ? false : !e.has(k2);
          }
          var d = a.h, e = /* @__PURE__ */ new Set(), f;
          for (f in d) c(f) && (e.add(f), b(f, d[f]));
          a = Object.getPrototypeOf(d);
          for (f = Object.getPrototypeOf({}); a && a != f; ) {
            for (var g = u(Object.getOwnPropertyNames(a)), h = g.next(); !h.done; h = g.next()) h = h.value, c(h) && (e.add(h), b(h, d[h]));
            a = Object.getPrototypeOf(a);
          }
        }
        function Xt(a) {
          var b = { video: {}, player: {}, playerAfterLoad: {}, manifest: a.h.hd(), startTime: null, addThumbnailsTrackCalls: a.F, addTextTrackAsyncCalls: a.D, addChaptersTrackCalls: a.C };
          a.i.pause();
          for (var c = u(vt), d = c.next(); !d.done; d = c.next()) d = d.value, b.video[d] = a.i[d];
          a.i.ended || (b.startTime = a.i.currentTime);
          c = u(At);
          for (d = c.next(); !d.done; d = c.next()) {
            var e = d.value;
            d = e[1];
            e = a.h[e[0]]();
            b.player[d] = e;
          }
          c = u(Bt);
          for (d = c.next(); !d.done; d = c.next()) e = d.value, d = e[1], e = a.h[e[0]](), b.playerAfterLoad[d] = e;
          return b;
        }
        function Tt(a) {
          var b = new T("caststatuschanged");
          a.dispatchEvent(b);
        }
        function Ut(a) {
          var b = new T(a.j.paused ? "pause" : "play");
          a.m.dispatchEvent(b);
        }
        function Wt(a) {
          for (var b = u(At), c = b.next(); !c.done; c = b.next()) {
            var d = c.value;
            c = d[1];
            d = a.g.get("player", d[0])();
            a.h[c](d);
          }
          var e = a.F, f = a.D, g = a.C;
          cu(a);
          var h = a.g.get("player", "getAssetUri")();
          d = a.g.get("video", "ended");
          b = Promise.resolve();
          var k2 = a.i.autoplay;
          c = null;
          d || (c = a.g.get("video", "currentTime"));
          var l;
          (d = a.g.get("player", "getTextTracks")()) && d.length && (l = d.find(function(q) {
            return q.active;
          }));
          var m = a.g.get("player", "isTextTrackVisible")();
          h && (a.i.autoplay = false, b = a.h.load(h, c));
          var n = {};
          c = u(vt);
          for (d = c.next(); !d.done; d = c.next()) d = d.value, n[d] = a.g.get("video", d);
          b.then(function() {
            if (a.i) {
              for (var q = u(e), r = q.next(); !r.done; r = q.next()) {
                r = r.value;
                var t;
                (t = a.Wb()).ef.apply(t, x(r));
              }
              q = u(f);
              for (t = q.next(); !t.done; t = q.next()) {
                t = t.value;
                var w;
                (w = a.Wb()).ee.apply(w, x(t));
              }
              w = u(g);
              for (q = w.next(); !q.done; q = w.next()) {
                q = q.value;
                var v;
                (v = a.Wb()).df.apply(v, x(q));
              }
              v = u(vt);
              for (w = v.next(); !w.done; w = v.next()) w = w.value, a.i[w] = n[w];
              v = u(Bt);
              for (w = v.next(); !w.done; w = v.next()) q = w.value, w = q[1], q = a.g.get("player", q[0])(), a.h[w](q);
              a.h.Zd(m);
              l && a.h.ai(l.language, l.roles, l.forced);
              a.i.autoplay = k2;
              h && a.i.play();
            }
          }, function(q) {
            q = (/* @__PURE__ */ new Map()).set("detail", q);
            q = new T("error", q);
            a.h.dispatchEvent(q);
          });
        }
        function Zt(a, b) {
          if (b == "addEventListener") return function(d, e, f) {
            return a.m.addEventListener(d, e, f);
          };
          if (b == "removeEventListener") return function(d, e, f) {
            return a.m.removeEventListener(d, e, f);
          };
          if (a.g.Qa() && Object.keys(a.g.g.video).length == 0) {
            var c = a.i[b];
            if (typeof c != "function") return c;
          }
          return a.g.Qa() ? a.g.get("video", b) : (b = a.i[b], typeof b == "function" && (b = b.bind(a.i)), b);
        }
        function au(a, b, c) {
          c = c === void 0 ? false : c;
          a.G.has(b) && (b = a.G.get(b));
          if (b == "addEventListener") return function(d, e, f) {
            return a.u.addEventListener(d, e, f);
          };
          if (b == "removeEventListener") return function(d, e, f) {
            return a.u.removeEventListener(d, e, f);
          };
          if (b == "getMediaElement") return function() {
            return a.j;
          };
          if (b == "getSharedConfiguration") return a.g.get("player", "getConfiguration");
          if (b == "getNetworkingEngine") return function() {
            return a.h.Vb();
          };
          if (b == "getDrmEngine") return function() {
            return a.h.F;
          };
          if (b == "getAdManager") return function() {
            return a.h.tf();
          };
          if (b == "getQueueManager") return function() {
            return a.h.vf();
          };
          if (b == "setVideoContainer") return function(d) {
            return a.h.ji(d);
          };
          if (!c) {
            if (b == "addThumbnailsTrack") return function() {
              var d = Ma.apply(0, arguments);
              a.F.push(d);
              return au(a, b, true).apply(null, x(d));
            };
            if (b == "addTextTrackAsync") return function() {
              var d = Ma.apply(0, arguments);
              a.D.push(d);
              return au(a, b, true).apply(null, x(d));
            };
            if (b == "addChaptersTrack") return function() {
              var d = Ma.apply(0, arguments);
              a.C.push(d);
              return au(a, b, true).apply(null, x(d));
            };
          }
          if (a.g.Qa()) {
            if (b == "getManifest" || b == "drmInfo") return function() {
              ab(b + "() does not work while casting!");
              return null;
            };
            if (b == "attach" || b == "detach") return function() {
              ab(b + "() does not work while casting!");
              return Promise.resolve();
            };
            if (b == "getChapters") return function() {
              ab(b + "() does not work while casting!");
              return [];
            };
          }
          return a.g.Qa() && Object.keys(a.g.g.video).length == 0 && (xt.has(b) || yt.has(b)) || !a.g.Qa() ? a.h[b].bind(a.h) : a.g.get("player", b);
        }
        function Vt(a, b, c) {
          a.g.Qa() && (b == "video" ? a.m.dispatchEvent(c) : b == "player" && (c.type == "unloading" && cu(a), a.u.dispatchEvent(c)));
        }
        function cu(a) {
          a.F = [];
          a.D = [];
          a.C = [];
        }
        S("shaka.cast.CastProxy", St);
        St.prototype.changeReceiverId = St.prototype.Mi;
        St.prototype.forceDisconnect = St.prototype.Hd;
        St.prototype.suggestDisconnect = St.prototype.Vj;
        St.prototype.setAppData = St.prototype.bi;
        St.prototype.cast = St.prototype.cast;
        St.prototype.receiverName = St.prototype.Yf;
        St.prototype.isCasting = St.prototype.Qa;
        St.prototype.canCast = St.prototype.Kg;
        St.prototype.getPlayer = St.prototype.Wb;
        St.prototype.getVideo = St.prototype.Vc;
        St.prototype.destroy = St.prototype.destroy;
        function du(a, b, c, d) {
          kb.call(this);
          var e = this;
          this.h = a;
          this.g = b;
          this.j = new Tc();
          this.I = { video: a, player: b };
          this.G = c || function() {
          };
          this.J = d || function(f) {
            return f;
          };
          this.i = null;
          this.H = false;
          this.u = true;
          this.m = 0;
          this.D = false;
          this.C = true;
          this.A = this.l = null;
          this.F = new Bf(function() {
            eu(e);
          });
          fu(this);
        }
        la(du, kb);
        p = du.prototype;
        p.isConnected = function() {
          return this.H;
        };
        p.Fl = function() {
          return this.u;
        };
        p.tm = function(a) {
          this.i = a;
        };
        p.tk = function() {
          this.i = null;
        };
        p.um = function(a) {
          this.i || (this.i = { metadataType: cast.receiver.media.MetadataType.GENERIC });
          this.i.title = a;
        };
        p.sm = function(a) {
          this.i || (this.i = { metadataType: cast.receiver.media.MetadataType.GENERIC });
          this.i.images = [{ url: a }];
        };
        p.rm = function(a) {
          this.i || (this.i = {});
          this.i.artist = a;
          this.i.metadataType = cast.receiver.media.MetadataType.MUSIC_TRACK;
        };
        p.destroy = function() {
          var a = this, b, c;
          return Q(function(d) {
            if (d.g == 1) return a.j && (a.j.release(), a.j = null), b = [], a.g && (b.push(a.g.destroy()), a.g = null), a.F && (a.F.stop(), a.F = null), a.h = null, a.I = null, a.G = null, a.H = false, a.u = true, a.l = null, a.A = null, kb.prototype.release.call(a), F(d, Promise.all(b), 2);
            c = cast.receiver.CastReceiverManager.getInstance();
            c.stop();
            H(d);
          });
        };
        function fu(a) {
          var b = cast.receiver.CastReceiverManager.getInstance();
          b.onSenderConnected = function() {
            return gu(a);
          };
          b.onSenderDisconnected = function() {
            return gu(a);
          };
          b.onSystemVolumeChanged = function() {
            var e = cast.receiver.CastReceiverManager.getInstance().getSystemVolume();
            e && hu(a, { type: "update", update: { video: { volume: e.level, muted: e.muted } } }, a.l);
            hu(a, { type: "event", targetName: "video", event: { type: "volumechange" } }, a.l);
          };
          a.A = b.getCastMessageBus("urn:x-cast:com.google.cast.media");
          a.A.onMessage = function(e) {
            return iu(
              a,
              e
            );
          };
          a.l = b.getCastMessageBus("urn:x-cast:com.google.shaka.v2");
          a.l.onMessage = function(e) {
            return ju(a, e);
          };
          b.start();
          b = u(tt);
          for (var c = b.next(); !c.done; c = b.next()) a.j.o(a.h, c.value, function(e) {
            return ku(a, "video", e);
          });
          for (var d in Ya) a.j.o(a.g, Ya[d], function(e) {
            return ku(a, "player", e);
          });
          a.j.o(a.h, "loadeddata", function() {
            a.D = true;
          });
          a.j.o(a.g, "loading", function() {
            a.u = false;
            lu(a);
          });
          a.j.o(a.h, "playing", function() {
            a.u = false;
            lu(a);
          });
          a.j.o(a.h, "pause", function() {
            lu(a);
          });
          a.j.o(a.g, "unloading", function() {
            a.u = true;
            lu(a);
          });
          a.j.o(a.h, "ended", function() {
            new Bf(function() {
              a.h && a.h.ended && (a.u = true, lu(a));
            }).$(mu);
          });
        }
        function gu(a) {
          a.m = 0;
          a.C = true;
          a.H = cast.receiver.CastReceiverManager.getInstance().getSenders().length != 0;
          lu(a);
        }
        function lu(a) {
          var b;
          Q(function(c) {
            if (c.g == 1) return F(c, Promise.resolve(), 2);
            if (!a.g) return c.return();
            b = new T("caststatuschanged");
            a.dispatchEvent(b);
            nu(a) || ou(a);
            H(c);
          });
        }
        function pu(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E;
          Q(function(D) {
            switch (D.g) {
              case 1:
                for (d in b.player) e = b.player[d], a.g[d](e);
                a.G(c);
                f = a.h.autoplay;
                return b.manifest ? (a.h.autoplay = false, ra(D, 5), F(D, a.g.load(b.manifest, b.startTime), 7)) : F(D, Promise.resolve(), 3);
              case 7:
                if (b.addThumbnailsTrackCalls) for (g = u(b.addThumbnailsTrackCalls), h = g.next(); !h.done; h = g.next()) k2 = h.value, a.g.ef.apply(a.g, x(k2));
                if (b.addTextTrackAsyncCalls) for (l = u(b.addTextTrackAsyncCalls), m = l.next(); !m.done; m = l.next()) n = m.value, a.g.ee.apply(a.g, x(n));
                if (b.addChaptersTrackCalls) for (q = u(b.addChaptersTrackCalls), r = q.next(); !r.done; r = q.next()) t = r.value, a.g.df.apply(a.g, x(t));
                ta(D, 3);
                break;
              case 5:
                return w = ua(D), v = (/* @__PURE__ */ new Map()).set("detail", w), z = new T("error", v), a.g && a.g.dispatchEvent(z), D.return();
              case 3:
                if (!a.g) return D.return();
                for (y in b.video) A = b.video[y], a.h[y] = A;
                for (C in b.playerAfterLoad) E = b.playerAfterLoad[C], a.g[C](E);
                a.h.autoplay = f;
                b.manifest && (a.h.play(), ou(a));
                H(D);
            }
          });
        }
        function ku(a, b, c) {
          a.g && (eu(a), hu(a, { type: "event", targetName: b, event: c }, a.l));
        }
        function eu(a) {
          a.F.$(qu);
          for (var b = { video: {}, player: {} }, c = u(ut), d = c.next(); !d.done; d = c.next()) d = d.value, b.video[d] = a.h[d];
          a.g.U() && zt.forEach(function(e, f) {
            a.m % e == 0 && (b.player[f] = a.g[f]());
          });
          xt.forEach(function(e, f) {
            a.m % e == 0 && (b.player[f] = a.g[f]());
          });
          if (c = cast.receiver.CastReceiverManager.getInstance().getSystemVolume()) b.video.volume = c.level, b.video.muted = c.muted;
          hu(a, { type: "update", update: b }, a.l);
          yt.forEach(function(e, f) {
            a.m % e == 0 && (e = { player: {} }, e.player[f] = a.g[f](), hu(
              a,
              { type: "update", update: e },
              a.l
            ));
          });
          a.D && (a.m += 1);
          nu(a);
        }
        function nu(a) {
          return a.C && (a.h.duration || a.g.U()) ? (ru(a), a.C = false, true) : false;
        }
        function ru(a, b) {
          var c = { contentId: a.g.hd(), streamType: a.g.U() ? "LIVE" : "BUFFERED", contentType: "" };
          a.g.U() || (c.duration = a.h.duration);
          a.i && (c.metadata = a.i);
          ou(a, b === void 0 ? 0 : b, c);
        }
        function ju(a, b) {
          var c = rt(b.data);
          switch (c.type) {
            case "init":
              a.m = 0;
              a.D = false;
              a.C = true;
              pu(a, c.initState, c.appData);
              eu(a);
              break;
            case "appData":
              a.G(c.appData);
              break;
            case "set":
              var d = c.targetName, e = c.property;
              c = c.value;
              if (d == "video") {
                if (b = cast.receiver.CastReceiverManager.getInstance(), e == "volume") {
                  b.setSystemVolumeLevel(c);
                  break;
                } else if (e == "muted") {
                  b.setSystemVolumeMuted(c);
                  break;
                }
              }
              a.I[d][e] = c;
              break;
            case "call":
              d = a.I[c.targetName];
              d[c.methodName].apply(d, c.args);
              break;
            case "asyncCall":
              d = c.targetName;
              e = c.methodName;
              d == "player" && e == "load" && (a.m = 0, a.D = false);
              var f = c.id, g = b.senderId;
              b = a.I[d];
              c = b[e].apply(b, c.args);
              d == "player" && e == "load" && (c = c.then(function() {
                a.C = true;
              }));
              c.then(function(h) {
                return su(a, g, f, null, h);
              }, function(h) {
                return su(a, g, f, h, null);
              });
          }
        }
        function iu(a, b) {
          var c = rt(b.data);
          switch (c.type) {
            case "PLAY":
              a.h.play();
              ou(a);
              break;
            case "PAUSE":
              a.h.pause();
              ou(a);
              break;
            case "SEEK":
              b = c.currentTime;
              var d = c.resumeState;
              b != null && (a.h.currentTime = Number(b));
              d && d == "PLAYBACK_START" ? (a.h.play(), ou(a)) : d && d == "PLAYBACK_PAUSE" && (a.h.pause(), ou(a));
              break;
            case "STOP":
              a.g.tc().then(function() {
                a.g && ou(a);
              });
              break;
            case "GET_STATUS":
              ru(a, Number(c.requestId));
              break;
            case "VOLUME":
              d = c.volume;
              b = d.level;
              d = d.muted;
              var e = a.h.volume, f = a.h.muted;
              b != null && (a.h.volume = Number(b));
              d != null && (a.h.muted = d);
              e == a.h.volume && f == a.h.muted || ou(a);
              break;
            case "LOAD":
              a.m = 0;
              a.D = false;
              a.C = false;
              b = c.media;
              d = c.currentTime;
              e = a.J(b.contentId);
              f = c.autoplay || true;
              a.G(b.customData);
              f && (a.h.autoplay = true);
              a.g.load(e, d).then(function() {
                a.g && ru(a);
              }).catch(function(g) {
                var h = "LOAD_FAILED";
                g.category == 7 && g.code == 7e3 && (h = "LOAD_CANCELLED");
                hu(a, { requestId: Number(c.requestId), type: h }, a.A);
              });
              break;
            default:
              hu(a, { requestId: Number(c.requestId), type: "INVALID_REQUEST", reason: "INVALID_COMMAND" }, a.A);
          }
        }
        function su(a, b, c, d, e) {
          a.g && hu(a, { type: "asyncComplete", id: c, error: d, res: e }, a.l, b);
        }
        function hu(a, b, c, d) {
          a.H && (a = qt(b), d ? c.getCastChannel(d).send(a) : c.broadcast(a));
        }
        function ou(a, b, c) {
          c = c === void 0 ? null : c;
          var d = { mediaSessionId: 0, playbackRate: a.h.playbackRate, playerState: a.u ? tu : a.g.Cf() ? uu : a.h.paused ? vu : wu, currentTime: a.h.currentTime, supportedMediaCommands: 63, volume: { level: a.h.volume, muted: a.h.muted } };
          c && (d.media = c);
          hu(a, { requestId: b === void 0 ? 0 : b, type: "MEDIA_STATUS", status: [d] }, a.A);
        }
        S("shaka.cast.CastReceiver", du);
        du.prototype.destroy = du.prototype.destroy;
        du.prototype.setContentArtist = du.prototype.rm;
        du.prototype.setContentImage = du.prototype.sm;
        du.prototype.setContentTitle = du.prototype.um;
        du.prototype.clearContentMetadata = du.prototype.tk;
        du.prototype.setContentMetadata = du.prototype.tm;
        du.prototype.isIdle = du.prototype.Fl;
        du.prototype.isConnected = du.prototype.isConnected;
        var qu = 0.5, mu = 5, tu = "IDLE", wu = "PLAYING", uu = "BUFFERING", vu = "PAUSED";
        function xu(a, b, c, d, e) {
          if (d >= e) return null;
          for (var f = -1, g = -1, h = 0; h < c.length; h++) if (c[h].some(function(C) {
            return C != null && C.g.trim() != "";
          })) {
            f = h;
            break;
          }
          for (h = c.length - 1; h >= 0; h--) if (c[h].some(function(C) {
            return C != null && C.g.trim() != "";
          })) {
            g = h;
            break;
          }
          if (f === -1 || g === -1) return null;
          for (var k2 = h = false, l = "white", m = "black", n = yu(d, e, h, k2, l, m); f <= g; f++) {
            for (var q = c[f], r = -1, t = -1, w = 0; w < q.length; w++) if (q[w] != null && q[w].g.trim() !== "") {
              r = w;
              break;
            }
            for (w = q.length - 1; w >= 0; w--) if (q[w] != null && q[w].g.trim() !== "") {
              t = w;
              break;
            }
            if (r === -1 || t === -1) q = zu(d, e), a.nestedCues.push(q);
            else {
              for (; r <= t; r++) if (w = q[r]) {
                var v = w.l, z = w.i, y = w.j, A = w.h;
                if (v != h || z != k2 || y != l || A != m) n.payload && a.nestedCues.push(n), n = yu(d, e, v, z, y, A), h = v, k2 = z, l = y, m = A;
                n.payload += w.g;
              } else n.payload += " ";
              n.payload && a.nestedCues.push(n);
              f !== g && (n = zu(d, e), a.nestedCues.push(n));
              n = yu(d, e, h, k2, l, m);
            }
          }
          return a.nestedCues.length ? { cue: a, stream: b } : null;
        }
        function yu(a, b, c, d, e, f) {
          a = new re(a, b, "");
          c && a.textDecoration.push(Qe);
          d && (a.fontStyle = Pe);
          a.color = e;
          a.backgroundColor = f;
          return a;
        }
        function zu(a, b) {
          a = new re(a, b, "");
          a.lineBreak = true;
          return a;
        }
        function Au(a, b, c, d, e) {
          this.g = a;
          this.l = b;
          this.i = c;
          this.h = d;
          this.j = e;
        }
        ;
        function Bu(a, b) {
          this.i = [];
          this.g = 1;
          this.h = 0;
          this.F = a;
          this.D = b;
          this.j = this.m = false;
          this.l = "white";
          this.u = "black";
          this.A = this.C = null;
          Cu(this);
        }
        function Du(a, b, c) {
          var d = "CC" + ((a.F << 1 | a.D) + 1), e = new re(b, c, "");
          e.lineInterpretation = 1;
          var f = Eu.get(a.g);
          f && (e.line = f);
          a.A != null && a.C != null && (e.position = 10 + Math.min(70, a.A * 10) + a.C * 2.5);
          (b = xu(e, d, a.i, b, c)) && a.g + b.cue.nestedCues.length - 3 > 15 && (f = Eu.get(a.g + 3 - b.cue.nestedCues.length)) && (e.line = f);
          return b;
        }
        function Cu(a) {
          Fu(a, 0, 15);
          a.g = 1;
        }
        function Gu(a, b, c) {
          if (!(c < 32 || c > 127)) {
            var d = "";
            switch (b) {
              case 0:
                d = Hu.has(c) ? Hu.get(c) : String.fromCharCode(c);
                break;
              case 1:
                d = Iu.get(c);
                break;
              case 2:
                a.i[a.g].pop();
                d = Ju.get(c);
                break;
              case 3:
                a.i[a.g].pop(), d = Ku.get(c);
            }
            d && a.i[a.g].push(new Au(d, a.m, a.j, a.u, a.l));
          }
        }
        function Lu(a, b, c, d) {
          if (!(c < 0 || b < 0)) if (b >= c) for (--d; d >= 0; d--) a.i[b + d] = a.i[c + d].map(function(f) {
            return f;
          });
          else for (var e = 0; e < d; e++) a.i[b + e] = a.i[c + e].map(function(f) {
            return f;
          });
        }
        function Fu(a, b, c) {
          for (var d = 0; d <= c; d++) a.i[b + d] = [];
        }
        var Hu = /* @__PURE__ */ new Map([[39, ""], [42, ""], [92, ""], [92, ""], [94, ""], [95, ""], [96, ""], [123, ""], [124, ""], [125, ""], [126, ""], [127, ""]]), Iu = /* @__PURE__ */ new Map([[48, ""], [49, ""], [50, ""], [51, ""], [52, ""], [53, ""], [54, ""], [55, ""], [56, ""], [57, " "], [58, ""], [59, ""], [60, ""], [61, ""], [62, ""], [63, ""]]), Ju = /* @__PURE__ */ new Map([
          [32, ""],
          [33, ""],
          [34, ""],
          [35, ""],
          [36, ""],
          [37, ""],
          [38, ""],
          [39, ""],
          [40, "*"],
          [41, "'"],
          [42, ""],
          [43, ""],
          [44, ""],
          [45, ""],
          [46, ""],
          [47, ""],
          [48, ""],
          [49, ""],
          [50, ""],
          [51, ""],
          [52, ""],
          [53, ""],
          [54, ""],
          [55, ""],
          [56, ""],
          [57, ""],
          [58, ""],
          [59, ""],
          [60, ""],
          [61, ""],
          [62, ""],
          [63, ""]
        ]), Ku = /* @__PURE__ */ new Map([
          [32, ""],
          [33, ""],
          [34, ""],
          [35, ""],
          [36, ""],
          [37, ""],
          [38, ""],
          [39, ""],
          [40, ""],
          [41, "{"],
          [42, "}"],
          [43, "\\"],
          [44, "^"],
          [45, "_"],
          [46, "|"],
          [47, "~"],
          [48, ""],
          [49, ""],
          [50, ""],
          [51, ""],
          [52, ""],
          [53, ""],
          [54, ""],
          [55, ""],
          [56, ""],
          [57, ""],
          [58, ""],
          [59, ""],
          [60, ""],
          [61, ""],
          [62, ""],
          [63, ""]
        ]), Eu = /* @__PURE__ */ new Map([[1, 10], [2, 15.33], [3, 20.66], [4, 26], [5, 31.33], [6, 36.66], [7, 42], [8, 47.33], [9, 52.66], [10, 58], [11, 63.33], [12, 68.66], [13, 74], [14, 79.33], [15, 84.66]]);
        function Mu(a, b) {
          this.h = 0;
          this.u = new Bu(a, b);
          this.i = new Bu(a, b);
          this.g = this.j = new Bu(a, b);
          this.l = 0;
          this.m = null;
        }
        function Nu(a, b, c) {
          a.g = a.i;
          var d = a.g, e = null;
          a.h !== 3 && a.h !== 4 && (e = Du(d, a.l, c), c = a.i, c.g = c.h > 0 ? c.h : 0, Fu(c, 0, 15), c = a.j, c.g = c.h > 0 ? c.h : 0, Fu(c, 0, 15), d.g = 15);
          a.h = 3;
          d.h = b;
          return e;
        }
        function Ou(a) {
          a.h = 1;
          a.g = a.j;
          a.g.h = 0;
        }
        function Pu(a) {
          bb("Cea608DataChannel", "CEA-608 text mode entered, but is unsupported");
          a.g = a.u;
          a.h = 4;
        }
        var Qu = "black green blue cyan red yellow magenta black".split(" "), Ru = "white green blue cyan red yellow magenta white_italics".split(" ");
        function Su(a, b) {
          this.J = b;
          this.M = a;
          this.K = this.l = false;
          this.m = this.u = this.H = this.L = this.I = 0;
          this.G = 2;
          this.i = [];
          this.g = this.h = this.j = 0;
          this.F = this.C = false;
          this.D = "white";
          this.A = "black";
          Tu(this);
        }
        function Tu(a) {
          a.i = [];
          for (var b = 0; b < 16; b++) a.i.push(Uu());
        }
        function Uu() {
          for (var a = [], b = 0; b < 42; b++) a.push(null);
          return a;
        }
        function Vu(a, b) {
          Wu(a) && (a.i[a.h][a.g] = new Au(b, a.F, a.C, a.A, a.D), a.g++);
        }
        function Wu(a) {
          var b = a.g < a.m && a.g >= 0;
          return a.h < a.u && a.h >= 0 && b;
        }
        Su.prototype.isVisible = function() {
          return this.l;
        };
        function Xu(a) {
          for (var b = 0, c = 1; c < 16; c++, b++) a.i[b] = a.i[c];
          for (c = 0; c < 1; c++, b++) a.i[b] = Uu();
        }
        function Yu(a, b, c) {
          var d = new re(a.j, b, "");
          d.textAlign = a.G === 0 ? "left" : a.G === 1 ? "right" : te;
          var e = d.region;
          a.J && (e.id += "svc" + a.J);
          e.id += "win" + a.M;
          e.height = a.u;
          e.width = a.m;
          e.heightUnits = 2;
          e.widthUnits = 2;
          e.viewportAnchorX = a.I;
          e.viewportAnchorY = a.L;
          e.viewportAnchorUnits = a.K ? ud : 2;
          switch (a.H) {
            case 0:
              e.regionAnchorX = 0;
              e.regionAnchorY = 0;
              break;
            case 1:
              e.regionAnchorX = 50;
              e.regionAnchorY = 0;
              break;
            case 2:
              e.regionAnchorX = 100;
              e.regionAnchorY = 0;
              break;
            case 3:
              e.regionAnchorX = 0;
              e.regionAnchorY = 50;
              break;
            case 4:
              e.regionAnchorX = 50;
              e.regionAnchorY = 50;
              break;
            case 5:
              e.regionAnchorX = 100;
              e.regionAnchorY = 50;
              break;
            case 6:
              e.regionAnchorX = 0;
              e.regionAnchorY = 100;
              break;
            case 7:
              e.regionAnchorX = 50;
              e.regionAnchorY = 100;
              break;
            case 8:
              e.regionAnchorX = 100, e.regionAnchorY = 100;
          }
          if (c = xu(d, "svc" + c, a.i, a.j, b)) a.j = b;
          return c;
        }
        Su.prototype.display = function() {
          this.l = true;
        };
        function Zu() {
          this.i = [];
          this.h = null;
          this.g = 0;
        }
        function $u(a, b) {
          b.type === 3 ? (a.g = (b.value & 63) * 2 - 1, a.h = []) : a.h && (a.g > 0 && (a.h.push(b), a.g--), a.g === 0 && (a.i.push(new av(a.h)), a.h = null, a.g = 0));
        }
        function av(a) {
          this.g = 0;
          this.h = a;
        }
        av.prototype.Pa = function() {
          return this.g < this.h.length;
        };
        av.prototype.Wa = function() {
          return this.g;
        };
        function bv(a) {
          if (!a.Pa()) throw new U(2, 2, 3e3);
          return a.h[a.g++];
        }
        av.prototype.skip = function(a) {
          if (this.g + a > this.h.length) throw new U(2, 2, 3e3);
          this.g += a;
        };
        av.prototype.Dj = function(a) {
          if (this.g - a < 0) throw new U(2, 2, 3e3);
          this.g -= a;
        };
        function cv(a) {
          this.i = a;
          this.h = [null, null, null, null, null, null, null, null];
          this.g = null;
        }
        function dv(a, b, c, d) {
          if (!a.g) return [];
          if (c == 24) return c = bv(b).value, d = bv(b).value, c = function(f) {
            return f.map(function(g) {
              return ("0" + (g & 255).toString(16)).slice(-2);
            }).join("");
          }([c, d]), Vu(a.g, String.fromCharCode(parseInt(c, 16))), [];
          b = a.g;
          var e = null;
          switch (c) {
            case 8:
              !Wu(b) || b.g <= 0 && b.h <= 0 || (b.g <= 0 ? (b.g = b.m - 1, b.h--) : b.g--, b.i[b.h][b.g] = null);
              break;
            case 13:
              b.isVisible() && (e = Yu(b, d, a.i));
              b.h + 1 >= b.u ? Xu(b) : b.h++;
              b.g = 0;
              break;
            case 14:
              b.isVisible() && (e = Yu(b, d, a.i));
              b.i[b.h] = Uu();
              b.g = 0;
              break;
            case 12:
              b.isVisible() && (e = Yu(b, d, a.i)), Tu(b), b.h = 0, b.g = 0;
          }
          return e ? [e] : [];
        }
        function ev(a, b, c, d) {
          if (c >= 128 && c <= 135) d = c & 7, a.h[d] && (a.g = a.h[d]);
          else {
            if (c === 136) {
              c = bv(b).value;
              b = [];
              c = u(fv(a, c));
              for (var e = c.next(); !e.done; e = c.next()) {
                e = a.h[e.value];
                if (e.isVisible()) {
                  var f = Yu(e, d, a.i);
                  f && b.push(f);
                }
                Tu(e);
              }
              return b;
            }
            if (c === 137) for (b = bv(b).value, b = u(fv(a, b)), c = b.next(); !c.done; c = b.next()) c = a.h[c.value], c.isVisible() || (c.j = d), c.display();
            else {
              if (c === 138) {
                c = bv(b).value;
                b = null;
                c = u(fv(a, c));
                for (e = c.next(); !e.done; e = c.next()) e = a.h[e.value], e.isVisible() && (b = Yu(e, d, a.i)), e.l = false;
                return b ? [b] : [];
              }
              if (c === 139) {
                c = bv(b).value;
                b = null;
                c = u(fv(a, c));
                for (e = c.next(); !e.done; e = c.next()) e = a.h[e.value], e.isVisible() ? b = Yu(e, d, a.i) : e.j = d, e.l = !e.l;
                return b ? [b] : [];
              }
              if (c === 140) return b = bv(b).value, gv(a, b, d);
              if (c === 143) return d = gv(a, 255, d), hv(a), d;
              if (c === 144) b.skip(1), d = bv(b).value, a.g && (a.g.C = (d & 128) > 0, a.g.F = (d & 64) > 0);
              else if (c === 145) d = bv(b).value, c = bv(b).value, b.skip(1), a.g && (b = iv((c & 48) >> 4, (c & 12) >> 2, c & 3), a.g.D = iv((d & 48) >> 4, (d & 12) >> 2, d & 3), a.g.A = b);
              else if (c === 146) d = bv(b).value, b = bv(b).value, a.g && (a = a.g, a.h = d & 15, a.g = b & 63);
              else if (c === 151) b.skip(1), b.skip(1), d = bv(b).value, b.skip(1), a.g && (a.g.G = d & 3);
              else if (c >= 152 && c <= 159) {
                c = (c & 15) - 8;
                e = a.h[c] !== null;
                e || (f = new Su(c, a.i), f.j = d, a.h[c] = f);
                d = bv(b).value;
                f = bv(b).value;
                var g = bv(b).value, h = bv(b).value, k2 = bv(b).value;
                b = bv(b).value;
                e && (b & 7) === 0 || (b = a.h[c], b.h = 0, b.g = 0, b.F = false, b.C = false, b.D = "white", b.A = "black");
                b = a.h[c];
                b.l = (d & 32) > 0;
                b.L = f & 127;
                b.I = g;
                b.H = (h & 240) >> 4;
                b.K = (f & 128) > 0;
                b.u = (h & 15) + 1;
                b.m = (k2 & 63) + 1;
                a.g = a.h[c];
              }
            }
          }
          return [];
        }
        function fv(a, b) {
          for (var c = [], d = 0; d < 8; d++) (b & 1) === 1 && a.h[d] && c.push(d), b >>= 1;
          return c;
        }
        function gv(a, b, c) {
          var d = [];
          b = u(fv(a, b));
          for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            var f = a.h[e];
            f.isVisible() && (f = Yu(f, c, a.i)) && d.push(f);
            a.h[e] = null;
          }
          return d;
        }
        function hv(a) {
          a.g = null;
          a.h = [null, null, null, null, null, null, null, null];
        }
        function iv(a, b, c) {
          var d = { 0: 0, 1: 0, 2: 1, 3: 1 };
          a = d[a];
          b = d[b];
          c = d[c];
          return jv[a << 2 | b << 1 | c];
        }
        var kv = /* @__PURE__ */ new Map([[32, " "], [33, ""], [37, ""], [42, ""], [44, ""], [48, ""], [49, ""], [50, ""], [51, ""], [52, ""], [53, ""], [57, ""], [58, ""], [60, ""], [61, ""], [63, ""], [118, ""], [119, ""], [120, ""], [121, ""], [122, ""], [123, ""], [124, ""], [125, ""], [126, ""], [127, ""]]), jv = "black blue green cyan red magenta yellow white".split(" ");
        function lv() {
          this.h = [];
          this.g = [];
          this.i = new Zu();
          this.l = 0;
          this.m = /* @__PURE__ */ new Map([["CC1", new Mu(0, 0)], ["CC2", new Mu(0, 1)], ["CC3", new Mu(1, 0)], ["CC4", new Mu(1, 1)]]);
          this.A = this.u = 0;
          this.j = /* @__PURE__ */ new Map();
          this.D = true;
          this.C = /* @__PURE__ */ new Set();
          mv(this);
        }
        lv.prototype.clear = function() {
          this.l = 0;
          this.h = [];
          this.g = [];
          var a = this.i;
          a.i = [];
          a.h = [];
          a.g = 0;
          mv(this);
          a = u(this.j.values());
          for (var b = a.next(); !b.done; b = a.next()) hv(b.value);
        };
        function mv(a) {
          a.u = 0;
          a.A = 0;
          for (var b = u(a.m.values()), c = b.next(); !c.done; c = b.next()) c = c.value, c.h = 0, c.g = c.j, c.m = null, Cu(c.i), Cu(c.j), Cu(c.u);
          a.D = true;
        }
        lv.prototype.extract = function(a, b) {
          if (this.D) {
            for (var c = u(this.m.values()), d = c.next(); !d.done; d = c.next()) d.value.l = b;
            this.D = false;
          }
          a = new lh(a, 0);
          if (!(a.getLength() < 8) && a.ba() === 181 && a.Ha() === 49 && a.Z() === 1195456820 && a.ba() === 3 && (c = a.ba(), (c & 64) !== 0)) for (c &= 31, a.skip(1), d = 0; d < c; d++) {
            var e = a.ba(), f = (e & 4) >> 2, g = a.ba(), h = a.ba();
            f && (e &= 3, e === 0 || e === 1 ? this.h.push({ pts: b, type: e, Ib: g, vc: h, order: this.h.length }) : (this.g.push({ pts: b, type: e, value: g, order: this.g.length }), this.g.push({ pts: b, type: 2, value: h, order: this.g.length })));
          }
        };
        lv.prototype.decode = function() {
          function a(e, f) {
            return e.pts - f.pts || e.order - f.order;
          }
          var b = [];
          this.h.sort(a);
          this.g.sort(a);
          for (var c = u(this.h), d = c.next(); !d.done; d = c.next()) (d = nv(this, d.value)) && b.push(d);
          c = u(this.g);
          for (d = c.next(); !d.done; d = c.next()) $u(this.i, d.value);
          c = u(this.i.i);
          for (d = c.next(); !d.done; d = c.next()) d = ov(this, d.value), b.push.apply(b, x(d));
          this.i.i = [];
          this.h = [];
          this.g = [];
          return b;
        };
        function nv(a, b) {
          var c = b.type;
          if ((b.Ib & 112) === 16) {
            var d = b.Ib >> 3 & 1;
            c === 0 ? a.u = d : a.A = d;
          }
          d = "CC" + ((c << 1 | (c ? a.A : a.u)) + 1);
          c = a.m.get(d);
          if (b.Ib === 255 && b.vc === 255 || !b.Ib && !b.vc || !pv(b.Ib) || !pv(b.vc)) return ++a.l >= 45 && mv(a), null;
          a.l = 0;
          b.Ib &= 127;
          b.vc &= 127;
          var e = b.Ib;
          if (e >= 1 && e <= 15 || !b.Ib && !b.vc) return null;
          e = null;
          if ((b.Ib & 112) === 16) a: {
            a.C.add(d), d = b.Ib;
            a = b.vc;
            if (c.m === (d << 8 | a)) c.m = null;
            else if (c.m = d << 8 | a, (d & 240) === 16 && (a & 192) === 64) {
              b = [11, 11, 1, 2, 3, 4, 12, 13, 14, 15, 5, 6, 7, 8, 9, 10][(d & 7) << 1 | a >> 5 & 1];
              d = "white";
              e = false;
              var f = null;
              var g = a > 95 ? a - 96 : a - 64;
              g <= 13 ? d = Ru[Math.floor(g / 2)] : g <= 15 ? e = true : f = Math.floor((g - 16) / 2);
              a = (a & 1) === 1;
              c.h !== 4 && (g = c.g, c.h === 3 && b !== g.g && (c = 1 + b - g.h, Lu(g, c, 1 + g.g - g.h, g.h), Fu(g, 0, c - 1), Fu(g, b + 1, 15 - b)), g.g = b, g.m = a, g.j = e, g.l = d, g.A = f, g.u = "black");
            } else if ((d & 247) === 17 && (a & 240) === 32) c.g.m = false, c.g.j = false, c.g.l = "white", Gu(c.g, 0, 32), d = false, b = Ru[(a & 14) >> 1], b === "white_italics" && (b = "white", d = true), c.g.m = (a & 1) === 1, c.g.j = d, c.g.l = b;
            else if ((d & 247) === 16 && (a & 240) === 32 || (d & 247) === 23 && (a & 255) === 45) b = "black", (d & 7) === 0 && (b = Qu[(a & 14) >> 1]), c.g.u = b;
            else if ((d & 247) === 17 && (a & 240) === 48) Gu(c.g, 1, a);
            else if ((d & 246) === 18 && (a & 224) === 32) Gu(c.g, d & 1 ? 3 : 2, a);
            else {
              if ((d & 246) === 20 && (a & 240) === 32) {
                a = b.pts;
                d = null;
                switch (b.vc) {
                  case 32:
                    Ou(c);
                    break;
                  case 33:
                    c = c.g;
                    c.i[c.g].pop();
                    break;
                  case 37:
                    d = Nu(c, 2, a);
                    break;
                  case 38:
                    d = Nu(c, 3, a);
                    break;
                  case 39:
                    d = Nu(c, 4, a);
                    break;
                  case 40:
                    Gu(c.g, 0, 32);
                    break;
                  case 41:
                    c.h = 2;
                    c.g = c.i;
                    c.g.h = 0;
                    c.l = a;
                    break;
                  case 42:
                    Cu(c.u);
                    Pu(c);
                    break;
                  case 43:
                    Pu(c);
                    break;
                  case 44:
                    b = c.i;
                    d = null;
                    c.h !== 4 && (d = Du(b, c.l, a));
                    Fu(b, 0, 15);
                    break;
                  case 45:
                    b = c.g;
                    c.h !== 3 ? d = null : (d = Du(b, c.l, a), e = b.g - b.h + 1, Lu(b, e - 1, e, b.h), Fu(b, 0, e - 1), Fu(b, b.g, 15 - b.g), c.l = a);
                    break;
                  case 46:
                    Fu(c.j, 0, 15);
                    break;
                  case 47:
                    b = null, c.h !== 4 && (b = Du(c.i, c.l, a)), d = c.j, c.j = c.i, c.i = d, Ou(c), c.l = a, d = b;
                }
                e = d;
                break a;
              }
              (d == 23 || d == 31) && a >= 33 && a <= 35 && (c.g.C = a - 32);
            }
            e = null;
          }
          else a = b.vc, Gu(c.g, 0, b.Ib), Gu(c.g, 0, a);
          return e;
        }
        function ov(a, b) {
          var c = [];
          try {
            for (; b.Pa(); ) {
              var d = bv(b).value, e = (d & 224) >> 5, f = d & 31;
              e === 7 && f != 0 && (e = bv(b).value & 63);
              if (e != 0) {
                a.C.add("svc" + e);
                a.j.has(e) || a.j.set(e, new cv(e));
                for (var g = a.j.get(e), h = b.Wa(); b.Wa() - h < f; ) {
                  e = g;
                  var k2 = b, l = bv(k2), m = l.value, n = l.pts;
                  if (m === 16) {
                    var q = bv(k2);
                    m = m << 16 | q.value;
                  }
                  if (m >= 0 && m <= 31) var r = dv(e, k2, m, n);
                  else if (m >= 128 && m <= 159) r = ev(e, k2, m, n);
                  else {
                    if (m >= 4096 && m <= 4127) e = k2, k2 = m & 255, k2 >= 8 && k2 <= 15 ? e.skip(1) : k2 >= 16 && k2 <= 23 ? e.skip(2) : k2 >= 24 && k2 <= 31 && e.skip(3);
                    else if (m >= 4224 && m <= 4255) e = k2, k2 = m & 255, k2 >= 128 && k2 <= 135 ? e.skip(4) : k2 >= 136 && k2 <= 143 && e.skip(5);
                    else if (m >= 32 && m <= 127) k2 = m, e.g && (k2 === 127 ? Vu(e.g, "") : Vu(e.g, String.fromCharCode(k2)));
                    else if (m >= 160 && m <= 255) e.g && Vu(e.g, String.fromCharCode(m));
                    else if (m >= 4128 && m <= 4223) {
                      if (k2 = m & 255, e.g) if (kv.has(k2)) {
                        var t = kv.get(k2);
                        Vu(e.g, t);
                      } else Vu(e.g, "_");
                    } else m >= 4256 && m <= 4351 && e.g && ((m & 255) != 160 ? Vu(e.g, "_") : Vu(e.g, "[CC]"));
                    r = [];
                  }
                  c.push.apply(c, x(r));
                }
              }
            }
          } catch (w) {
            if (w instanceof U && w.code === 3e3) bb("CEA708_INVALID_DATA", "Buffer read out of bounds / invalid CEA-708 Data.");
            else throw w;
          }
          return c;
        }
        function pv(a) {
          for (var b = 0; a; ) b ^= a & 1, a >>= 1;
          return b === 1;
        }
        lv.prototype.getStreams = function() {
          return Array.from(this.C);
        };
        S("shaka.cea.CeaDecoder", lv);
        qd = function() {
          return new lv();
        };
        function qv(a) {
          for (var b = [], c = a, d = a = 0; d < c.length; ) a == 2 && c[d] == 3 ? (a = 0, c = [].concat(x(c)), c.splice(d, 1), c = new Uint8Array(c)) : c[d] == 0 ? a++ : a = 0, d++;
          a = c;
          for (d = 0; d < a.length; ) {
            for (c = 0; a[d] == 255; ) c += 255, d++;
            c += a[d++];
            for (var e = 0; a[d] == 255; ) e += 255, d++;
            e += a[d++];
            c == 4 && b.push(a.subarray(d, d + e));
            d += e;
          }
          return b;
        }
        ;
        function rv() {
          this.j = /* @__PURE__ */ new Map();
          this.i = this.h = 0;
          this.g = sv;
        }
        rv.prototype.init = function(a) {
          function b(f) {
            f = f.name;
            tv.has(f) && (c.g = tv.get(f));
          }
          var c = this, d = [], e = [];
          new oh().box("moov", th).box("mvex", th).W("trex", function(f) {
            var g = f.reader;
            g.skip(4);
            g.skip(4);
            f = g.Z();
            g = g.Z();
            c.h = f;
            c.i = g;
          }).box("trak", th).W("tkhd", function(f) {
            var g = f.reader;
            f = f.version;
            f == 1 ? (g.skip(8), g.skip(8)) : (g.skip(4), g.skip(4));
            var h = g.Z();
            f == 1 ? g.skip(8) : g.skip(4);
            g.skip(4);
            g.skip(8);
            g.skip(2);
            g.skip(2);
            g.skip(2);
            g.skip(2);
            g.skip(36);
            g.Ha();
            g.Ha();
            g.Ha();
            g.Ha();
            d.push(h);
          }).box("mdia", th).W(
            "mdhd",
            function(f) {
              f = Ki(f.reader, f.version);
              e.push(f.timescale);
            }
          ).box("minf", th).box("stbl", th).W("stsd", vh).box("avc1", b).box("avc3", b).box("dvav", b).box("dva1", b).box("hev1", b).box("hvc1", b).box("dvh1", b).box("dvhe", b).box("vvc1", b).box("vvi1", b).box("dvc1", b).box("dvi1", b).box("encv", wh).box("sinf", th).box("frma", function(f) {
            f = Ni(f.reader).codec;
            tv.has(f) && (c.g = tv.get(f));
          }).parse(a, true, true);
          if (!d.length || !e.length || d.length != e.length) throw new U(2, 2, 2010);
          this.g == sv && ab("Unable to determine bitstream format for CEA parsing!");
          d.forEach(function(f, g) {
            c.j.set(f, e[g]);
          });
        };
        rv.prototype.parse = function(a) {
          var b = this;
          if (this.g == sv) return [];
          var c = [], d = 0, e = [];
          new oh().box("moof", function(f) {
            d = f.start;
            e = [];
            th(f);
          }).box("traf", function(f) {
            e.push({ baseMediaDecodeTime: null, je: b.h, ke: b.i, uj: [], timescale: 9e4 });
            th(f);
          }).W("trun", function(f) {
            var g = e[e.length - 1];
            f = Li(f.reader, f.version, f.flags);
            g.uj.push(f);
          }).W("tfhd", function(f) {
            var g = e[e.length - 1];
            f = Ii(f.reader, f.flags);
            g.je = f.je || b.h;
            g.ke = f.ke || b.i;
            f = f.trackId;
            b.j.has(f) && (g.timescale = b.j.get(f));
          }).W("tfdt", function(f) {
            var g = e[e.length - 1];
            f = Ji(f.reader, f.version);
            g.baseMediaDecodeTime = f.baseMediaDecodeTime;
          }).box("mdat", function(f) {
            for (var g = d - f.start - 8, h = f.reader.Wa(), k2 = u(e), l = k2.next(); !l.done; l = k2.next()) l = l.value, l.baseMediaDecodeTime === null ? ab("Unable to find base media decode time for CEA captions!") : (f.reader.seek(h), uv(b, f.reader, l.baseMediaDecodeTime, l.timescale, l.je, l.ke, g, l.uj, c));
          }).parse(a, false, true);
          return c;
        };
        function uv(a, b, c, d, e, f, g, h, k2) {
          var l = 0, m = f, n = h.map(function(t) {
            return t.Zh;
          });
          n = [].concat.apply([], x(n));
          n.length && (m = n[0].sampleSize || f);
          for (b.skip(g + h[0].Tg); b.Pa(); ) {
            g = b.Z();
            var q = b.ba(), r = null;
            r = false;
            h = 1;
            switch (a.g) {
              case vv:
                r = q & 31;
                r = r == 6;
                break;
              case wv:
                h = 2;
                b.skip(1);
                r = q >> 1 & 63;
                r = r == 39 || r == 40;
                break;
              case xv:
                h = 2;
                b.skip(1);
                r = q >> 1 & 63;
                r = r == 23 || r == 24;
                break;
              default:
                return;
            }
            if (r) for (q = 0, l < n.length && (q = n[l].cg || 0), q = (c + q) / d, h = u(qv(b.ac(g - h))), r = h.next(); !r.done; r = h.next()) k2.push({ packet: r.value, pts: q });
            else try {
              b.skip(g - h);
            } catch (t) {
              break;
            }
            m -= g + 4;
            m == 0 && (c = l < n.length ? c + (n[l].$h || e) : c + e, l++, l < n.length ? m = n[l].sampleSize || f : m = f);
          }
        }
        S("shaka.cea.Mp4CeaParser", rv);
        var sv = 0, vv = 1, wv = 2, xv = 3, tv = (/* @__PURE__ */ new Map()).set("avc1", vv).set("avc3", vv).set("dvav", vv).set("dva1", vv).set("hev1", wv).set("hvc1", wv).set("dvh1", wv).set("dvhe", wv).set("vvc1", xv).set("vvi1", xv).set("dvc1", xv).set("dvi1", xv);
        rd("video/mp4", function() {
          return new rv();
        });
        function yv() {
          this.g = null;
        }
        yv.prototype.init = function() {
        };
        yv.prototype.parse = function(a) {
          this.g ? this.g.clearData() : this.g = new nk();
          var b = [];
          a = Kb(a);
          if (!vk(a)) return b;
          a = this.g.parse(a);
          var c = a.le(), d = a.yf();
          a = [];
          switch (c.video) {
            case "avc":
              a.push(6);
              break;
            case "hvc":
              a.push(39), a.push(40);
          }
          if (!a.length) return b;
          c = u(d);
          for (d = c.next(); !d.done; d = c.next()) if (d = d.value, a.includes(d.type) && d.time != null) for (var e = u(qv(d.data)), f = e.next(); !f.done; f = e.next()) b.push({ packet: f.value, pts: d.time });
          return b;
        };
        S("shaka.cea.TsCeaParser", yv);
        rd("video/mp2t", function() {
          return new yv();
        });
        function zv(a) {
          var b = 0, c = Ob(a), d = c.getUint32(b, true);
          if (d != a.byteLength) return [];
          a: {
            a = b + 4 + 2;
            for (b = []; a < c.byteLength - 1; ) {
              d = c.getUint16(a, true);
              a += 2;
              var e = c.getUint16(a, true);
              a += 2;
              if ((e & 1) != 0 || e + a > c.byteLength) {
                c = [];
                break a;
              }
              var f = Kb(c, a, e);
              b.push({ type: d, value: f });
              a += e;
            }
            c = b;
          }
          return c;
        }
        function Av(a) {
          a = hc(Sd(a));
          a = zv(a).filter(function(b) {
            return b.type === Bv;
          })[0];
          if (!a) return null;
          a = Xb(a.value, true);
          return (a = Kd(a, "WRMHEADER")) ? a : null;
        }
        function Cv(a) {
          try {
            var b = Av(a);
            if (b) a: {
              for (var c = u(Ud(b, "DATA")), d = c.next(); !d.done; d = c.next()) {
                var e = d.value;
                if (e.children) for (var f = u(e.children), g = f.next(); !g.done; g = f.next()) {
                  var h = g.value;
                  if (h.tagName == "LA_URL") {
                    var k2 = Sd(h);
                    break a;
                  }
                }
              }
              k2 = "";
            }
            else k2 = "";
            return k2;
          } catch (l) {
            return "";
          }
        }
        var Bv = 1;
        function Dv() {
          this.g = /* @__PURE__ */ new Map();
        }
        Dv.prototype.release = function() {
          this.g.clear();
        };
        function Ev(a, b, c, d) {
          var e = Fv(a, b), f = null;
          a = [];
          var g = [];
          b = null;
          var h = new Set(e.map(function(l) {
            return l.keyId;
          }));
          h.delete(null);
          var k2 = "cenc";
          if (h.size > 1) throw new U(2, 4, 4010);
          if (!c) {
            g = e.filter(function(l) {
              return l.Wd == "urn:mpeg:dash:sea:2012";
            });
            if (g.length > 1) throw new U(2, 4, 4050);
            g.length && (b = Gv(g[0]));
            (g = e.find(function(l) {
              return l.Wd == "urn:mpeg:dash:mp4protection:2011";
            })) && g.encryptionScheme && (k2 = g.encryptionScheme);
            g = e.filter(function(l) {
              return l.Wd == "urn:mpeg:dash:mp4protection:2011" ? (f = l.init || f, false) : l.Wd != "urn:mpeg:dash:sea:2012";
            });
            g.length && (a = Hv(f, k2, g, d, h), a.length == 0 && (a = [nc("", k2, f)]));
          }
          if (e.length && !b && (c || !g.length)) for (a = [], c = u(Object.values(d)), d = c.next(); !d.done; d = c.next()) d = d.value, d != "org.w3.clearkey" && a.push(nc(d, k2, f));
          if (h = Array.from(h)[0] || null) for (k2 = u(a), c = k2.next(); !c.done; c = k2.next()) for (c = u(c.value.initData), d = c.next(); !d.done; d = c.next()) d.value.keyId = h;
          return { Qi: h, Un: f, drmInfos: a, Hg: b, Vi: true };
        }
        function Iv(a, b, c, d, e) {
          var f = Ev(a, b, d, e);
          if (c.Vi) {
            a = c.drmInfos.length == 1 && !c.drmInfos[0].keySystem;
            b = f.drmInfos.length == 0;
            if (c.drmInfos.length == 0 || a && !b) c.drmInfos = f.drmInfos;
            c.Vi = false;
          } else if (f.drmInfos.length > 0 && (c.drmInfos = c.drmInfos.filter(function(g) {
            return f.drmInfos.some(function(h) {
              return h.keySystem == g.keySystem;
            });
          }), c.drmInfos.length == 0)) throw new U(2, 4, 4008);
          return f.Qi || c.Qi;
        }
        function Jv(a) {
          var b = Wd(a.node, "https://dashif.org/CPS", "Laurl");
          if (b && (b = Sd(b))) return b;
          if ((b = Wd(a.node, "urn:microsoft:playready", "pro")) && Sd(b)) return Cv(b);
          if (a = Wd(a.node, "urn:mpeg:cenc:2013", "pssh")) {
            if (a = Sd(a)) {
              b = hc(a);
              a = 8;
              b = Ob(b);
              var c = b.getUint8(a);
              a += 20;
              c > 0 && (a += 4 + 16 * b.getUint32(a));
              a = Kb(b, a + 4);
              a = ec(a);
              a = Kd("<pro>" + a + "</pro>");
              return Cv(a);
            }
          }
          return "";
        }
        function Hv(a, b, c, d, e) {
          var f = [];
          c = u(c);
          for (var g = c.next(); !g.done; g = c.next()) {
            g = g.value;
            var h = d[g.Wd];
            if (h) {
              var k2;
              if ((k2 = Wd(g.node, "urn:microsoft:playready", "pro")) && Sd(k2)) {
                k2 = Sd(k2);
                k2 = hc(k2);
                var l = new Uint8Array([154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149]);
                k2 = [{ initData: Ah(k2, l, /* @__PURE__ */ new Set(), 0), initDataType: "cenc", keyId: g.keyId }];
              } else k2 = null;
              l = null;
              if (g.Wd === "urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e") {
                l = g;
                var m = e;
                if (m.size == 0) l = null;
                else {
                  var n = new Uint8Array([
                    16,
                    119,
                    239,
                    236,
                    192,
                    178,
                    77,
                    2,
                    172,
                    227,
                    60,
                    30,
                    82,
                    226,
                    251,
                    75
                  ]), q = new Uint8Array([]);
                  l = [{ initData: Ah(q, n, m, 1), initDataType: "cenc", keyId: l.keyId }];
                }
              }
              k2 = nc(h, b, g.init || a || k2 || l);
              if (h = Kv.get(h)) k2.licenseServerUri = h(g);
              a: {
                if (g = Wd(g.node, "https://dashif.org/CPS", "Certurl")) {
                  if (g = Sd(g)) break a;
                }
                g = "";
              }
              k2.serverCertificateUri = g;
              f.push(k2);
            }
          }
          return f;
        }
        function Fv(a, b) {
          var c = [];
          b = u(b);
          for (var d = b.next(); !d.done; d = b.next()) (d = Lv(a, d.value)) && c.push(d);
          return c;
        }
        function Lv(a, b) {
          var c = b.attributes.schemeIdUri, d = $d(b, "urn:mpeg:cenc:2013", "default_KID"), e = Xd(b, "urn:mpeg:cenc:2013", "pssh").map(Td), f = b.attributes.value;
          if (!c) return null;
          c = c.toLowerCase();
          if (d && (d = d.replace(/-/g, "").toLowerCase(), d.includes(" "))) throw new U(2, 4, 4009);
          var g = [];
          try {
            g = e.map(function(h) {
              if (!a.g.has(h)) {
                var k2 = hc(h);
                a.g.set(h, k2);
              }
              return { initDataType: "cenc", initData: a.g.get(h), keyId: null };
            });
          } catch (h) {
            throw new U(2, 4, 4007);
          }
          return { node: b, Wd: c, keyId: d, init: g.length > 0 ? g : null, encryptionScheme: f };
        }
        function Gv(a) {
          if (!window2.crypto || !window2.crypto.subtle) throw ab("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"), new U(2, 4, 4042);
          var b = Wd(a.node, "urn:mpeg:dash:schema:sea:2012", "SegmentEncryption");
          if (!b) throw new U(2, 4, 4051);
          if (b.attributes.schemeIdUri != "urn:mpeg:dash:sea:aes128-cbc:2013") throw new U(2, 4, 4051);
          b = Wd(a.node, "urn:mpeg:dash:schema:sea:2012", "CryptoPeriod");
          if (!b) throw new U(2, 4, 4051);
          a = b.attributes.IV;
          b = cc(b.attributes.keyUriTemplate);
          if (!a || !b) throw new U(2, 4, 4051);
          a = ic(a.substr(2));
          if (a.byteLength != 16) throw new U(2, 4, 4048);
          return { Ll: b, iv: a };
        }
        var Kv = (/* @__PURE__ */ new Map()).set("com.apple.fps", function(a) {
          if ("apple" === window2.shakaMediaKeysPolyfill) throw new U(2, 4, 4054);
          if (a = Wd(a.node, "https://dashif.org/CPS", "Laurl")) {
            if (a = Sd(a)) return a;
          }
          return "";
        }).set("com.widevine.alpha", function(a) {
          var b = Wd(a.node, "https://dashif.org/CPS", "Laurl");
          return b && (b = Sd(b)) ? b : (a = Wd(a.node, "urn:microsoft", "laurl")) ? cc(a.attributes.licenseUrl) || "" : "";
        }).set("com.microsoft.playready", Jv).set("com.microsoft.playready.recommendation", Jv).set(
          "com.microsoft.playready.software",
          Jv
        ).set("com.microsoft.playready.hardware", Jv).set("org.w3.clearkey", function(a) {
          var b = Wd(a.node, "https://dashif.org/CPS", "Laurl");
          return b && (b = Sd(b)) ? b : (a = Wd(a.node, "http://dashif.org/guidelines/clearKey", "Laurl")) && a.attributes.Lic_type === "EME-1.0" && a && (a = Sd(a)) ? a : "";
        });
        function Mv(a, b, c, d, e, f) {
          var g = (/* @__PURE__ */ new Map()).set("RepresentationID", b).set("Number", c).set("SubNumber", d).set("Bandwidth", e).set("Time", f);
          return a.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g, function(h, k2, l, m) {
            if (h == "$$") return "$";
            var n = g.get(k2);
            if (n == null) return h;
            k2 == "RepresentationID" && l && (l = void 0);
            k2 == "Time" && typeof n != "bigint" && (Math.abs(n - Math.round(n)) >= 0.2 && ab("Calculated $Time$ values must be close to integers"), n = Math.round(n));
            switch (m) {
              case void 0:
              case "d":
              case "i":
              case "u":
                h = n.toString();
                break;
              case "o":
                h = n.toString(8);
                break;
              case "x":
                h = n.toString(16);
                break;
              case "X":
                h = n.toString(16).toUpperCase();
                break;
              default:
                h = n.toString();
            }
            l = window2.parseInt(l, 10) || 1;
            return Array(Math.max(0, l - h.length) + 1).join("0") + h;
          });
        }
        function Nv(a, b) {
          var c = Ov(a, b, "timescale"), d = 1;
          c && (d = fe(c) || 1);
          c = Ov(a, b, "duration");
          var e = (c = fe(c || "")) ? c / d : null, f = Ov(a, b, "startNumber"), g = Number(Ov(a, b, "presentationTimeOffset")) || 0, h = ge(f || "");
          if (f == null || h == null) h = 1;
          f = null;
          if (b = Pv(a, b, "SegmentTimeline")) {
            b = Rd(b, "S");
            f = d;
            a = a.qa.duration || Infinity;
            for (var k2 = h, l = [], m = -g, n = 0; n < b.length; ++n) {
              var q = b[n], r = b[n + 1], t = Zd(q, "t", ge), w = Zd(q, "d", ge), v = Zd(q, "r", ee);
              q = Zd(q, "k", ee) || 0;
              t != null && (t -= g);
              if (w) {
                t = t != null ? t : m;
                v = v || 0;
                if (v < 0) if (r) {
                  r = Zd(r, "t", ge);
                  if (r == null) break;
                  else if (t >= r) break;
                  v = Math.ceil((r - t) / w) - 1;
                } else {
                  if (a == Infinity) break;
                  else if (t / f >= a) break;
                  v = Math.ceil((a * f - t) / w) - 1;
                }
                l.length > 0 && t != m && (l[l.length - 1].end = t / f);
                for (r = 0; r <= v; ++r) m = t + w, l.push({ start: t / f, end: m / f, xi: t, Fc: q, pm: l.length + k2 }), t = m;
              }
            }
            f = l;
          }
          return { timescale: d, pg: c, pb: e, Ie: h, Qb: g / d || 0, wd: g, timeline: f };
        }
        function Qv(a, b) {
          return [b(a.N), b(a.va), b(a.Aa)].filter(Ef);
        }
        function Ov(a, b, c) {
          b = Qv(a, b);
          a = null;
          b = u(b);
          for (var d = b.next(); !d.done && !(a = d.value.attributes[c]); d = b.next()) ;
          return a;
        }
        function Pv(a, b, c) {
          b = Qv(a, b);
          a = null;
          b = u(b);
          for (var d = b.next(); !d.done && !(a = Vd(d.value, c)); d = b.next()) ;
          return a;
        }
        function Rv(a, b, c, d, e, f) {
          for (var g = $d(a, "http://www.w3.org/1999/xlink", "href"), h = $d(a, "http://www.w3.org/1999/xlink", "actuate") || "onRequest", k2 = u(Object.keys(a.attributes)), l = k2.next(); !l.done; l = k2.next()) {
            l = l.value;
            var m = l.split(":"), n = Md("http://www.w3.org/1999/xlink");
            m[0] == n && delete a.attributes[l];
          }
          if (f >= 5) return Ng(new U(2, 4, 4028));
          if (h != "onLoad") return Ng(new U(2, 4, 4027));
          var q = mc([d], [g]);
          return e.request(0, $g(q, b)).bb(function(r) {
            r = Jd(r.data, a.tagName);
            if (!r) return Ng(new U(2, 4, 4001, g));
            for (a.children = []; r.children.length; ) {
              var t = r.children.shift();
              a.children.push(t);
            }
            t = u(Object.keys(r.attributes));
            for (var w = t.next(); !w.done; w = t.next()) w = w.value, a.attributes[w] = r.attributes[w];
            return Sv(a, b, c, q[0], e, f + 1);
          });
        }
        function Sv(a, b, c, d, e, f) {
          f = f === void 0 ? 0 : f;
          if ($d(a, "http://www.w3.org/1999/xlink", "href")) {
            var g = Rv(a, b, c, d, e, f);
            c && (g = g.bb(void 0, function() {
              return Sv(a, b, c, d, e, f);
            }));
            return g;
          }
          g = [];
          for (var h = u(Qd(a)), k2 = h.next(), l = {}; !k2.done; l = { fe: void 0 }, k2 = h.next()) l.fe = k2.value, $d(l.fe, "http://www.w3.org/1999/xlink", "href") == "urn:mpeg:dash:resolve-to-zero:2013" ? a.children = a.children.filter(/* @__PURE__ */ function(m) {
            return function(n) {
              return n !== m.fe;
            };
          }(l)) : l.fe.tagName != "SegmentTimeline" && g.push(Sv(l.fe, b, c, d, e, f));
          return Rg(g).bb(function() {
            return a;
          });
        }
        ;
        function Tv(a, b, c, d, e, f, g) {
          var h, k2 = new oh().W("sidx", function(l) {
            h = Uv(b, d, e, f, g, c, l);
          });
          a && k2.parse(a);
          if (h) return h;
          throw new U(2, 3, 3004);
        }
        function Uv(a, b, c, d, e, f, g) {
          var h = [];
          g.reader.skip(4);
          var k2 = g.reader.Z();
          if (k2 == 0) throw new U(2, 3, 3005);
          if (g.version == 0) {
            var l = g.reader.Z();
            var m = g.reader.Z();
          } else l = g.reader.Td(), m = g.reader.Td();
          g.reader.skip(2);
          var n = g.reader.Ha();
          a = a + g.size + m;
          for (m = 0; m < n; m++) {
            var q = g.reader.Z(), r = (q & 2147483648) >>> 31;
            q &= 2147483647;
            var t = g.reader.Z();
            g.reader.skip(4);
            if (r == 1) throw new U(2, 3, 3006);
            h.push(new yj(l / k2 + c, (l + t) / k2 + c, function() {
              return f;
            }, a, a + q - 1, b, c, d, e));
            l += t;
            a += q;
          }
          g.parser.stop();
          return h;
        }
        ;
        function Vv(a) {
          this.h = Ob(a);
          this.g = new lh(this.h, 0);
        }
        Vv.prototype.Pa = function() {
          return this.g.Pa();
        };
        function Wv(a) {
          var b = Xv(a);
          if (b.length > 7) throw new U(2, 3, 3002);
          var c = 0;
          b = u(b);
          for (var d = b.next(); !d.done; d = b.next()) c = 256 * c + d.value;
          b = Xv(a);
          a: {
            d = u(Yv);
            for (var e = d.next(); !e.done; e = d.next()) if (Jb(b, new Uint8Array(e.value))) {
              d = true;
              break a;
            }
            d = false;
          }
          if (d) b = a.h.byteLength - a.g.Wa();
          else {
            if (b.length == 8 && b[1] & 224) throw new U(2, 3, 3001);
            for (e = d = 0; e < b.length; e++) {
              var f = b[e];
              d = e == 0 ? f & (1 << 8 - b.length) - 1 : 256 * d + f;
            }
            b = d;
          }
          b = a.g.Wa() + b <= a.h.byteLength ? b : a.h.byteLength - a.g.Wa();
          d = Ob(a.h, a.g.Wa(), b);
          a.g.skip(b);
          return new Zv(
            c,
            d
          );
        }
        function Xv(a) {
          var b = a.g.Wa(), c = a.g.ba();
          if (c == 0) throw new U(2, 3, 3002);
          c = 8 - Math.floor(Math.log2(c));
          a.g.skip(c - 1);
          return Kb(a.h, b, c);
        }
        var Yv = [[255], [127, 255], [63, 255, 255], [31, 255, 255, 255], [15, 255, 255, 255, 255], [7, 255, 255, 255, 255, 255], [3, 255, 255, 255, 255, 255, 255], [1, 255, 255, 255, 255, 255, 255, 255]];
        function Zv(a, b) {
          this.id = a;
          this.g = b;
        }
        function $v(a) {
          if (a.g.byteLength > 8) throw new U(2, 3, 3002);
          if (a.g.byteLength == 8 && a.g.getUint8(0) & 224) throw new U(2, 3, 3001);
          for (var b = 0, c = 0; c < a.g.byteLength; c++) {
            var d = a.g.getUint8(c);
            b = 256 * b + d;
          }
          return b;
        }
        ;
        function aw(a, b, c, d, e, f, g, h, k2) {
          function l() {
            return e;
          }
          var m = [];
          a = new Vv(a.g);
          for (var n = null, q = null; a.Pa(); ) {
            var r = Wv(a);
            if (r.id == 187) {
              var t = bw(r);
              t && (r = c * t.Dm, t = b + t.dm, n != null && m.push(new yj(n + g, r + g, l, q, t - 1, f, g, h, k2)), n = r, q = t);
            }
          }
          n != null && m.push(new yj(n + g, d + g, l, q, null, f, g, h, k2));
          return m;
        }
        function bw(a) {
          var b = new Vv(a.g);
          a = Wv(b);
          if (a.id != 179) throw new U(2, 3, 3013);
          a = $v(a);
          b = Wv(b);
          if (b.id != 183) throw new U(2, 3, 3012);
          b = new Vv(b.g);
          for (var c = 0; b.Pa(); ) {
            var d = Wv(b);
            if (d.id == 241) {
              c = $v(d);
              break;
            }
          }
          return { Dm: a, dm: c };
        }
        ;
        function cw(a, b, c) {
          b = Pv(a, b, "Initialization");
          if (!b) return null;
          var d = a.N.mb(), e = b.attributes.sourceURL;
          e && (d = mc(d, [cc(e)], a.Sb()));
          e = 0;
          var f = null;
          if (b = Zd(b, "range", de)) e = b.start, f = b.end;
          c = new wj(function() {
            return d;
          }, e, f, dw(a), null, null, c, a.va.encrypted);
          c.codecs = a.N.codecs;
          c.mimeType = a.N.mimeType;
          a.qa && !a.qa.Df && (c.g = a.qa.start + a.qa.duration);
          return c;
        }
        function ew(a, b, c) {
          var d = Number(Ov(a, fw, "presentationTimeOffset")) || 0, e = Ov(a, fw, "timescale"), f = 1;
          e && (f = fe(e) || 1);
          var g = d / f || 0, h = cw(a, fw, c);
          gw(a, h);
          var k2 = Hd(a);
          return { endTime: -1, timeline: -1, gd: function() {
            var l = Pv(k2, fw, "RepresentationIndex");
            var m = k2.N.mb();
            l && (l = cc(l.attributes.sourceURL)) && (m = mc(m, [l], k2.Sb()));
            l = hw(k2);
            return iw(k2, b, h, m, l.start, l.end, g);
          }, timescale: f };
        }
        function iw(a, b, c, d, e, f, g) {
          var h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G;
          return Q(function(I) {
            if (I.g == 1) return h = a.presentationTimeline, k2 = !a.Kb || !a.qa.Df, l = a.qa.start, m = a.qa.duration, n = a.N.mimeType.split("/")[1], q = b, r = null, t = [q(d, e, f, false), n == "webm" ? q(c.T(), c.startByte, c.endByte, true) : null], q = null, F(I, Promise.all(t), 2);
            w = I.h;
            v = w[0];
            z = w[1] || null;
            y = null;
            A = l - g;
            C = l;
            E = m ? l + m : Infinity;
            if (n == "mp4") var J = Tv(v, e, d, c, A, C, E);
            else {
              J = v;
              var L = new Vv(z);
              if (Wv(L).id != 440786851) throw new U(2, 3, 3008);
              var K = Wv(L);
              if (K.id != 408125543) throw new U(
                2,
                3,
                3009
              );
              L = K.g.byteOffset;
              K = new Vv(K.g);
              for (var N = null; K.Pa(); ) {
                var P = Wv(K);
                if (P.id == 357149030) {
                  N = P;
                  break;
                }
              }
              if (!N) throw new U(2, 3, 3010);
              N = new Vv(N.g);
              P = 1e6;
              for (K = null; N.Pa(); ) {
                var O = Wv(N);
                if (O.id == 2807729) P = $v(O);
                else if (O.id == 17545) if (O.g.byteLength == 4) K = O.g.getFloat32(0);
                else if (O.g.byteLength == 8) K = O.g.getFloat64(0);
                else throw new U(2, 3, 3003);
              }
              if (K == null) throw new U(2, 3, 3011);
              N = P / 1e9;
              K *= N;
              J = Wv(new Vv(J));
              if (J.id != 475249515) throw new U(2, 3, 3007);
              J = aw(J, L, N, K, d, c, A, C, E);
            }
            y = J;
            D = u(y);
            for (B = D.next(); !B.done; B = D.next()) G = B.value, G.codecs = a.N.codecs, G.mimeType = a.N.mimeType, G.bandwidth = a.bandwidth;
            h.Be(y);
            r = new Xl(y);
            k2 && r.Gd(C, E, true);
            return I.return(r);
          });
        }
        function fw(a) {
          return a.Xd;
        }
        function hw(a) {
          var b = Pv(a, fw, "RepresentationIndex");
          a = Ov(a, fw, "indexRange");
          a = de(a || "");
          b && (a = Zd(b, "range", de, a));
          return a;
        }
        function gw(a, b) {
          jw(a, b);
          if (!hw(a)) throw new U(2, 4, 4002);
        }
        function jw(a, b) {
          var c = a.N.mimeType.split("/")[1];
          if (a.N.contentType != sc && c != "mp4" && c != "webm") throw new U(2, 4, 4006);
          if (c == "webm" && !b) throw new U(2, 4, 4005);
        }
        function dw(a) {
          var b = a.N;
          return { bandwidth: a.bandwidth, audioSamplingRate: b.audioSamplingRate, codecs: b.codecs, contentType: b.contentType, frameRate: b.frameRate || null, height: b.height || null, mimeType: b.mimeType, channelsCount: b.Qf, pixelAspectRatio: b.pixelAspectRatio || null, width: b.width || null, label: a.va.label || null, roles: a.roles || null, language: a.va.language || null };
        }
        ;
        function kw(a, b, c) {
          var d = cw(a, lw, c), e = mw(a);
          if (!e.pb && !e.timeline && e.Pd.length > 1) throw new U(2, 4, 4002);
          if (!e.pb && !a.qa.duration && !e.timeline && e.Pd.length == 1) throw new U(2, 4, 4002);
          if (e.timeline && e.timeline.length == 0) throw new U(2, 4, 4002);
          var f = null, g = null;
          a.Aa.id && a.N.id && (g = b.get(a.Aa.id + "," + a.N.id)) && (f = g.segmentIndex);
          var h = nw(a.qa.start, a.qa.duration, a.N.mb, e, d, c, a.N.mimeType, a.N.codecs, a.bandwidth, a.Sb);
          b = !f;
          f ? f.ze(h, a.presentationTimeline.Nb()) : f = new Xl(h);
          a.presentationTimeline.Be(h);
          a.Kb && a.qa.Df || f.Gd(a.qa.start, a.qa.duration ? a.qa.start + a.qa.duration : Infinity, b);
          g && (g.segmentIndex = f);
          return { endTime: -1, timeline: -1, gd: function() {
            f && f.getNumReferences() != 0 || f.Lf(h);
            return Promise.resolve(f);
          }, timescale: e.timescale };
        }
        function lw(a) {
          return a.Jc;
        }
        function mw(a) {
          var b = ow(a);
          a = Nv(a, lw);
          var c = a.Ie;
          c == 0 && (c = 1);
          var d = 0;
          a.pb ? d = a.pb * (c - 1) : a.timeline && a.timeline.length > 0 && (d = a.timeline[0].start);
          return { pb: a.pb, startTime: d, Ie: c, Qb: a.Qb, timescale: a.timescale, timeline: a.timeline, Pd: b };
        }
        function nw(a, b, c, d, e, f, g, h, k2, l) {
          var m = d.Pd.length;
          d.timeline && d.timeline.length != d.Pd.length && (m = Math.min(d.timeline.length, d.Pd.length));
          for (var n = a - d.Qb, q = b ? a + b : Infinity, r = [], t = d.startTime, w = {}, v = 0; v < m; w = { rg: void 0, dg: void 0 }, v++) {
            w.dg = d.Pd[v];
            var z = t;
            t = void 0;
            t = d.pb != null ? z + d.pb : d.timeline ? d.timeline[v].end : z + b;
            w.rg = null;
            w = new yj(a + z, a + t, /* @__PURE__ */ function(y) {
              return function() {
                y.rg == null && (y.rg = mc(c(), [y.dg.Sl], l()));
                return y.rg;
              };
            }(w), w.dg.start, w.dg.end, e, n, a, q, [], "", null, null, zj, f);
            w.codecs = h;
            w.mimeType = g;
            w.bandwidth = k2;
            r.push(w);
          }
          return r;
        }
        function ow(a) {
          return [a.N.Jc, a.va.Jc, a.Aa.Jc].filter(Ef).map(function(b) {
            return Rd(b, "SegmentURL");
          }).reduce(function(b, c) {
            return b.length > 0 ? b : c;
          }).map(function(b) {
            b.attributes.indexRange && !a.Ch && (a.Ch = true);
            var c = cc(b.attributes.media);
            b = Zd(b, "mediaRange", de, { start: 0, end: null });
            return { Sl: c, start: b.start, end: b.end };
          });
        }
        ;
        function pw(a, b, c, d, e, f, g, h, k2, l) {
          k2 || a.N.Af || (a.N.Af = Ov(a, qw, "initialization"));
          var m = a.N.Af ? rw(a, g) : null, n = sw(a);
          tw(n);
          var q = Hd(a);
          if (n.ue) return jw(a, m), { endTime: -1, timeline: -1, gd: function() {
            var z = Mv(n.ue, q.N.originalId, null, null, q.bandwidth || null, null);
            z = mc(q.N.mb(), [z]);
            return iw(q, b, m, z, 0, null, n.Qb);
          }, timescale: n.timescale };
          if (n.pb) return d || a.va.contentType === "image" || a.va.contentType === "text" || (d = a.qa.start, l = a.Aa.id, c = a.qa.duration, l = (l = l != null && f.get(l) || c) ? d + l : Infinity, a.presentationTimeline.Lh(n.pb), a.presentationTimeline.sj(d, l)), { endTime: -1, timeline: -1, gd: function() {
            return uw(q, n, e, m, f, g, h, a.N.eg);
          }, timescale: n.timescale };
          var r = null;
          d = d = null;
          a.Aa.id && a.N.id && (d = a.Aa.id + "," + a.N.id, d = c.get(d)) && (r = d.segmentIndex);
          var t = a.qa.start, w = a.qa.duration ? t + a.qa.duration : Infinity;
          if (r) l = r, vw(l, n, t, w, m, a.Kb), l.cb(a.presentationTimeline.Nb());
          else {
            c = 0;
            k2 = -1;
            if (a.Aa.id != null && a.N.id != null) {
              var v = l.get(a.Aa.id);
              if (v) k2 = v.timeline;
              else for (l = u(l.values()), v = l.next(); !v.done; v = l.next()) if (v = v.value, Math.abs(n.Qb - v.endTime) <= vc && v.Uh.includes(a.N.id)) {
                k2 = v.timeline;
                break;
              } else v.timeline >= c && (c = v.timeline + 1);
            }
            k2 == -1 && (k2 = c);
            r = new ww(a.Kb, n, a.N.originalId, a.bandwidth, a.N.mb, a.Sb, t, w, m, g, a.N.eg, k2);
          }
          n.timeline && a.va.contentType !== "image" && a.va.contentType !== "text" && a.presentationTimeline.tj(r.h ? r.h.timeline : [], t);
          d && a.Kb && (d.segmentIndex = r);
          d = (d = (d = n.timeline) && d[d.length - 1]) ? d.end + n.Qb : -1;
          l = -1;
          r instanceof ww && (l = r.nf());
          return { endTime: d, timeline: l, gd: function() {
            r instanceof ww && r.getNumReferences() == 0 && vw(
              r,
              n,
              t,
              w,
              m,
              a.Kb
            );
            return Promise.resolve(r);
          }, timescale: n.timescale };
        }
        function qw(a) {
          return a.Zc;
        }
        function sw(a) {
          var b = Nv(a, qw), c = Ov(a, qw, "media"), d = Ov(a, qw, "index"), e = Ov(a, qw, "k"), f = 0;
          e && (f = parseInt(e, 10));
          return { pg: b.pg, pb: b.pb, timescale: b.timescale, Ie: b.Ie, Qb: b.Qb, wd: b.wd, timeline: b.timeline, jc: c && cc(c), ue: d, mimeType: a.N.mimeType, codecs: a.N.codecs, bandwidth: a.bandwidth, Tl: f };
        }
        function tw(a) {
          var b = a.ue ? 1 : 0;
          b += a.timeline ? 1 : 0;
          b += a.pb ? 1 : 0;
          if (b == 0) throw new U(2, 4, 4002);
          b != 1 && (a.ue && (a.timeline = null), a.pg = null, a.pb = null);
          if (!a.ue && !a.jc) throw new U(2, 4, 4002);
        }
        function uw(a, b, c, d, e, f, g, h) {
          function k2(K) {
            var N = K - v, P = N * w, O = b.pg, M = N * O;
            "BigInt" in window2 && M > Number.MAX_SAFE_INTEGER && (M = BigInt(N) * BigInt(O));
            P += q;
            N = P + w;
            O = Math.min(N, m());
            var R = [], W = b.Tl;
            if (W) for (var wa = (O - P) / W, Y = {}, Ka = 0; Ka < W; Y = { Tj: void 0 }, Ka++) {
              var Na = P + wa * Ka, La = Na + wa;
              Y.Tj = Ka;
              Y = new yj(Na, La, /* @__PURE__ */ function(Ea) {
                return function() {
                  var za = Mv(z, A, K, Ea.Tj, y, M);
                  return mc(C(), [za], E());
                };
              }(Y), 0, null, d, D, q, m(), [], "", null, null, zj, f);
              Y.codecs = a.N.codecs;
              Y.mimeType = a.N.mimeType;
              h == 0 ? Ka > 0 && Y.Nd() : Ka % h != 0 && Y.Nd();
              R.push(Y);
            }
            P = new yj(P, O, function() {
              if (W) return [];
              var Ea = Mv(z, A, K, null, y, M);
              return mc(C(), [Ea], E());
            }, 0, null, d, D, q, m(), R, "", null, null, zj, f, R.length > 0);
            P.codecs = a.N.codecs;
            P.mimeType = a.N.mimeType;
            P.bandwidth = a.bandwidth;
            P.j = N;
            return P;
          }
          function l() {
            var K = [Math.max(n.Nb(), q), Math.min(n.Sc(), m())].map(function(N) {
              return N - q;
            });
            K = [Math.ceil(K[0] / w), Math.ceil(K[1] / w) - 1];
            a.N.Bb && K[1]++;
            return K.map(function(N) {
              return N + v;
            });
          }
          function m() {
            var K = r != null && e.get(r) || t;
            return K ? q + K : Infinity;
          }
          var n = a.presentationTimeline, q = a.qa.start, r = a.Aa.id, t = a.qa.duration, w = b.pb, v = b.Ie, z = b.jc, y = a.bandwidth || null, A = a.N.originalId, C = a.N.mb, E = a.Sb, D = q - b.Qb, B = l();
          c = a.Kb ? Math.max(B[0], B[1] - c + 1) : B[0];
          g = g || B[1];
          B = [];
          for (var G = c; G <= g; ++G) {
            var I = k2(G);
            B.push(I);
          }
          var J = new Xl(B);
          B = n.Sc() < m();
          G = n.U();
          if (B || G) {
            var L = Math.max(c, g + 1);
            c = w;
            a.N.Bb && (c = 0.1);
            J.qg(c, function() {
              var K = n.Nb();
              J.cb(K);
              var N = u(l());
              N.next();
              N = N.next().value;
              for (var P = []; L <= N; ) {
                var O = k2(L);
                P.push(O);
                L++;
              }
              return K > m() && !P.length ? null : P;
            });
          }
          return Promise.resolve(J);
        }
        function rw(a, b) {
          var c = a.N.Af;
          c || (c = Ov(a, qw, "initialization"));
          if (!c) return null;
          c = cc(c);
          var d = a.N.originalId, e = a.bandwidth || null, f = a.N.mb, g = a.Sb;
          b = new wj(function() {
            var h = Mv(c, d, null, null, e, null);
            return mc(f(), [h], g());
          }, 0, null, dw(a), null, null, b, a.va.encrypted);
          b.codecs = a.N.codecs;
          b.mimeType = a.N.mimeType;
          a.qa && !a.qa.Df && (b.g = a.qa.start + a.qa.duration);
          return b;
        }
        function ww(a, b, c, d, e, f, g, h, k2, l, m, n) {
          Xl.call(this, []);
          this.F = a;
          this.h = b;
          this.H = c;
          this.D = d;
          this.G = e;
          this.J = f;
          this.j = g;
          this.l = h;
          this.A = k2;
          this.C = l;
          this.I = m;
          this.K = n;
          xw(this);
        }
        la(ww, Xl);
        p = ww.prototype;
        p.getNumReferences = function() {
          return this.h ? this.h.timeline.length : 0;
        };
        p.release = function() {
          Xl.prototype.release.call(this);
          this.h = null;
        };
        p.cb = function(a) {
          if (this.h) {
            for (var b = 0, c = this.h.timeline, d = 0; d < c.length; d += 1) if (c[d].end + this.j <= a) b += 1;
            else break;
            b > 0 && (this.h.timeline = c.slice(b), this.g.length >= b && (this.g = this.g.slice(b)), this.i += b, this.getNumReferences() === 0 && this.release());
          }
        };
        function vw(a, b, c, d, e, f) {
          yw(a, e);
          a.F = f;
          if (a.h) {
            a.h.wd !== b.wd && (a.h.timeline = b.timeline, a.h.wd = b.wd, a.h.Qb = b.Qb);
            a.h.jc !== b.jc && (a.h.jc = b.jc);
            c = a.h.timeline;
            if (c.length) {
              var g = c[c.length - 1];
              b = b.timeline.filter(function(h) {
                return h.end > g.end;
              });
            } else b = b.timeline.slice();
            b.length > 0 && a.h.timeline.push.apply(a.h.timeline, x(b));
            a.l !== d && (a.l = d);
          } else a.h = b, a.j = c, a.l = d;
          xw(a);
        }
        function yw(a, b) {
          if (a.A !== b) {
            a.A = b;
            a = u(a.g);
            for (var c = a.next(); !c.done; c = a.next()) (c = c.value) && Bj(c, b);
          }
        }
        function xw(a) {
          if (a.h && !a.u) {
            for (var b = [], c = u(a.h.timeline), d = c.next(); !d.done; d = c.next()) d = d.value, d.start >= a.l || d.end <= 0 || b.push(d);
            a.h.timeline = b;
            a.cb(a.j);
          }
        }
        p.find = function(a) {
          if (this.h && this.h.timeline && this.h.timeline.length && a < this.h.timeline[0].start + this.j) return this.i;
          if (!this.h) return null;
          var b = this.h.timeline;
          if (a < this.j || a >= this.l) return null;
          for (var c = b.length - 1, d = 0; d < b.length; d++) {
            var e = b[d], f = e.start + this.j;
            e = d < c ? b[d + 1].start + this.j : this.l === Infinity ? e.end + this.j : this.l;
            if (a >= f && a < e) return d + this.i;
          }
          return null;
        };
        p.get = function(a) {
          var b = this;
          a -= this.i;
          if (a < 0 || a >= this.getNumReferences() || !this.h) return null;
          var c = this.g[a];
          if (!c) {
            c = this.h.timeline[a];
            var d = c.pm, e = c.xi + this.h.wd, f = this.j - this.h.Qb, g = this.j + c.end, h = g;
            a === this.getNumReferences() - 1 && this.l !== Infinity && (h = this.F && Math.abs(h - this.l) > 0.1 ? Math.min(h, this.l) : this.l);
            var k2 = this.h.codecs, l = this.h.mimeType, m = this.h.bandwidth, n = [], q = false;
            c.Fc && this.h && this.h.jc && (q = this.h.jc.includes("$SubNumber$"));
            if (q) {
              q = (c.end - c.start) / c.Fc;
              for (var r = {}, t = 0; t < c.Fc; r = {
                sg: void 0,
                Uj: void 0
              }, t++) {
                var w = c.start + q * t, v = w + q;
                r.Uj = t;
                r.sg = null;
                r = new yj(this.j + w, this.j + v, /* @__PURE__ */ function(z) {
                  return function() {
                    if (!b.h) return [];
                    z.sg == null && (z.sg = zw(b.h.jc, b.H, d, b.D, e, z.Uj, b.G, b.J));
                    return z.sg;
                  };
                }(r), 0, null, this.A, f, this.j, this.l, [], "", null, null, zj, this.C);
                r.codecs = k2;
                r.mimeType = l;
                r.bandwidth = m;
                this.I == 0 ? t > 0 && r.Nd() : t % this.I != 0 && r.Nd();
                n.push(r);
              }
            }
            c = new yj(
              this.j + c.start,
              h,
              function() {
                return n.length > 0 || !b.h ? [] : zw(b.h.jc, b.H, d, b.D, e, null, b.G, b.J);
              },
              0,
              null,
              this.A,
              f,
              this.j,
              this.l,
              n,
              "",
              null,
              null,
              zj,
              this.C,
              n.length > 0
            );
            c.codecs = k2;
            c.mimeType = l;
            c.j = g;
            c.bandwidth = m;
            this.g[a] = c;
          }
          return c;
        };
        p.Lb = function(a) {
          xw(this);
          for (var b = 0; b < this.getNumReferences(); b++) {
            var c = this.get(b + this.i);
            c && a(c);
          }
        };
        function zw(a, b, c, d, e, f, g, h) {
          a = Mv(a, b, c, f, d || null, e);
          return mc(g(), [a], h()).map(function(k2) {
            return k2.toString();
          });
        }
        p.nf = function() {
          return this.K;
        };
        function Aw(a) {
          this.u = null;
          this.C = a;
          this.H = new Tg();
          this.i = [];
          this.h = null;
          this.m = [];
          this.D = null;
          this.G = [];
          this.F = 300;
          this.l = /* @__PURE__ */ new Map();
          this.j = /* @__PURE__ */ new Map();
          this.g = null;
          this.A = "UNKNOWN";
        }
        Aw.prototype.configure = function(a) {
          this.u = a;
        };
        Aw.prototype.destroy = function() {
          this.C = this.u = null;
          this.i = [];
          this.h = null;
          this.m = [];
          this.G = [];
          this.l.clear();
          this.g != null && (this.g.stop(), this.g = null);
          return this.H.destroy();
        };
        Aw.prototype.setManifestType = function(a) {
          this.A = a;
        };
        function Bw(a, b) {
          var c, d, e, f, g, h, k2;
          return Q(function(l) {
            if (l.g == 1) return c = mc(a.i, [Cw(a, b)]), d = $g(c, a.u.retryParameters), e = a.C.networkingEngine.request(8, d), Ug(a.H, e), ra(l, 2), F(l, e.promise, 4);
            if (l.g != 2) return f = l.h, g = Wb(f.data), h = JSON.parse(g), h.VERSION == 1 && Dw(a, h, f.uri), ta(l, 0);
            if ((k2 = ua(l)) && k2.code == 7001) return l.return();
            a.g != null && (a.g.stop(), a.g = null);
            a.g = new Bf(function() {
              Bw(a, b);
            });
            a.g.$(a.F);
            H(l);
          });
        }
        function Cw(a, b) {
          if (!a.m.length) return b;
          b = new qb(b);
          var c = a.D || a.m[0], d = Math.round(a.C.getBandwidthEstimate()), e = b.g;
          a.A == "DASH" ? (e.add("_DASH_pathway", c), e.add("_DASH_throughput", String(d))) : a.A == "HLS" && (e.add("_HLS_pathway", c), e.add("_HLS_throughput", String(d)));
          Hb(e) && ub(b, e);
          return b.toString();
        }
        function Dw(a, b, c) {
          a.g != null && (a.g.stop(), a.g = null);
          var d = b["RELOAD-URI"] || c;
          a.g = new Bf(function() {
            Bw(a, d);
          });
          if (c = b.TTL) a.F = c;
          a.g.$(a.F);
          a.m = b["PATHWAY-PRIORITY"] || [];
          a.G = b["PATHWAY-CLONES"] || [];
        }
        function Ew(a, b, c, d) {
          var e = a.l.get(b);
          e || (e = /* @__PURE__ */ new Map());
          e.set(c, d);
          a.l.set(b, e);
        }
        Aw.prototype.banLocation = function(a) {
          this.j.set(a, Date.now() + 6e4);
        };
        function Fw(a, b, c) {
          c = c === void 0 ? false : c;
          b = a.l.get(b) || /* @__PURE__ */ new Map();
          for (var d = [], e = u(a.m), f = e.next(), g = {}; !f.done; g = { Rd: void 0 }, f = e.next()) if (g.Rd = f.value, f = b.get(g.Rd)) d.push({ Qh: g.Rd, location: f });
          else if (f = a.G.find(/* @__PURE__ */ function(k2) {
            return function(l) {
              return l.an == k2.Rd;
            };
          }(g))) {
            var h = b.get(f["BASE-ID"]);
            h && (f["URI-REPLACEMENT"].ik ? (h = new qb(h), sb(h, f["URI-REPLACEMENT"].ik), d.push({ Qh: g.Rd, location: h.toString() })) : d.push({ Qh: g.Rd, location: h }));
          }
          e = Date.now();
          g = u(a.j.keys());
          for (f = g.next(); !f.done; f = g.next()) f = f.value, h = a.j.get(f), e > h && a.j.delete(f);
          d = d.filter(function(k2) {
            for (var l = u(a.j.keys()), m = l.next(); !m.done; m = l.next()) if (m.value.includes(new qb(k2.location).Jb)) return false;
            return true;
          });
          d.length && (a.D = d[0].Qh);
          d = d.map(function(k2) {
            return k2.location;
          });
          if (!d.length && a.h) {
            for (e = u(a.h.split(",")), g = e.next(); !g.done; g = e.next()) if (g = b.get(g.value)) a.D = a.h, d.push(g);
          }
          if (!d.length) for (b = u(b.values()), e = b.next(); !e.done; e = b.next()) d.push(e.value);
          return c ? d : mc(a.i, d);
        }
        ;
        function Gw() {
          this.l = [];
          this.h = [];
          this.g = [];
          this.j = [];
          this.i = [];
          this.u = false;
          this.m = /* @__PURE__ */ new Set();
        }
        p = Gw.prototype;
        p.release = function() {
          for (var a = u(this.h.concat(this.g, this.j, this.i)), b = a.next(); !b.done; b = a.next()) b = b.value, b.segmentIndex && b.segmentIndex.release();
          this.h = [];
          this.g = [];
          this.j = [];
          this.i = [];
          this.l = [];
          this.u = false;
          this.m.clear();
        };
        p.xl = function() {
          return this.l;
        };
        p.wh = function() {
          return this.j.slice();
        };
        p.Pk = function() {
          return this.i;
        };
        p.Ri = function(a, b) {
          if (a) {
            if (a.type == "audio") for (var c = u(this.h), d = c.next(); !d.done; d = c.next()) d = d.value, d.matchedStreams = d.matchedStreams.filter(function(e) {
              return e !== a;
            });
            else if (a.type == "video") for (c = u(this.g), d = c.next(); !d.done; d = c.next()) d = d.value, d.matchedStreams = d.matchedStreams.filter(function(e) {
              return e !== a;
            }), d.trickModeVideo && (d.trickModeVideo.matchedStreams = d.trickModeVideo.matchedStreams.filter(function(e) {
              return e !== a;
            })), d.dependencyStream && (d.dependencyStream.matchedStreams = d.dependencyStream.matchedStreams.filter(function(e) {
              return e !== a;
            }));
            else if (a.type == sc) for (c = u(this.j), d = c.next(); !d.done; d = c.next()) d = d.value, d.matchedStreams = d.matchedStreams.filter(function(e) {
              return e !== a;
            });
            else if (a.type == "image") for (c = u(this.i), d = c.next(); !d.done; d = c.next()) d = d.value, d.matchedStreams = d.matchedStreams.filter(function(e) {
              return e !== a;
            });
            a.segmentIndex && a.closeSegmentIndex();
            this.m.delete(b);
          }
        };
        function Hw(a, b) {
          var c = [], d = [], e = [], f = [];
          a = u(a);
          for (var g = a.next(); !g.done; g = a.next()) {
            var h = g.value;
            g = new Map(h.audioStreams.map(function(n) {
              return [Iw(n), n];
            }));
            var k2 = new Map(h.videoStreams.map(function(n) {
              return [Jw(n), n];
            })), l = new Map(h.textStreams.map(function(n) {
              return [Kw(n), n];
            }));
            h = new Map(h.imageStreams.map(function(n) {
              return [Lw(n), n];
            }));
            if (b) {
              var m = Mw(sc);
              l.set(Kw(m), m);
              m = Mw("image");
              h.set(Lw(m), m);
            }
            c.push(g);
            d.push(k2);
            e.push(l);
            f.push(h);
          }
          return { Hi: c, fk: d, Zj: e, ej: f };
        }
        p.Og = function(a, b, c) {
          c = c === void 0 ? false : c;
          var d = this, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P, O, M, R, W, wa;
          return Q(function(Y) {
            if (Y.g == 1) {
              e = uc;
              if (!b && a.length == 1) return f = Hw(a, false), g = f.Hi, h = f.fk, k2 = f.Zj, l = f.ej, d.h = Array.from(g[0].values()), d.g = Array.from(h[0].values()), d.j = Array.from(k2[0].values()), d.i = Array.from(l[0].values()), Y.B(2);
              m = c ? d.m.size : 0;
              n = -1;
              for (q = 0; q < a.length; q++) r = a[q], d.m.has(r.id) || (d.m.add(r.id), n == -1 && (n = q));
              if (n == -1) return Y.return();
              t = Hw(a, true);
              w = t.Hi;
              v = t.fk;
              z = t.Zj;
              y = t.ej;
              return F(Y, Promise.all([Nw(d, d.h, w, n, Ow, Pw, m), Nw(d, d.g, v, n, Ow, Pw, m), Nw(d, d.j, z, n, Ow, Pw, m), Nw(d, d.i, y, n, Ow, Pw, m)]), 2);
            }
            A = 0;
            C = [];
            if (d.g.length && d.h.length) for (L = u(d.h), K = L.next(); !K.done; K = L.next()) for (N = K.value, P = u(d.g), O = P.next(); !O.done; O = P.next()) M = O.value, R = yg(N.drmInfos, M.drmInfos), N.drmInfos.length && M.drmInfos.length && !R.length || (W = (N.bandwidth || 0) + (M.bandwidth || 0), N.dependencyStream && (W += N.dependencyStream.bandwidth || 0), M.dependencyStream && (W += M.dependencyStream.bandwidth || 0), wa = A++, C.push({
              id: wa,
              language: N.language,
              disabledUntilTime: 0,
              primary: N.primary,
              audio: N,
              video: M,
              bandwidth: W,
              drmInfos: R,
              allowedByApplication: true,
              allowedByKeySystem: true,
              decodingInfos: []
            }));
            else for (E = d.g.length ? d.g : d.h, D = u(E), B = D.next(); !B.done; B = D.next()) G = B.value, I = A++, J = G.bandwidth || 0, G.dependencyStream && (J += G.dependencyStream.bandwidth || 0), C.push({
              id: I,
              language: G.language,
              disabledUntilTime: 0,
              primary: G.primary,
              audio: G.type == e.na ? G : null,
              video: G.type == e.Ia ? G : null,
              bandwidth: J,
              drmInfos: G.drmInfos,
              allowedByApplication: true,
              allowedByKeySystem: true,
              decodingInfos: []
            });
            d.l = C;
            H(Y);
          });
        };
        function Qw(a) {
          var b, c, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P;
          return Q(function(O) {
            switch (O.g) {
              case 1:
                b = uc;
                if (a.length == 1) return O.return(a[0]);
                c = a.map(function(M) {
                  return new Map(M.filter(function(R) {
                    return R.type === b.na;
                  }).map(function(R) {
                    return [Iw(R), R];
                  }));
                });
                d = a.map(function(M) {
                  return new Map(M.filter(function(R) {
                    return R.type === b.Ia;
                  }).map(function(R) {
                    return [Jw(R), R];
                  }));
                });
                e = a.map(function(M) {
                  return new Map(M.filter(function(R) {
                    return R.type === b.Va;
                  }).map(function(R) {
                    return [Kw(R), R];
                  }));
                });
                f = a.map(function(M) {
                  return new Map(M.filter(function(R) {
                    return R.type === b.yg;
                  }).map(function(R) {
                    return [Lw(R), R];
                  }));
                });
                g = u(e);
                for (h = g.next(); !h.done; h = g.next()) k2 = h.value, l = Rw(b.Va), k2.set(Kw(l), l);
                m = u(f);
                for (n = m.next(); !n.done; n = m.next()) q = n.value, r = Rw(b.yg), q.set(Lw(r), r);
                t = new Gw();
                return F(O, Nw(t, [], c, 0, Sw, Tw, 0), 2);
              case 2:
                return w = O.h, F(O, Nw(t, [], d, 0, Sw, Tw, 0), 3);
              case 3:
                return v = O.h, F(O, Nw(t, [], e, 0, Sw, Tw, 0), 4);
              case 4:
                return z = O.h, F(O, Nw(t, [], f, 0, Sw, Tw, 0), 5);
              case 5:
                y = O.h;
                A = 0;
                if (v.length && w.length) for (G = u(w), I = G.next(); !I.done; I = G.next()) for (J = I.value, L = u(v), K = L.next(); !K.done; K = L.next()) N = K.value, P = A++, N.variantIds.push(P), J.variantIds.push(P);
                else for (C = v.concat(w), E = u(C), D = E.next(); !D.done; D = E.next()) B = D.value, B.variantIds = [A++];
                return O.return(v.concat(w).concat(z).concat(y));
            }
          });
        }
        function Nw(a, b, c, d, e, f, g) {
          var h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J;
          return Q(function(L) {
            switch (L.g) {
              case 1:
                h = [];
                for (k2 = 0; k2 < c.length; k2++) k2 >= d ? h.push(new Set(c[k2].values())) : h.push(/* @__PURE__ */ new Set());
                l = u(b);
                m = l.next();
              case 2:
                if (m.done) {
                  L.B(4);
                  break;
                }
                n = m.value;
                return F(L, Uw(a, n, c, d, f, h, g), 5);
              case 5:
                q = L.h;
                if (!q) throw new U(2, 4, 4037);
                m = l.next();
                L.B(2);
                break;
              case 4:
                r = u(h);
                for (t = r.next(); !t.done; t = r.next()) for (w = t.value, v = u(w), z = v.next(); !z.done; z = v.next()) y = z.value, (A = Vw(a, y, c, e, f, h)) && b.push(A);
                C = u(h);
                for (E = C.next(); !E.done; E = C.next()) for (D = E.value, B = u(D), G = B.next(), I = {}; !G.done; I = { li: void 0 }, G = B.next()) if (I.li = G.value, !Ww(I.li) && (J = b.some(/* @__PURE__ */ function(K) {
                  return function(N) {
                    return Xw(K.li, N);
                  };
                }(I)))) throw new U(2, 4, 4037);
                return L.return(b);
            }
          });
        }
        function Uw(a, b, c, d, e, f, g) {
          return Q(function(h) {
            if (h.g == 1) return Yw(a, c, b, g > 0), b.matchedStreams ? b.segmentIndex ? F(h, Zw(b, d + g), 2) : h.B(2) : h.return(false);
            $w(b, d, e, f, g);
            return h.return(true);
          });
        }
        function Zw(a, b) {
          var c, d, e, f, g, h;
          return Q(function(k2) {
            if (k2.g == 1) {
              c = [];
              d = a.matchedStreams;
              for (e = b; e < d.length; e++) f = d[e], c.push(f.createSegmentIndex()), f.trickModeVideo && !f.trickModeVideo.segmentIndex && c.push(f.trickModeVideo.createSegmentIndex()), f.dependencyStream && !f.dependencyStream.segmentIndex && c.push(f.dependencyStream.createSegmentIndex());
              return F(k2, Promise.all(c), 2);
            }
            if (a.segmentIndex instanceof $l) for (g = b; g < d.length; g++) h = d[g], h.segmentIndex && a.segmentIndex.h.push(h.segmentIndex);
            H(k2);
          });
        }
        function Vw(a, b, c, d, e, f) {
          if (Ww(b)) return null;
          var g = d(b);
          Yw(a, c, g);
          g.createSegmentIndex && (g.createSegmentIndex = function() {
            return Q(function(h) {
              if (g.segmentIndex) return h.B(0);
              g.segmentIndex = new $l();
              return F(h, Zw(g, 0), 0);
            });
          });
          if (!g.matchedStreams || !g.matchedStreams.length) return null;
          $w(g, 0, e, f, 0);
          return g;
        }
        function $w(a, b, c, d, e) {
          var f = a.matchedStreams;
          for (b += e; b < f.length; b++) {
            var g = f[b];
            c(a, g);
            var h = true;
            a.type == "audio" && Ec(a.language, g.language) == 0 && (h = false);
            if (h && (d[b - e].delete(g), g.fullMimeTypes)) for (g = u(g.fullMimeTypes.values()), h = g.next(); !h.done; h = g.next()) a.fullMimeTypes.add(h.value);
          }
        }
        function Ow(a) {
          var b = Object.assign({}, a);
          b.originalId = null;
          b.createSegmentIndex = function() {
            return Promise.resolve();
          };
          b.closeSegmentIndex = function() {
            b.segmentIndex && (b.segmentIndex.release(), b.segmentIndex = null);
            if (b.matchedStreams) for (var c = u(b.matchedStreams), d = c.next(); !d.done; d = c.next()) d = d.value, d.segmentIndex && (d.segmentIndex.release(), d.segmentIndex = null);
          };
          b.roles = b.roles.slice();
          b.segmentIndex = null;
          b.emsgSchemeIdUris = [];
          b.keyIds = new Set(a.keyIds);
          b.closedCaptions = a.closedCaptions ? new Map(a.closedCaptions) : null;
          b.trickModeVideo = null;
          b.dependencyStream = null;
          return b;
        }
        function Sw(a) {
          var b = Object.assign({}, a);
          b.roles = b.roles.slice();
          b.keyIds = new Set(a.keyIds);
          b.segments = [];
          b.variantIds = [];
          b.closedCaptions = a.closedCaptions ? new Map(a.closedCaptions) : null;
          return b;
        }
        function Pw(a, b) {
          function c(g, h) {
            g || (g = []);
            h = u(h);
            for (var k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, g.includes(k2) || g.push(k2);
            return g;
          }
          a.roles = c(a.roles, b.roles);
          b.emsgSchemeIdUris && (a.emsgSchemeIdUris = c(a.emsgSchemeIdUris, b.emsgSchemeIdUris));
          for (var d = u(b.keyIds), e = d.next(); !e.done; e = d.next()) a.keyIds.add(e.value);
          a.originalId == null ? a.originalId = b.originalId : (d = b.originalId || "") && !a.originalId.endsWith(d) && (a.originalId += "," + d);
          d = yg(a.drmInfos, b.drmInfos);
          if (b.drmInfos.length && a.drmInfos.length && !d.length) throw new U(
            2,
            4,
            4038
          );
          a.drmInfos = d;
          a.encrypted = a.encrypted || b.encrypted;
          if (b.closedCaptions) for (a.closedCaptions || (a.closedCaptions = /* @__PURE__ */ new Map()), d = u(b.closedCaptions), e = d.next(); !e.done; e = d.next()) {
            var f = u(e.value);
            e = f.next().value;
            f = f.next().value;
            a.closedCaptions.set(e, f);
          }
          a.bandwidth && b.bandwidth && (a.bandwidth = Math.max(a.bandwidth, b.bandwidth));
          b.trickModeVideo ? (a.trickModeVideo || (a.trickModeVideo = Ow(b.trickModeVideo), a.trickModeVideo.matchedStreams = [], a.trickModeVideo.createSegmentIndex = function() {
            if (a.trickModeVideo.segmentIndex) return Promise.resolve();
            for (var g = new $l(), h = u(a.trickModeVideo.matchedStreams), k2 = h.next(); !k2.done; k2 = h.next()) g.h.push(k2.value.segmentIndex);
            a.trickModeVideo.segmentIndex = g;
            return Promise.resolve();
          }), a.trickModeVideo.matchedStreams.push(b.trickModeVideo), Pw(a.trickModeVideo, b.trickModeVideo)) : a.trickModeVideo && (a.trickModeVideo.matchedStreams.push(b), Pw(a.trickModeVideo, b));
          b.dependencyStream ? (a.dependencyStream || (a.dependencyStream = Ow(b.dependencyStream), a.dependencyStream.matchedStreams = [], a.dependencyStream.createSegmentIndex = function() {
            if (a.dependencyStream.segmentIndex) return Promise.resolve();
            for (var g = new $l(), h = u(a.dependencyStream.matchedStreams), k2 = h.next(); !k2.done; k2 = h.next()) g.h.push(k2.value.segmentIndex);
            a.dependencyStream.segmentIndex = g;
            return Promise.resolve();
          }), a.dependencyStream.matchedStreams.push(b.dependencyStream), Pw(a.dependencyStream, b.dependencyStream)) : a.dependencyStream && (a.dependencyStream.matchedStreams.push(b), Pw(a.dependencyStream, b));
        }
        function Tw(a, b) {
          var c = a.roles;
          c || (c = []);
          for (var d = u(b.roles), e = d.next(); !e.done; e = d.next()) e = e.value, c.includes(e) || c.push(e);
          a.roles = c;
          c = u(b.keyIds);
          for (d = c.next(); !d.done; d = c.next()) a.keyIds.add(d.value);
          a.encrypted = a.encrypted && b.encrypted;
          a.segments.push.apply(a.segments, x(b.segments));
          if (b.closedCaptions) for (a.closedCaptions || (a.closedCaptions = /* @__PURE__ */ new Map()), b = u(b.closedCaptions), c = b.next(); !c.done; c = b.next()) d = u(c.value), c = d.next().value, d = d.next().value, a.closedCaptions.set(c, d);
        }
        function Yw(a, b, c, d) {
          d = (d === void 0 ? 0 : d) ? c.matchedStreams : [];
          b = u(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            e = ax(a, e.value, c);
            if (!e) return;
            d.push(e);
          }
          c.matchedStreams = d;
        }
        function ax(a, b, c) {
          var d = { audio: Iw, video: Jw, text: Kw, image: Lw }[c.type], e = null, f = d(c);
          if (b.has(f)) e = b.get(f);
          else {
            f = { audio: function(l, m) {
              return Xw(l, m);
            }, video: function(l, m) {
              return Xw(l, m);
            }, text: bx, image: cx }[c.type];
            for (var g = { audio: dx, video: ex, text: fx, image: gx }[c.type], h = u(b.values()), k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, !f(c, k2) || c.fastSwitching != k2.fastSwitching || e && !g(c, e, k2) || (e = k2);
          }
          a.u && !Ww(e) && b.delete(d(e));
          return e;
        }
        function hx(a, b) {
          return a.mimeType != b.mimeType ? false : ix(a.codecs) === ix(b.codecs);
        }
        p.Oj = function(a) {
          this.u = a;
        };
        function Xw(a, b) {
          return a.drmInfos && !wg(a.drmInfos, b.drmInfos) ? false : true;
        }
        function bx(a, b) {
          return b.language ? a.forced !== b.forced || Ec(a.language, b.language) == 0 || b.kind != a.kind ? false : true : true;
        }
        function cx() {
          return true;
        }
        function dx(a, b, c) {
          var d = jx(a, b, c);
          if (d === kx) return true;
          if (d === lx) return false;
          d = Ec(a.language, b.language);
          var e = Ec(a.language, c.language);
          if (e > d) return true;
          if (e < d) return false;
          if (b.label !== c.label) {
            if (a.label === b.label) return false;
            if (a.label === c.label) return true;
          }
          if (a.roles.length) {
            d = b.roles.filter(function(f) {
              return a.roles.includes(f);
            });
            e = c.roles.filter(function(f) {
              return a.roles.includes(f);
            });
            if (e.length > d.length) return true;
            if (e.length < d.length) return false;
            if (c.roles.length !== b.roles.length) return c.roles.length < b.roles.length;
          } else {
            if (!c.roles.length && b.roles.length) return true;
            if (c.roles.length && !b.roles.length) return false;
          }
          if (!b.primary && c.primary) return true;
          if (b.primary && !c.primary) return false;
          d = mx(a.channelsCount, b.channelsCount, c.channelsCount);
          if (d == kx) return true;
          if (d == lx) return false;
          d = mx(a.audioSamplingRate, b.audioSamplingRate, c.audioSamplingRate);
          return d == kx ? true : d == lx ? false : a.bandwidth && nx(a.bandwidth, b.bandwidth, c.bandwidth) == kx ? true : false;
        }
        function ex(a, b, c) {
          var d = jx(a, b, c);
          if (d === kx) return true;
          if (d === lx) return false;
          d = mx(a.width * a.height, b.width * b.height, c.width * c.height);
          if (d == kx) return true;
          if (d == lx) return false;
          if (a.frameRate) {
            d = mx(a.frameRate, b.frameRate, c.frameRate);
            if (d == kx) return true;
            if (d == lx) return false;
          }
          return a.bandwidth && nx(a.bandwidth, b.bandwidth, c.bandwidth) == kx ? true : false;
        }
        function fx(a, b, c) {
          var d = Ec(a.language, b.language), e = Ec(a.language, c.language);
          if (e > d) return true;
          if (e < d) return false;
          if (!b.primary && c.primary) return true;
          if (b.primary && !c.primary) return false;
          if (b.label !== c.label) {
            if (a.label === b.label) return false;
            if (a.label === c.label) return true;
          }
          if (a.roles.length) {
            d = b.roles.filter(function(f) {
              return a.roles.includes(f);
            });
            e = c.roles.filter(function(f) {
              return a.roles.includes(f);
            });
            if (e.length > d.length) return true;
            if (e.length < d.length) return false;
          } else {
            if (!c.roles.length && b.roles.length) return true;
            if (c.roles.length && !b.roles.length) return false;
          }
          return c.mimeType != a.mimeType || c.codecs != a.codecs || b.mimeType == a.mimeType && b.codecs == a.codecs ? false : true;
        }
        function gx(a, b, c) {
          return mx(a.width * a.height, b.width * b.height, c.width * c.height) == kx ? true : false;
        }
        function Rw(a) {
          return { id: 0, originalId: "", groupId: null, primary: false, type: a, mimeType: "", codecs: "", language: "", originalLanguage: null, label: null, width: null, height: null, encrypted: false, keyIds: /* @__PURE__ */ new Set(), segments: [], variantIds: [], roles: [], forced: false, channelsCount: null, audioSamplingRate: null, spatialAudio: false, closedCaptions: null, external: false, fastSwitching: false, isAudioMuxedInVideo: false, baseOriginalId: null };
        }
        function Mw(a) {
          return {
            id: 0,
            originalId: "",
            groupId: null,
            createSegmentIndex: function() {
              return Promise.resolve();
            },
            segmentIndex: new Xl([]),
            mimeType: "",
            codecs: "",
            encrypted: false,
            drmInfos: [],
            keyIds: /* @__PURE__ */ new Set(),
            language: "",
            originalLanguage: null,
            label: null,
            type: a,
            primary: false,
            trickModeVideo: null,
            dependencyStream: null,
            emsgSchemeIdUris: null,
            roles: [],
            forced: false,
            channelsCount: null,
            audioSamplingRate: null,
            spatialAudio: false,
            closedCaptions: null,
            accessibilityPurpose: null,
            external: false,
            fastSwitching: false,
            fullMimeTypes: /* @__PURE__ */ new Set(),
            isAudioMuxedInVideo: false,
            baseOriginalId: null
          };
        }
        function mx(a, b, c) {
          if (b == a && a != c) return lx;
          if (c == a && a != b) return kx;
          if (b > a) {
            if (c <= a || c - a < b - a) return kx;
            if (c - a > b - a) return lx;
          } else {
            if (c > a) return lx;
            if (a - c < a - b) return kx;
            if (a - c > a - b) return lx;
          }
          return ox;
        }
        function jx(a, b, c) {
          var d = a.mimeType === b.mimeType && a.codecs === b.codecs, e = a.mimeType === c.mimeType && a.codecs === c.codecs;
          if (d && !e) return lx;
          if (!d && e) return kx;
          b = hx(a, b);
          a = hx(a, c);
          return b && !a ? lx : !b && a ? kx : ox;
        }
        function nx(a, b, c) {
          b = Math.abs(a - b);
          a = Math.abs(a - c);
          return a < b ? kx : b < a ? lx : ox;
        }
        function Ww(a) {
          switch (a.type) {
            case sc:
              return !a.language;
            case "image":
              return !a.tilesLayout;
            default:
              return false;
          }
        }
        function Jw(a) {
          return px([a.fastSwitching, a.width, a.frameRate, a.codecs, a.mimeType, a.label, a.roles, a.closedCaptions ? Array.from(a.closedCaptions.entries()) : null, a.bandwidth, a.dependencyStream ? a.dependencyStream.baseOriginalId : null, Array.from(a.keyIds)]);
        }
        function Iw(a) {
          return px([a.fastSwitching, a.channelsCount, a.language, a.bandwidth, a.label, a.codecs, a.mimeType, a.roles, a.audioSamplingRate, a.primary, a.dependencyStream ? a.dependencyStream.baseOriginalId : null, Array.from(a.keyIds)]);
        }
        function Kw(a) {
          return px([a.language, a.label, a.codecs, a.mimeType, a.bandwidth, a.roles]);
        }
        function Lw(a) {
          return px([a.width, a.codecs, a.mimeType]);
        }
        function px(a) {
          return JSON.stringify(a);
        }
        function ix(a) {
          if (!qx.has(a)) {
            var b = jf(a);
            qx.set(a, b);
          }
          return qx.get(a);
        }
        S("shaka.util.PeriodCombiner", Gw);
        Gw.prototype.setUseStreamOnce = Gw.prototype.Oj;
        Gw.prototype.combinePeriods = Gw.prototype.Og;
        Gw.prototype.deleteStream = Gw.prototype.Ri;
        Gw.prototype.getImageStreams = Gw.prototype.Pk;
        Gw.prototype.getTextStreams = Gw.prototype.wh;
        Gw.prototype.getVariants = Gw.prototype.xl;
        var kx = 1, ox = 0, lx = -1, qx = /* @__PURE__ */ new Map();
        function rx(a, b) {
          var c = new DOMParser(), d = sx.value()(a);
          a = null;
          try {
            a = c.parseFromString(d, "text/xml");
          } catch (e) {
            return null;
          }
          c = a.documentElement;
          if (!c || c.getElementsByTagName("parsererror").length || c.tagName != b) return null;
          if (!("createNodeIterator" in document)) return c;
          for (b = document.createNodeIterator(a, NodeFilter.SHOW_ALL); a = b.nextNode(); ) if (a instanceof HTMLElement || a instanceof SVGElement) return null;
          return c;
        }
        function tx(a, b) {
          try {
            var c = Zb(a);
            return rx(c, b);
          } catch (d) {
            return null;
          }
        }
        var sx = new Qb(function() {
          if (typeof trustedTypes !== "undefined") {
            var a = trustedTypes.createPolicy("shaka-player#xml", { createHTML: function(b) {
              return b;
            } });
            return function(b) {
              return a.createHTML(b);
            };
          }
          return function(b) {
            return b;
          };
        });
        function ux() {
          var a = this;
          this.j = this.g = null;
          this.C = [];
          this.h = null;
          this.Fa = 1;
          this.H = [];
          this.l = { Nf: "", type: "", profiles: [], Cc: null, Bb: 0, mb: null, De: 0 };
          this.A = /* @__PURE__ */ new Map();
          this.D = /* @__PURE__ */ new Map();
          this.u = /* @__PURE__ */ new Map();
          this.F = /* @__PURE__ */ new Map();
          this.sa = /* @__PURE__ */ new Map();
          this.m = new Gw();
          this.K = 0;
          this.xa = new Lc(5);
          this.L = new Bf(function() {
            if (a.J && !a.g.continueLoadingWhenPaused && (a.I.Ea(a.J, "timeupdate"), a.J.paused)) {
              a.I.ua(a.J, "timeupdate", function() {
                return vx(a);
              });
              return;
            }
            vx(a);
          });
          this.P = new Tg();
          this.O = null;
          this.G = [];
          this.Y = Infinity;
          this.oa = false;
          this.i = null;
          this.M = 0;
          this.R = false;
          this.I = new Tc();
          this.J = null;
          this.S = false;
          this.X = "";
          this.ea = function() {
            return false;
          };
          this.V = [];
          this.aa = /* @__PURE__ */ new Set();
          this.ra = new Dv();
        }
        p = ux.prototype;
        p.configure = function(a, b) {
          var c = this.j && a.updatePeriod != this.g.updatePeriod && a.updatePeriod >= 0;
          this.g = a;
          b && (this.ea = b);
          c && this.h && this.h.presentationTimeline.U() && this.L.La();
          this.i && this.i.configure(this.g);
          this.m && this.m.Oj(this.g.dash.useStreamOnceInPeriodFlattening);
        };
        p.start = function(a, b) {
          var c = this, d;
          return Q(function(e) {
            if (e.g == 1) return c.oa = b.isLowLatencyMode(), c.C = [a], c.j = b, F(e, wx(c), 2);
            d = e.h;
            c.j && xx(c, d);
            if (!c.j) throw new U(2, 7, 7001);
            return e.return(c.h);
          });
        };
        p.stop = function() {
          for (var a = u(this.u.values()), b = a.next(); !b.done; b = a.next()) b = b.value, b.segmentIndex && b.segmentIndex.release();
          this.m && this.m.release();
          this.g = this.j = null;
          this.C = [];
          this.h = null;
          this.u.clear();
          this.F.clear();
          this.A.clear();
          this.D.clear();
          this.l = { Nf: "", type: "", profiles: [], Cc: null, Bb: 0, mb: null, De: 0 };
          this.m = null;
          this.L != null && (this.L.stop(), this.L = null);
          this.i && this.i.destroy();
          this.I && (this.I.release(), this.I = null);
          this.aa.clear();
          this.ra.release();
          return this.P.destroy();
        };
        p.update = function() {
          var a = this, b;
          return Q(function(c) {
            if (c.g == 1) return ra(c, 2), F(c, wx(a), 4);
            if (c.g != 2) return ta(c, 0);
            b = ua(c);
            if (!a.j || !b) return c.return();
            a.j.onError(b);
            H(c);
          });
        };
        p.onExpirationUpdated = function() {
        };
        p.onInitialVariantChosen = function(a) {
          if (this.h && this.h.presentationTimeline.U()) {
            var b = a.video || a.audio;
            if (b && b.segmentIndex) {
              a = this.h.presentationTimeline.Sc();
              var c = b.segmentIndex.find(a);
              c != null && (b = b.segmentIndex.get(c)) && (this.K = b.endTime - a, xx(this, 0));
            }
          }
        };
        p.banLocation = function(a) {
          this.i && this.i.banLocation(a);
        };
        p.setMediaElement = function(a) {
          this.J = a;
        };
        function wx(a) {
          var b, c, d, e, f, g, h, k2, l, m, n;
          return Q(function(q) {
            if (q.g == 1) return b = 4, c = "MPD", d = yx(a), e = a.C, d.length ? (e = d, c = "Patch", b = 6) : a.C.length > 1 && a.i && (f = Fw(a.i, "Location", true), f.length && (e = f)), g = $g(e, a.g.retryParameters), h = Date.now(), F(q, zx(a, g, 0, { type: b }), 2);
            if (q.g != 3) {
              k2 = q.h;
              if (!a.j) return q.return(0);
              k2.uri && k2.uri != k2.originalUri && !a.C.includes(k2.uri) && a.C.unshift(k2.uri);
              l = new qb(k2.uri);
              a.X = l.g.toString();
              return F(q, Ax(a, k2.data, k2.uri, c), 3);
            }
            m = Date.now();
            n = (m - h) / 1e3;
            a.xa.sample(1, n);
            a.aa.clear();
            return q.return(n);
          });
        }
        function Ax(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, t;
          return Q(function(w) {
            if (w.g == 1) {
              e = b;
              f = a.g.dash.manifestPreprocessor;
              g = Yn;
              if (f != g) {
                Zc("manifest.dash.manifestPreprocessor configuration", "Please Use manifest.dash.manifestPreprocessorTXml instead.");
                h = tx(e, d);
                if (!h) throw new U(2, 4, 4001, c);
                f(h);
                e = $b(h.outerHTML);
              }
              k2 = Jd(e, d);
              if (!k2) throw new U(2, 4, 4001, c);
              l = a.g.dash.manifestPreprocessorTXml;
              m = Zn;
              l != m && l(k2);
              if (d === "Patch") return w.return(Bx(a, k2));
              if (n = a.g.dash.disableXlinkProcessing) return w.return(Cx(a, k2, c));
              q = a.g.dash.xlinkFailGracefully;
              r = Sv(k2, a.g.retryParameters, q, c, a.j.networkingEngine);
              Ug(a.P, r);
              return F(w, r.promise, 2);
            }
            t = w.h;
            return w.return(Cx(a, t, c));
          });
        }
        function Cx(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P, O, M, R, W, wa, Y, Ka, Na, La, Ea, za, Fa, Da, Aa, Ca, gb, ib, jb, Ab, yb, Wa, Yd, Oc, Je, Cd, Ag, Ik, fi;
          return Q(function(jd) {
            switch (jd.g) {
              case 1:
                a.i && a.i.l.clear();
                d = [c];
                e = [];
                f = /* @__PURE__ */ new Map();
                g = Rd(b, "Location");
                h = u(g);
                for (k2 = h.next(); !k2.done; k2 = h.next()) if (l = k2.value, m = l.attributes.serviceLocation, n = Td(l)) q = mc(d, [n])[0], m && (a.i ? Ew(a.i, "Location", m, q) : f.set(m, q)), e.push(q);
                a.i ? (r = Fw(a.i, "Location", true), r.length > 0 && (d = a.C = r)) : e.length && (d = a.C = e);
                a.l.Nf = b.attributes.id || "";
                a.l.De = Zd(b, "publishTime", be) || 0;
                a.H = Rd(b, "PatchLocation");
                t = Promise.resolve();
                if ((w = Vd(b, "ContentSteering")) && a.j) {
                  v = w.attributes.defaultServiceLocation;
                  if (a.i) a.i.i = d, a.i.h = v;
                  else if (a.i = new Aw(a.j), a.i.configure(a.g), a.i.setManifestType("DASH"), a.i.i = d, a.i.h = v, z = Td(w)) (y = Zd(w, "queryBeforeStart", ie, false)) ? t = Bw(a.i, z) : Bw(a.i, z);
                  A = u(f.keys());
                  for (C = A.next(); !C.done; C = A.next()) E = C.value, D = f.get(E), Ew(a.i, "Location", E, D);
                }
                B = Rd(b, "BaseURL");
                G = false;
                if (a.i) for (I = u(B), J = I.next(); !J.done; J = I.next()) L = J.value, K = L.attributes.serviceLocation, N = Td(L), K && N && (Ew(a.i, "BaseURL", K, N), G = true);
                a.V.splice(0);
                G && a.i || (P = B.map(Td), a.V.push.apply(a.V, x(mc(d, P))));
                O = a.i;
                M = a.V;
                R = function() {
                  return O && G ? Fw(O, "BaseURL") : M.slice();
                };
                a.l.mb = R;
                W = 0;
                B && B.length && (W = Zd(B[0], "availabilityTimeOffset", he) || 0);
                a.l.Bb = W;
                a.K = Zd(b, "minimumUpdatePeriod", ce, -1);
                wa = Zd(b, "availabilityStartTime", be);
                Y = Zd(b, "timeShiftBufferDepth", ce);
                Ka = a.g.dash.ignoreSuggestedPresentationDelay;
                Na = null;
                Ka || (Na = Zd(b, "suggestedPresentationDelay", ce));
                La = a.g.dash.ignoreMaxSegmentDuration;
                Ea = null;
                La || (Ea = Zd(b, "maxSegmentDuration", ce));
                za = b.attributes.type || "static";
                a.h && a.h.presentationTimeline && (a.S = a.h.presentationTimeline.U() && za == "static");
                a.l.type = za;
                if (a.h) for (Fa = a.h.presentationTimeline, Da = Fa.Nb(), Aa = u(a.u.values()), Ca = Aa.next(); !Ca.done; Ca = Aa.next()) gb = Ca.value, gb.segmentIndex && gb.segmentIndex.cb(Da);
                else ib = a.g.dash.ignoreMinBufferTime, jb = 0, ib || (jb = Zd(b, "minBufferTime", ce) || 0), Ab = 0, Ab = Na != null ? Math.min(Na, Y || Infinity) : a.g.defaultPresentationDelay > 0 ? a.g.defaultPresentationDelay : Math.min(jb * 1.5, Y || Infinity), Fa = new yl(wa, Ab, a.g.dash.autoCorrectDrift);
                Fa.sd(za == "static");
                (yb = Fa.U()) && !isNaN(a.g.availabilityWindowOverride) && (Y = a.g.availabilityWindowOverride);
                Y == null && (Y = Infinity);
                Fa.hg(Y);
                Wa = b.attributes.profiles || "";
                a.l.profiles = Wa.split(",");
                Yd = { Kb: za != "static", presentationTimeline: Fa, Aa: null, qa: null, va: null, N: null, bandwidth: 0, Ch: false, Bb: W, Cc: null, profiles: Wa.split(","), roles: null, Sb: function() {
                  return "";
                } };
                return F(jd, t, 2);
              case 2:
                a.M = 0;
                Oc = Dx(a, Yd, R, b, false);
                Je = Oc.duration;
                Cd = Oc.periods;
                (za != "static" || a.S) && Oc.Ti || Fa.zb(Je || Infinity);
                a.R && a.oa && Fa.Jj(a.Y);
                Fa.Lh(Ea || 1);
                a.R && a.oa && (Ag = Na != null ? Na : a.g.defaultPresentationDelay, Fa.ci(Ag));
                if (!a.h) return F(jd, a.m.Og(Cd, Yd.Kb), 6);
                a.h.periodCount = Cd.length;
                a.h.gapCount = a.M;
                return F(jd, Ex(a, Cd, false), 4);
              case 6:
                a.h = {
                  presentationTimeline: Fa,
                  variants: a.m.l,
                  textStreams: a.m.wh(),
                  imageStreams: a.m.i,
                  offlineSessionIds: [],
                  sequenceMode: a.g.dash.sequenceMode,
                  ignoreManifestTimestampsInSegmentsMode: false,
                  type: "DASH",
                  serviceDescription: Fx(b),
                  nextUrl: Gx(b),
                  periodCount: Cd.length,
                  gapCount: a.M,
                  isLowLatency: a.R,
                  startTime: null
                };
                if (!Fa.dk()) {
                  jd.B(7);
                  break;
                }
                Ik = Rd(b, "UTCTiming");
                return F(jd, Hx(a, R, Ik), 8);
              case 8:
                fi = jd.h;
                if (!a.j) return jd.return();
                Fa.Kj(fi);
              case 7:
                Fa.Jf(), a.m && !a.h.presentationTimeline.U() && a.m.release();
              case 4:
                a.j.makeTextStreamsForClosedCaptions(a.h), Ix(a), Jx(a, Cd), H(jd);
            }
          });
        }
        function Ex(a, b, c) {
          var d;
          return Q(function(e) {
            if (e.g == 1) return F(e, a.m.Og(b, true, c), 2);
            a.h.variants = a.m.l;
            d = a.m.wh();
            d.length > 0 && (a.h.textStreams = d);
            a.h.imageStreams = a.m.i;
            a.j.filter(a.h);
            H(e);
          });
        }
        function Bx(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K;
          return Q(function(N) {
            if (N.g == 1) {
              c = b.attributes.mpdId;
              d = Zd(b, "originalPublishTime", be);
              if (!c || c !== a.l.Nf || d !== a.l.De) throw a.H = [], new U(1, 4, 4052);
              e = [];
              f = [];
              g = /* @__PURE__ */ new Set();
              h = u(Qd(b));
              for (k2 = h.next(); !k2.done; k2 = h.next()) if (l = k2.value, m = le(l.attributes.sel || ""), n = m[m.length - 1], q = Td(l) || "", n.name === "MPD") if (n.Mc === "mediaPresentationDuration") {
                r = Td(l) || "";
                var P = ce(r);
                if (P != null) {
                  a.l.Cc = P;
                  for (var O = u(a.A.values()), M = O.next(); !M.done; M = O.next()) M.value.Cc = P;
                }
              } else if (n.Mc === "type") {
                a.h.presentationTimeline.sd(q == "static");
                a.l.type = q;
                P = u(a.A.values());
                for (O = P.next(); !O.done; O = P.next()) O.value.Kb = q == "dynamic";
                q == "static" && (a.K = -1);
              } else n.Mc === "publishTime" ? a.l.De = be(q) || 0 : n.Mc === null && l.tagName === "add" && f.push(l);
              else if (n.name === "PatchLocation") me(a.H, l);
              else if (n.name === "Period") l.tagName === "add" ? f.push(l) : l.tagName === "remove" && n.id && Kx(a, n.id);
              else if (n.name === "SegmentTemplate") {
                O = le(l.attributes.sel || "");
                P = O[O.length - 1];
                if (P.Mc) {
                  O = Lx(a, O);
                  M = Td(l) || "";
                  for (var R = u(O), W = R.next(); !W.done; W = R.next()) W = a.A.get(W.value), oe(W.N.Zc, l.tagName, P.Mc, M);
                  P = O;
                } else P = [];
                t = P;
                w = u(t);
                for (v = w.next(); !v.done; v = w.next()) z = v.value, g.add(z);
              } else if (n.name === "SegmentTimeline" || n.name === "S") {
                P = le(l.attributes.sel || "");
                P = Lx(a, P);
                O = u(P);
                for (M = O.next(); !M.done; M = O.next()) M = a.A.get(M.value), M = Pv(M, qw, "SegmentTimeline"), R = Rd(M, "S"), me(R, l), M.children = R;
                y = P;
                A = u(y);
                for (C = A.next(); !C.done; C = A.next()) E = C.value, g.add(E);
              }
              D = u(g);
              for (B = D.next(); !B.done; B = D.next()) G = B.value, Mx(
                a,
                G
              );
              I = u(f);
              for (J = I.next(); !J.done; J = I.next()) L = J.value, e.push.apply(e, x(Nx(a, L)));
              if (!e.length) return N.B(2);
              a.h.periodCount += e.length;
              a.h.gapCount = a.M;
              return F(N, Ex(a, e, true), 2);
            }
            a.l.type == "static" && (K = a.l.Cc, a.h.presentationTimeline.zb(K || Infinity));
            H(N);
          });
        }
        function Nx(a, b) {
          return Dx(a, { Kb: a.l.type == "dynamic", presentationTimeline: a.h.presentationTimeline, Aa: null, qa: null, va: null, N: null, bandwidth: 0, Ch: false, Bb: a.l.Bb, profiles: a.l.profiles, Cc: a.l.Cc, roles: null, Sb: function() {
            return "";
          } }, a.l.mb, b, true).periods;
        }
        function Kx(a, b) {
          a.h.periodCount--;
          for (var c = u(a.A.keys()), d = c.next(); !d.done; d = c.next()) if (d = d.value, d.startsWith(b)) {
            var e = a.A.get(d);
            Pv(e, qw, "SegmentTimeline").children = [];
            Mx(a, d);
            a.A.delete(d);
          }
          a.G = a.G.filter(function(f) {
            return f !== b;
          });
        }
        function Lx(a, b) {
          var c = "", d = "", e = -1, f = "";
          b = u(b);
          for (var g = b.next(); !g.done; g = b.next()) g = g.value, g.name === "Period" ? c = g.id : g.name === "AdaptationSet" ? (d = g.id, g.position !== null && (e = g.position)) : g.name === "Representation" && (f = g.id);
          b = [];
          if (f) b.push(c + "," + f);
          else if (d) for (e = u(a.A.values()), a = e.next(); !a.done; a = e.next()) a = a.value, a.Aa.id === c && a.va.id === d && a.N.id && b.push(c + "," + a.N.id);
          else if (e > -1) for (d = u(a.A.values()), a = d.next(); !a.done; a = d.next()) a = a.value, a.Aa.id === c && a.va.position === e && a.N.id && b.push(c + "," + a.N.id);
          return b;
        }
        function Mx(a, b) {
          var c = a.A.get(b), d = a.u.get(b);
          d.segmentIndex && d.segmentIndex.cb(a.h.presentationTimeline.Nb());
          try {
            var e = pw(c, function(f, g, h, k2) {
              return Ox(a, f, g, h, k2);
            }, a.u, true, a.g.dash.initialSegmentLimit, a.sa, c.N.aesKey, null, true, a.D);
            d.createSegmentIndex = function() {
              return Q(function(f) {
                if (f.g == 1) return d.segmentIndex ? f.B(0) : F(f, e.gd(), 3);
                d.segmentIndex = f.h;
                H(f);
              });
            };
          } catch (f) {
            if (b = c.N.contentType, b != sc && b != "application" && b != "image" || f.code != 4002) throw f;
          }
        }
        function Fx(a) {
          var b = Vd(a, "ServiceDescription");
          if (!b) return null;
          a = Vd(b, "Latency");
          b = Vd(b, "PlaybackRate");
          if (!a && !b) return null;
          var c = {};
          a && ("target" in a.attributes && (c.targetLatency = parseInt(a.attributes.target, 10) / 1e3), "max" in a.attributes && (c.maxLatency = parseInt(a.attributes.max, 10) / 1e3), "min" in a.attributes && (c.minLatency = parseInt(a.attributes.min, 10) / 1e3));
          b && ("max" in b.attributes && (c.maxPlaybackRate = parseFloat(b.attributes.max)), "min" in b.attributes && (c.minPlaybackRate = parseFloat(b.attributes.min)));
          return c;
        }
        function Gx(a) {
          a = Rd(a, "SupplementalProperty");
          if (!a.length) return null;
          a = u(a);
          for (var b = a.next(); !b.done; b = a.next()) if (b = b.value, b.attributes.schemeIdUri == "urn:mpeg:dash:chaining:2016") return b.attributes.value;
          return null;
        }
        function Dx(a, b, c, d, e) {
          var f = b.Cc;
          f || (f = Zd(d, "mediaPresentationDuration", ce), a.l.Cc = f);
          var g = 0;
          a.h && a.h.presentationTimeline && a.S && (g = a.h.presentationTimeline.fc());
          var h = [], k2 = g;
          d = Rd(d, "Period");
          for (var l = 0; l < d.length; l++) {
            var m = d[l], n = d[l + 1], q = Zd(m, "start", ce, k2), r = m.attributes.id, t = Zd(m, "duration", ce);
            q = l == 0 && q == 0 && a.S ? g : q;
            var w = null;
            if (n) {
              var v = Zd(n, "start", ce);
              v != null && (w = v - q + g);
            } else f != null && (w = f - q + g);
            v = vc;
            w && t && Math.abs(w - t) > v && w > t && a.M++;
            w == null && (w = t);
            if (!(a.O !== null && r !== null && q !== null && q < a.O) || a.G.includes(r) || l + 1 == d.length) {
              q !== null && (a.O === null || q > a.O) && (a.O = q);
              k2 = Px(a, b, c, { start: q, duration: w, node: m, Df: w == null || !n });
              h.push(k2);
              b.Aa.id && w && a.sa.set(b.Aa.id, w);
              if (w == null) {
                k2 = null;
                break;
              }
              k2 = q + w;
            }
          }
          if (e) for (b = u(h), c = b.next(); !c.done; c = b.next()) c = c.value.id, a.G.includes(c) || a.G.push(c);
          else a.G = h.map(function(z) {
            return z.id;
          });
          return f != null ? { periods: h, duration: f + g, Ti: false } : { periods: h, duration: k2, Ti: true };
        }
        function Ix(a) {
          var b = Array.from(a.F.keys()).filter(function(h) {
            return !a.G.includes(h);
          });
          b = u(b);
          for (var c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            for (var d = true, e = u(a.F.get(c)), f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              var g = a.u.get(f);
              g && (g.segmentIndex && g.segmentIndex.getNumReferences() != 0 ? d = false : (a.m && a.m.Ri(g, c), a.u.delete(f)));
            }
            d && a.F.delete(c);
          }
        }
        function Jx(a, b) {
          b = new Set(b.map(function(e) {
            return e.id;
          }));
          for (var c = u(a.D.keys()), d = c.next(); !d.done; d = c.next()) d = d.value, b.has(d) || a.D.delete(d);
        }
        function Px(a, b, c, d) {
          b.Aa = Qx(a, d.node, null, c);
          b.qa = d;
          b.Aa.Bb = b.Bb;
          b.Aa.id || (b.Aa.id = "__shaka_period_" + d.start);
          var e = Rd(d.node, "EventStream");
          c = b.presentationTimeline.Nb();
          e = u(e);
          for (var f = e.next(); !f.done; f = e.next()) Rx(a, d.start, d.duration, f.value, c);
          c = Rd(d.node, "SupplementalProperty");
          c = u(c);
          for (e = c.next(); !e.done; e = c.next()) if (e = e.value, e.attributes.schemeIdUri == "urn:mpeg:dash:urlparam:2014" && (e = Sx(a, e))) b.Sb = e;
          c = Rd(d.node, "AdaptationSet").map(function(r, t) {
            return Tx(a, b, t, r);
          }).filter(Ef);
          if (b.Kb) {
            e = [];
            f = u(c);
            for (var g = f.next(); !g.done; g = f.next()) {
              g = u(g.value.im);
              for (var h = g.next(); !h.done; h = g.next()) e.push(h.value);
            }
            if (e.length != new Set(e).size) throw new U(2, 4, 4018);
          }
          e = /* @__PURE__ */ new Map();
          f = u(c);
          for (g = f.next(); !g.done; g = f.next()) for (g = u(g.value.yk), h = g.next(); !h.done; h = g.next()) {
            var k2 = u(h.value);
            h = k2.next().value;
            k2 = k2.next().value;
            e.set(h, k2);
          }
          if (e.size) for (f = null, g = u(c), h = g.next(); !h.done; h = g.next()) {
            h = h.value;
            k2 = [];
            for (var l = u(h.streams), m = l.next(), n = {}; !m.done; n = { mi: void 0 }, m = l.next()) if (n.mi = m.value, e.has(n.mi.originalId)) {
              f || (f = Rd(d.node, "AdaptationSet").map(function(r, t) {
                return Tx(a, b, t, r);
              }).filter(Ef));
              m = u(f);
              for (var q = m.next(); !q.done; q = m.next()) if (q = q.value.streams.find(/* @__PURE__ */ function(r) {
                return function(t) {
                  return t.originalId == r.mi.originalId;
                };
              }(n))) q.dependencyStream = e.get(q.originalId), q.originalId += q.dependencyStream.originalId, k2.push(q);
            }
            k2.length && h.streams.push.apply(h.streams, x(k2));
          }
          d = c.filter(function(r) {
            return !r.wi;
          });
          c = c.filter(function(r) {
            return r.wi;
          });
          if (!a.g.disableIFrames) {
            for (c = u(c), e = c.next(); !e.done; e = c.next()) for (e = e.value, f = e.wi.split(" "), g = u(d), h = g.next(); !h.done; h = g.next()) if (h = h.value, f.includes(h.id)) for (h = u(h.streams), k2 = h.next(); !k2.done; k2 = h.next()) og(k2.value, e.streams);
          }
          c = Ux(a.g.disableAudio, d, "audio");
          e = Ux(a.g.disableVideo, d, "video");
          f = Ux(a.g.disableText, d, sc);
          d = Ux(a.g.disableThumbnails, d, "image");
          if (e.length === 0 && c.length === 0) throw new U(2, 4, 4004);
          return { id: b.Aa.id, audioStreams: c, videoStreams: e, textStreams: f, imageStreams: d };
        }
        function Ux(a, b, c) {
          return a || !b.length ? [] : b.reduce(function(d, e) {
            if (e.contentType != c) return d;
            d.push.apply(d, x(e.streams));
            return d;
          }, []);
        }
        function Tx(a, b, c, d) {
          function e(K) {
            var N = K.attributes["dvb:fontFamily"];
            K = K.attributes["dvb:url"];
            N && K && (K = mc(b.va.mb(), [K], b.Sb()), a.j.addFont(N, K[0]));
          }
          function f(K) {
            switch (K) {
              case 1:
              case 5:
              case 6:
              case 7:
                return "srgb";
              case 9:
                return "rec2020";
              case 11:
              case 12:
                return "p3";
            }
          }
          function g(K) {
            switch (K) {
              case 1:
              case 6:
              case 13:
              case 14:
              case 15:
                return "SDR";
              case 16:
                return "PQ";
              case 18:
                return "HLG";
            }
          }
          b.va = Qx(a, d, b.Aa, null);
          b.va.position = c;
          var h = false;
          c = Rd(d, "Role");
          var k2 = c.map(function(K) {
            return K.attributes.value;
          }).filter(Ef), l = void 0, m = b.va.contentType == sc;
          m && (l = "subtitle");
          c = u(c);
          for (var n = c.next(); !n.done; n = c.next()) {
            n = n.value;
            var q = n.attributes.schemeIdUri;
            if (q == null || q == "urn:mpeg:dash:role:2011") switch (n = n.attributes.value, n) {
              case "main":
                h = true;
                break;
              case "caption":
              case "subtitle":
                l = n;
            }
          }
          var r = Rd(d, "EssentialProperty");
          c = null;
          var t = false;
          n = null;
          q = false;
          r = u(r);
          for (var w = r.next(); !w.done; w = r.next()) {
            w = w.value;
            var v = w.attributes.schemeIdUri;
            if (v == "http://dashif.org/guidelines/trickmode") c = w.attributes.value;
            else if (v == "urn:mpeg:mpegB:cicp:TransferCharacteristics") var z = g(parseInt(w.attributes.value, 10));
            else if (v == "urn:mpeg:mpegB:cicp:ColourPrimaries") var y = f(parseInt(w.attributes.value, 10));
            else v != "urn:mpeg:mpegB:cicp:MatrixCoefficients" && (v == "urn:mpeg:dash:ssr:2023" && a.g.dash.enableFastSwitching ? t = true : v == "urn:dvb:dash:fontdownload:2014" ? e(w) : v == "urn:mpeg:dash:urlparam:2014" ? (n = Sx(a, w)) || (q = true) : q = true);
          }
          if (q) return null;
          var A = null;
          q = Rd(d, "SupplementalProperty");
          q = u(q);
          for (r = q.next(); !r.done; r = q.next()) r = r.value, w = r.attributes.schemeIdUri, w == "http://dashif.org/guidelines/last-segment-number" ? A = parseInt(r.attributes.value, 10) - 1 : w == "urn:mpeg:mpegB:cicp:TransferCharacteristics" ? z = g(parseInt(r.attributes.value, 10)) : w == "urn:mpeg:mpegB:cicp:ColourPrimaries" ? y = f(parseInt(r.attributes.value, 10)) : w == "urn:dvb:dash:fontdownload:2014" ? e(r) : w == "urn:mpeg:dash:urlparam:2014" && (n = Sx(a, r));
          n && (b.Sb = n);
          n = Rd(d, "Accessibility");
          var C = /* @__PURE__ */ new Map(), E;
          n = u(n);
          for (q = n.next(); !q.done; q = n.next()) if (r = q.value, q = r.attributes.schemeIdUri, r = r.attributes.value, q != "urn:scte:dash:cc:cea-608:2015" || a.g.disableText) if (q != "urn:scte:dash:cc:cea-708:2015" || a.g.disableText) q == "urn:mpeg:dash:role:2011" ? r != null && (k2.push(r), r == "captions" && (l = "caption")) : q == "urn:tva:metadata:cs:AudioPurposeCS:2007" && (r == "1" ? E = "visually impaired" : r == "2" ? E = "hard of hearing" : r == "9" && (E = "spoken subtitles"));
          else if (q = 1, r != null) for (r = u(r.split(";")), w = r.next(); !w.done; w = r.next()) {
            v = w.value;
            var D = w = void 0;
            v.includes("=") ? (v = v.split("="), w = "svc" + v[0], D = v[1].split(",")[0].split(":").pop()) : (w = "svc" + q, q++, D = v);
            C.set(w, yc(D));
          }
          else C.set("svc1", "und");
          else if (q = 1, r != null) for (r = r.split(";"), w = u(r), v = w.next(); !v.done; v = w.next()) {
            D = v.value;
            var B = v = void 0;
            D.includes("=") ? (D = D.split("="), v = D[0].startsWith("CC") ? D[0] : "CC" + D[0], B = D[1] || "und") : (v = "CC" + q, r.length == 2 ? q += 2 : q++, B = D);
            C.set(v, yc(B));
          }
          else C.set("CC1", "und");
          n = Rd(d, "ContentProtection");
          var G = Ev(a.ra, n, a.g.ignoreDrmInfo, a.g.dash.keySystemsByURI);
          b.va.encrypted = n.length > 0;
          var I = yc(b.va.language || "und"), J = b.va.label, L = /* @__PURE__ */ new Map();
          d = Rd(d, "Representation");
          if (!a.g.ignoreSupplementalCodecs) {
            n = [];
            q = u(d);
            for (r = q.next(); !r.done; r = q.next()) if (w = r.value, r = $d(w, "urn:scte:dash:scte214-extensions", "supplementalCodecs")) w = Gd(w), w.attributes.codecs = r.split(" ").join(","), w.attributes.id && (w.attributes.supplementalId = w.attributes.id + "_supplementalCodecs"), n.push(w);
            d.push.apply(d, x(n));
          }
          n = d.map(function(K) {
            var N = Vx(a, b, G, l, I, J, h, k2, C, K, E, A);
            return N && (N.hdr = N.hdr || z, N.colorGamut = N.colorGamut || y, N.fastSwitching = t, K = K.attributes.dependencyId) ? (N.baseOriginalId = K, L.set(K, N), null) : N;
          }).filter(function(K) {
            return !!K;
          });
          if (n.length == 0 && L.size == 0) {
            c = b.va.contentType == "image";
            if (a.g.dash.ignoreEmptyAdaptationSet || m || c) return null;
            throw new U(2, 4, 4003);
          }
          if (!b.va.contentType || b.va.contentType == "application") for (b.va.contentType = Wx(n[0].mimeType, n[0].codecs), m = u(n), q = m.next(); !q.done; q = m.next()) q.value.type = b.va.contentType;
          m = b.va.id || "__fake__" + a.Fa++;
          q = u(n);
          for (r = q.next(); !r.done; r = q.next()) {
            r = r.value;
            w = u(G.drmInfos);
            for (v = w.next(); !v.done; v = w.next()) v = v.value, v.keyIds = v.keyIds && r.keyIds ? new Set([].concat(x(v.keyIds), x(r.keyIds))) : v.keyIds || r.keyIds;
            a.g.enableAudioGroups && (r.groupId = m);
          }
          d = d.map(function(K) {
            return K.attributes.supplementalId || K.attributes.id;
          }).filter(Ef);
          return { id: m, contentType: b.va.contentType, language: I, Vn: h, streams: n, drmInfos: G.drmInfos, wi: c, im: d, yk: L };
        }
        function Sx(a, b) {
          if ((b = Wd(b, "urn:mpeg:dash:schema:urlparam:2014", "UrlQueryInfo")) && Zd(b, "useMPDUrlQuery", ie, false)) {
            var c = b.attributes.queryTemplate;
            if (c) return function() {
              return c == "$querypart$" ? a.X : c.split("&").map(function(d) {
                if (d == "$querypart$") return a.X;
                var e = /\$query:(.*?)\$/g.exec(d);
                if (e && e.length == 2) {
                  e = e[1];
                  var f = new wb(a.X).get(e);
                  if (f.length) return e + "=" + f[0];
                }
                return d;
              }).join("&");
            };
          }
          return null;
        }
        function Vx(a, b, c, d, e, f, g, h, k2, l, m, n) {
          b.N = Qx(a, l, b.va, null);
          var q = b.N.id;
          a.Y = Math.min(a.Y, b.N.Bb);
          a.R = a.Y > 0;
          if (!Xx(b.N)) return null;
          var r = b.qa.start;
          b.bandwidth = Zd(l, "bandwidth", fe) || 0;
          b.roles = h;
          var t = Rd(l, "SupplementalProperty"), w = Rd(l, "EssentialProperty"), v = Rd(l, "ContentProtection");
          l = null;
          var z = w.find(function(O) {
            return O.attributes.schemeIdUri == "urn:mpeg:dash:urlparam:2014";
          });
          z ? l = Sx(a, z) : (z = t.find(function(O) {
            return O.attributes.schemeIdUri == "urn:mpeg:dash:urlparam:2014";
          })) && (l = Sx(a, z));
          l && (b.Sb = l);
          z = b.N.contentType;
          l = z == sc || z == "application";
          z = z == "image";
          v.length && (b.va.encrypted = true);
          try {
            var y = void 0;
            if (c.Hg) {
              var A = b.N.mb, C = b.Sb, E = mc(A(), [c.Hg.Ll], C()), D = $g(E, a.g.retryParameters);
              y = { bitsKey: 128, blockCipherMode: "CBC", iv: c.Hg.iv, firstMediaSequenceNumber: 0, fetchKey: function() {
                var O, M, R;
                return Q(function(W) {
                  if (W.g == 1) return F(W, zx(a, D, 6), 2);
                  if (W.g != 3) {
                    O = W.h;
                    if (!O.data || O.data.byteLength != 16) throw new U(2, 4, 4049);
                    M = { name: "AES-CBC" };
                    R = y;
                    return F(W, window2.crypto.subtle.importKey(
                      "raw",
                      O.data,
                      M,
                      true,
                      ["decrypt"]
                    ), 3);
                  }
                  R.cryptoKey = W.h;
                  y.fetchKey = void 0;
                  H(W);
                });
              } };
            }
            b.N.aesKey = y;
            A = function(O, M, R, W) {
              return Ox(a, O, M, R, W);
            };
            if (b.N.Xd) var B = ew(b, A, y);
            else if (b.N.Jc) B = kw(b, a.u, y);
            else if (b.N.Zc) B = pw(b, A, a.u, !!a.h, a.g.dash.initialSegmentLimit, a.sa, y, n, false, a.D);
            else {
              var G = b.qa.duration || 0, I = b.N.mb, J = b.N.mimeType, L = b.N.codecs;
              B = { endTime: -1, timeline: -1, gd: function() {
                var O = Zl(r, G, I());
                O.Lb(function(M) {
                  M.mimeType = J;
                  M.codecs = L;
                });
                return Promise.resolve(O);
              }, timescale: 1 };
            }
          } catch (O) {
            if ((l || z) && O.code == 4002) return null;
            throw O;
          }
          n = Iv(a.ra, v, c, a.g.ignoreDrmInfo, a.g.dash.keySystemsByURI);
          n = new Set(n ? [n] : []);
          v = false;
          t.some(function(O) {
            return O.attributes.schemeIdUri == "tag:dolby.com,2018:dash:EC3_ExtensionType:2018" && O.attributes.value == "JOC";
          }) && (v = true);
          t = false;
          l && (t = h.includes("forced_subtitle") || h.includes("forced-subtitle"));
          var K;
          if (z && ((w = w.find(function(O) {
            return ["http://dashif.org/thumbnail_tile", "http://dashif.org/guidelines/thumbnail_tile"].includes(O.attributes.schemeIdUri);
          })) && (K = w.attributes.value), !K)) return null;
          var N;
          l = b.N.codecs;
          b.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10") && (l.includes("hvc1.2.4.L153.B0") || l.includes("hev1.2.4.L153.B0")) && (N = "PQ");
          w = b.N.id ? b.Aa.id + "," + b.N.id : "";
          a.H.length && q && a.A.set(b.Aa.id + "," + q, Yx(b));
          b.N.Wf && Zx(a, b.N.Wf, B, b.presentationTimeline);
          B.endTime != -1 && b.Aa.id != null && b.N.id != null && ((q = a.D.get(b.Aa.id)) ? (q.endTime = B.endTime, q.Uh.includes(b.N.id) || q.Uh.push(b.N.id), a.D.set(b.Aa.id, q)) : a.D.set(b.Aa.id, { endTime: B.endTime, timeline: B.timeline, Uh: [b.N.id] }));
          var P = w && a.u.has(w) ? a.u.get(w) : {
            id: a.Fa++,
            originalId: b.N.id,
            groupId: null,
            createSegmentIndex: function() {
              return Promise.resolve();
            },
            closeSegmentIndex: function() {
              P.segmentIndex && (P.segmentIndex.release(), P.segmentIndex = null);
            },
            segmentIndex: null,
            mimeType: b.N.mimeType,
            codecs: l,
            frameRate: b.N.frameRate,
            pixelAspectRatio: b.N.pixelAspectRatio,
            bandwidth: b.bandwidth,
            width: b.N.width,
            height: b.N.height,
            kind: d,
            encrypted: c.drmInfos.length > 0,
            drmInfos: c.drmInfos,
            keyIds: n,
            language: e,
            originalLanguage: b.va.language,
            label: f,
            type: b.va.contentType,
            primary: g,
            trickModeVideo: null,
            dependencyStream: null,
            emsgSchemeIdUris: b.N.emsgSchemeIdUris,
            roles: h,
            forced: t,
            channelsCount: b.N.Qf,
            audioSamplingRate: b.N.audioSamplingRate,
            spatialAudio: v,
            closedCaptions: k2,
            hdr: N,
            colorGamut: void 0,
            videoLayout: void 0,
            tilesLayout: K,
            accessibilityPurpose: m,
            external: false,
            fastSwitching: false,
            fullMimeTypes: /* @__PURE__ */ new Set([df(b.N.mimeType, b.N.codecs)]),
            isAudioMuxedInVideo: false,
            baseOriginalId: null
          };
          P.createSegmentIndex = function() {
            var O;
            return Q(function(M) {
              if (M.g == 1) {
                if (P.segmentIndex) return M.B(0);
                O = P;
                return F(M, B.gd(), 3);
              }
              O.segmentIndex = M.h;
              H(M);
            });
          };
          w && b.Kb && !a.u.has(w) && (b = b.Aa.id || "", a.F.has(b) || a.F.set(b, []), a.u.set(w, P), a.F.get(b).push(w));
          return P;
        }
        function Zx(a, b, c, d) {
          if (!a.aa.has(b)) {
            a.aa.add(b);
            var e = Zd(b, "presentationTime", ge) || 0, f = Vd(b, "UTCTiming"), g;
            if (g = f && f.attributes.schemeIdUri) f = f.attributes.schemeIdUri, g = !(f === "urn:mpeg:dash:utc:http-ntp:2014" || f === "urn:mpeg:dash:utc:ntp:2014" || f === "urn:mpeg:dash:utc:sntp:2014");
            g ? b = (Zd(b, "wallClockTime", be) || 0) * 1e3 : (b = Zd(b, "wallClockTime", ge) || 0, b = ak(b));
            c = new Date(b - e / c.timescale * 1e3);
            e = c.getTime() / 1e3;
            isNaN(e) || (d.u || d.ei(e), d = (/* @__PURE__ */ new Map()).set("detail", { wallClockTime: b, programStartDate: c }), d = new T(
              "prft",
              d
            ), a.j.onEvent(d));
          }
        }
        function Yx(a) {
          function b(c) {
            if (!c) return null;
            c = Hd(c);
            c.Xd = null;
            c.Jc = null;
            c.Zc = qe(c.Zc);
            c.Wf = null;
            return c;
          }
          a = Hd(a);
          a.Aa = b(a.Aa);
          a.va = b(a.va);
          a.N = b(a.N);
          a.qa && (a.qa = Hd(a.qa), a.qa.node = null);
          return a;
        }
        function vx(a) {
          var b, c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                return b = 0, ra(d, 2), F(d, wx(a), 4);
              case 4:
                b = d.h;
                ta(d, 3);
                break;
              case 2:
                if (c = ua(d), a.j) {
                  if (a.g.raiseFatalErrorOnManifestUpdateRequestFailure) return a.j.onError(c), d.return();
                  c.severity = 1;
                  a.j.onError(c);
                }
              case 3:
                if (!a.j) return d.return();
                a.j.onManifestUpdated();
                xx(a, b);
                H(d);
            }
          });
        }
        function xx(a, b) {
          if (!(a.K < 0)) {
            var c = a.K;
            a.g.updatePeriod >= 0 && (c = a.g.updatePeriod);
            a.L.$(Math.max(c - b, Mc(a.xa)));
          }
        }
        function Qx(a, b, c, d) {
          c = c || { contentType: "", mimeType: "", codecs: "", emsgSchemeIdUris: [], frameRate: void 0, pixelAspectRatio: void 0, Qf: null, audioSamplingRate: null, Bb: 0, eg: 1, encrypted: false };
          d = d || c.mb;
          var e = b.attributes.id, f = b.attributes.supplementalId, g = Rd(b, "BaseURL"), h, k2 = false;
          if (a.i) for (var l = u(g), m = l.next(); !m.done; m = l.next()) {
            var n = m.value;
            m = n.attributes.serviceLocation;
            n = Td(n);
            m && n && (Ew(a.i, e, m, n), k2 = true);
          }
          k2 && a.i || (h = g.map(Td));
          var q = a.i;
          a = b.attributes.contentType || c.contentType;
          l = b.attributes.mimeType || c.mimeType;
          m = Dm([b.attributes.codecs || c.codecs]).join(",");
          n = Zd(b, "frameRate", ke) || c.frameRate;
          var r = b.attributes.sar || c.pixelAspectRatio, t = $x(Rd(b, "InbandEventStream"), c.emsgSchemeIdUris), w = Rd(b, "AudioChannelConfiguration");
          w = ay(w) || c.Qf;
          var v = Zd(b, "audioSamplingRate", ge) || c.audioSamplingRate;
          a || (a = Wx(l, m));
          var z = Vd(b, "SegmentBase"), y = Vd(b, "SegmentTemplate"), A = z ? Zd(z, "availabilityTimeOffset", he) || 0 : 0, C = y ? Zd(y, "availabilityTimeOffset", he) || 0 : 0, E = g && g.length ? Zd(g[0], "availabilityTimeOffset", he) || 0 : 0;
          A = c.Bb + E + A + C;
          C = null;
          (E = Vd(b, "SegmentSequenceProperties")) && (E = Zd(E, "cadence", fe)) && (C = E);
          E = b.attributes.label;
          var D = Rd(b, "Label");
          D && D.length && (D = D[0], Sd(D) && (E = Sd(D)));
          return {
            mb: function() {
              return mc(d(), g.length ? q && k2 ? Fw(q, e) : h ? h : [] : []);
            },
            Xd: z || c.Xd,
            Jc: Vd(b, "SegmentList") || c.Jc,
            Zc: y || c.Zc,
            Wf: Vd(b, "ProducerReferenceTime") || c.Wf,
            width: Zd(b, "width", ge) || c.width,
            height: Zd(b, "height", ge) || c.height,
            contentType: a,
            mimeType: l,
            codecs: m,
            frameRate: n,
            pixelAspectRatio: r,
            emsgSchemeIdUris: t,
            id: f || e,
            originalId: e,
            language: b.attributes.lang,
            Qf: w,
            audioSamplingRate: v,
            Bb: A,
            Af: null,
            eg: C || c.eg,
            label: E || null,
            encrypted: false
          };
        }
        function $x(a, b) {
          b = b.slice();
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) c = c.value.attributes.schemeIdUri, b.includes(c) || b.push(c);
          return b;
        }
        function ay(a) {
          a = u(a);
          for (var b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            var c = b.attributes.schemeIdUri;
            if (c && (b = b.attributes.value)) switch (c) {
              case "urn:mpeg:dash:outputChannelPositionList:2012":
                return b.trim().split(/ +/).length;
              case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":
              case "urn:dts:dash:audio_channel_configuration:2012":
                b = parseInt(b, 10);
                if (!b) continue;
                return b;
              case "tag:dolby.com,2015:dash:audio_channel_configuration:2015":
                c = [2, 1, 2, 2, 2, 2, 1, 2, 2, 1, 1, 1, 1, 2, 1, 1, 2, 2];
                b = parseInt(
                  b,
                  16
                );
                if (!b) continue;
                for (var d = 0, e = 0; e < c.length; e++) b & 1 << e && (d += c[e]);
                if (d) return d;
                continue;
              case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":
              case "urn:dolby:dash:audio_channel_configuration:2011":
                c = [1, 1, 1, 1, 1, 2, 2, 1, 1, 2, 2, 2, 1, 2, 1, 1].reverse();
                b = parseInt(b, 16);
                if (!b) continue;
                for (e = d = 0; e < c.length; e++) b & 1 << e && (d += c[e]);
                if (d) return d;
                continue;
              case "urn:mpeg:mpegB:cicp:ChannelConfiguration":
                if (c = [0, 1, 2, 3, 4, 5, 6, 8, 2, 3, 4, 7, 8, 24, 8, 12, 10, 12, 14, 12, 14], (b = parseInt(b, 10)) && b > 0 && b < c.length) return c[b];
            }
          }
          return null;
        }
        function Xx(a) {
          var b = a.Xd ? 1 : 0;
          b += a.Jc ? 1 : 0;
          b += a.Zc ? 1 : 0;
          if (b == 0) return a.contentType == sc || a.contentType == "application" ? true : false;
          b != 1 && (a.Xd && (a.Jc = null), a.Zc = null);
          return true;
        }
        function by(a, b, c, d) {
          var e, f, g, h, k2, l, m;
          return Q(function(n) {
            if (n.g == 1) return e = [cc(c)], f = mc(b(), e), g = $g(f, a.g.retryParameters), g.method = d, h = a.j.networkingEngine.request(4, g, { isPreload: a.ea() }), Ug(a.P, h), F(n, h.promise, 2);
            k2 = n.h;
            if (d == "HEAD") {
              if (!k2.headers || !k2.headers.date) return n.return(0);
              l = k2.headers.date;
            } else l = Wb(k2.data);
            m = Date.parse(l);
            return isNaN(m) ? n.return(0) : n.return(m - Date.now());
          });
        }
        function Hx(a, b, c) {
          var d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            switch (n.g) {
              case 1:
                d = c.map(function(q) {
                  return { scheme: q.attributes.schemeIdUri, value: q.attributes.value };
                }), e = a.g.dash.clockSyncUri, !d.length && e && d.push({ scheme: "urn:mpeg:dash:utc:http-head:2014", value: e }), f = u(d), g = f.next();
              case 2:
                if (g.done) {
                  n.B(4);
                  break;
                }
                h = g.value;
                ra(n, 5);
                k2 = h.scheme;
                l = h.value;
                switch (k2) {
                  case "urn:mpeg:dash:utc:http-head:2014":
                  case "urn:mpeg:dash:utc:http-head:2012":
                    return n.B(7);
                  case "urn:mpeg:dash:utc:http-xsdate:2014":
                  case "urn:mpeg:dash:utc:http-iso:2014":
                  case "urn:mpeg:dash:utc:http-xsdate:2012":
                  case "urn:mpeg:dash:utc:http-iso:2012":
                    return n.B(8);
                  case "urn:mpeg:dash:utc:direct:2014":
                  case "urn:mpeg:dash:utc:direct:2012":
                    return m = Date.parse(l), n.return(isNaN(m) ? 0 : m - Date.now());
                  case "urn:mpeg:dash:utc:http-ntp:2014":
                  case "urn:mpeg:dash:utc:ntp:2014":
                  case "urn:mpeg:dash:utc:sntp:2014":
                    ab("NTP UTCTiming scheme is not supported");
                    break;
                  default:
                    ab("Unrecognized scheme in UTCTiming element", k2);
                }
                n.B(9);
                break;
              case 7:
                return F(n, by(a, b, l, "HEAD"), 10);
              case 10:
                return n.return(n.h);
              case 8:
                return F(n, by(a, b, l, "GET"), 11);
              case 11:
                return n.return(n.h);
              case 9:
                ta(
                  n,
                  3
                );
                break;
              case 5:
                ua(n);
              case 3:
                g = f.next();
                n.B(2);
                break;
              case 4:
                return ab("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"), n.return(0);
            }
          });
        }
        function Rx(a, b, c, d, e) {
          var f = d.attributes.schemeIdUri || "", g = d.attributes.value || "", h = Zd(d, "timescale", ge) || 1, k2 = Zd(d, "presentationTimeOffset", ge) || 0;
          d = u(Rd(d, "Event"));
          for (var l = d.next(); !l.done; l = d.next()) {
            l = l.value;
            var m = Zd(l, "presentationTime", ge) || 0, n = Zd(l, "duration", ge) || 0;
            m = Math.max((m - k2) / h + b, b);
            n = m + n / h;
            c != null && (m = Math.min(m, b + c), n = Math.min(n, b + c));
            n < e || (l = { schemeIdUri: f, value: g, startTime: m, endTime: n, id: l.attributes.id || "", timescale: h, eventElement: pe(l), eventNode: qe(l) }, a.j.onTimelineRegionAdded(l));
          }
        }
        function Ox(a, b, c, d, e) {
          var f, g, h, k2;
          return Q(function(l) {
            if (l.g == 1) return f = fh, g = e ? 0 : 1, h = Hm(b, c, d, a.g.retryParameters), F(l, zx(a, h, f, { type: g }), 2);
            k2 = l.h;
            return l.return(k2.data);
          });
        }
        function Wx(a, b) {
          b = df(a, b);
          return tf(b) ? sc : a.split("/")[0];
        }
        function zx(a, b, c, d) {
          d || (d = {});
          d.isPreload = a.ea();
          b = a.j.networkingEngine.request(c, b, d);
          Ug(a.P, b);
          return b.promise;
        }
        function yx(a) {
          var b = a.l.De;
          if (!a.l.Nf || !b || !a.H.length) return [];
          var c = Date.now() / 1e3, d = a.H.filter(function(e) {
            e = ge(e.attributes.ttl);
            return !e || b + e > c;
          }).map(Td).filter(Ef);
          return d.length ? mc(a.C, d) : [];
        }
        S("shaka.dash.DashParser", ux);
        Ci("application/dash+xml", function() {
          return new ux();
        });
        Ci("video/vnd.mpeg.dash.mpd", function() {
          return new ux();
        });
        function cy() {
        }
        S("shaka.dependencies", cy);
        cy.has = function(a) {
          return dy.has(a);
        };
        cy.add = function(a, b) {
          if (!ey[a]) throw Error(a + " is not supported");
          a == fy ? Zc("mux.js", "mux.js is no longer used in Shaka Player.") : dy.set(a, function() {
            return b;
          });
        };
        var fy = "muxjs", ey = { Wn: fy, ISOBoxer: "ISOBoxer" };
        cy.Allowed = ey;
        var dy = /* @__PURE__ */ new Map([["ISOBoxer", function() {
          return window2.ISOBoxer;
        }]]);
        function gy() {
          this.j = new Qb(function() {
            return ["Oculus", "Quest"].some(function(a) {
              return navigator.userAgent.includes(a.toLowerCase());
            }) ? "VR" : navigator.userAgent.match(/Smart( ?|_)TV/i) || navigator.userAgent.match(/Android ?TV/i) ? "TV" : navigator.userAgentData ? navigator.userAgentData.mobile ? "MOBILE" : "DESKTOP" : /(?:iPhone|iPad|iPod)/.test(navigator.userAgent) ? "MOBILE" : navigator.userAgentData && navigator.userAgentData.platform ? navigator.userAgentData.platform.toLowerCase() == "android" ? "MOBILE" : "DESKTOP" : navigator.userAgent.includes("Android") ? "MOBILE" : "DESKTOP";
          });
          this.l = new Qb(function() {
            return navigator.vendor.includes("Apple") && (navigator.userAgent.includes("Version/") || navigator.userAgent.includes("OS/")) ? "WEBKIT" : navigator.userAgent.includes("Edge/") ? "EDGE" : navigator.userAgent.includes("Chrome/") ? "CHROMIUM" : navigator.userAgent.includes("Firefox/") ? "GECKO" : "UNKNOWN";
          });
        }
        function Fi() {
          var a = window2.ManagedMediaSource || window2.MediaSource;
          return a && a.isTypeSupported ? true : false;
        }
        p = gy.prototype;
        p.mc = function() {
          return !!navigator.mediaCapabilities;
        };
        p.Ka = function() {
          return this.j.value();
        };
        p.Ja = function() {
          return this.l.value();
        };
        p.Ud = function() {
          return false;
        };
        p.zj = function() {
          return false;
        };
        p.Bf = function() {
          return false;
        };
        p.Aj = function() {
          return false;
        };
        p.Fe = function() {
          return false;
        };
        p.vd = function() {
          return true;
        };
        p.bd = function() {
          return true;
        };
        p.Je = function() {
          return true;
        };
        p.Fj = function() {
          return 0;
        };
        p.wc = function() {
          return Promise.resolve({ width: Infinity, height: Infinity });
        };
        p.Qj = function() {
          return false;
        };
        p.ki = function() {
          return false;
        };
        p.ab = function(a) {
          var b = this.Ka();
          if (b === "TV" || b === "CONSOLE" || b === "CAST") a.ads.customPlayheadTracker = true, a.ads.skipPlayDetection = true, a.ads.supportsMultipleMediaElements = false;
          return a;
        };
        p.oi = function() {
          return !!window2.indexedDB;
        };
        p.xj = function() {
          return [];
        };
        p.Id = function(a) {
          return window2.matchMedia !== void 0 && window2.matchMedia("(color-gamut: p3)").matches ? a ? "HLG" : "PQ" : "SDR";
        };
        p.kg = function() {
          return false;
        };
        p.nj = function() {
          return false;
        };
        p.Yh = function() {
          return false;
        };
        p.mg = function() {
          return true;
        };
        p.oj = function() {
          return false;
        };
        p.Yj = function() {
          return true;
        };
        p.ud = function() {
          return false;
        };
        p.Kh = function(a) {
          return a === "com.apple.fps";
        };
        p.lg = function() {
          return true;
        };
        p.toString = function() {
          return "Device: " + this.Ub() + " v" + this.Ga() + "; Type: " + this.Ka();
        };
        function hy() {
          gy.call(this);
          this.g = new Qb(function() {
            var a = navigator.userAgent.match(/Version\/(\d+)/);
            return a ? parseInt(a[1], 10) : (a = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/)) ? parseInt(a[1], 10) : null;
          });
          this.h = new Qb(function() {
            return /(?:iPhone|iPad|iPod)/.test(navigator.userAgent) || navigator.maxTouchPoints > 1 ? "xr" in navigator ? "APPLE_VR" : "MOBILE" : "xr" in navigator ? "APPLE_VR" : "DESKTOP";
          });
        }
        la(hy, gy);
        p = hy.prototype;
        p.Ga = function() {
          return this.g.value();
        };
        p.Ub = function() {
          return "Apple Browser";
        };
        p.Ka = function() {
          return this.h.value();
        };
        p.Ja = function() {
          return "WEBKIT";
        };
        p.mc = function() {
          return false;
        };
        p.Ud = function(a, b) {
          return b === "audio";
        };
        p.Bf = function() {
          return true;
        };
        p.Aj = function(a) {
          return a === "audio";
        };
        p.ab = function(a) {
          gy.prototype.ab.call(this, a);
          a.abr.minTimeToSwitch = 0.5;
          return a;
        };
        p.kg = function() {
          return true;
        };
        p.lg = function() {
          return false;
        };
        (navigator.vendor || "").includes("Apple") && (/(?:iPhone|iPad|iPod)/.test(navigator.userAgent) || navigator.maxTouchPoints > 1 || navigator.userAgentData && navigator.userAgentData.platform && navigator.userAgentData.platform.toLowerCase() == "macos" || navigator.platform && navigator.platform.toLowerCase().includes("mac")) && (Tb = function() {
          return new hy();
        });
        function iy() {
          if (!jy()) throw Error("Not a Chromecast device!");
          gy.call(this);
          this.h = new Qb(function() {
            var a = navigator.userAgent.match(/Chrome\/(\d+)/);
            return a ? parseInt(a[1], 10) : null;
          });
          this.g = new Qb(function() {
            var a = navigator.userAgentData && navigator.userAgentData.platform || navigator.userAgent;
            a = a.toLowerCase();
            return a.includes("android") ? ky : a.includes("fuchsia") ? ly : my;
          });
        }
        la(iy, gy);
        p = iy.prototype;
        p.Ga = function() {
          return this.h.value();
        };
        p.Ub = function() {
          return "Chromecast with " + this.g.value();
        };
        p.Ka = function() {
          return "CAST";
        };
        p.Ja = function() {
          return "CHROMIUM";
        };
        p.mc = function() {
          return gy.prototype.mc.call(this) && this.g.value() !== my;
        };
        p.bd = function() {
          return this.g.value() !== my;
        };
        p.Fj = function() {
          switch (this.g.value()) {
            case ky:
              return 0;
            case ly:
              return 3;
            default:
              return 1;
          }
        };
        p.wc = function() {
          var a, b, c, d, e;
          return Q(function(f) {
            switch (f.g) {
              case 1:
                a = window2.cast && cast.__platform__ && cast.__platform__.canDisplayType;
                b = { width: 1280, height: 720 };
                ra(f, 2);
                if (!(c = a)) {
                  f.B(4);
                  break;
                }
                return F(f, cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'), 5);
              case 5:
                c = f.h;
              case 4:
                if (c) {
                  b.width = 3840;
                  b.height = 2160;
                  f.B(6);
                  break;
                }
                if (!(d = a)) {
                  f.B(7);
                  break;
                }
                return F(f, cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'), 8);
              case 8:
                d = f.h;
              case 7:
                d && (b.width = 1920, b.height = 1080);
              case 6:
                ta(f, 3);
                break;
              case 2:
                e = ua(f), $a("Failed to check canDisplayType:", e);
              case 3:
                return f.return(b);
            }
          });
        };
        p.ab = function(a) {
          gy.prototype.ab.call(this, a);
          a.streaming.stallSkip = 0;
          return a;
        };
        p.oi = function() {
          return false;
        };
        p.ud = function() {
          return true;
        };
        function jy() {
          return navigator.userAgent.includes("CrKey") && !navigator.userAgent.includes("VIZIO SmartCast");
        }
        var ky = "Android", ly = "Fuchsia", my = "Linux";
        jy() && (Tb = function() {
          return new iy();
        });
        function ny() {
          gy.call(this);
          var a = this;
          this.i = new Qb(function() {
            var b = navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);
            return b ? parseInt(b[2], 10) : null;
          });
          this.g = new Qb(function() {
            return navigator.userAgent.match(/Edge?\//) ? "Edge" : navigator.userAgent.includes("Chrome") ? "Chrome" : navigator.userAgent.includes("Firefox") ? "Firefox" : "Unknown";
          });
          this.h = new Qb(function() {
            return navigator.userAgentData && navigator.userAgentData.platform ? navigator.userAgentData.platform.toLowerCase() == "windows" : navigator.platform ? navigator.platform.toLowerCase().includes("win32") : false;
          });
          this.A = new Qb(function() {
            return navigator.userAgent.match(/Edge?\//) ? !a.h.value() : true;
          });
          this.u = new Qb(function() {
            return navigator.userAgent.includes("sony.hbbtv.tv");
          });
          this.m = new Qb(function() {
            return navigator.userAgentData && navigator.userAgentData.platform ? navigator.userAgentData.platform.toLowerCase() == "android" : navigator.userAgent.includes("Android") ? true : false;
          });
        }
        la(ny, gy);
        p = ny.prototype;
        p.Ga = function() {
          return this.i.value();
        };
        p.Ub = function() {
          return this.g.value();
        };
        p.Ud = function(a) {
          return zg(a) ? this.g.value() === "Edge" && this.h.value() : false;
        };
        p.zj = function() {
          return this.g.value() === "Edge" && this.h.value();
        };
        p.Bf = function() {
          return this.g.value() === "Edge" && this.h.value();
        };
        p.bd = function() {
          return this.A.value();
        };
        p.ab = function(a) {
          gy.prototype.ab.call(this, a);
          if (this.h.value()) switch (this.g.value()) {
            case "Firefox":
              a.drm.keySystemsMapping = { "com.microsoft.playready": "com.microsoft.playready.recommendation" };
              break;
            case "Chrome":
              a.drm.keySystemsMapping = { "com.microsoft.playready": "com.microsoft.playready.recommendation.3000", "com.microsoft.playready.recommendation": "com.microsoft.playready.recommendation.3000" };
          }
          this.m.value() && (a.drm.defaultAudioRobustnessForWidevine = "", a.drm.defaultVideoRobustnessForWidevine = "");
          return a;
        };
        p.Yh = function() {
          return this.g.value() === "Edge" || this.u.value();
        };
        p.ud = function() {
          if (this.Ja() === "GECKO") {
            var a = this.Ga();
            return a !== null ? a >= 100 : gy.prototype.ud.call(this);
          }
          return gy.prototype.ud.call(this);
        };
        p.Kh = function(a) {
          return this.Ja() === "GECKO" ? a.startsWith("com.microsoft.playready.recommendation") : gy.prototype.Kh.call(this, a);
        };
        Ub = function() {
          return new ny();
        };
        function oy() {
          gy.apply(this, arguments);
        }
        la(oy, gy);
        p = oy.prototype;
        p.Ga = function() {
          return null;
        };
        p.Ub = function() {
          return "Hisense";
        };
        p.Ka = function() {
          return "TV";
        };
        p.mc = function() {
          return false;
        };
        p.wc = function() {
          var a = { width: 1920, height: 1080 }, b = null;
          if (window2.Hisense_Get4KSupportState) try {
            b = window2.Hisense_Get4KSupportState();
          } catch (c) {
          }
          b == null && (b = navigator.userAgent.includes("UHD"));
          b && (a.width = 3840, a.height = 2160);
          return Promise.resolve(a);
        };
        p.ab = function(a) {
          gy.prototype.ab.call(this, a);
          a.streaming.stallSkip = 0;
          return a;
        };
        if (navigator.userAgent.includes("Hisense") || navigator.userAgent.includes("VIDAA")) Tb = function() {
          return new oy();
        };
        function py() {
          gy.call(this);
          this.g = new Qb(function() {
            var a = navigator.userAgent.match(/PlayStation (\d+)/);
            return a ? parseInt(a[1], 10) : null;
          });
        }
        la(py, gy);
        p = py.prototype;
        p.Ub = function() {
          return "PlayStation";
        };
        p.Ka = function() {
          return "CONSOLE";
        };
        p.Ja = function() {
          return "WEBKIT";
        };
        p.Ga = function() {
          return this.g.value();
        };
        p.mc = function() {
          return false;
        };
        p.vd = function() {
          return false;
        };
        p.bd = function() {
          return false;
        };
        p.ki = function() {
          return this.Ga() === 4;
        };
        p.wc = function() {
          var a, b, c, d, e;
          return Q(function(f) {
            switch (f.g) {
              case 1:
                return a = { width: 1920, height: 1080 }, b = false, ra(f, 2), F(f, window2.msdk.device.getDisplayInfo(), 4);
              case 4:
                c = f.h;
                b = c.resolution === "4K";
                ta(f, 3);
                break;
              case 2:
                return ua(f), ra(f, 5), F(f, window2.msdk.device.getDisplayInfoImmediate(), 7);
              case 7:
                d = f.h;
                b = d.resolution === "4K";
                ta(f, 3);
                break;
              case 5:
                e = ua(f), ab("PlayStation: Failed to get the display info:", e);
              case 3:
                return b && (a.width = 3840, a.height = 2160), f.return(a);
            }
          });
        };
        p.ab = function(a) {
          gy.prototype.ab.call(this, a);
          this.Ga() === 4 && a.drm.preferredKeySystems.push("com.microsoft.playready");
          a.streaming.clearDecodingCache = true;
          return a;
        };
        p.Yh = function() {
          return this.Ga() === 4;
        };
        p.mg = function() {
          return this.Ga() !== 4;
        };
        navigator.userAgent.includes("PlayStation") && (Tb = function() {
          return new py();
        });
        function qy() {
          gy.call(this);
          var a = navigator.userAgent.match(/Tizen (\d+).(\d+)/);
          this.g = a ? parseInt(a[1], 10) : null;
          this.h = a ? parseInt(a[2], 10) : null;
        }
        la(qy, gy);
        p = qy.prototype;
        p.Ga = function() {
          return this.g;
        };
        p.Ub = function() {
          return "Tizen";
        };
        p.Ja = function() {
          return "CHROMIUM";
        };
        p.Ka = function() {
          return "TV";
        };
        p.Ud = function() {
          return true;
        };
        p.Fe = function() {
          return this.Ga() === 3;
        };
        p.mc = function() {
          return false;
        };
        p.vd = function() {
          var a = this.Ga();
          return a !== null ? a >= 4 : gy.prototype.vd.call(this);
        };
        p.bd = function() {
          return false;
        };
        p.Je = function() {
          return this.g && this.h ? this.g === 5 ? this.h >= 5 : this.g > 5 : gy.prototype.Je.call(this);
        };
        p.wc = function() {
          var a = window2.devicePixelRatio;
          a = { width: window2.screen.width * a > 1920 ? 3840 : 1920, height: window2.screen.height * a > 1080 ? 2160 : 1080 };
          try {
            if (webapis.systeminfo && webapis.systeminfo.getMaxVideoResolution) {
              var b = webapis.systeminfo.getMaxVideoResolution();
              a.width = b.width;
              a.height = b.height;
            } else webapis.productinfo.is8KPanelSupported && webapis.productinfo.is8KPanelSupported() ? (a.width = 7680, a.height = 4320) : webapis.productinfo.isUdPanelSupported && webapis.productinfo.isUdPanelSupported() && (a.width = 3840, a.height = 2160);
          } catch (c) {
            ab("Tizen: Error detecting screen size, default screen size 1920x1080.");
          }
          return Promise.resolve(a);
        };
        p.ab = function(a) {
          gy.prototype.ab.call(this, a);
          a.drm.ignoreDuplicateInitData = this.Ga() !== 2;
          this.Ga() === 3 && (a.streaming.crossBoundaryStrategy = "reset_to_encrypted");
          a.streaming.shouldFixTimestampOffset = true;
          a.streaming.stallSkip = 0;
          a.streaming.gapPadding = 2;
          return a;
        };
        p.xj = function() {
          var a = [];
          this.g !== null && this.g < 5 && a.push("opus");
          return a;
        };
        p.Id = function(a) {
          try {
            if (webapis.avinfo.isHdrTvSupport()) return a ? "HLG" : "PQ";
          } catch (b) {
            return gy.prototype.Id.call(this, a);
          }
          return "SDR";
        };
        p.nj = function() {
          return true;
        };
        p.oj = function() {
          return this.Ga() === 3;
        };
        navigator.userAgent.includes("Tizen") && (Tb = function() {
          return new qy();
        });
        function ry() {
          gy.apply(this, arguments);
        }
        la(ry, gy);
        ry.prototype.Ga = function() {
          return null;
        };
        ry.prototype.Ub = function() {
          return "Vizio";
        };
        ry.prototype.Ka = function() {
          return "TV";
        };
        ry.prototype.mc = function() {
          return false;
        };
        navigator.userAgent.includes("VIZIO SmartCast") && (Tb = function() {
          return new ry();
        });
        function sy() {
          gy.call(this);
          this.i = new Qb(function() {
            return navigator.userAgent.includes("DT_STB_BCM") || navigator.userAgent.includes("Sky_STB");
          });
          this.h = new Qb(function() {
            return navigator.userAgent.includes("SOPOpenBrowser");
          });
          this.g = new Qb(function() {
            if (navigator.userAgent.includes("DT_STB_BCM")) return 11;
            var a = navigator.userAgent.match(/Version\/(\d+)/);
            return a ? parseInt(a[1], 10) : (a = navigator.userAgent.match(/OS (\d+)(?:_\d+)?/)) ? parseInt(a[1], 10) : null;
          });
        }
        la(sy, gy);
        p = sy.prototype;
        p.Ga = function() {
          return this.g.value();
        };
        p.Ub = function() {
          return "WebKit STB";
        };
        p.Ka = function() {
          return "TV";
        };
        p.Ja = function() {
          return "WEBKIT";
        };
        p.mc = function() {
          return false;
        };
        p.vd = function() {
          var a = this.g.value();
          return a !== null ? a >= 15 : true;
        };
        p.Ud = function() {
          return this.h.value();
        };
        p.wc = function() {
          return Promise.resolve({ width: window2.screen.width * window2.devicePixelRatio, height: window2.screen.height * window2.devicePixelRatio });
        };
        p.mg = function() {
          return !this.i.value();
        };
        p.lg = function() {
          return false;
        };
        if (navigator.userAgent.includes("SOPOpenBrowser") || navigator.userAgent.includes("DT_STB_BCM") || navigator.userAgent.includes("Sky_STB") || !(!(navigator.vendor || "").includes("Apple") || /(?:iPhone|iPad|iPod)/.test(navigator.userAgent) || navigator.maxTouchPoints > 1 || navigator.userAgentData && navigator.userAgentData.platform && navigator.userAgentData.platform.toLowerCase() == "macos" || navigator.platform && navigator.platform.toLowerCase().includes("mac"))) Tb = function() {
          return new sy();
        };
        function ty() {
          gy.call(this);
          var a = this;
          this.h = uy();
          this.g = null;
          try {
            var b = new PalmServiceBridge();
            b.onservicecallback = function(c) {
              c = JSON.parse(c);
              a.g = c.vk["tv.model.supportHDR"] || c.vk["tv.config.supportDolbyHDRContents"] || false;
            };
            b.call("luna://com.webos.service.config/getConfigs", JSON.stringify({ Tn: ["tv.model.supportHDR", "tv.config.supportDolbyHDRContents"] }));
          } catch (c) {
            ab("WebOS: getConfigs call failed", c);
          }
        }
        la(ty, gy);
        p = ty.prototype;
        p.Ga = function() {
          return this.h;
        };
        p.Ub = function() {
          return "WebOS";
        };
        p.Ka = function() {
          return "TV";
        };
        p.Ja = function() {
          return "CHROMIUM";
        };
        p.mc = function() {
          return false;
        };
        p.vd = function() {
          var a = this.Ga();
          return a !== null ? a > 3 : gy.prototype.vd.call(this);
        };
        p.bd = function() {
          var a = this.Ga();
          return a !== null ? a > 6 : gy.prototype.bd.call(this);
        };
        p.Je = function() {
          var a = this.Ga();
          return a !== null ? a > 3 : gy.prototype.Je.call(this);
        };
        p.wc = function() {
          var a = { width: 1920, height: 1080 };
          try {
            var b = JSON.parse(window2.PalmSystem.deviceInfo);
            a.width = Math.max(1920, b.screenWidth);
            a.height = Math.max(1080, b.screenHeight);
          } catch (c) {
            ab("WebOS: Error detecting screen size, default screen size 1920x1080.");
          }
          return Promise.resolve(a);
        };
        p.ab = function(a) {
          gy.prototype.ab.call(this, a);
          this.Ga() === 3 && (a.streaming.crossBoundaryStrategy = "reset");
          a.streaming.shouldFixTimestampOffset = true;
          a.streaming.stallSkip = 0;
          return a;
        };
        p.Id = function(a) {
          return this.g == null ? (ab("WebOS: getConfigs call haven't finished"), gy.prototype.Id.call(this, a)) : this.g ? a ? "HLG" : "PQ" : "SDR";
        };
        function uy() {
          var a = null, b = navigator.userAgent.match(/Chrome\/(\d+)/);
          b && (a = parseInt(b[1], 10));
          switch (a) {
            case 38:
              return 3;
            case 53:
              return 4;
            case 68:
              return 5;
            case 79:
              return 6;
            case 87:
              return 22;
            case 94:
              return 23;
            case 108:
              return 24;
            case 120:
              return 25;
            default:
              return null;
          }
        }
        p.Yj = function() {
          return false;
        };
        p.ud = function() {
          var a = this.Ga();
          return a !== null ? a >= 6 : gy.prototype.ud.call(this);
        };
        if (navigator.userAgent.includes("Web0S")) {
          var vy = new ty();
          Tb = function() {
            return vy;
          };
        }
        ;
        function wy() {
          gy.call(this);
          this.g = navigator.userAgent.includes("Edge/");
          var a = navigator.userAgent.match(/Edge?\/(\d+)/);
          this.h = a ? parseInt(a[1], 10) : null;
        }
        la(wy, gy);
        p = wy.prototype;
        p.Ga = function() {
          return this.h;
        };
        p.Ub = function() {
          return "Xbox";
        };
        p.Ka = function() {
          return "CONSOLE";
        };
        p.Ja = function() {
          return this.g ? "EDGE" : "CHROMIUM";
        };
        p.Ud = function() {
          return true;
        };
        p.Bf = function() {
          return true;
        };
        p.Qj = function() {
          return this.g;
        };
        p.wc = function() {
          var a = { width: 1920, height: 1080 }, b = xy();
          if (b) try {
            var c = new b.Media.Protection.ProtectionCapabilities(), d = b.Media.Protection.ProtectionCapabilityResult;
            b = null;
            do
              b = c.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"', "com.microsoft.playready.recommendation");
            while (b === d.maybe);
            b === d.probably && (a.width = 3840, a.height = 2160);
          } catch (e) {
            ab("Xbox: Error detecting screen size, default screen size 1920x1080.");
          }
          return Promise.resolve(a);
        };
        p.ab = function(a) {
          gy.prototype.ab.call(this, a);
          a.drm.parseInbandPsshEnabled = this.g;
          a.drm.preferredKeySystems.push("com.microsoft.playready");
          this.g && (a.streaming.gapPadding = 0.01);
          return a;
        };
        p.oi = function() {
          return false;
        };
        function xy() {
          var a = null;
          try {
            a = typeof Windows !== "undefined" ? Windows : chrome.webview.hostObjects.sync.Windows;
          } catch (b) {
          }
          return a;
        }
        if (navigator.userAgent.includes("Xbox One") || xy() !== null) Tb = function() {
          return new wy();
        };
        function yy(a, b, c) {
          this.type = a;
          this.ma = b;
          this.segments = c || null;
        }
        function zy(a, b, c, d) {
          this.id = a;
          this.name = b;
          this.attributes = c;
          this.value = d === void 0 ? null : d;
        }
        zy.prototype.toString = function(a) {
          function b(e) {
            return e.name + "=" + (isNaN(Number(e.value)) ? '"' + e.value + '"' : e.value);
          }
          var c = "#" + this.name, d = this.attributes ? this.attributes.filter(function(e) {
            return a ? !a.has(e.name) : true;
          }).map(b) : [];
          this.value && d.unshift(this.value);
          d.length > 0 && (c += ":" + d.join(","));
          return c;
        };
        function Ay(a, b) {
          if (b) return a.toString();
          b = (/* @__PURE__ */ new Set()).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");
          return a.toString(b);
        }
        function By(a, b) {
          a = a.attributes.filter(function(c) {
            return c.name == b;
          });
          return a.length ? a[0] : null;
        }
        function Cy(a, b, c) {
          return (a = By(a, b)) ? a.value : c || null;
        }
        function Dy(a, b) {
          a = By(a, b);
          if (!a) throw new U(2, 4, 4023, b);
          return a.value;
        }
        function Ey(a, b, c) {
          c = c === void 0 ? [] : c;
          this.ma = b;
          this.g = a;
          this.Fc = c;
        }
        function Fy(a, b) {
          this.name = a;
          this.value = b;
        }
        ;
        function Gy(a, b) {
          return a.filter(function(c) {
            return c.name == b;
          });
        }
        function Hy(a, b) {
          return a.filter(function(c) {
            return Dy(c, "TYPE") == b;
          });
        }
        function Iy(a, b) {
          a = u(a);
          for (var c = a.next(); !c.done; c = a.next()) if (c = c.value, c.name === b) return c;
          return null;
        }
        function Jy(a, b, c) {
          c = c === void 0 ? 0 : c;
          return (a = Iy(a, b)) ? Number(a.value) : c;
        }
        function Ky(a, b, c) {
          return b ? Ly(a, [b], c) : [];
        }
        function Ly(a, b, c) {
          if (!b.length) return [];
          var d = b;
          c && c.size && (d = b.map(function(e) {
            return My(e, c);
          }));
          return mc(a, d);
        }
        function My(a, b) {
          if (!b || !b.size) return a;
          a = String(a).replace(/%7B/g, "{").replace(/%7D/g, "}");
          var c = a.match(/{\$\w*}/g);
          if (c) {
            c = u(c);
            for (var d = c.next(); !d.done; d = c.next()) {
              d = d.value;
              var e = d.slice(2, d.length - 1), f = b.get(e);
              if (f) a = a.replace(d, f);
              else throw new U(2, 4, 4039, e);
            }
          }
          return a;
        }
        ;
        function Ny() {
          this.g = 0;
        }
        function Oy(a, b) {
          b = Wb(b);
          b = b.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n").trim();
          var c = b.split(/\n+/m);
          if (!/^#EXTM3U($|[ \t\n])/m.test(c[0])) throw new U(2, 4, 4015);
          b = 0;
          for (var d = true, e = u(c), f = e.next(); !f.done; f = e.next()) if (f = f.value, /^#(?!EXT)/m.test(f) || d) d = false;
          else if (f = Py(a, f), --a.g, Qy.includes(f.name)) {
            b = 1;
            break;
          } else f.name == "EXT-X-STREAM-INF" && (d = true);
          e = [];
          d = true;
          for (f = 0; f < c.length; f++) {
            var g = c[f], h = c[f + 1];
            if (/^#(?!EXT)/m.test(g) || d) d = false;
            else {
              g = Py(a, g);
              if (Ry.includes(g.name)) {
                if (b != 1) throw new U(2, 4, 4017);
                g = c.splice(f, c.length - f);
                c = [];
                d = [];
                f = [];
                h = null;
                g = u(g);
                for (var k2 = g.next(); !k2.done; k2 = g.next()) k2 = k2.value, /^(#EXT)/.test(k2) ? (k2 = Py(a, k2), Qy.includes(k2.name) ? e.push(k2) : k2.name == "EXT-X-MAP" ? h = k2 : k2.name == "EXT-X-PART" ? f.push(k2) : k2.name == "EXT-X-PRELOAD-HINT" ? Cy(k2, "TYPE") == "PART" ? f.push(k2) : Cy(k2, "TYPE") == "MAP" && (k2.name = "EXT-X-MAP", h = k2) : d.push(k2)) : /^#(?!EXT)/m.test(k2) || (k2 = k2.trim(), h && d.push(h), c.push(new Ey(k2, d, f)), d = [], f = []);
                f.length && (h && d.push(h), c.push(new Ey("", d, f)));
                return new yy(b, e, c);
              }
              e.push(g);
              g.name == "EXT-X-STREAM-INF" && (g.attributes.push(new Fy("URI", h)), d = true);
            }
          }
          return new yy(b, e);
        }
        function Py(a, b) {
          a = a.g++;
          var c = b.match(/^#(EXT[^:]*)(?::(.*))?$/);
          if (!c) throw new U(2, 4, 4016, b);
          b = c[1];
          var d = c[2];
          c = [];
          var e;
          if (d) {
            d = new wd(d);
            var f;
            (f = yd(d, /^([^,=]+)(?:,|$)/g)) && (e = f[1]);
            for (var g = /([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g; f = yd(d, g); ) c.push(new Fy(f[1], f[2] || f[3])), xd(d);
          }
          return new zy(a, b, c, e);
        }
        var Qy = "EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "), Ry = "EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");
        function Sy() {
        }
        function Ty(a, b) {
          try {
            var c = Uy(a);
            return Pg({ uri: a, originalUri: a, data: c.data, headers: { "content-type": c.contentType }, originalRequest: b });
          } catch (d) {
            return Ng(d);
          }
        }
        function Uy(a) {
          var b = a.split(":");
          if (b.length < 2 || b[0] != "data") throw new U(2, 1, 1004, a);
          b = b.slice(1).join(":").split(",");
          if (b.length < 2) throw new U(2, 1, 1004, a);
          var c = b[0];
          a = window2.decodeURIComponent(b.slice(1).join(","));
          b = c.split(";");
          c = b[0];
          var d = false;
          b.length > 1 && b[b.length - 1] == "base64" && (d = true, b.pop());
          var e;
          d ? e = hc(a) : e = $b(a);
          return { data: e, contentType: c };
        }
        S("shaka.net.DataUriPlugin", Sy);
        Sy.parse = Ty;
        Wg("data", Ty);
        function Vy() {
          var a = this;
          this.g = this.h = null;
          this.G = 1;
          this.C = /* @__PURE__ */ new Map();
          this.L = /* @__PURE__ */ new Map();
          this.D = /* @__PURE__ */ new Map();
          this.D.set("video", /* @__PURE__ */ new Map());
          this.D.set("audio", /* @__PURE__ */ new Map());
          this.D.set(sc, /* @__PURE__ */ new Map());
          this.D.set("image", /* @__PURE__ */ new Map());
          this.Ec = (/* @__PURE__ */ new Map()).set("com.apple.streamingkeydelivery", function(b, c, d) {
            return Wy(a, b, c, d);
          }).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed", function(b) {
            var c = Dy(b, "METHOD");
            if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(c)) {
              var d = "cenc";
              c == "SAMPLE-AES" && (d = "cbcs");
              var e = Dy(b, "URI");
              c = Uy(e.split("?")[0]);
              e = e.split("?")[0];
              a.I.has(e) || (c = Kb(c.data), a.I.set(e, c));
              d = nc("com.widevine.alpha", d, [{ initDataType: "cenc", initData: a.I.get(e) }]);
              (b = Cy(b, "KEYID")) && d.keyIds.add(b.toLowerCase().substr(2));
              b = Promise.resolve(d);
            } else b = Promise.resolve(null);
            return b;
          }).set("com.microsoft.playready", function(b) {
            var c = Dy(b, "METHOD");
            if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(c)) {
              var d = "cenc";
              c == "SAMPLE-AES" && (d = "cbcs");
              b = Dy(b, "URI");
              b = Uy(b.split("?")[0]);
              b = Kb(b.data);
              c = new Uint8Array([
                154,
                4,
                240,
                121,
                152,
                64,
                66,
                134,
                171,
                146,
                230,
                91,
                224,
                136,
                95,
                149
              ]);
              c = Ah(b, c, /* @__PURE__ */ new Set(), 0);
              d = nc("com.microsoft.playready", d, [{ initDataType: "cenc", initData: c }]);
              if (b = Kd(["<PLAYREADY>", fc(b), "</PLAYREADY>"].join("\n"))) d.licenseServerUri = Cv(b);
              d = Promise.resolve(d);
            } else d = Promise.resolve(null);
            return d;
          }).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c", function(b) {
            var c = Dy(b, "METHOD");
            if (["SAMPLE-AES", "SAMPLE-AES-CTR"].includes(c)) {
              var d = "cenc";
              c == "SAMPLE-AES" && (d = "cbcs");
              var e = Dy(b, "URI");
              c = Uy(e.split("?")[0]);
              e = e.split("?")[0];
              a.I.has(e) || (c = Kb(c.data), a.I.set(e, c));
              d = nc("com.huawei.wiseplay", d, [{ initDataType: "cenc", initData: a.I.get(e) }]);
              (b = Cy(b, "KEYID")) && d.keyIds.add(b.toLowerCase().substr(2));
              b = Promise.resolve(d);
            } else b = Promise.resolve(null);
            return b;
          });
          this.jb = /* @__PURE__ */ new Set();
          this.i = /* @__PURE__ */ new Map();
          this.l = null;
          this.H = "";
          this.Oa = new Ny();
          this.M = -1;
          this.aa = Infinity;
          this.Y = this.Ic = this.ib = false;
          this.F = new Bf(function() {
            if (a.V && !a.g.continueLoadingWhenPaused && (a.S.Ea(a.V, "timeupdate"), a.V.paused)) {
              a.S.ua(a.V, "timeupdate", function() {
                return Xy(a);
              });
              return;
            }
            Xy(a);
          });
          this.Fa = Yy;
          this.m = null;
          this.fb = 0;
          this.u = Infinity;
          this.hb = this.Ma = this.R = 0;
          this.X = new Tg();
          this.J = /* @__PURE__ */ new Map();
          this.K = /* @__PURE__ */ new Map();
          this.xa = /* @__PURE__ */ new Map();
          this.oa = /* @__PURE__ */ new Map();
          this.O = /* @__PURE__ */ new Map();
          this.ra = /* @__PURE__ */ new Map();
          this.sa = /* @__PURE__ */ new Map();
          this.Hc = this.ea = false;
          this.Pb = new Lc(5);
          this.j = null;
          this.P = true;
          this.S = new Tc();
          this.A = this.V = null;
          this.kc = function() {
            return false;
          };
          this.I = /* @__PURE__ */ new Map();
        }
        p = Vy.prototype;
        p.configure = function(a, b) {
          var c = this.h && a.updatePeriod != this.g.updatePeriod && a.updatePeriod >= 0;
          this.g = a;
          b && (this.kc = b);
          this.j && this.j.configure(this.g);
          c && this.m && this.m.presentationTimeline.U() && this.F.La();
        };
        p.start = function(a, b) {
          var c = this, d;
          return Q(function(e) {
            return e.g == 1 ? (c.h = b, c.ea = b.isLowLatencyMode(), F(e, Zy(c, [a]).promise, 2)) : e.g != 3 ? (d = e.h, c.H = d.uri, F(e, $y(c, d.data), 3)) : e.return(c.m);
          });
        };
        p.stop = function() {
          this.F && (this.F.stop(), this.F = null);
          var a = [];
          this.X && (a.push(this.X.destroy()), this.X = null);
          this.g = this.h = null;
          this.jb.clear();
          this.m = null;
          this.i.clear();
          this.L.clear();
          this.K.clear();
          this.C.clear();
          this.xa.clear();
          this.oa.clear();
          this.O.clear();
          this.ra.clear();
          this.sa.clear();
          this.I.clear();
          this.j && this.j.destroy();
          this.S && (this.S.release(), this.S = null);
          return Promise.all(a);
        };
        p.update = function() {
          var a = this, b, c, d, e, f, g, h, k2, l, m, n, q;
          return Q(function(r) {
            if (r.g == 1) {
              if (!az(a)) return r.return();
              b = [];
              c = Array.from(a.i.values());
              a.u = Infinity;
              a.m.gapCount = 0;
              d = c.filter(function(t) {
                return t.stream.segmentIndex;
              });
              e = u(d);
              for (f = e.next(); !f.done; f = e.next()) g = f.value, b.push(bz(a, g));
              return F(r, Promise.all(b), 2);
            }
            cz(a, d.map(function(t) {
              return t.stream;
            }));
            h = d.some(function(t) {
              return t.pe == 0;
            });
            d.length && !h && (k2 = dz, ez(a, k2.jk), l = d.map(function(t) {
              return t.Bc;
            }), a.l.zb(Math.min.apply(Math, x(l))), a.h.updateDuration());
            h && fz(a);
            m = u(d);
            for (n = m.next(); !n.done; n = m.next()) q = n.value, q.stream.isAudioMuxedInVideo || !q.stream.segmentIndex || eg(q.stream.segmentIndex) || a.h.disableStream(q.stream);
            H(r);
          });
        };
        function gz(a, b) {
          return az(a) ? a.D.get(b.type) : b.Kf;
        }
        function bz(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P, O, M, R, W, wa, Y, Ka, Na;
          return Q(function(La) {
            switch (La.g) {
              case 1:
                if (b.stream.isAudioMuxedInVideo) return La.return();
                c = [];
                d = u(b.T());
                for (e = d.next(); !e.done; e = d.next()) f = e.value, g = new qb(f), h = g.g, b.lf && (b.Zb >= 0 && h.add("_HLS_msn", String(b.Zb)), b.$b >= 0 && h.add("_HLS_part", String(b.$b))), b.mf && h.add("_HLS_skip", "YES"), Hb(h) && ub(g, vb(h.toString())), c.push(g.toString());
                ra(La, 2);
                return F(La, Zy(a, c, true).promise, 4);
              case 4:
                k2 = La.h;
                ta(
                  La,
                  3
                );
                break;
              case 2:
                throw l = ua(La), a.h && a.h.disableStream(b.stream), l;
              case 3:
                if (!b.stream.segmentIndex) return La.return();
                m = Oy(a.Oa, k2.data);
                if (m.type != 1) throw new U(2, 4, 4017);
                n = k2.uri;
                n == k2.originalUri || b.T().includes(n) || b.Zf.push(n);
                q = Gy(m.ma, "EXT-X-DEFINE");
                r = hz(a, q, n);
                t = b.stream;
                w = gz(a, b);
                return F(La, iz(a, m, t.mimeType, b.T, r), 5);
              case 5:
                v = La.h;
                z = v.keyIds;
                y = v.drmInfos;
                A = v.encrypted;
                C = v.Fi;
                t.encrypted || !A || C || (t.encrypted = true);
                E = function(Ea, za) {
                  return Ea.size === za.size && [].concat(x(Ea)).every(function(Fa) {
                    return za.has(Fa);
                  });
                };
                E(t.keyIds, z) || (t.keyIds = z, t.drmInfos = y, a.h.newDrmInfo(t));
                D = jz(a, m, w, r, b.T, b.type);
                B = D.segments;
                if (G = D.bandwidth) t.bandwidth = G;
                I = lm(t);
                J = u(B);
                for (L = J.next(); !L.done; L = J.next()) K = L.value, K.ia && (K.ia.Od = I);
                t.segmentIndex.ze(B, a.l.Nb());
                B.length && (N = Jy(m.ma, "EXT-X-MEDIA-SEQUENCE", 0), O = (P = Iy(m.ma, "EXT-X-SKIP")) ? Number(Cy(P, "SKIPPED-SEGMENTS")) : 0, M = kz(N, B), R = M.Zb, W = M.$b, b.Zb = R + O, b.$b = W, wa = w.get(N), t.segmentIndex.cb(wa));
                if (Y = eg(t.segmentIndex)) b.md = Y.startTime, Ka = B[B.length - 1], b.Bc = Ka.endTime;
                if (Na = Iy(
                  m.ma,
                  "EXT-X-ENDLIST"
                )) b.pe = true;
                lz(a, m);
                mz(a, m.ma, t.type, r, b.T);
                H(La);
            }
          });
        }
        p.onExpirationUpdated = function() {
        };
        p.onInitialVariantChosen = function() {
        };
        p.banLocation = function(a) {
          this.j && this.j.banLocation(a);
        };
        p.setMediaElement = function(a) {
          this.V = a;
        };
        function nz(a, b, c) {
          c = c === void 0 ? false : c;
          for (var d = a.M == -1, e = u(b), f = e.next(); !f.done; f = e.next()) {
            f = f.value;
            var g = f.stream.segmentIndex, h = gz(a, f);
            if (g = eg(g)) {
              h = u(h);
              for (var k2 = h.next(); !k2.done; k2 = h.next()) {
                k2 = u(k2.value);
                var l = k2.next().value;
                if (k2.next().value == g.startTime) {
                  d && (a.M = Math.max(a.M, l));
                  f.Vg = l;
                  break;
                }
              }
            }
          }
          if (!(a.M < 0)) {
            for (b = u(b), d = b.next(); !d.done; d = b.next()) if (d = d.value, oz(a, d.type) || c) {
              if (e = d.stream.segmentIndex) {
                if (f = a.M - d.Vg, f > 0 && (e.g.splice(0, f), e = eg(e))) e = -e.startTime, d.stream.segmentIndex.offset(e), pz(a, d, e);
              }
            }
          }
        }
        function qz(a, b) {
          if (a.aa == Infinity) {
            b = u(b);
            for (var c = b.next(); !c.done; c = b.next()) c = eg(c.value.stream.segmentIndex), c != null && c.h != null && (a.aa = Math.min(a.aa, c.h));
          }
          b = a.aa;
          if (b != Infinity) {
            c = u(a.i.values());
            for (var d = c.next(); !d.done; d = c.next()) if (d = d.value, !oz(a, d.type)) {
              var e = d.stream.segmentIndex;
              if (e != null) {
                var f = eg(e);
                if (f) if (f.h == null) $a("Missing EXT-X-PROGRAM-DATE-TIME for stream", d.T(), "Expect AV sync issues!");
                else for (pz(a, d, f.h - b - f.startTime), d = u(e), e = d.next(); !e.done; e = d.next()) e.value.pi(b);
              }
            }
          }
        }
        function pz(a, b, c) {
          if (!(Math.abs(c) < 1e-3)) {
            b.md += c;
            b.Bc += c;
            a = gz(a, b);
            for (var d = u(a), e = d.next(); !e.done; e = d.next()) {
              var f = u(e.value);
              e = f.next().value;
              f = f.next().value;
              a.set(e, f + c);
            }
            b.T();
          }
        }
        function $y(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P, O, M, R, W, wa, Y, Ka, Na, La, Ea, za, Fa, Da, Aa;
          return Q(function(Ca) {
            switch (Ca.g) {
              case 1:
                c = uc;
                d = Oy(a.Oa, b);
                e = Gy(d.ma, "EXT-X-DEFINE");
                f = [];
                g = [];
                h = [];
                a.l = new yl(null, 0);
                a.l.sd(true);
                k2 = function() {
                  return [a.H];
                };
                l = null;
                m = /* @__PURE__ */ new Map();
                if (d.type == 1) return a.P = false, R = Gy(d.ma, "EXT-X-DEFINE"), m = hz(a, R, a.H), l = c.Ia, W = "", wa = /* @__PURE__ */ new Map(), F(Ca, rz(a, a.G++, m, d, k2, "", l, W, true, "Media Playlist", null, wa, null, false, null, false), 7);
                sz(a, e);
                n = Gy(d.ma, "EXT-X-MEDIA");
                q = Gy(d.ma, "EXT-X-STREAM-INF");
                r = Gy(d.ma, "EXT-X-IMAGE-STREAM-INF");
                t = Gy(d.ma, "EXT-X-I-FRAME-STREAM-INF");
                w = Gy(d.ma, "EXT-X-SESSION-KEY");
                v = Gy(d.ma, "EXT-X-SESSION-DATA");
                z = Gy(d.ma, "EXT-X-CONTENT-STEERING");
                tz(a, v);
                return F(Ca, uz(a, z), 4);
              case 4:
                if (!a.g.ignoreSupplementalCodecs) {
                  y = [];
                  A = u(q);
                  C = A.next();
                  for (E = {}; !C.done; E = { Wj: void 0 }, C = A.next()) if (D = C.value, B = Cy(D, "SUPPLEMENTAL-CODECS")) E.Wj = B.split(/\s*,\s*/).map(function(gb) {
                    return gb.split("/")[0];
                  }), G = D.attributes.map(/* @__PURE__ */ function(gb) {
                    return function(ib) {
                      var jb = ib.name, Ab = ib.value;
                      jb == "CODECS" && (Ab = gb.Wj.join(","), ib = ib.value.split(","), ib.length > 1 && (ib = qc("audio", ib)) && (Ab += "," + ib));
                      return new Fy(jb, Ab);
                    };
                  }(E)), y.push(new zy(D.id, D.name, G, null));
                  q.push.apply(q, x(y));
                  I = [];
                  J = u(t);
                  L = J.next();
                  for (K = {}; !L.done; K = { Xj: void 0 }, L = J.next()) if (N = L.value, P = Cy(N, "SUPPLEMENTAL-CODECS")) K.Xj = P.split(/\s*,\s*/).map(function(gb) {
                    return gb.split("/")[0];
                  }), O = N.attributes.map(/* @__PURE__ */ function(gb) {
                    return function(ib) {
                      var jb = ib.name;
                      ib = ib.value;
                      jb == "CODECS" && (ib = gb.Xj.join(","));
                      return new Fy(jb, ib);
                    };
                  }(K)), I.push(new zy(
                    N.id,
                    N.name,
                    O,
                    null
                  ));
                  t.push.apply(t, x(I));
                }
                vz(a, q);
                wz(a, n);
                M = xz(a, t);
                return F(Ca, yz(a, q, w, n, k2, a.C, M), 5);
              case 5:
                return f = Ca.h, g = zz(a, n), F(Ca, Az(a, r, t), 6);
              case 6:
                h = Ca.h;
                Ca.B(3);
                break;
              case 7:
                Y = Ca.h, a.i.set(a.H, Y), Y.stream && (Ka = lm(Y.stream), Y.stream.segmentIndex.Lb(function(gb) {
                  gb.ia && (gb.ia.Od = Ka);
                })), l = Y.stream.type, Na = true, a.g.disableAudio && Y.type == "audio" ? Na = false : a.g.disableVideo && Y.type == "video" && !Y.stream.codecs.includes(",") && (Na = false), Na && f.push({ id: 0, language: yc(W || "und"), disabledUntilTime: 0, primary: true, audio: Y.type == "audio" ? Y.stream : null, video: Y.type == "video" ? Y.stream : null, bandwidth: Y.stream.bandwidth || 0, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] });
              case 3:
                if (!a.h) throw new U(2, 7, 7001);
                Bz(a, d);
                d.type == 1 && (az(a) && (Cz(a, d), La = a.u, a.F.$(La)), Ea = Array.from(a.i.values()), Dz(a, Ea), fz(a), mz(a, d.ma, l, m, k2));
                a.m = {
                  presentationTimeline: a.l,
                  variants: f,
                  textStreams: g,
                  imageStreams: h,
                  offlineSessionIds: [],
                  sequenceMode: a.g.hls.sequenceMode,
                  ignoreManifestTimestampsInSegmentsMode: a.g.hls.ignoreManifestTimestampsInSegmentsMode,
                  type: "HLS",
                  serviceDescription: null,
                  nextUrl: null,
                  periodCount: 1,
                  gapCount: 0,
                  isLowLatency: false,
                  startTime: a.A
                };
                if (a.Y || !a.g.hls.disableCodecGuessing) {
                  Ca.B(8);
                  break;
                }
                za = [];
                Fa = u(a.m.variants);
                for (Da = Fa.next(); !Da.done; Da = Fa.next()) Aa = Da.value, Aa.audio && Aa.audio.codecs === "" && za.push(Aa.audio.createSegmentIndex()), Aa.video && Aa.video.codecs === "" && za.push(Aa.video.createSegmentIndex());
                return F(Ca, Promise.all(za), 8);
              case 8:
                a.h.makeTextStreamsForClosedCaptions(a.m), H(Ca);
            }
          });
        }
        function Ez(a, b) {
          var c, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A;
          return Q(function(C) {
            if (C.g == 1) {
              c = Bm(a.g.hls.mediaPlaylistFullMimeType);
              if (!b.length) return C.return(c);
              d = Fz(a, b);
              e = d.segment;
              f = d.segmentIndex;
              g = e.T();
              h = g[0];
              k2 = new qb(h);
              l = k2.qb.split(".").pop();
              return (m = Gz.get(l)) ? C.return(Bm(m)) : F(C, Promise.all([Hz(a, e.ia, 0), Hz(a, e, f)]), 2);
            }
            n = C.h;
            q = n[1].mimeType;
            r = n[0].data;
            t = n[1].data;
            w = "mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" ");
            v = ["audio/mp4", "video/mp4", "video/iso.segment"];
            z = e.ia || v.includes(q);
            if (!z && vk(Kb(t))) {
              var E = t, D = a.g.disableAudio, B = a.g.disableVideo, G = a.g.disableText;
              var I = Kb(E);
              var J = new nk().parse(I), L = J.le();
              I = J.xh();
              var K = [], N = false, P = false;
              if (!D) switch (L.audio) {
                case "aac":
                case "aac-loas":
                  J.Db().length && (K.push("mp4a.40.2"), N = true);
                  break;
                case "mp3":
                  J.Db().length && (K.push("mp4a.40.34"), N = true);
                  break;
                case "ac3":
                  J.Db().length && (K.push("ac-3"), N = true);
                  break;
                case "ec3":
                  J.Db().length && (K.push("ec-3"), N = true);
                  break;
                case "opus":
                  J.Db().length && (K.push("opus"), N = true);
              }
              if (!B) switch (L.video) {
                case "avc":
                  I.codec ? K.push(I.codec) : K.push("avc1.42E01E");
                  P = true;
                  break;
                case "hvc":
                  I.codec ? K.push(I.codec) : K.push("hvc1.1.6.L93.90");
                  P = true;
                  break;
                case "av1":
                  K.push("av01.0.01M.08"), P = true;
              }
              if (K.length) {
                D = N && !P;
                B = /* @__PURE__ */ new Map();
                if (P && !G) {
                  G = new od("video/mp2t");
                  G.Uf(E);
                  E = u(G.zg());
                  for (P = E.next(); !P.done; P = E.next()) P = P.value, B.set(P, P);
                  G.ce();
                }
                I = { type: D ? "audio" : "video", mimeType: "video/mp2t", codecs: K.join(", "), language: null, height: I.height, width: I.width, channelCount: null, sampleRate: null, closedCaptions: B, Ne: null, colorGamut: null, frameRate: I.frameRate };
              } else I = null;
              if (y = I) return C.return(y);
            } else if (z || w.includes(l)) {
              if (A = Cm(r, t, a.g.disableText)) return C.return(A);
            }
            return q ? C.return(Bm(q)) : C.return(c);
          });
        }
        function Hz(a, b, c) {
          var d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                if (!b) return l.return({ mimeType: null, data: null });
                d = fh;
                e = Hm(b.T(), b.Tc(), b.Qc(), a.g.retryParameters);
                f = b instanceof yj ? 1 : 0;
                return F(l, Iz(a, e, d, { type: f }).promise, 2);
              case 2:
                g = l.h;
                h = g.data;
                if (!b.aesKey) {
                  l.B(3);
                  break;
                }
                return F(l, Gm(h, b.aesKey, c), 4);
              case 4:
                h = l.h;
              case 3:
                return b instanceof yj ? b.He(h, true) : b.He(h), (k2 = g.headers["content-type"]) && (k2 = k2.split(";")[0].toLowerCase()), l.return({ mimeType: k2, data: h });
            }
          });
        }
        function fz(a) {
          if (az(a)) {
            if (a.Fa == Jz) {
              for (var b = Infinity, c = Infinity, d = u(a.i.values()), e = d.next(); !e.done; e = d.next()) e = e.value, e.stream.segmentIndex && e.stream.type != "text" && !e.stream.isAudioMuxedInVideo && (b = Math.min(b, e.Bc), c = Math.min(c, e.md));
              b = b - c || 0;
              isNaN(a.g.availabilityWindowOverride) || (b = a.g.availabilityWindowOverride);
              a.l.hg(b);
            }
          } else a.l.zb(Kz(a));
          if (!a.l.u) for (b = u(a.i.values()), c = b.next(); !c.done; c = b.next()) c = c.value, !c.stream.segmentIndex || c.type != "audio" && c.type != "video" || (c = eg(c.stream.segmentIndex)) && c.h && a.l.ei(c.h);
          a.l.Jf();
        }
        function sz(a, b) {
          var c = new qb(a.H).g;
          b = u(b);
          for (var d = b.next(); !d.done; d = b.next()) {
            var e = d.value;
            d = Cy(e, "NAME");
            var f = Cy(e, "VALUE");
            e = Cy(e, "QUERYPARAM");
            d && f && (a.C.has(d) || a.C.set(d, f));
            e && (d = c.get(e)[0]) && !a.C.has(d) && a.C.set(e, d);
          }
        }
        function hz(a, b, c) {
          c = new qb(c).g;
          var d = /* @__PURE__ */ new Map();
          b = u(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            var f = e.value, g = Cy(f, "NAME"), h = Cy(f, "VALUE");
            e = Cy(f, "QUERYPARAM");
            f = Cy(f, "IMPORT");
            g && h && (d.has(g) || d.set(g, h));
            e && (g = c.get(e)[0]) && !d.has(g) && d.set(e, g);
            f && (e = a.C.get(f)) && d.set(f, e);
          }
          return d;
        }
        function vz(a, b) {
          b = u(b);
          for (var c = b.next(); !c.done; c = b.next()) {
            var d = c.value, e = Cy(d, "AUDIO");
            c = Cy(d, "VIDEO");
            var f = Cy(d, "SUBTITLES");
            d = Lz(a, d);
            if (f) {
              var g = qc(sc, d);
              a.K.set(f, g);
              Qc(d, g);
            }
            e && (f = qc("audio", d), f || (f = a.g.hls.defaultAudioCodec), a.K.set(e, f));
            c && (e = qc("video", d), e || (e = a.g.hls.defaultVideoCodec), a.K.set(c, e));
          }
        }
        function tz(a, b) {
          b = u(b);
          for (var c = b.next(); !c.done; c = b.next()) {
            var d = c.value, e = Cy(d, "DATA-ID");
            c = Cy(d, "URI");
            var f = Cy(d, "LANGUAGE");
            d = Cy(d, "VALUE");
            e = (/* @__PURE__ */ new Map()).set("id", e);
            c && e.set("uri", Ky([a.H], c, a.C)[0]);
            f && e.set("language", f);
            d && e.set("value", d);
            c = new T("sessiondata", e);
            if (a.h) a.h.onEvent(c);
          }
        }
        function uz(a, b) {
          var c, d, e, f, g, h;
          return Q(function(k2) {
            if (!a.h || !a.g) return k2.return();
            d = u(b);
            for (e = d.next(); !e.done; e = d.next()) if (f = e.value, g = Cy(f, "PATHWAY-ID"), h = Cy(f, "SERVER-URI"), g && h) {
              a.j = new Aw(a.h);
              a.j.configure(a.g);
              a.j.i = [a.H];
              a.j.setManifestType("HLS");
              a.j.h = g;
              c = Bw(a.j, h);
              break;
            }
            return F(k2, c, 0);
          });
        }
        function zz(a, b) {
          var c = Hy(b, "SUBTITLES");
          b = c.map(function(g) {
            if (a.g.disableText) return null;
            try {
              return Mz(a, [g], /* @__PURE__ */ new Map()).stream;
            } catch (h) {
              if (a.g.hls.ignoreTextStreamFailures) return null;
              throw h;
            }
          });
          c = u(c);
          for (var d = c.next(); !d.done; d = c.next()) {
            var e = Dy(d.value, "GROUP-ID");
            if (d = a.K.get(e)) {
              if (e = a.L.get(e)) {
                e = u(e);
                for (var f = e.next(); !f.done; f = e.next()) f = f.value, f.stream.codecs = d, f.stream.mimeType = Nz(sc, d) || Oz(sc), Pz(f.stream);
              }
            }
          }
          return b.filter(function(g) {
            return g;
          });
        }
        function Pz(a) {
          var b = /* @__PURE__ */ new Set([df(a.mimeType, a.codecs)]);
          a.segmentIndex && a.segmentIndex.Lb(function(c) {
            c.mimeType && b.add(df(c.mimeType, a.codecs));
          });
          a.fullMimeTypes = b;
        }
        function Az(a, b, c) {
          var d, e;
          return Q(function(f) {
            if (f.g == 1) return d = b.map(function(g) {
              var h, k2, l;
              return Q(function(m) {
                if (m.g == 1) {
                  if (h = a.g.disableThumbnails) return m.return(null);
                  ra(m, 2);
                  return F(m, Qz(a, g), 4);
                }
                if (m.g != 2) return k2 = m.h, m.return(k2.stream);
                l = ua(m);
                if (a.g.hls.ignoreImageStreamFailures) return m.return(null);
                throw l;
              });
            }).concat(c.map(function(g) {
              if (a.g.disableThumbnails) return null;
              try {
                var h = Rz(a, g);
                return h.stream.type !== "image" ? null : h.stream;
              } catch (k2) {
                if (a.g.hls.ignoreImageStreamFailures) return null;
                throw k2;
              }
            })), F(f, Promise.all(d), 2);
            e = f.h;
            return f.return(e.filter(function(g) {
              return g;
            }));
          });
        }
        function Sz(a, b, c) {
          b = b.filter(function(h) {
            var k2 = Cy(h, "URI") || "";
            h = Cy(h, "TYPE");
            return h != "SUBTITLES" && (k2 != "" || h == "AUDIO");
          });
          var d = {};
          b = u(b);
          for (var e = b.next(); !e.done; e = b.next()) {
            e = e.value;
            var f = Ay(e, !a.j);
            d[f] ? d[f].push(e) : d[f] = [e];
          }
          for (var g in d) Mz(a, d[g], c, false);
        }
        function xz(a, b) {
          return b.map(function(c) {
            c = Rz(a, c);
            return c.stream.type !== "video" ? null : c.stream;
          }).filter(function(c) {
            return c;
          });
        }
        function yz(a, b, c, d, e, f, g) {
          var h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P, O, M, R, W, wa, Y, Ka, Na, La, Ea, za, Fa;
          return Q(function(Da) {
            switch (Da.g) {
              case 1:
                h = [];
                k2 = /* @__PURE__ */ new Set();
                if (a.g.ignoreDrmInfo || !(c.length > 0)) {
                  Da.B(2);
                  break;
                }
                l = u(c);
                m = l.next();
              case 3:
                if (m.done) {
                  Da.B(2);
                  break;
                }
                n = m.value;
                q = Dy(n, "METHOD");
                r = Cy(n, "KEYFORMAT") || "identity";
                t = null;
                if (q == "NONE") {
                  Da.B(4);
                  break;
                }
                if (Tz(q)) {
                  w = Ky(e(), Dy(n, "URI"), f);
                  v = w.sort().join("");
                  a.O.has(v) || (z = $g(w, a.g.retryParameters), y = Iz(a, z, 6).promise, a.O.set(v, y));
                  Da.B(4);
                  break;
                }
                if (r == "identity") return F(Da, Uz(a, n, "", e, null, f), 12);
                A = a.Ec.get(r);
                if (!A) {
                  C = null;
                  Da.B(10);
                  break;
                }
                return F(Da, A(n, "", null), 11);
              case 11:
                C = Da.h;
              case 10:
                t = C;
                Da.B(6);
                break;
              case 12:
                t = Da.h;
              case 6:
                if (t) {
                  if (t.keyIds) for (E = u(t.keyIds), D = E.next(); !D.done; D = E.next()) B = D.value, k2.add(B);
                  h.push(t);
                }
              case 4:
                m = l.next();
                Da.B(3);
                break;
              case 2:
                G = {};
                I = u(b);
                for (J = I.next(); !J.done; J = I.next()) L = J.value, K = Ay(L, !a.j), G[K] ? G[K].push(L) : G[K] = [L];
                N = [];
                for (P in G) O = G[P], M = O[0], R = Cy(M, "FRAME-RATE"), W = Number(Cy(M, "AVERAGE-BANDWIDTH")) || Number(Dy(
                  M,
                  "BANDWIDTH"
                )), wa = Cy(M, "RESOLUTION"), Y = u(wa ? wa.split("x") : [null, null]), Ka = Y.next().value, Na = Y.next().value, La = Cy(M, "VIDEO-RANGE"), (Ea = Cy(M, "REQ-VIDEO-LAYOUT")) && Ea.includes(",") && (za = Ea.split(",").filter(function(Aa) {
                  return Aa == "CH-STEREO" || Aa == "CH-MONO";
                }), Ea = za[0]), Ea = Ea || "CH-MONO", Fa = Vz(a, O, d), N.push.apply(N, x(Wz(a, Fa.audio, Fa.video, W, Ka, Na, R, La, Ea, h, k2, g)));
                return Da.return(N.filter(function(Aa) {
                  return Aa != null;
                }));
            }
          });
        }
        function Vz(a, b, c) {
          for (var d = { audio: [], video: [] }, e = /* @__PURE__ */ new Map(), f = [], g = false, h = false, k2 = u(b), l = k2.next(); !l.done; l = k2.next()) {
            var m = l.value;
            l = Cy(m, "AUDIO");
            var n = Cy(m, "VIDEO"), q = l || n;
            q && (f.includes(q) || f.push(q), (m = Cy(m, "PATHWAY-ID")) && e.set(q, m), l ? g = true : n && (h = true));
          }
          f.length && c.length && (c = c.filter(function(t) {
            return f.includes(Dy(t, "GROUP-ID"));
          }), Sz(a, c, e));
          c = (e = f.sort().join(",")) && a.L.has(e) ? a.L.get(e) : [];
          g ? d.audio.push.apply(d.audio, x(c)) : h && d.video.push.apply(d.video, x(c));
          h = false;
          var r = b.map(function(t) {
            return Dy(
              t,
              "URI"
            );
          });
          g = d.audio.find(function(t) {
            return t && t.T().find(function(w) {
              return r.includes(w);
            });
          });
          c = Lz(a, b[0]);
          k2 = qc("video", c);
          (l = qc("audio", c)) && !k2 ? (g = "audio", h = d.audio.length > 0 && !d.audio.some(function(t) {
            return t.stream.isAudioMuxedInVideo;
          })) : !d.audio.length && !d.video.length && l && k2 ? (g = "video", c = [[k2, l].join()]) : d.audio.length && g ? (g = "audio", h = true) : g = d.video.length && !d.audio.length ? "audio" : "video";
          h || (b = Xz(a, b, c, g), e && a.g.enableAudioGroups && (b.stream.groupId = e), b.stream.type == "audio" && g === "audio" && d.audio.some(function(t) {
            return t.stream.isAudioMuxedInVideo;
          }) && (a = d.audio[0].stream, b.stream.language = a.language, b.stream.channelsCount = a.channelsCount, b.stream.label = a.label, b.stream.audioSamplingRate = a.audioSamplingRate, b.stream.originalId = a.originalId, b.stream.originalLanguage = a.originalLanguage), d[b.stream.type] = [b]);
          return d;
        }
        function Lz(a, b) {
          b = Cy(b, "CODECS") || "";
          a.Y = b.length > 0;
          a.Y || a.g.hls.disableCodecGuessing || (b = [], a.g.disableVideo || b.push(a.g.hls.defaultVideoCodec), a.g.disableAudio || b.push(a.g.hls.defaultAudioCodec), b = b.join(","));
          return Dm(b.split(/\s*,\s*/));
        }
        function kA(a) {
          return (a = Cy(a, "CHANNELS")) ? parseInt(a.split("/")[0], 10) : null;
        }
        function lA(a) {
          return (a = Cy(a, "SAMPLE-RATE")) ? parseInt(a, 10) : null;
        }
        function mA(a) {
          a = Cy(a, "CHANNELS");
          if (!a) return false;
          a = a.split("/");
          return a.length != 2 ? false : a[1] === "JOC" || a[1].includes("ATMOS");
        }
        function nA(a) {
          a = Dy(a, "TYPE").toLowerCase();
          a == "subtitles" && (a = sc);
          return a;
        }
        function Wz(a, b, c, d, e, f, g, h, k2, l, m, n) {
          for (var q = u(c), r = q.next(); !r.done; r = q.next()) oA(r.value.stream, e, f, g, h, k2, null);
          e = a.g.disableVideo;
          if (!c.length || e) c = [null];
          e && (b = b.filter(function(z) {
            return !z.stream.isAudioMuxedInVideo;
          }));
          e = a.g.disableAudio;
          if (!b.length || e) b = [null];
          e = [];
          b = u(b);
          for (f = b.next(); !f.done; f = b.next()) for (f = f.value, g = u(c), h = g.next(); !h.done; h = g.next()) {
            var t = h.value;
            if (h = f ? f.stream : null) h.drmInfos = l, h.keyIds = m;
            if (k2 = t ? t.stream : null) k2.drmInfos = l, k2.keyIds = m, a.g.disableIFrames || og(k2, n);
            k2 && !h && (k2.bandwidth = d);
            !k2 && h && (h.bandwidth = d);
            q = f ? f.stream.drmInfos : null;
            r = t ? t.stream.drmInfos : null;
            t = t ? t.T().sort().join(",") : "";
            var w = f ? f.T().sort().join(",") : "", v = [];
            h && h.codecs && v.push(h.codecs);
            k2 && k2.codecs && v.push(k2.codecs);
            t = [t, w, v.sort()].join("-");
            h && k2 && !wg(q, r) || a.jb.has(t) || (h = { id: a.G++, language: h ? h.language : "und", disabledUntilTime: 0, primary: !!h && h.primary || !!k2 && k2.primary, audio: h, video: k2, bandwidth: d, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] }, e.push(h), a.jb.add(t));
          }
          return e;
        }
        function wz(a, b) {
          b = Hy(b, "CLOSED-CAPTIONS");
          a.P = b.length == 0;
          b = u(b);
          for (var c = b.next(); !c.done; c = b.next()) {
            var d = c.value, e = Cy(d, "LANGUAGE");
            c = yc(e || "und");
            e || (e = Cy(d, "NAME")) && (c = e);
            e = Dy(d, "GROUP-ID");
            d = Dy(d, "INSTREAM-ID").replace("SERVICE", "svc");
            a.J.get(e) || a.J.set(e, /* @__PURE__ */ new Map());
            a.J.get(e).set(d, c);
          }
        }
        function Mz(a, b, c, d) {
          d = d === void 0 ? true : d;
          for (var e = [], f = [], g = /* @__PURE__ */ new Map(), h = u(b), k2 = h.next(), l = {}; !k2.done; l = { dj: void 0 }, k2 = h.next()) k2 = k2.value, l.dj = ++a.G, l = /* @__PURE__ */ function(w) {
            return function() {
              return "shaka://hls-muxed" + w.dj;
            };
          }(l), l = d ? Dy(k2, "URI") : Cy(k2, "URI") || l(), k2 = Dy(k2, "GROUP-ID"), e.push(l), f.push(k2), g.set(k2, l);
          d = f.sort().join(",");
          k2 = b[0];
          b = "";
          h = nA(k2);
          if (h == sc) b = Cy(k2, "CODECS") || "";
          else for (f = u(f), l = f.next(); !l.done; l = f.next()) if (l = l.value, a.K.has(l)) {
            b = a.K.get(l);
            break;
          }
          f = e.sort().join(",");
          if (a.i.has(f)) return a.i.get(f);
          l = a.G++;
          if (a.j) {
            g = u(g);
            for (var m = g.next(); !m.done; m = g.next()) {
              var n = u(m.value);
              m = n.next().value;
              n = n.next().value;
              (m = c.get(m)) && Ew(a.j, l, m, n);
            }
          }
          c = Cy(k2, "LANGUAGE");
          g = Cy(k2, "NAME");
          m = Cy(k2, "DEFAULT") == "YES";
          n = h == "audio" ? kA(k2) : null;
          var q = h == "audio" ? mA(k2) : false, r = Cy(k2, "CHARACTERISTICS"), t = Cy(k2, "FORCED") == "YES";
          k2 = h == "audio" ? lA(k2) : null;
          e = pA(a, l, e, b, h, c, m, g, n, null, r, t, k2, q);
          e.stream && a.g.enableAudioGroups && (e.stream.groupId = d);
          a.L.has(d) ? a.L.get(d).push(e) : a.L.set(d, [e]);
          a.i.set(f, e);
          return e;
        }
        function Qz(a, b) {
          var c, d, e, f, g, h, k2, l, m, n;
          return Q(function(q) {
            if (q.g == 1) {
              c = Dy(b, "URI");
              d = Cy(b, "CODECS", "jpeg") || "";
              if (a.i.has(c)) return q.return(a.i.get(c));
              e = Cy(b, "LANGUAGE");
              f = Cy(b, "NAME");
              g = Cy(b, "CHARACTERISTICS");
              h = pA(a, a.G++, [c], d, "image", e, false, f, null, null, g, false, null, false);
              return (k2 = Cy(b, "RESOLUTION")) ? F(q, h.stream.createSegmentIndex(), 3) : q.B(2);
            }
            q.g != 2 && (l = eg(h.stream.segmentIndex), m = l.tilesLayout) && (h.stream.width = Number(k2.split("x")[0]) * Number(m.split("x")[0]), h.stream.height = Number(k2.split("x")[1]) * Number(m.split("x")[1]));
            if (n = Cy(b, "BANDWIDTH")) h.stream.bandwidth = Number(n);
            a.i.set(c, h);
            return q.return(h);
          });
        }
        function Rz(a, b) {
          var c = "video", d = Dy(b, "URI"), e = Cy(b, "CODECS") || "";
          e == "mjpg" && (c = "image");
          if (a.i.has(d)) return a.i.get(d);
          var f = Cy(b, "LANGUAGE"), g = Cy(b, "NAME"), h = Cy(b, "CHARACTERISTICS");
          c = pA(a, a.G++, [d], e, c, f, false, g, null, null, h, false, null, false);
          e = Cy(b, "RESOLUTION");
          f = u(e ? e.split("x") : [null, null]);
          e = f.next().value;
          f = f.next().value;
          c.stream.width = Number(e) || void 0;
          c.stream.height = Number(f) || void 0;
          if (b = Cy(b, "BANDWIDTH")) c.stream.bandwidth = Number(b);
          a.i.set(d, c);
          return c;
        }
        function Xz(a, b, c, d) {
          for (var e = a.G++, f = [], g = u(b), h = g.next(); !h.done; h = g.next()) {
            var k2 = h.value;
            h = Dy(k2, "URI");
            k2 = Cy(k2, "PATHWAY-ID");
            a.j && k2 && Ew(a.j, e, k2, h);
            f.push(h);
          }
          g = f.sort().join(",") + c.sort().join(",");
          if (a.i.has(g)) return a.i.get(g);
          h = f.join(",");
          a: {
            b = Cy(b[0], "CLOSED-CAPTIONS");
            if (d == "video") {
              if (a.g.disableText) {
                a.P = false;
                b = null;
                break a;
              }
              if (b) {
                if (b != "NONE") {
                  b = a.J.get(b);
                  break a;
                }
                a.P = false;
              } else if (!b && a.J.size) for (b = u(a.J.keys()), b = b.next(); !b.done; b = b.next()) {
                b = a.J.get(b.value);
                break a;
              }
            }
            b = null;
          }
          c = pc(d, c);
          d = pA(a, e, f, c, d, null, false, h, null, b, null, false, null, false);
          a.i.set(g, d);
          return d;
        }
        function pA(a, b, c, d, e, f, g, h, k2, l, m, n, q, r) {
          function t(C) {
            var E, D, B, G, I, J, L, K, N, P, O, M, R, W, wa, Y, Ka, Na, La, Ea;
            return Q(function(za) {
              switch (za.g) {
                case 1:
                  return E = uc, ra(za, 2), F(za, C.promise, 4);
                case 4:
                  D = za.h;
                  if (C.aborted) return za.return();
                  B = D.uri;
                  B != D.originalUri && (G = z.T(), G.includes(B) || z.Zf.push(B));
                  I = Oy(a.Oa, D.data);
                  if (I.type != 1) throw new U(2, 4, 4017);
                  J = Gy(I.ma, "EXT-X-DEFINE");
                  L = hz(a, J, B);
                  K = false;
                  (!a.Y && a.g.hls.disableCodecGuessing || a.P && e == E.Ia && !a.g.hls.disableClosedCaptionsDetection) && I.segments.length > 0 && (a.P = false, K = true);
                  N = !a.Y && a.g.hls.disableCodecGuessing;
                  P = az(a);
                  return F(za, rz(a, 0, L, I, w, d, e, f, g, h, k2, l, m, n, q, r, void 0, K, N), 5);
                case 5:
                  O = za.h;
                  if (C.aborted) return za.return();
                  M = O.stream;
                  Bz(a, I);
                  az(a) && !P && Cz(a, I);
                  z.md = O.md;
                  z.Bc = O.Bc;
                  z.mf = O.mf;
                  z.lf = O.lf;
                  z.pe = O.pe;
                  z.Kf = O.Kf;
                  z.Zb = O.Zb;
                  z.$b = O.$b;
                  v.segmentIndex = M.segmentIndex;
                  v.encrypted = M.encrypted;
                  v.drmInfos = M.drmInfos;
                  v.keyIds = M.keyIds;
                  v.mimeType = M.mimeType;
                  v.bandwidth = v.bandwidth || M.bandwidth;
                  v.codecs = v.codecs || M.codecs;
                  v.closedCaptions = v.closedCaptions || M.closedCaptions;
                  v.width = v.width || M.width;
                  v.height = v.height || M.height;
                  v.hdr = v.hdr || M.hdr;
                  v.colorGamut = v.colorGamut || M.colorGamut;
                  v.frameRate = v.frameRate || M.frameRate;
                  v.language == "und" && M.language != "und" && (v.language = M.language);
                  v.language = v.language || M.language;
                  v.channelsCount = v.channelsCount || M.channelsCount;
                  v.audioSamplingRate = v.audioSamplingRate || M.audioSamplingRate;
                  Pz(v);
                  v.drmInfos.length && a.h.newDrmInfo(v);
                  R = false;
                  if (!l && v.closedCaptions || l && v.closedCaptions && l.size != v.closedCaptions.size) R = true;
                  a.m && R && a.h.makeTextStreamsForClosedCaptions(a.m);
                  e == E.Va && (W = eg(M.segmentIndex)) && W.ia && (v.mimeType = "application/mp4", Pz(v));
                  wa = lm(v);
                  v.segmentIndex.Lb(function(Fa) {
                    Fa.ia && (Fa.ia.Od = wa);
                  });
                  qA(a) && (a.Ic ? Dz(a, [z]) : (a.Ic = true, Y = Array.from(a.i.values()), Ka = Y.filter(function(Fa) {
                    return Fa.stream.segmentIndex;
                  }), Dz(a, Ka), fz(a), Na = a.u, Na > 0 && a.F.$(Na)));
                  mz(a, I.ma, v.type, L, w);
                  a.m && (a.m.startTime = a.A);
                  ta(za, 0);
                  break;
                case 2:
                  La = ua(za);
                  v.closeSegmentIndex();
                  if (La.code === 7001) return za.return();
                  Ea = a.h.disableStream(v);
                  if (!Ea) throw La;
                  H(za);
              }
            });
          }
          function w() {
            return a.j && c.length > 1 ? Fw(a.j, b) : z.Zf.concat(Ly([a.H], c, a.C));
          }
          var v = rA(a, d, e, f, g, h, k2, l, m, n, q, r);
          c.some(function(C) {
            return C.startsWith("shaka://hls-muxed");
          }) && (v.isAudioMuxedInVideo = true, v.mimeType = "video/mp2t", Pz(v));
          var z = { stream: v, type: e, Zf: [], md: 0, Bc: 0, Kf: /* @__PURE__ */ new Map(), mf: false, lf: false, pe: false, Vg: -1, Zb: -1, $b: -1, T: w }, y = null, A;
          v.createSegmentIndex = function() {
            if (y) return y;
            if (v.isAudioMuxedInVideo) return v.segmentIndex = new Xl([]), Promise.resolve();
            A = Zy(a, z.T(), true);
            return y = new Promise(function(C) {
              C(t(A));
            });
          };
          v.closeSegmentIndex = function() {
            y && !v.segmentIndex && A.abort();
            v.segmentIndex && (v.segmentIndex.release(), v.segmentIndex = null);
            y = null;
          };
          return z;
        }
        function Kz(a) {
          var b = Infinity;
          a = u(a.i.values());
          for (var c = a.next(); !c.done; c = a.next()) c = c.value, c.stream.segmentIndex && c.stream.type != "text" && !c.stream.isAudioMuxedInVideo && (b = Math.min(b, c.Bc));
          return b;
        }
        function cz(a, b) {
          var c = [];
          b = u(b);
          for (var d = b.next(); !d.done; d = b.next()) d = d.value, d.segmentIndex && d.segmentIndex.Lb(function(e) {
            c.push(e);
          });
          a.l.Be(c);
        }
        function Dz(a, b) {
          if (!az(a)) for (var c = Kz(a), d = u(b), e = d.next(); !e.done; e = d.next()) e.value.stream.segmentIndex.Gd(0, c);
          cz(a, b.map(function(f) {
            return f.stream;
          }));
          d = Array.from(a.i.values()).filter(function(f) {
            return f.stream.segmentIndex;
          });
          c = d.some(function(f) {
            return f.stream.type == "audio";
          });
          e = d.some(function(f) {
            return f.stream.type == "video";
          });
          d = az(a) && !a.ib;
          c = !az(a) && a.ib && !(c && e);
          a.g.hls.ignoreManifestProgramDateTime || d || c ? nz(a, b, d) : (qz(a, b), a.g.hls.ignoreManifestProgramDateTimeForTypes.length > 0 && nz(
            a,
            b
          ));
        }
        function oz(a, b) {
          return a.g.hls.ignoreManifestProgramDateTime ? true : a.g.hls.ignoreManifestProgramDateTimeForTypes.includes(b);
        }
        function qA(a) {
          if (!a.m) return false;
          var b = [], c = [];
          a = u(a.m.variants);
          for (var d = a.next(); !d.done; d = a.next()) d = d.value, d.video && b.push(d.video), d.audio && c.push(d.audio);
          return b.length > 0 && !b.some(function(e) {
            return e.segmentIndex;
          }) || c.length > 0 && !c.some(function(e) {
            return e.segmentIndex;
          }) ? false : true;
        }
        function rz(a, b, c, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y) {
          z = z === void 0 ? true : z;
          y = y === void 0 ? true : y;
          var A, C, E, D, B, G, I, J, L, K, N, P, O, M, R, W, wa, Y, Ka, Na, La, Ea, za, Fa, Da, Aa, Ca, gb, ib;
          return Q(function(jb) {
            switch (jb.g) {
              case 1:
                A = d.segments || [];
                C = A.every(function(Ab) {
                  return Iy(Ab.ma, "EXT-X-GAP") ? true : false;
                });
                if (!A.length || C) throw new U(2, 4, 4053);
                sA(a, d);
                az(a) && lz(a, d);
                E = az(a) ? a.D.get(g) : /* @__PURE__ */ new Map();
                D = jz(a, d, E, c, e, g);
                B = D.segments;
                G = D.bandwidth;
                N = K = L = J = I = null;
                if (!(B.length > 0 && z)) {
                  jb.B(2);
                  break;
                }
                return F(jb, Ez(a, B), 3);
              case 3:
                P = jb.h, g != P.type && az(a) && (a.D.set(P.type, a.D.get(g)), a.D.set(g, /* @__PURE__ */ new Map())), g = P.type, h = P.language, m = P.channelCount, t = P.sampleRate, a.g.disableText || (n = P.closedCaptions), J = P.height, I = P.width, L = P.Ne, K = P.colorGamut, N = P.frameRate, y && (v = P.mimeType, f = P.codecs);
              case 2:
                if (v) {
                  jb.B(4);
                  break;
                }
                return F(jb, tA(a, g, f, B), 5);
              case 5:
                v = jb.h, g != sc || f || v != "application/mp4" || !B[0] || B[0].ia || (v = "text/vtt");
              case 4:
                return F(jb, iz(a, d, v, e, c), 6);
              case 6:
                O = jb.h;
                M = O.drmInfos;
                R = O.keyIds;
                W = O.encrypted;
                wa = O.Fi;
                if (W && !M.length && !wa) throw new U(
                  2,
                  4,
                  4026
                );
                Y = rA(a, f, g, h, k2, l, m, n, q, r, t, w);
                Y.encrypted = W && !wa;
                Y.drmInfos = M;
                Y.keyIds = R;
                Y.mimeType = v;
                G && (Y.bandwidth = G);
                Pz(Y);
                g == "video" && (I || J || L || K) && oA(Y, I, J, N, L, null, K);
                az(a) && lz(a, d);
                Ka = B[0].startTime;
                Na = B[B.length - 1];
                La = Na.endTime;
                Ea = new Xl(B);
                Y.segmentIndex = Ea;
                Fa = (za = Iy(d.ma, "EXT-X-SERVER-CONTROL")) ? By(za, "CAN-SKIP-UNTIL") != null : false;
                Da = za ? By(za, "CAN-BLOCK-RELOAD") != null : false;
                Aa = Jy(d.ma, "EXT-X-MEDIA-SEQUENCE", 0);
                Ca = kz(Aa, B);
                gb = Ca.Zb;
                ib = Ca.$b;
                return jb.return({
                  stream: Y,
                  type: g,
                  Zf: [],
                  T: e,
                  md: Ka,
                  Bc: La,
                  mf: Fa,
                  lf: Da,
                  pe: false,
                  Vg: -1,
                  Zb: gb,
                  $b: ib,
                  Kf: E
                });
            }
          });
        }
        function kz(a, b) {
          a = a + b.length - 1;
          var c = -1;
          if (!b.length) return a++, { Zb: a, $b: c };
          b = b[b.length - 1];
          var d = b.g;
          if (!b.g.length) return a++, b.m && (c = 0), { Zb: a, $b: c };
          c = d.length - 1;
          d[d.length - 1].isPreload() || (a++, c = 0);
          return { Zb: a, $b: c };
        }
        function rA(a, b, c, d, e, f, g, h, k2, l, m, n) {
          var q = Nz(c, b) || Oz(c), r = [];
          if (k2) {
            k2 = u(k2.split(","));
            for (var t = k2.next(); !t.done; t = k2.next()) r.push(t.value);
          }
          k2 = void 0;
          t = null;
          c == sc ? k2 = r.includes("public.accessibility.transcribes-spoken-dialog") && r.includes("public.accessibility.describes-music-and-sound") ? "caption" : "subtitle" : r.includes("public.accessibility.describes-video") && (t = "visually impaired");
          r.length || k2 !== "subtitle" || r.push("subtitle");
          a = {
            id: a.G++,
            originalId: f,
            groupId: null,
            createSegmentIndex: function() {
              return Promise.resolve();
            },
            segmentIndex: null,
            mimeType: q,
            codecs: b,
            kind: c == sc ? "subtitle" : void 0,
            encrypted: false,
            drmInfos: [],
            keyIds: /* @__PURE__ */ new Set(),
            language: yc(d || "und"),
            originalLanguage: d,
            label: f,
            type: c,
            primary: e,
            trickModeVideo: null,
            dependencyStream: null,
            emsgSchemeIdUris: null,
            frameRate: void 0,
            pixelAspectRatio: void 0,
            width: void 0,
            height: void 0,
            bandwidth: void 0,
            roles: r,
            forced: l,
            channelsCount: g,
            audioSamplingRate: m,
            spatialAudio: n,
            closedCaptions: h,
            hdr: void 0,
            colorGamut: void 0,
            videoLayout: void 0,
            tilesLayout: void 0,
            accessibilityPurpose: t,
            external: false,
            fastSwitching: false,
            fullMimeTypes: /* @__PURE__ */ new Set(),
            isAudioMuxedInVideo: false,
            baseOriginalId: null
          };
          Pz(a);
          return a;
        }
        function iz(a, b, c, d, e) {
          var f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P, O, M, R;
          return Q(function(W) {
            switch (W.g) {
              case 1:
                f = /* @__PURE__ */ new Map();
                if (!a.g.ignoreDrmInfo && b.segments) {
                  for (g = u(b.segments), h = g.next(); !h.done; h = g.next()) if (k2 = h.value, l = Gy(k2.ma, "EXT-X-KEY"), m = null, l.length) for (m = uA(a, b, k2.ma, d, e), n = u(l), q = n.next(); !q.done; q = n.next()) r = q.value, f.set(r, m);
                }
                w = t = false;
                v = [];
                z = /* @__PURE__ */ new Set();
                y = u(f);
                A = y.next();
              case 2:
                if (A.done) {
                  W.B(4);
                  break;
                }
                C = A.value;
                E = u(C);
                D = E.next().value;
                B = E.next().value;
                G = D;
                I = B;
                J = Dy(G, "METHOD");
                if (J == "NONE") {
                  W.B(3);
                  break;
                }
                t = true;
                L = Cy(G, "KEYFORMAT") || "identity";
                K = null;
                if (Tz(J)) {
                  w = true;
                  W.B(3);
                  break;
                }
                if (L == "identity") return F(W, Uz(a, G, c, d, I, e), 11);
                N = a.Ec.get(L);
                if (!N) {
                  P = null;
                  W.B(9);
                  break;
                }
                return F(W, N(G, c, I), 10);
              case 10:
                P = W.h;
              case 9:
                K = P;
                W.B(6);
                break;
              case 11:
                K = W.h;
              case 6:
                if (K) {
                  if (K.keyIds) for (O = u(K.keyIds), M = O.next(); !M.done; M = O.next()) R = M.value, z.add(R);
                  v.push(K);
                }
              case 3:
                A = y.next();
                W.B(2);
                break;
              case 4:
                return W.return({ drmInfos: v, keyIds: z, encrypted: t, Fi: w });
            }
          });
        }
        function vA(a, b, c, d, e) {
          if (!window2.crypto || !window2.crypto.subtle) throw ab("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"), new U(2, 4, 4042);
          var f = 0, g = Cy(b, "IV", "");
          if (g) {
            var h = ic(g.substr(2));
            if (h.byteLength != 16) throw new U(2, 4, 4048);
          } else f = Jy(c.ma, "EXT-X-MEDIA-SEQUENCE", 0);
          var k2 = Ky(d(), Dy(b, "URI"), e), l = k2.sort().join("");
          c = b.toString() + "-" + f + "-" + l;
          if (!a.oa.has(c)) {
            var m = { bitsKey: 128, blockCipherMode: "CBC", iv: h, firstMediaSequenceNumber: f };
            switch (Dy(
              b,
              "METHOD"
            )) {
              case "AES-256":
                m.bitsKey = 256;
                break;
              case "AES-256-CTR":
                m.bitsKey = 256, m.blockCipherMode = "CTR";
            }
            m.fetchKey = function() {
              var n, q, r, t;
              return Q(function(w) {
                if (w.g == 1) return a.O.has(l) || (n = $g(k2, a.g.retryParameters), q = Iz(a, n, 6).promise, a.O.set(l, q)), F(w, a.O.get(l), 2);
                if (w.g != 3) {
                  r = w.h;
                  if (!r.data || r.data.byteLength != m.bitsKey / 8) throw new U(2, 4, 4049);
                  t = { name: m.blockCipherMode == "CTR" ? "AES-CTR" : "AES-CBC", length: m.bitsKey };
                  return F(w, window2.crypto.subtle.importKey("raw", r.data, t, true, ["decrypt"]), 3);
                }
                m.cryptoKey = w.h;
                m.fetchKey = void 0;
                H(w);
              });
            };
            a.oa.set(c, m);
          }
          return a.oa.get(c);
        }
        function Bz(a, b) {
          a.A == null && (b = Iy(b.ma, "EXT-X-START")) && (a.A = Number(Dy(b, "TIME-OFFSET")));
        }
        function sA(a, b) {
          var c = Iy(b.ma, "EXT-X-PLAYLIST-TYPE");
          b = Iy(b.ma, "EXT-X-ENDLIST");
          b = c && c.value == "VOD" || b;
          c = c && c.value == "EVENT" && !b;
          c = !b && !c;
          b ? ez(a, Yy) : c ? ez(a, Jz) : ez(a, wA);
        }
        function lz(a, b) {
          var c = Infinity, d = b.segments;
          if (d.length) for (var e = d.length - 1; e >= 0; ) {
            var f = Iy(d[e].ma, "EXTINF");
            if (f) {
              c = Number(f.value.split(",")[0]);
              break;
            }
            e--;
          }
          d = Iy(b.ma, "EXT-X-TARGETDURATION");
          if (!d) throw new U(2, 4, 4024, "EXT-X-TARGETDURATION");
          d = Number(d.value);
          if (e = Iy(b.ma, "EXT-X-PART-INF")) a.R = Number(Dy(e, "PART-TARGET"));
          b = Iy(b.ma, "EXT-X-SERVER-CONTROL");
          a.ea && a.R ? (a.u = a.Hc ? a.R * 5 <= c ? Math.min(a.R, a.u) : Math.min(c, a.u) : Math.min(a.R, a.u), a.hb = b ? Number(Dy(b, "PART-HOLD-BACK")) : 0) : (a.u = Math.min(c, a.u), c = b ? By(b, "HOLD-BACK") : null, a.Ma = c ? Number(c.value) : 0);
          a.fb = Math.max(d, a.fb);
        }
        function Cz(a, b) {
          var c = 0;
          if (a.g.defaultPresentationDelay) c = a.g.defaultPresentationDelay;
          else if (a.hb) c = a.hb;
          else if (a.Ma) c = a.Ma;
          else for (var d = b.segments.length, e = d - Math.min(d, a.g.hls.liveSegmentsDelay); e < d; e++) {
            var f = Iy(b.segments[e].ma, "EXTINF");
            c = f ? c + Number(f.value.split(",")[0]) : c + a.fb;
          }
          a.A && a.A < 0 && (c = Math.min(-a.A, c), a.A += c);
          a.l.Nj(0);
          a.l.ci(c);
          a.l.sd(false);
        }
        function uA(a, b, c, d, e) {
          var f = Iy(c, "EXT-X-MAP");
          if (!f) return null;
          var g = Dy(f, "URI"), h = Ky(d(), g, e);
          g = [h.toString(), Cy(f, "BYTERANGE", "")].join("-");
          if (!a.xa.has(g)) {
            var k2 = void 0, l = null, m = false;
            c = u(c);
            for (var n = c.next(); !n.done; n = c.next()) n = n.value, n.name == "EXT-X-KEY" ? (m = Dy(n, "METHOD"), Tz(m) && n.id < f.id ? (m = false, k2 = vA(a, n, b, d, e)) : m = m != "NONE") : n.name == "EXT-X-BYTERANGE" && n.id < f.id && (l = n);
            b = xA(h, f, l, k2, m);
            a.xa.set(g, b);
          }
          return a.xa.get(g);
        }
        function xA(a, b, c, d, e) {
          var f = 0, g = null;
          b = Cy(b, "BYTERANGE");
          !b && c && (b = c.value);
          b && (f = b.split("@"), g = Number(f[0]), f = Number(f[1]), g = f + g - 1, d && (c = g + 1 - f, c % 16 && (g += 16 - c % 16)));
          return new wj(function() {
            return a;
          }, f, g, null, null, null, d, e);
        }
        function yA(a, b, c, d, e, f, g, h, k2) {
          function l(W) {
            W = new qb(W).qb.split(".").pop();
            var wa = zA.get(g).get(W);
            wa || (wa = Gz.get(W));
            return wa;
          }
          var m = d.ma, n = Iy(m, "EXTINF"), q = 0, r = 0, t = null;
          d.Fc.length && (a.m.isLowLatency = true);
          var w = null;
          if (!a.g.hls.ignoreManifestProgramDateTime) {
            var v = Iy(m, "EXT-X-PROGRAM-DATE-TIME");
            v && v.value && (w = be(v.value), a.ib = true);
          }
          var z = zj;
          Iy(m, "EXT-X-GAP") && (a.m.gapCount++, z = 2);
          if (!n) {
            if (d.Fc.length == 0) throw new U(2, 4, 4024, "EXTINF");
            if (!a.ea) return null;
          }
          var y = [];
          v = false;
          var A = null, C = false, E = false;
          if (a.ea && d.Fc.length) {
            q = b && window2.ReadableStream && a.g.hls.allowLowLatencyByteRangeOptimization;
            for (var D = w, B = {}, G = 0; G < d.Fc.length; B = { ug: void 0, Tf: void 0 }, G++) {
              var I = d.Fc[G], J = G == 0 ? c : y[y.length - 1], L = G == 0 ? e : J.endTime, K = Number(Cy(I, "DURATION")) || a.R;
              if (K) {
                var N = L + K, P = 0, O = null;
                I.name == "EXT-X-PRELOAD-HINT" ? (P = (P = Cy(I, "BYTERANGE-START")) ? Number(P) : 0, (J = Cy(I, "BYTERANGE-LENGTH")) ? O = P + Number(J) - 1 : P && (O = Number.MAX_SAFE_INTEGER)) : (P = Cy(I, "BYTERANGE"), O = u(AA(J, P)), P = O.next().value, O = O.next().value);
                B.Tf = Cy(I, "URI");
                if (B.Tf) {
                  J = zj;
                  Cy(I, "GAP") == "YES" && (a.m.gapCount++, J = 2, C = true);
                  B.ug = null;
                  var M = /* @__PURE__ */ function(W) {
                    return function() {
                      W.ug == null && (W.ug = Ky(h(), W.Tf, f));
                      return W.ug;
                    };
                  }(B);
                  q && P >= 0 && O != null && (A = M, v = true);
                  L = new yj(L, N, M, P, O, b, 0, 0, Infinity, [], "", null, D, J, k2);
                  I.name == "EXT-X-PRELOAD-HINT" && (L.Jh(), E = true);
                  Cy(I, "INDEPENDENT") != "YES" && G > 0 && L.Nd();
                  if (B = l(B.Tf)) L.mimeType = B, BA.has(B) && (L.ia = null);
                  y.push(L);
                  D && (D += K);
                }
              }
            }
          }
          if (n) {
            n = Number(n.value.split(",")[0]);
            if (n == 0) return null;
            q = e + n;
          } else if (y.length) q = y[y.length - 1].endTime;
          else return null;
          v && (C || y[0].startByte != 0 ? (v = false, A = null) : y = []);
          (n = Iy(m, "EXT-X-BYTERANGE")) ? (t = u(AA(c, n.value)), r = t.next().value, t = t.next().value) : y.length && (r = y[0].startByte, t = y[y.length - 1].endByte);
          c = "";
          n = null;
          g == "image" && (c = "1x1", m = Iy(m, "EXT-X-TILES")) && (c = Dy(m, "LAYOUT"), (m = Cy(m, "DURATION")) && (n = Number(m)));
          var R = null;
          b = new yj(e, q, function() {
            if (A) return A();
            R == null && (R = Ky(h(), d.g, f));
            return R || [];
          }, r, t, b, 0, 0, Infinity, y, c, n, w, z, k2, y.length > 0 && !!d.g);
          if (e = l(d.g)) b.mimeType = e, BA.has(e) && (b.ia = null);
          v && (a.Hc = true, b.kj(), E && b.Jh());
          return b;
        }
        function AA(a, b) {
          var c = 0, d = null;
          b && (c = b.split("@"), b = Number(c[0]), c = c[1] ? Number(c[1]) : a.endByte + 1, d = c + b - 1);
          return [c, d];
        }
        function mz(a, b, c, d, e) {
          if (c == "video" || c == "audio") {
            var f = a.l.m;
            if (f && !oz(a, c)) for (b = Gy(b, "EXT-X-DATERANGE"), b = b.filter(function(J) {
              return By(J, "START-DATE") != null;
            }).sort(function(J, L) {
              J = Dy(J, "START-DATE");
              L = Dy(L, "START-DATE");
              return J < L ? -1 : J > L ? 1 : 0;
            }), c = 0; c < b.length; c++) {
              var g = b[c];
              try {
                var h = Dy(g, "START-DATE"), k2 = be(h);
                if (!isNaN(k2)) {
                  var l = Math.max(0, k2 - f), m = null, n = Cy(g, "END-DATE");
                  if (n) {
                    var q = be(n);
                    if (!isNaN(q) && (m = q - f, m < 0)) continue;
                  }
                  if (m == null) {
                    var r = Cy(g, "DURATION") || Cy(g, "PLANNED-DURATION");
                    if (r) {
                      var t = parseFloat(r);
                      isNaN(t) || (m = l + t);
                      if (k2 - f + t < 0) continue;
                    }
                  }
                  var w = Cy(g, "CLASS") || "com.apple.quicktime.HLS", v = Cy(g, "END-ON-NEXT") == "YES";
                  if (m == null && v) {
                    for (var z = c + 1; z < b.length; z++) {
                      var y = Cy(b[z], "CLASS") || "com.apple.quicktime.HLS";
                      if (w == y) {
                        var A = Dy(b[z], "START-DATE"), C = be(A);
                        if (!isNaN(C) && C && C > k2) {
                          m = Math.max(0, C - f);
                          break;
                        }
                      }
                    }
                    if (m == null) continue;
                  }
                  z = ["CLASS", "START-DATE", "END-DATE", "DURATION", "END-ON-NEXT"];
                  for (var E = [], D = u(g.attributes), B = D.next(); !B.done; B = D.next()) {
                    var G = B.value;
                    if (!z.includes(G.name)) {
                      var I = My(G.value, d);
                      if (G.name == "X-ASSET-URI" || G.name == "X-ASSET-LIST") I = Ky(e(), G.value, d)[0];
                      E.push({ key: G.name, description: "", data: I, mimeType: null, pictureType: null });
                    }
                  }
                  if (E.length > 1) a.h.onMetadata(w, l, m, E);
                }
              } catch (J) {
              }
            }
          }
        }
        function jz(a, b, c, d, e, f) {
          var g = b.segments, h = void 0, k2 = Jy(b.ma, "EXT-X-DISCONTINUITY-SEQUENCE", -1), l = Jy(b.ma, "EXT-X-MEDIA-SEQUENCE", 0), m = Iy(b.ma, "EXT-X-SKIP"), n = m ? Number(Cy(m, "SKIPPED-SEGMENTS")) : 0, q = l + n, r = 0;
          az(a) && c.has(q) && (r = c.get(q));
          r === 0 && a.Fa == Jz && c.size > 0 && !c.has(q) && a.l.i != null && (r = a.l.Nb());
          var t = [], w = null;
          m = [];
          for (var v = 0; v < g.length; v++) {
            var z = g[v], y = v == 0 ? r : w.endTime;
            q = l + n + v;
            Iy(z.ma, "EXT-X-DISCONTINUITY") && (k2++, w && w.ia && (w.ia.g = y));
            var A = u(z.ma);
            for (var C = A.next(); !C.done; C = A.next()) C = C.value, C.name == "EXT-X-KEY" && (Tz(Dy(C, "METHOD")) ? h = vA(a, C, b, e, d) : h = void 0);
            c.set(q, y);
            A = uA(a, b, z.ma, e, d);
            if (y = yA(a, A, w, z, y, d, f, e, h)) (w = Jy(z.ma, "EXT-X-BITRATE")) ? m.push({ bitrate: w, duration: y.endTime - y.startTime }) : m.length && (w = m.pop(), w.duration += y.endTime - y.startTime, m.push(w)), w = y, y.i = k2, oz(a, f) && a.M != null && q < a.M || t.push(y);
          }
          b = void 0;
          m.length && (b = m.reduce(function(E, D) {
            return E + D.duration;
          }, 0), b = Math.round(m.reduce(function(E, D) {
            return E + D.bitrate * D.duration;
          }, 0) / b * 1e3));
          if (m = t.some(function(E) {
            return E.h != null;
          })) {
            for (c = {}, d = 0; d < t.length; c = { rf: void 0, qf: void 0, hf: void 0, pd: void 0, gf: void 0 }, d++) if (c.pd = t[d], c.pd.h == null) for (c.qf = 0, c.rf = d, e = /* @__PURE__ */ function(E) {
              return function() {
                var D = t[E.rf];
                if (D) {
                  if (D.h != null) return D.h + E.qf;
                  E.qf -= D.endTime - D.startTime;
                  E.rf += 1;
                }
                return null;
              };
            }(c), c.gf = 0, c.hf = d, g = /* @__PURE__ */ function(E) {
              return function() {
                var D = t[E.hf];
                if (D) {
                  D != E.pd && (E.gf += D.endTime - D.startTime);
                  if (D.h != null) return D.h + E.gf;
                  --E.hf;
                }
                return null;
              };
            }(c); c.pd.h == null; ) c.pd.h = g(), c.pd.h == null && (c.pd.h = e());
          }
          if (m) for (c = u(t), d = c.next(); !d.done; d = c.next()) for (e = d.value, d = e.h, e = u(e.g), g = e.next(); !g.done; g = e.next()) g = g.value, g.h = d, d += g.endTime - g.startTime;
          c = a.aa;
          if (m && c != Infinity && !oz(a, f)) for (a = u(t), f = a.next(); !f.done; f = a.next()) f.value.pi(c);
          return { segments: t, bandwidth: b };
        }
        function Nz(a, b) {
          if (a == sc) {
            if (b == "vtt" || b == "wvtt") return "text/vtt";
            if (b && b !== "") return "application/mp4";
          }
          return a != "image" || b && b != "jpeg" ? a == "audio" && b == "mp4a.40.34" ? "audio/mpeg" : b == "mjpg" ? "application/mp4" : null : "image/jpeg";
        }
        function Oz(a) {
          return a == sc ? "text/vtt" : zA.get(a).get("mp4");
        }
        function Fz(a, b) {
          a = az(a) ? Math.trunc((b.length - 1) / 2) : 0;
          for (var c = b[a]; c.Uc() == 2 && a + 1 < b.length; ) a++, c = b[a];
          return { segment: c, segmentIndex: a };
        }
        function tA(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, t, w, v;
          return Q(function(z) {
            switch (z.g) {
              case 1:
                e = fh;
                f = Fz(a, d);
                g = f.segment;
                if (g.status == 2) return z.return(Oz(b));
                h = g.T();
                k2 = new qb(h[0]);
                l = k2.qb.split(".").pop();
                m = zA.get(b);
                if ((n = m.get(l)) || (n = Gz.get(l)) || (n = Nz(b, c))) return z.return(n);
                r = 1;
                t = $g(h, a.g.retryParameters);
                ra(z, 2);
                t.method = "HEAD";
                return F(z, Iz(a, t, e, { type: r }).promise, 4);
              case 4:
                w = z.h;
                q = w.headers["content-type"];
                ta(z, 3);
                break;
              case 2:
                v = ua(z);
                if (!v || v.code != 1002 && v.code != 1001) {
                  z.B(3);
                  break;
                }
                t.method = "GET";
                a.g.hls.allowRangeRequestsToGuessMimeType && (t.headers.Range = "bytes=0-0");
                return F(z, Iz(a, t, e, { type: r }).promise, 6);
              case 6:
                w = z.h, q = w.headers["content-type"];
              case 3:
                if (!q) {
                  z.B(7);
                  break;
                }
                n = q.toLowerCase().split(";")[0];
                if (n != "application/octet-stream") {
                  z.B(8);
                  break;
                }
                if (w.data.byteLength) {
                  z.B(9);
                  break;
                }
                t.method = "GET";
                return F(z, Iz(a, t, e, { type: r }).promise, 10);
              case 10:
                w = z.h;
              case 9:
                vk(Kb(w.data)) && (n = "video/mp2t");
              case 8:
                if (n != "application/octet-stream") return z.return(n);
              case 7:
                return z.return(Oz(b));
            }
          });
        }
        function oA(a, b, c, d, e, f, g) {
          a && (a.width = Number(b) || void 0, a.height = Number(c) || void 0, a.frameRate = Number(d) || void 0, a.hdr = e || void 0, a.videoLayout = f || void 0, a.colorGamut = g || void 0);
        }
        function Zy(a, b, c) {
          return Iz(a, $g(b, a.g.retryParameters), 0, { type: c ? 2 : 3 });
        }
        function Xy(a) {
          var b, c, d, e, f, g;
          return Q(function(h) {
            switch (h.g) {
              case 1:
                if (!a.h) return h.return();
                ra(h, 2);
                b = Date.now();
                return F(h, a.update(), 4);
              case 4:
                c = Date.now();
                az(a) && (d = (c - b) / 1e3, a.Pb.sample(1, d), e = a.g.updatePeriod > 0 ? a.g.updatePeriod : a.u, f = Math.max(0, e - Mc(a.Pb)), a.F.$(f));
                ta(h, 3);
                break;
              case 2:
                g = ua(h);
                if (!a.h) return h.return();
                if (a.g.raiseFatalErrorOnManifestUpdateRequestFailure) return a.h.onError(g), h.return();
                g.severity = 1;
                a.h.onError(g);
                a.F.$(0.1);
              case 3:
                if (!a.h) return h.return();
                a.h.onManifestUpdated();
                H(h);
            }
          });
        }
        function az(a) {
          return a.Fa != Yy;
        }
        function ez(a, b) {
          a.Fa = b;
          a.l && a.l.sd(!az(a));
          az(a) || a.F.stop();
        }
        function Iz(a, b, c, d) {
          if (!a.X) throw new U(2, 7, 7001);
          d || (d = {});
          d.isPreload = a.kc();
          b = a.h.networkingEngine.request(c, b, d);
          Ug(a.X, b);
          return b;
        }
        function Tz(a) {
          return a == "AES-128" || a == "AES-256" || a == "AES-256-CTR";
        }
        function Wy(a, b, c, d) {
          var e, f, g, h, k2, l;
          return Q(function(m) {
            if (m.g == 1) {
              if (c == "video/mp2t") throw new U(2, 4, 4040);
              if ("apple" === window2.shakaMediaKeysPolyfill) throw new U(2, 4, 4041);
              e = Dy(b, "METHOD");
              f = ["SAMPLE-AES", "SAMPLE-AES-CTR"];
              if (!f.includes(e)) return m.return(null);
              g = "cenc";
              e == "SAMPLE-AES" && (g = "cbcs");
              h = Dy(b, "URI");
              k2 = nc("com.apple.fps", g, [{ initDataType: "sinf", initData: new Uint8Array(0), keyId: null }], h);
              var n = new qb(h).Jb.replace(/-/g, "").toLowerCase();
              return (l = n.length === 32 && /^[0-9a-f]+$/.test(n) ? n : null) || !d ? m.B(2) : F(m, CA(a, d), 3);
            }
            m.g != 2 && (l = m.h);
            l && k2.keyIds.add(l);
            return m.return(k2);
          });
        }
        function Uz(a, b, c, d, e, f) {
          var g, h, k2, l, m, n, q, r, t, w, v, z;
          return Q(function(y) {
            switch (y.g) {
              case 1:
                if (c == "video/mp2t") throw new U(2, 4, 4040);
                if ("apple" === window2.shakaMediaKeysPolyfill) throw new U(2, 4, 4041);
                g = Dy(b, "METHOD");
                h = ["SAMPLE-AES", "SAMPLE-AES-CTR"];
                if (!h.includes(g)) return y.return(null);
                k2 = Ky(d(), Dy(b, "URI"), f);
                if (k2[0].startsWith("data:text/plain;base64,")) {
                  l = jc(hc(k2[0].split("data:text/plain;base64,").pop()));
                  y.B(2);
                  break;
                }
                m = k2.sort().join("");
                a.ra.has(m) || (n = $g(k2, a.g.retryParameters), q = Iz(a, n, 6).promise, a.ra.set(m, q));
                return F(y, a.ra.get(m), 3);
              case 3:
                r = y.h, l = jc(r.data);
              case 2:
                t = "00000000000000000000000000000000";
                if (!e) {
                  y.B(4);
                  break;
                }
                return F(y, CA(a, e), 5);
              case 5:
                (w = y.h) && (t = w);
              case 4:
                return v = /* @__PURE__ */ new Map(), v.set(t, l), z = "cenc", g == "SAMPLE-AES" && (z = "cbcs"), y.return(oc(v, z));
            }
          });
        }
        function CA(a, b) {
          var c, d, e, f;
          return Q(function(g) {
            if (g.g == 1) {
              c = null;
              if (a.sa.has(b)) return c = a.sa.get(b), g.B(2);
              d = Hm(b.T(), b.Tc(), b.Qc(), a.g.retryParameters);
              e = fh;
              return F(g, Iz(a, d, e, { type: 0 }).promise, 3);
            }
            g.g != 2 && (f = g.h, b.He(f.data), c = Fm(f.data), a.sa.set(b, c));
            return g.return(c);
          });
        }
        S("shaka.hls.HlsParser", Vy);
        var Gz = (/* @__PURE__ */ new Map()).set("aac", "audio/aac").set("ac3", "audio/ac3").set("ec3", "audio/ec3").set("mp3", "audio/mpeg"), DA = (/* @__PURE__ */ new Map()).set("mp4", "audio/mp4").set("mp4a", "audio/mp4").set("m4s", "audio/mp4").set("m4i", "audio/mp4").set("m4a", "audio/mp4").set("m4f", "audio/mp4").set("cmfa", "audio/mp4").set("ts", "video/mp2t").set("tsa", "video/mp2t"), EA = (/* @__PURE__ */ new Map()).set("mp4", "video/mp4").set("mp4v", "video/mp4").set("m4s", "video/mp4").set("m4i", "video/mp4").set("m4v", "video/mp4").set("m4f", "video/mp4").set("cmfv", "video/mp4").set(
          "ts",
          "video/mp2t"
        ).set("tsv", "video/mp2t"), FA = (/* @__PURE__ */ new Map()).set("mp4", "application/mp4").set("m4s", "application/mp4").set("m4i", "application/mp4").set("m4f", "application/mp4").set("cmft", "application/mp4").set("vtt", "text/vtt").set("webvtt", "text/vtt").set("ttml", "application/ttml+xml"), GA = (/* @__PURE__ */ new Map()).set("jpg", "image/jpeg").set("png", "image/png").set("svg", "image/svg+xml").set("webp", "image/webp").set("avif", "image/avif"), zA = (/* @__PURE__ */ new Map()).set("audio", DA).set("video", EA).set("text", FA).set("image", GA), BA = new Set(["video/mp2t"].concat(x(ef))), Yy = "VOD", wA = "EVENT", Jz = "LIVE", dz = { jk: Yy, Vm: wA, gn: Jz };
        Ci("application/x-mpegurl", function() {
          return new Vy();
        });
        Ci("application/vnd.apple.mpegurl", function() {
          return new Vy();
        });
        function HA(a) {
          return Cv(a);
        }
        var IA = (/* @__PURE__ */ new Map()).set("com.microsoft.playready", HA).set("com.microsoft.playready.recommendation", HA).set("com.microsoft.playready.software", HA).set("com.microsoft.playready.hardware", HA);
        function JA() {
          var a = this;
          this.h = this.g = null;
          this.l = [];
          this.j = null;
          this.A = 1;
          this.i = null;
          this.F = new Lc(5);
          this.u = new Bf(function() {
            KA(a);
          });
          this.D = new Tg();
          this.m = /* @__PURE__ */ new Map();
          this.C = function() {
            return false;
          };
        }
        p = JA.prototype;
        p.configure = function(a, b) {
          this.g = a;
          b && (this.C = b);
        };
        p.start = function(a, b) {
          var c = this;
          return Q(function(d) {
            if (d.g == 1) return c.l = [a], c.h = b, F(d, LA(c), 2);
            if (!c.h) throw new U(2, 7, 7001);
            return d.return(c.j);
          });
        };
        function KA(a) {
          var b;
          Q(function(c) {
            switch (c.g) {
              case 1:
                return ra(c, 2), F(c, LA(a), 4);
              case 4:
                ta(c, 3);
                break;
              case 2:
                b = ua(c), a.h && (b.severity = 1, a.h.onError(b));
              case 3:
                if (!a.h) return c.return();
                H(c);
            }
          });
        }
        p.stop = function() {
          this.g = this.h = null;
          this.l = [];
          this.j = null;
          this.u != null && (this.u.stop(), this.u = null);
          this.m.clear();
          return this.D.destroy();
        };
        p.update = function() {
          var a = this, b;
          return Q(function(c) {
            if (c.g == 1) return ra(c, 2), F(c, LA(a), 4);
            if (c.g != 2) return ta(c, 0);
            b = ua(c);
            if (!a.h || !b) return c.return();
            a.h.onError(b);
            H(c);
          });
        };
        p.onExpirationUpdated = function() {
        };
        p.onInitialVariantChosen = function() {
        };
        p.banLocation = function() {
        };
        p.setMediaElement = function() {
        };
        function LA(a) {
          var b, c, d, e, f, g, h;
          return Q(function(k2) {
            if (k2.g == 1) return b = $g(a.l, a.g.retryParameters), c = a.h.networkingEngine, d = Date.now(), e = c.request(0, b, { type: 5, isPreload: a.C() }), Ug(a.D, e), F(k2, e.promise, 2);
            f = k2.h;
            if (!a.h) return k2.return();
            f.uri && !a.l.includes(f.uri) && a.l.unshift(f.uri);
            var l = f.uri, m = f.data, n = a.g.mss.manifestPreprocessor;
            if (n != Yn) {
              Zc("manifest.mss.manifestPreprocessor configuration", "Please Use manifest.mss.manifestPreprocessorTXml instead.");
              m = tx(m, "SmoothStreamingMedia");
              if (!m) throw new U(
                2,
                4,
                4046,
                l
              );
              n(m);
              m = $b(m.outerHTML);
            }
            var q = Jd(m, "SmoothStreamingMedia");
            if (!q) throw new U(2, 4, 4046, l);
            l = a.g.mss.manifestPreprocessorTXml;
            l != Zn && l(q);
            a.i || (a.i = new yl(null, 0));
            if (l = Zd(q, "IsLive", ie, false)) throw new U(2, 4, 4047);
            a.i.sd(!l);
            n = Zd(q, "TimeScale", ge, 1e7);
            m = Zd(q, "DVRWindowLength", ge);
            l && (m === 0 || isNaN(m)) && (m = Infinity);
            var r = Zd(q, "CanSeek", ie, false);
            m === 0 && r && (m = Infinity);
            r = null;
            m && m > 0 && (r = m / n);
            l && !isNaN(a.g.availabilityWindowOverride) && (r = a.g.availabilityWindowOverride);
            r == null && (r = Infinity);
            a.i.hg(r);
            m = Zd(q, "Duration", ge, Infinity);
            l || a.i.zb(m / n);
            l = { variants: [], textStreams: [], timescale: n, duration: m / n };
            var t;
            r = Rd(q, "Protection");
            n = a.g.mss.keySystemsBySystemId;
            m = [];
            r = u(r);
            for (t = r.next(); !t.done; t = r.next()) m = m.concat(Rd(t.value, "ProtectionHeader"));
            if (m.length) {
              r = [];
              for (t = 0; t < m.length; t++) {
                var w = m[t], v = w.attributes.SystemID.toLowerCase(), z = n[v];
                if (z) {
                  var y;
                  a: {
                    if (y = Av(w)) {
                      y = u(Ud(y, "DATA"));
                      for (var A = y.next(); !A.done; A = y.next()) if (A = Vd(A.value, "KID")) {
                        y = hc(Sd(A));
                        y = new Uint8Array([
                          y[3],
                          y[2],
                          y[1],
                          y[0],
                          y[5],
                          y[4],
                          y[7],
                          y[6]
                        ].concat(x(y.slice(8))));
                        y = jc(y);
                        break a;
                      }
                    }
                    y = null;
                  }
                  A = hc(Sd(w));
                  v = ic(v.replace(/-/g, ""));
                  v = [{ initData: Ah(A, v, /* @__PURE__ */ new Set(), 0), initDataType: "cenc", keyId: y }];
                  v = nc(z, "cenc", v);
                  y && v.keyIds.add(y);
                  if (z = IA.get(z)) v.licenseServerUri = z(w);
                  r.push(v);
                }
              }
              n = r;
            } else n = [];
            t = n;
            r = [];
            n = [];
            m = [];
            q = Rd(q, "StreamIndex");
            q = u(q);
            for (w = q.next(); !w.done; w = q.next()) {
              w = w.value;
              z = Rd(w, "QualityLevel");
              v = l.timescale;
              y = l.duration;
              A = Rd(w, "c");
              for (var C = [], E = 0, D = 0; D < A.length; ++D) {
                var B = A[D], G = A[D + 1], I = Zd(B, "t", ge), J = Zd(
                  B,
                  "d",
                  ge
                );
                B = Zd(B, "r", ee);
                if (!J) break;
                I = I != null ? I : E;
                (B = B || 0) && B--;
                if (B < 0) if (G) {
                  G = Zd(G, "t", ge);
                  if (G == null) break;
                  else if (I >= G) break;
                  B = Math.ceil((G - I) / J) - 1;
                } else {
                  if (y == Infinity) break;
                  else if (I / v >= y) break;
                  B = Math.ceil((y * v - I) / J) - 1;
                }
                for (G = 0; G <= B; ++G) E = I + J, C.push({ start: I / v, end: E / v, xi: I }), I = E;
              }
              v = C;
              z = u(z);
              for (y = z.next(); !y.done; y = z.next()) (y = MA(a, w, y.value, v, t, l)) && (y.type != "audio" || a.g.disableAudio ? y.type != "video" || a.g.disableVideo ? y.type != sc || a.g.disableText || m.push(y) : n.push(y) : r.push(y));
            }
            q = [];
            r = u(r.length > 0 ? r : [null]);
            for (t = r.next(); !t.done; t = r.next()) for (t = t.value, w = u(n.length > 0 ? n : [null]), C = w.next(); !C.done; C = w.next()) z = q, v = z.push, y = a, A = t, C = C.value, D = 0, A && A.bandwidth && A.bandwidth > 0 && (D += A.bandwidth), C && C.bandwidth && C.bandwidth > 0 && (D += C.bandwidth), y = { id: y.A++, language: A ? A.language : "und", disabledUntilTime: 0, primary: !!A && A.primary || !!C && C.primary, audio: A, video: C, bandwidth: D, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] }, v.call(z, y);
            l.variants = q;
            l.textStreams = m;
            a.j ? (a.j.variants = l.variants, a.j.textStreams = l.textStreams, a.h.filter(a.j)) : (a.j = { presentationTimeline: a.i, variants: l.variants, textStreams: l.textStreams, imageStreams: [], offlineSessionIds: [], sequenceMode: a.g.mss.sequenceMode, ignoreManifestTimestampsInSegmentsMode: false, type: "MSS", serviceDescription: null, nextUrl: null, periodCount: 1, gapCount: 0, isLowLatency: false, startTime: null }, a.i.Jf());
            Promise.resolve();
            g = Date.now();
            h = (g - d) / 1e3;
            a.F.sample(1, h);
            H(k2);
          });
        }
        function MA(a, b, c, d, e, f) {
          var g = b.attributes.Type;
          if (g !== "audio" && g !== "video" && g !== "text") return ab("Ignoring unrecognized type:", g), null;
          var h = b.attributes.Language, k2 = a.A++, l = Zd(c, "Bitrate", fe), m = Zd(c, "MaxWidth", fe), n = Zd(c, "MaxHeight", fe), q = Zd(c, "Channels", fe), r = Zd(c, "SamplingRate", fe), t = f.duration;
          d.length && (t = d[d.length - 1].end - d[0].start);
          var w = a.i.getDuration();
          a.i.zb(Math.min(t, w));
          var v = {
            id: k2,
            originalId: b.attributes.Name || String(k2),
            groupId: null,
            createSegmentIndex: function() {
              return Promise.resolve();
            },
            closeSegmentIndex: function() {
              return Promise.resolve();
            },
            segmentIndex: null,
            mimeType: "",
            codecs: "",
            frameRate: void 0,
            pixelAspectRatio: void 0,
            bandwidth: l || 0,
            width: m || void 0,
            height: n || void 0,
            kind: "",
            encrypted: e.length > 0,
            drmInfos: e,
            keyIds: /* @__PURE__ */ new Set(),
            language: yc(h || "und"),
            originalLanguage: h,
            label: "",
            type: "",
            primary: false,
            trickModeVideo: null,
            dependencyStream: null,
            emsgSchemeIdUris: [],
            roles: [],
            forced: false,
            channelsCount: q,
            audioSamplingRate: r,
            spatialAudio: false,
            closedCaptions: null,
            hdr: void 0,
            colorGamut: void 0,
            videoLayout: void 0,
            tilesLayout: void 0,
            matchedStreams: [],
            mssPrivateData: { duration: t, timescale: f.timescale, codecPrivateData: null },
            accessibilityPurpose: null,
            external: false,
            fastSwitching: false,
            fullMimeTypes: /* @__PURE__ */ new Set(),
            isAudioMuxedInVideo: false,
            baseOriginalId: null
          };
          if (e = b.attributes.Subtype) (e = NA.get(e)) && v.roles.push(e), e === "main" && (v.primary = true);
          e = c.attributes.FourCC;
          if (e === null || e === "") e = b.attributes.FourCC;
          if (!e) {
            if (g === "audio") e = "AAC";
            else if (g === "video") return ab('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'), null;
          }
          if (!OA.includes(e.toUpperCase())) return ab("Codec not supported:", e), null;
          c = PA(c, g, e, v);
          v.mssPrivateData.codecPrivateData = c;
          switch (g) {
            case "audio":
              if (!c) return ab("Quality unsupported without CodecPrivateData", g), null;
              v.type = "audio";
              v.mimeType = "mss/audio/mp4";
              v.codecs = QA(e, c);
              break;
            case "video":
              if (!c) return ab("Quality unsupported without CodecPrivateData", g), null;
              v.type = "video";
              v.mimeType = "mss/video/mp4";
              v.codecs = RA(c);
              break;
            case "text":
              if (v.type = sc, v.mimeType = "application/mp4", e === "TTML" || e === "DFXP") v.codecs = "stpp";
          }
          v.fullMimeTypes.add(df(v.mimeType, v.codecs));
          v.createSegmentIndex = function() {
            if (v.segmentIndex) return Promise.resolve();
            if (a.m.has(v.id)) var z = a.m.get(v.id);
            else z = [], v.type == "video" && (z = v.mssPrivateData.codecPrivateData.split("00000001").slice(1)), z = { id: v.id, type: v.type, codecs: v.codecs, encrypted: v.encrypted, timescale: v.mssPrivateData.timescale, duration: v.mssPrivateData.duration, Hb: z, Na: new Uint8Array([]), Ya: new Uint8Array([]), eb: 0, gb: 0, data: null, stream: v }, z = Si(new Ri([z])), a.m.set(v.id, z);
            z = SA(a, new wj(function() {
              return [];
            }, 0, null, lm(v), v.mssPrivateData.timescale, z, null, v.encrypted), v, b, d);
            v.segmentIndex = new Xl(z);
            return Promise.resolve();
          };
          v.closeSegmentIndex = function() {
            v.segmentIndex && (v.segmentIndex.release(), v.segmentIndex = null);
          };
          return v;
        }
        function PA(a, b, c, d) {
          if (a = a.attributes.CodecPrivateData) return a;
          if (b !== "audio") return null;
          b = d.channelsCount || 2;
          a = d.audioSamplingRate || 44100;
          var e = { 96e3: 0, 88200: 1, 64e3: 2, 48e3: 3, 44100: 4, 32e3: 5, 24e3: 6, 22050: 7, 16e3: 8, 12e3: 9, 11025: 10, 8e3: 11, 7350: 12 };
          d = e[a];
          if (c === "AACH") return c = new Uint8Array(4), a = e[a * 2], c[0] = 40 | d >> 1, c[1] = d << 7 | b << 3 | a >> 1, c[2] = a << 7 | 8, c[3] = 0, b = new Uint16Array(2), b[0] = (c[0] << 8) + c[1], b[1] = (c[2] << 8) + c[3], b[0].toString(16) + b[1].toString(16);
          c = new Uint8Array(2);
          c[0] = 16 | d >> 1;
          c[1] = d << 7 | b << 3;
          b = new Uint16Array(1);
          b[0] = (c[0] << 8) + c[1];
          return b[0].toString(16);
        }
        function QA(a, b) {
          var c = 0;
          a === "AACH" && (c = 5);
          b ? c === 0 && (c = (parseInt(b.substr(0, 2), 16) & 248) >> 3) : (c = 2, a === "AACH" && (c = 5));
          return "mp4a.40." + c;
        }
        function RA(a) {
          var b = /00000001[0-9]7/.exec(a);
          return b.length && a ? "avc1." + a.substr(a.indexOf(b[0]) + 10, 6) : "";
        }
        function SA(a, b, c, d, e) {
          var f = d.attributes.Url.replace("{bitrate}", String(c.bandwidth));
          d = [];
          e = u(e);
          for (var g = e.next(), h = {}; !g.done; h = { ng: void 0 }, g = e.next()) h.ng = g.value, d.push(new yj(h.ng.start, h.ng.end, /* @__PURE__ */ function(k2) {
            return function() {
              return mc(a.l, [f.replace("{start time}", String(k2.ng.xi))]);
            };
          }(h), 0, null, b, 0, 0, c.mssPrivateData.duration));
          return d;
        }
        S("shaka.mss.MssParser", JA);
        var OA = "AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "), NA = (/* @__PURE__ */ new Map()).set("CAPT", "main").set("SUBT", "alternate").set("DESC", "main");
        Ci("application/vnd.ms-sstr+xml", function() {
          return new JA();
        });
        function TA(a, b, c, d, e, f, g) {
          if (c >= 200 && c <= 299 && c != 202 || c == 304) return { uri: e || d, originalUri: d, data: b, status: c, headers: a, fromCache: !!a["x-shaka-from-cache"], originalRequest: f };
          f = null;
          try {
            f = Zb(b);
          } catch (h) {
          }
          throw new U(c == 401 || c == 403 ? 2 : 1, 1, 1001, d, c, f, a, g, e || d);
        }
        ;
        function UA() {
        }
        function VA(a, b, c, d, e, f) {
          var g = new WA();
          try {
            jh(b.headers).forEach(function(m, n) {
              g.append(n, m);
            });
          } catch (m) {
            return Ng(new U(1, 1, 1002, a, m, c));
          }
          var h = new XA(), k2 = { Ki: false, bk: false };
          a = YA(a, b, c, { body: b.body || void 0, headers: g, method: b.method, signal: h.signal, credentials: b.allowCrossSiteCredentials ? "include" : void 0 }, k2, d, e, b.streamDataCallback, f.minBytesForProgressEvents || 0);
          a = new Mg(a, function() {
            k2.Ki = true;
            h.abort();
            return Promise.resolve();
          });
          if (b = b.retryParameters.timeout) {
            var l = new Bf(function() {
              k2.bk = true;
              h.abort();
            });
            l.$(b / 1e3);
            a.finally(function() {
              l.stop();
            });
          }
          return a;
        }
        function YA(a, b, c, d, e, f, g, h, k2) {
          var l, m, n, q, r, t, w, v, z, y, A, C, E, D, B;
          return Q(function(G) {
            switch (G.g) {
              case 1:
                return l = ZA, m = $A, q = new ArrayBuffer(0), t = r = 0, w = {}, v = Date.now(), ra(G, 2), F(G, l(a, d), 4);
              case 4:
                n = G.h;
                w = aB(n.headers);
                g(w);
                if (d.method == "HEAD") {
                  G.B(5);
                  break;
                }
                y = (z = n.headers.get("Content-Length")) ? parseInt(z, 10) : 0;
                if (!n.body) return F(G, n.arrayBuffer(), 9);
                A = n.clone().body.getReader();
                C = function(I) {
                  function J() {
                    var L, K, N, P;
                    return Q(function(O) {
                      switch (O.g) {
                        case 1:
                          return ra(O, 2), F(O, A.read(), 4);
                        case 4:
                          L = O.h;
                          ta(O, 3);
                          break;
                        case 2:
                          return ua(O), O.return();
                        case 3:
                          if (L.done) {
                            O.B(5);
                            break;
                          }
                          r += L.value.byteLength;
                          if (!h) {
                            O.B(5);
                            break;
                          }
                          return F(O, h(L.value), 5);
                        case 5:
                          K = Date.now();
                          N = r - t;
                          if (K - v > 100 && N >= k2 || L.done) P = L.done ? 0 : y - r, f(K - v, N, P), t = r, v = K;
                          L.done ? I.close() : (I.enqueue(L.value), J());
                          H(O);
                      }
                    });
                  }
                  J();
                };
                new m({ start: C });
                return F(G, n.arrayBuffer(), 8);
              case 8:
                q = G.h;
                G.B(5);
                break;
              case 9:
                q = G.h, E = Date.now(), f(E - v, q.byteLength, 0);
              case 5:
                b.headers.Range && (D = b.headers.Range.replace("bytes=", "").split("-").filter(function(I) {
                  return I;
                }).map(function(I) {
                  return parseInt(
                    I,
                    10
                  );
                }), D.length == 2 && q.byteLength != D[1] - D[0] + 1 && ab("Payload length does not match range requested bytes", b, n));
                ta(G, 3);
                break;
              case 2:
                B = ua(G);
                if (e.Ki) throw new U(1, 1, 7001, a, c);
                if (e.bk) throw new U(1, 1, 1003, a, c);
                throw new U(1, 1, 1002, a, B, c);
              case 3:
                return G.return(TA(w, q, n.status, a, n.url, b, c));
            }
          });
        }
        function aB(a) {
          var b = {};
          a.forEach(function(c, d) {
            b[d.trim()] = c;
          });
          return b;
        }
        function bB() {
          if (window2.ReadableStream) try {
            new ReadableStream({});
          } catch (a) {
            return false;
          }
          else return false;
          if (window2.Response) {
            if (!new Response("").body) return false;
          } else return false;
          return !(!window2.fetch || "polyfill" in window2.fetch || !window2.AbortController);
        }
        S("shaka.net.HttpFetchPlugin", UA);
        UA.isSupported = bB;
        UA.parse = VA;
        var ZA = window2.fetch, XA = window2.AbortController, $A = window2.ReadableStream, WA = window2.Headers;
        bB() && (Wg("http", VA, 2, true), Wg("https", VA, 2, true), Wg("blob", VA, 2, true));
        function cB() {
        }
        function dB(a, b, c, d, e, f) {
          var g = new eB(), h = Date.now(), k2 = 0, l = new Promise(function(m, n) {
            g.open(b.method, a, true);
            g.responseType = "arraybuffer";
            g.timeout = b.retryParameters.timeout;
            g.withCredentials = b.allowCrossSiteCredentials;
            var q = {};
            g.onabort = function() {
              n(new U(1, 1, 7001, a, c));
            };
            g.onreadystatechange = function() {
              if (g.readyState === XMLHttpRequest.HEADERS_RECEIVED) {
                var t = g.getAllResponseHeaders().trim().split("\r\n"), w = {};
                t = u(t);
                for (var v = t.next(); !v.done; v = t.next()) v = v.value.split(": "), w[v[0].toLowerCase()] = v.slice(1).join(": ");
                q = w;
                e(q);
              }
            };
            g.onload = function(t) {
              var w = g.response;
              try {
                d(Date.now() - h, t.loaded - k2, 0);
                var v = TA(q, w, g.status, a, g.responseURL, b, c);
                m(v);
              } catch (z) {
                n(z);
              }
            };
            g.onerror = function(t) {
              n(new U(1, 1, 1002, a, t, c));
            };
            g.ontimeout = function() {
              n(new U(1, 1, 1003, a, c));
            };
            g.onprogress = function(t) {
              var w = Date.now(), v = f.minBytesForProgressEvents || 0, z = t.loaded - k2;
              if (w - h > 100 && z >= v || t.lengthComputable && t.loaded == t.total) d(w - h, z, g.readyState == 4 ? 0 : t.total - t.loaded), k2 = t.loaded, h = w;
            };
            for (var r in b.headers) try {
              g.setRequestHeader(
                r.toLowerCase(),
                b.headers[r]
              );
            } catch (t) {
              throw new U(1, 1, 1002, a, t, c);
            }
            g.send(b.body);
          });
          return new Mg(l, function() {
            g.abort();
            return Promise.resolve();
          });
        }
        S("shaka.net.HttpXHRPlugin", cB);
        cB.parse = dB;
        var eB = window2.XMLHttpRequest;
        Wg("http", dB, 1, true);
        Wg("https", dB, 1, true);
        Wg("blob", dB, 1, true);
        function fB(a, b, c, d, e) {
          this.g = a;
          this.i = b;
          this.groupId = c;
          this.h = d;
          this.j = e;
        }
        function gB(a) {
          var b = a.hc(false);
          return b ? fc(b) : a.T().map(function(c) {
            return "{" + encodeURI(c.split("#xywh=")[0]) + "}";
          }).join("") + ":" + a.startByte + ":" + a.endByte;
        }
        function hB(a, b) {
          return Hm(a.g.T(), a.g.startByte, a.g.endByte, b.streaming.retryParameters);
        }
        ;
        function iB() {
          this.g = this.j = this.i = 0;
          this.h = /* @__PURE__ */ new Map();
          this.l = 0;
        }
        function jB(a, b) {
          a.i += b;
          var c = a.l;
          a.l++;
          a.h.set(c, b);
          return c;
        }
        iB.prototype.close = function(a, b) {
          if (this.h.has(a)) {
            var c = this.h.get(a);
            this.h.delete(a);
            this.j += c;
            this.g += b;
          }
        };
        function kB(a) {
          return a.i == 0 ? 0 : a.j / a.i;
        }
        ;
        function lB(a) {
          var b = this;
          this.A = a;
          this.i = /* @__PURE__ */ new Map();
          this.h = new hh(function() {
            return mB(b).catch(function() {
            });
          });
          this.j = [];
          this.u = function() {
          };
          this.m = function() {
          };
          this.g = new iB();
          this.l = false;
        }
        lB.prototype.destroy = function() {
          return this.h.destroy();
        };
        function nB(a, b, c) {
          a.u = b;
          a.m = c;
        }
        function mB(a) {
          a.l = true;
          var b = a.j.map(function(c) {
            return c();
          });
          a.j = [];
          return Promise.all(b);
        }
        lB.prototype.queue = function(a, b, c, d, e) {
          var f = this;
          ih(this.h);
          var g = (this.i.get(a) || Promise.resolve()).then(function() {
            var h, k2, l, m, n, q, r;
            return Q(function(t) {
              if (t.g == 1) return F(t, oB(f, b), 2);
              h = t.h;
              if (f.h.g) throw new U(2, 9, 7001);
              if (d) for (m in k2 = Kb(h), l = new zh(k2), l.data) n = Number(m), q = l.data[n], r = l.g[n], f.m(q, r);
              f.g.close(c, h.byteLength);
              f.u(kB(f.g), f.g.g);
              return t.return(e(h));
            });
          });
          this.i.set(a, g);
          return g;
        };
        function pB(a, b, c, d, e, f) {
          ih(a.h);
          var g = (a.i.get(b) || Promise.resolve()).then(function() {
            if (a.h.g) throw new U(2, 9, 7001);
            if (e) {
              var h = Kb(c);
              h = new zh(h);
              for (var k2 in h.data) {
                var l = Number(k2);
                a.m(h.data[l], h.g[l]);
              }
            }
            a.g.close(d, c.byteLength);
            a.u(kB(a.g), a.g.g);
            return f(c);
          });
          a.i.set(b, g);
        }
        function qB(a) {
          return Q(function(b) {
            return b.g == 1 ? F(b, Promise.all(a.i.values()), 2) : b.return(a.g.g);
          });
        }
        function oB(a, b) {
          var c, d, e, f;
          return Q(function(g) {
            if (g.g == 1) return c = fh, d = a.A.request(c, b), e = function() {
              return d.abort();
            }, a.j.push(e), F(g, d.promise, 2);
            f = g.h;
            Qc(a.j, e);
            return g.return(f.data);
          });
        }
        ;
        function rB(a, b) {
          var c = this;
          this.i = a;
          this.h = a.objectStore(b);
          this.g = new Lg();
          a.onabort = function(d) {
            d.preventDefault();
            c.g.reject();
          };
          a.onerror = function(d) {
            d.preventDefault();
            c.g.reject();
          };
          a.oncomplete = function() {
            c.g.resolve();
          };
        }
        rB.prototype.abort = function() {
          var a = this;
          return Q(function(b) {
            if (b.g == 1) {
              try {
                a.i.abort();
              } catch (c) {
              }
              ra(b, 2);
              return F(b, a.g, 4);
            }
            if (b.g != 2) return ta(b, 0);
            ua(b);
            H(b);
          });
        };
        function sB(a, b) {
          return new Promise(function(c, d) {
            var e = a.h.openCursor();
            e.onerror = d;
            e.onsuccess = function() {
              var f;
              return Q(function(g) {
                if (g.g == 1) {
                  if (e.result == null) return c(), g.return();
                  f = e.result;
                  return F(g, b(f.key, f.value, f), 2);
                }
                f.continue();
                H(g);
              });
            };
          });
        }
        rB.prototype.store = function() {
          return this.h;
        };
        rB.prototype.promise = function() {
          return this.g;
        };
        function tB(a) {
          this.h = a;
          this.g = [];
        }
        tB.prototype.destroy = function() {
          return Promise.all(this.g.map(function(a) {
            return a.abort();
          }));
        };
        function uB(a, b) {
          return vB(a, b, "readwrite");
        }
        function vB(a, b, c) {
          c = a.h.transaction([b], c);
          var d = new rB(c, b);
          a.g.push(d);
          d.promise().then(function() {
            Qc(a.g, d);
          }, function() {
            Qc(a.g, d);
          });
          return d;
        }
        ;
        function wB(a, b, c) {
          this.h = new tB(a);
          this.i = b;
          this.g = c;
        }
        p = wB.prototype;
        p.destroy = function() {
          return this.h.destroy();
        };
        p.hasFixedKeySpace = function() {
          return true;
        };
        p.addSegments = function() {
          return xB(this.i);
        };
        p.removeSegments = function(a, b) {
          return yB(this, this.i, a, b);
        };
        p.getSegments = function(a) {
          var b = this, c;
          return Q(function(d) {
            if (d.g == 1) return F(d, zB(b, b.i, a), 2);
            c = d.h;
            return d.return(c.map(function(e) {
              return b.Pi(e);
            }));
          });
        };
        p.addManifests = function() {
          return xB(this.g);
        };
        p.updateManifest = function() {
          return Promise.reject(new U(2, 9, 9016, "Cannot modify values in " + this.g));
        };
        function AB(a, b, c) {
          a = uB(a.h, a.g);
          var d = a.store();
          d.get(b).onsuccess = function() {
            d.put(c, b);
          };
          return a.promise();
        }
        p.updateManifestExpiration = function(a, b) {
          var c = uB(this.h, this.g), d = c.store();
          d.get(a).onsuccess = function(e) {
            if (e = e.target.result) e.expiration = b, d.put(e, a);
          };
          return c.promise();
        };
        p.removeManifests = function(a, b) {
          return yB(this, this.g, a, b);
        };
        p.getManifests = function(a) {
          var b = this, c;
          return Q(function(d) {
            if (d.g == 1) return F(d, zB(b, b.g, a), 2);
            c = d.h;
            return d.return(Promise.all(c.map(function(e) {
              return b.ge(e);
            })));
          });
        };
        p.getAllManifests = function() {
          var a = this, b, c;
          return Q(function(d) {
            return d.g == 1 ? (b = vB(a.h, a.g, "readonly"), c = /* @__PURE__ */ new Map(), F(d, sB(b, function(e, f) {
              var g;
              return Q(function(h) {
                if (h.g == 1) return F(h, a.ge(f), 2);
                g = h.h;
                c.set(e, g);
                H(h);
              });
            }), 2)) : d.g != 3 ? F(d, b.promise(), 3) : d.return(c);
          });
        };
        p.Pi = function(a) {
          return a;
        };
        p.ge = function(a) {
          return Promise.resolve(a);
        };
        function xB(a) {
          return Promise.reject(new U(2, 9, 9011, "Cannot add new value to " + a));
        }
        p.add = function(a, b) {
          var c = this, d, e, f, g, h, k2, l;
          return Q(function(m) {
            if (m.g == 1) {
              d = uB(c.h, a);
              e = d.store();
              f = [];
              g = u(b);
              h = g.next();
              for (k2 = {}; !h.done; k2 = { Vh: void 0 }, h = g.next()) l = h.value, k2.Vh = e.add(l), k2.Vh.onsuccess = /* @__PURE__ */ function(n) {
                return function() {
                  f.push(n.Vh.result);
                };
              }(k2);
              return F(m, d.promise(), 2);
            }
            return m.return(f);
          });
        };
        function yB(a, b, c, d) {
          a = uB(a.h, b);
          b = a.store();
          c = u(c);
          for (var e = c.next(), f = {}; !e.done; f = { Ih: void 0 }, e = c.next()) f.Ih = e.value, b.delete(f.Ih).onsuccess = /* @__PURE__ */ function(g) {
            return function() {
              return d(g.Ih);
            };
          }(f);
          return a.promise();
        }
        function zB(a, b, c) {
          var d, e, f, g, h, k2, l;
          return Q(function(m) {
            if (m.g == 1) {
              d = vB(a.h, b, "readonly");
              e = d.store();
              f = {};
              g = [];
              h = u(c);
              k2 = h.next();
              for (l = {}; !k2.done; l = { ag: void 0, Ff: void 0 }, k2 = h.next()) l.Ff = k2.value, l.ag = e.get(l.Ff), l.ag.onsuccess = /* @__PURE__ */ function(n) {
                return function() {
                  n.ag.result == void 0 && g.push(n.Ff);
                  f[n.Ff] = n.ag.result;
                };
              }(l);
              return F(m, d.promise(), 2);
            }
            if (g.length) throw new U(2, 9, 9012, "Could not find values for " + g);
            return m.return(c.map(function(n) {
              return f[n];
            }));
          });
        }
        ;
        function BB(a) {
          this.g = new tB(a);
        }
        BB.prototype.destroy = function() {
          return this.g.destroy();
        };
        BB.prototype.getAll = function() {
          var a = this, b, c;
          return Q(function(d) {
            return d.g == 1 ? (b = vB(a.g, "session-ids", "readonly"), c = [], F(d, sB(b, function(e, f) {
              c.push(f);
            }), 2)) : d.g != 3 ? F(d, b.promise(), 3) : d.return(c);
          });
        };
        BB.prototype.add = function(a) {
          var b = uB(this.g, "session-ids"), c = b.store();
          a = u(a);
          for (var d = a.next(); !d.done; d = a.next()) c.add(d.value);
          return b.promise();
        };
        BB.prototype.remove = function(a) {
          var b = this, c;
          return Q(function(d) {
            return d.g == 1 ? (c = uB(b.g, "session-ids"), F(d, sB(c, function(e, f, g) {
              a.includes(f.sessionId) && g.delete();
            }), 2)) : F(d, c.promise(), 0);
          });
        };
        function CB() {
          this.g = /* @__PURE__ */ new Map();
        }
        CB.prototype.destroy = function() {
          for (var a = [], b = u(this.g.values()), c = b.next(); !c.done; c = b.next()) a.push(c.value.destroy());
          this.g.clear();
          return Promise.all(a);
        };
        CB.prototype.init = function() {
          var a = this;
          DB.forEach(function(e, f) {
            (e = e()) && a.g.set(f, e);
          });
          for (var b = [], c = u(this.g.values()), d = c.next(); !d.done; d = c.next()) b.push(d.value.init());
          return Promise.all(b);
        };
        function EB(a) {
          var b = null;
          a.g.forEach(function(c, d) {
            c.getCells().forEach(function(e, f) {
              e.hasFixedKeySpace() || b || (b = { path: { Yb: d, kb: f }, kb: e });
            });
          });
          if (b) return b;
          throw new U(2, 9, 9013, "Could not find a cell that supports add-operations");
        }
        function FB(a, b) {
          a.g.forEach(function(c, d) {
            c.getCells().forEach(function(e, f) {
              b({ Yb: d, kb: f }, e);
            });
          });
        }
        function GB(a, b, c) {
          a = a.g.get(b);
          if (!a) throw new U(2, 9, 9013, "Could not find mechanism with name " + b);
          b = a.getCells().get(c);
          if (!b) throw new U(2, 9, 9013, "Could not find cell with name " + c);
          return b;
        }
        function HB(a, b) {
          a.g.forEach(function(c) {
            b(c.getEmeSessionCell());
          });
        }
        function IB(a) {
          var b = Array.from(a.g.keys());
          if (!b.length) throw new U(2, 9, 9e3, "No supported storage mechanisms found");
          return a.g.get(b[0]).getEmeSessionCell();
        }
        function JB(a) {
          var b, c, d;
          return Q(function(e) {
            return e.g == 1 ? (b = Array.from(a.g.values()), c = b.length > 0, c || (d = DB, d.forEach(function(f) {
              (f = f()) && b.push(f);
            })), F(e, Promise.all(b.map(function(f) {
              return f.erase();
            })), 2)) : c ? e.B(0) : F(e, Promise.all(b.map(function(f) {
              return f.destroy();
            })), 0);
          });
        }
        function KB(a, b) {
          DB.set(a, b);
        }
        S("shaka.offline.StorageMuxer", CB);
        CB.unregister = function(a) {
          DB.delete(a);
        };
        CB.register = KB;
        CB.prototype.destroy = CB.prototype.destroy;
        var DB = /* @__PURE__ */ new Map();
        function LB() {
          wB.apply(this, arguments);
        }
        la(LB, wB);
        LB.prototype.updateManifestExpiration = function(a, b) {
          var c = this, d, e, f;
          return Q(function(g) {
            d = uB(c.h, c.g);
            e = d.store();
            f = new Lg();
            e.get(a).onsuccess = function(h) {
              (h = h.target.result) ? (h.expiration = b, e.put(h), f.resolve()) : f.reject(new U(2, 9, 9012, "Could not find values for " + a));
            };
            return F(g, Promise.all([d.promise(), f]), 0);
          });
        };
        LB.prototype.ge = function(a) {
          var b, c, d, e, f, g;
          return Q(function(h) {
            if (h.g == 1) {
              b = [];
              for (c = 0; c < a.periods.length; ++c) d = c == a.periods.length - 1 ? a.duration : a.periods[c + 1].startTime, e = d - a.periods[c].startTime, f = MB(a.periods[c], e), b.push(f);
              return F(h, Qw(b), 2);
            }
            g = h.h;
            return h.return({ creationTime: 0, originalManifestUri: a.originalManifestUri, duration: a.duration, size: a.size, expiration: a.expiration == null ? Infinity : a.expiration, streams: g, sessionIds: a.sessionIds, drmInfo: a.drmInfo, appMetadata: a.appMetadata, sequenceMode: false });
          });
        };
        function MB(a, b) {
          NB(a);
          for (var c = u(a.streams), d = c.next(); !d.done; d = c.next()) ;
          return a.streams.map(function(e) {
            return OB(e, a.startTime, b);
          });
        }
        function OB(a, b, c) {
          var d = a.initSegmentUri ? PB(a.initSegmentUri) : null, e = b + a.presentationTimeOffset, f = b + c;
          return { id: a.id, originalId: null, groupId: null, primary: a.primary, type: a.contentType, mimeType: a.mimeType, codecs: a.codecs, frameRate: a.frameRate, pixelAspectRatio: void 0, hdr: void 0, colorGamut: void 0, videoLayout: void 0, kind: a.kind, language: a.language, originalLanguage: a.language || null, label: a.label, width: a.width, height: a.height, initSegmentKey: d, encrypted: a.encrypted, keyIds: /* @__PURE__ */ new Set([a.keyId]), segments: a.segments.map(function(g) {
            var h = PB(g.uri);
            return { startTime: b + g.startTime, endTime: b + g.endTime, dataKey: h, initSegmentKey: d, appendWindowStart: b, appendWindowEnd: f, timestampOffset: e, tilesLayout: "", mimeType: null, codecs: null, thumbnailSprite: null };
          }), variantIds: a.variantIds, roles: [], forced: false, audioSamplingRate: null, channelsCount: null, spatialAudio: false, closedCaptions: null, tilesLayout: void 0, external: false, fastSwitching: false, isAudioMuxedInVideo: false };
        }
        LB.prototype.Pi = function(a) {
          return { data: a.data };
        };
        function PB(a) {
          var b;
          if ((b = /^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(a)) || (b = /^offline:segment\/([0-9]+)$/.exec(a))) return Number(b[1]);
          throw new U(2, 9, 9004, "Could not parse uri " + a);
        }
        function NB(a) {
          var b = a.streams.filter(function(h) {
            return h.contentType == "audio";
          });
          a = a.streams.filter(function(h) {
            return h.contentType == "video";
          });
          if (!b.every(function(h) {
            return h.variantIds;
          }) || !a.every(function(h) {
            return h.variantIds;
          })) {
            for (var c = u(b), d = c.next(); !d.done; d = c.next()) d.value.variantIds = [];
            c = u(a);
            for (d = c.next(); !d.done; d = c.next()) d.value.variantIds = [];
            c = 0;
            if (a.length && !b.length) {
              d = c++;
              for (var e = u(a), f = e.next(); !f.done; f = e.next()) f.value.variantIds.push(d);
            }
            if (!a.length && b.length) for (d = c++, e = u(b), f = e.next(); !f.done; f = e.next()) f.value.variantIds.push(d);
            if (a.length && b.length) for (b = u(b), d = b.next(); !d.done; d = b.next()) for (d = d.value, e = u(a), f = e.next(); !f.done; f = e.next()) {
              f = f.value;
              var g = c++;
              d.variantIds.push(g);
              f.variantIds.push(g);
            }
          }
        }
        ;
        function QB() {
          wB.apply(this, arguments);
        }
        la(QB, wB);
        QB.prototype.ge = function(a) {
          var b, c, d, e, f, g;
          return Q(function(h) {
            if (h.g == 1) {
              b = [];
              for (c = 0; c < a.periods.length; ++c) {
                d = c == a.periods.length - 1 ? a.duration : a.periods[c + 1].startTime;
                e = d - a.periods[c].startTime;
                for (var k2 = a.periods[c], l = [], m = u(k2.streams), n = m.next(); !n.done; n = m.next()) n = n.value, n.variantIds.length != 0 && l.push(RB(n, k2.startTime, k2.startTime + e));
                f = l;
                b.push(f);
              }
              return F(h, Qw(b), 2);
            }
            g = h.h;
            return h.return({ appMetadata: a.appMetadata, creationTime: 0, drmInfo: a.drmInfo, duration: a.duration, expiration: a.expiration == null ? Infinity : a.expiration, originalManifestUri: a.originalManifestUri, sessionIds: a.sessionIds, size: a.size, streams: g, sequenceMode: false });
          });
        };
        function RB(a, b, c) {
          return { id: a.id, originalId: a.originalId, groupId: null, primary: a.primary, type: a.contentType, mimeType: a.mimeType, codecs: a.codecs, frameRate: a.frameRate, pixelAspectRatio: a.pixelAspectRatio, hdr: void 0, colorGamut: void 0, videoLayout: void 0, kind: a.kind, language: a.language, originalLanguage: a.language || null, label: a.label, width: a.width, height: a.height, encrypted: a.encrypted, keyIds: /* @__PURE__ */ new Set([a.keyId]), segments: a.segments.map(function(d) {
            return {
              startTime: b + d.startTime,
              endTime: b + d.endTime,
              initSegmentKey: a.initSegmentKey,
              appendWindowStart: b,
              appendWindowEnd: c,
              timestampOffset: b - a.presentationTimeOffset,
              dataKey: d.dataKey,
              tilesLayout: "",
              mimeType: null,
              codecs: null,
              thumbnailSprite: null
            };
          }), variantIds: a.variantIds, roles: [], forced: false, audioSamplingRate: null, channelsCount: null, spatialAudio: false, closedCaptions: null, tilesLayout: void 0, external: false, fastSwitching: false, isAudioMuxedInVideo: false };
        }
        ;
        function SB() {
          wB.apply(this, arguments);
        }
        la(SB, wB);
        p = SB.prototype;
        p.hasFixedKeySpace = function() {
          return false;
        };
        p.addSegments = function(a) {
          return this.add(this.i, a);
        };
        p.addManifests = function(a) {
          return this.add(this.g, a);
        };
        p.updateManifest = function(a, b) {
          return AB(this, a, b);
        };
        p.ge = function(a) {
          a.expiration == null && (a.expiration = Infinity);
          return Promise.resolve(a);
        };
        function TB() {
          this.m = this.j = this.i = this.h = this.g = this.l = null;
        }
        p = TB.prototype;
        p.init = function() {
          var a = this, b = new Lg(), c = false, d = new Bf(function() {
            c = true;
            b.reject(new U(2, 9, 9017));
          });
          typeof UB === "number" && UB > 0 && d.$(UB);
          var e = window2.indexedDB.open("shaka_offline_db", 5);
          e.onsuccess = function() {
            if (!c) {
              d.stop();
              var f = e.result;
              a.l = f;
              var g = f.objectStoreNames;
              g = g.contains("manifest") && g.contains("segment") ? new LB(f, "segment", "manifest") : null;
              a.g = g;
              g = f.objectStoreNames;
              g = g.contains("manifest-v2") && g.contains("segment-v2") ? new QB(f, "segment-v2", "manifest-v2") : null;
              a.h = g;
              g = f.objectStoreNames;
              g = g.contains("manifest-v3") && g.contains("segment-v3") ? new QB(f, "segment-v3", "manifest-v3") : null;
              a.i = g;
              g = f.objectStoreNames;
              g = g.contains("manifest-v5") && g.contains("segment-v5") ? new SB(f, "segment-v5", "manifest-v5") : null;
              a.j = g;
              f = f.objectStoreNames.contains("session-ids") ? new BB(f) : null;
              a.m = f;
              b.resolve();
            }
          };
          e.onupgradeneeded = function() {
            for (var f = e.result, g = u(["segment-v5", "manifest-v5", "session-ids"]), h = g.next(); !h.done; h = g.next()) h = h.value, f.objectStoreNames.contains(h) || f.createObjectStore(h, { autoIncrement: true });
          };
          e.onerror = function(f) {
            c || (d.stop(), b.reject(new U(2, 9, 9001, e.error)), f.preventDefault());
          };
          return b;
        };
        p.destroy = function() {
          var a = this;
          return Q(function(b) {
            switch (b.g) {
              case 1:
                if (!a.g) {
                  b.B(2);
                  break;
                }
                return F(b, a.g.destroy(), 2);
              case 2:
                if (!a.h) {
                  b.B(4);
                  break;
                }
                return F(b, a.h.destroy(), 4);
              case 4:
                if (!a.i) {
                  b.B(6);
                  break;
                }
                return F(b, a.i.destroy(), 6);
              case 6:
                if (!a.j) {
                  b.B(8);
                  break;
                }
                return F(b, a.j.destroy(), 8);
              case 8:
                if (!a.m) {
                  b.B(10);
                  break;
                }
                return F(b, a.m.destroy(), 10);
              case 10:
                a.l && a.l.close(), H(b);
            }
          });
        };
        p.getCells = function() {
          var a = /* @__PURE__ */ new Map();
          this.g && a.set("v1", this.g);
          this.h && a.set("v2", this.h);
          this.i && a.set("v3", this.i);
          this.j && a.set("v5", this.j);
          return a;
        };
        p.getEmeSessionCell = function() {
          return this.m;
        };
        p.erase = function() {
          var a = this;
          return Q(function(b) {
            switch (b.g) {
              case 1:
                if (!a.g) {
                  b.B(2);
                  break;
                }
                return F(b, a.g.destroy(), 2);
              case 2:
                if (!a.h) {
                  b.B(4);
                  break;
                }
                return F(b, a.h.destroy(), 4);
              case 4:
                if (!a.i) {
                  b.B(6);
                  break;
                }
                return F(b, a.i.destroy(), 6);
              case 6:
                if (!a.j) {
                  b.B(8);
                  break;
                }
                return F(b, a.j.destroy(), 8);
              case 8:
                return a.l && a.l.close(), F(b, VB(), 10);
              case 10:
                return a.l = null, a.g = null, a.h = null, a.i = null, a.j = null, F(b, a.init(), 0);
            }
          });
        };
        function VB() {
          var a = new Lg(), b = window2.indexedDB.deleteDatabase("shaka_offline_db");
          b.onblocked = function() {
          };
          b.onsuccess = function() {
            a.resolve();
          };
          b.onerror = function(c) {
            a.reject(new U(2, 9, 9001, b.error));
            c.preventDefault();
          };
          return a;
        }
        var UB = 5;
        S("shaka.offline.indexeddb.StorageMechanismOpenTimeout", UB);
        KB("idb", function() {
          return Rb().oi() ? new TB() : null;
        });
        function WB(a, b, c, d) {
          this.g = a;
          this.i = b;
          this.h = c;
          this.l = d;
          this.j = ["offline:", a, "/", b, "/", c, "/", d].join("");
        }
        WB.prototype.Yb = function() {
          return this.i;
        };
        WB.prototype.kb = function() {
          return this.h;
        };
        WB.prototype.key = function() {
          return this.l;
        };
        WB.prototype.toString = function() {
          return this.j;
        };
        function XB(a) {
          a = /^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(a);
          if (a == null) return null;
          var b = a[1];
          if (b != "manifest" && b != "segment") return null;
          var c = a[2];
          if (!c) return null;
          var d = a[3];
          return d && b != null ? new WB(b, c, d, Number(a[4])) : null;
        }
        ;
        function YB(a, b) {
          this.h = a;
          this.g = b;
        }
        function ZB(a, b) {
          var c = new yl(null, 0);
          c.zb(b.duration);
          var d = b.streams.filter(function(l) {
            return l.type == "audio";
          }), e = b.streams.filter(function(l) {
            return l.type == "video";
          });
          d = $B(a, d, e, c);
          e = b.streams.filter(function(l) {
            return l.type == sc;
          }).map(function(l) {
            return aC(a, l, c);
          });
          var f = b.streams.filter(function(l) {
            return l.type == "image";
          }).map(function(l) {
            return aC(a, l, c);
          }), g = b.drmInfo ? [b.drmInfo] : [];
          if (b.drmInfo) for (var h = u(d.values()), k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, k2.audio && k2.audio.encrypted && (k2.audio.drmInfos = g), k2.video && k2.video.encrypted && (k2.video.drmInfos = g);
          return { presentationTimeline: c, offlineSessionIds: b.sessionIds, variants: Array.from(d.values()), textStreams: e, imageStreams: f, sequenceMode: b.sequenceMode || false, ignoreManifestTimestampsInSegmentsMode: false, type: b.type || "UNKNOWN", serviceDescription: null, nextUrl: null, periodCount: 1, gapCount: 0, isLowLatency: false, startTime: null };
        }
        function $B(a, b, c, d) {
          for (var e = /* @__PURE__ */ new Set(), f = u(b), g = f.next(); !g.done; g = f.next()) {
            g = u(g.value.variantIds);
            for (var h = g.next(); !h.done; h = g.next()) e.add(h.value);
          }
          f = u(c);
          for (g = f.next(); !g.done; g = f.next()) for (g = u(g.value.variantIds), h = g.next(); !h.done; h = g.next()) e.add(h.value);
          f = /* @__PURE__ */ new Map();
          e = u(e);
          for (g = e.next(); !g.done; g = e.next()) g = g.value, f.set(g, { id: g, language: "", disabledUntilTime: 0, primary: false, audio: null, video: null, bandwidth: 0, allowedByApplication: true, allowedByKeySystem: true, decodingInfos: [] });
          b = u(b);
          for (e = b.next(); !e.done; e = b.next()) for (g = e.value, e = aC(a, g, d), g = u(g.variantIds), h = g.next(); !h.done; h = g.next()) h = f.get(h.value), h.language = e.language, h.primary = h.primary || e.primary, h.audio = e;
          c = u(c);
          for (b = c.next(); !b.done; b = c.next()) for (e = b.value, b = aC(a, e, d), e = u(e.variantIds), g = e.next(); !g.done; g = e.next()) g = f.get(g.value), g.primary = g.primary || b.primary, g.video = b;
          return f;
        }
        function aC(a, b, c) {
          var d = b.segments.map(function(e) {
            return bC(a, e, b);
          });
          c.Be(d);
          return { id: b.id, originalId: b.originalId, groupId: b.groupId, createSegmentIndex: function() {
            return Promise.resolve();
          }, segmentIndex: new Xl(d), mimeType: b.mimeType, codecs: b.codecs, width: b.width || void 0, height: b.height || void 0, frameRate: b.frameRate, pixelAspectRatio: b.pixelAspectRatio, hdr: b.hdr, colorGamut: b.colorGamut, videoLayout: b.videoLayout, kind: b.kind, encrypted: b.encrypted, drmInfos: [], keyIds: b.keyIds, language: b.language, originalLanguage: b.originalLanguage || null, label: b.label, type: b.type, primary: b.primary, trickModeVideo: null, dependencyStream: null, emsgSchemeIdUris: null, roles: b.roles, forced: b.forced, channelsCount: b.channelsCount, audioSamplingRate: b.audioSamplingRate, spatialAudio: b.spatialAudio, closedCaptions: b.closedCaptions, tilesLayout: b.tilesLayout, mssPrivateData: b.mssPrivateData, accessibilityPurpose: null, external: b.external, fastSwitching: b.fastSwitching, fullMimeTypes: /* @__PURE__ */ new Set([df(b.mimeType, b.codecs)]), isAudioMuxedInVideo: false, baseOriginalId: null };
        }
        function bC(a, b, c) {
          var d = new WB("segment", a.h, a.g, b.dataKey);
          a = new yj(b.startTime, b.endTime, function() {
            return [d.toString()];
          }, 0, null, b.initSegmentKey != null ? cC(a, b.initSegmentKey) : null, b.timestampOffset, b.appendWindowStart, b.appendWindowEnd, [], b.tilesLayout || "");
          a.mimeType = b.mimeType || c.mimeType || "";
          a.codecs = b.codecs || c.codecs || "";
          b.thumbnailSprite && a.jg(b.thumbnailSprite);
          return a;
        }
        function cC(a, b) {
          var c = new WB("segment", a.h, a.g, b);
          return new wj(function() {
            return [c.toString()];
          }, 0, null);
        }
        ;
        function dC() {
          this.g = null;
        }
        p = dC.prototype;
        p.configure = function() {
        };
        p.start = function(a, b) {
          var c = this, d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                d = XB(a);
                c.g = d;
                if (d == null || d.g != "manifest") throw new U(2, 1, 9004, a);
                e = new CB();
                sa(m, 2);
                return F(m, e.init(), 4);
              case 4:
                return F(m, GB(e, d.Yb(), d.kb()), 5);
              case 5:
                return f = m.h, F(m, f.getManifests([d.key()]), 6);
              case 6:
                return g = m.h, h = g[0], k2 = new YB(d.Yb(), d.kb()), l = ZB(k2, h), b.makeTextStreamsForClosedCaptions(l), m.return(l);
              case 2:
                return va(m), F(m, e.destroy(), 7);
              case 7:
                xa(m, 0);
            }
          });
        };
        p.stop = function() {
          return Promise.resolve();
        };
        p.update = function() {
        };
        p.onExpirationUpdated = function(a, b) {
          var c = this, d, e, f, g, h, k2, l;
          return Q(function(m) {
            switch (m.g) {
              case 1:
                return d = c.g, e = new CB(), ra(m, 2, 3), F(m, e.init(), 5);
              case 5:
                return F(m, GB(e, d.Yb(), d.kb()), 6);
              case 6:
                return f = m.h, F(m, f.getManifests([d.key()]), 7);
              case 7:
                g = m.h;
                h = g[0];
                k2 = h.sessionIds.includes(a);
                l = h.expiration == void 0 || h.expiration > b;
                if (!k2 || !l) {
                  m.B(3);
                  break;
                }
                return F(m, f.updateManifestExpiration(d.key(), b), 3);
              case 3:
                return va(m), F(m, e.destroy(), 10);
              case 10:
                xa(m, 0);
                break;
              case 2:
                ua(m), m.B(3);
            }
          });
        };
        p.onInitialVariantChosen = function() {
        };
        p.banLocation = function() {
        };
        p.setMediaElement = function() {
        };
        Ci("application/x-offline-manifest", function() {
          return new dC();
        });
        function eC() {
        }
        function fC(a, b) {
          var c = XB(a);
          c && c.g == "manifest" ? (a = { uri: a, originalUri: a, data: new ArrayBuffer(0), headers: { "content-type": "application/x-offline-manifest" }, originalRequest: b }, a = Pg(a)) : a = c && c.g == "segment" ? gC(c.key(), c, b) : Ng(new U(2, 1, 9004, a));
          return a;
        }
        function gC(a, b, c) {
          var d = new CB();
          return Pg(void 0).bb(function() {
            return d.init();
          }).bb(function() {
            return GB(d, b.Yb(), b.kb());
          }).bb(function(e) {
            return e.getSegments([b.key()]);
          }).bb(function(e) {
            return { uri: b, data: e[0].data, headers: {}, originalRequest: c };
          }).finally(function() {
            return d.destroy();
          });
        }
        S("shaka.offline.OfflineScheme", eC);
        eC.plugin = fC;
        Wg("offline", fC);
        function hC(a, b, c) {
          var d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                d = [];
                for (var m = [], n = u(c), q = n.next(); !q.done; q = n.next()) {
                  q = q.value;
                  for (var r = false, t = u(m), w = t.next(); !w.done; w = t.next()) if (w = w.value, iC(w.info, q)) {
                    w.sessionIds.push(q.sessionId);
                    r = true;
                    break;
                  }
                  r || m.push({ info: q, sessionIds: [q.sessionId] });
                }
                e = u(m);
                f = e.next();
              case 2:
                if (f.done) {
                  l.B(4);
                  break;
                }
                g = f.value;
                h = jC(a, b, g);
                return F(l, h, 5);
              case 5:
                k2 = l.h;
                d = d.concat(k2);
                f = e.next();
                l.B(2);
                break;
              case 4:
                return l.return(d);
            }
          });
        }
        function jC(a, b, c) {
          var d, e;
          return Q(function(f) {
            switch (f.g) {
              case 1:
                return d = new Bh({ Dc: b, onError: function() {
                }, Rf: function() {
                }, onExpirationUpdated: function() {
                }, onEvent: function() {
                } }), ra(f, 2), d.configure(a), F(f, Jh(d, c.info.keySystem, c.info.licenseUri, c.info.serverCertificate, c.info.audioCapabilities, c.info.videoCapabilities), 4);
              case 4:
                ta(f, 3);
                break;
              case 2:
                return ua(f), F(f, d.destroy(), 5);
              case 5:
                return f.return([]);
              case 3:
                return e = [], F(f, Promise.all(c.sessionIds.map(function(g) {
                  return Q(function(h) {
                    if (h.g == 1) return ra(h, 2), F(h, Vh(d, g), 4);
                    if (h.g != 2) return e.push(g), ta(h, 0);
                    ua(h);
                    H(h);
                  });
                })), 6);
              case 6:
                return F(f, d.destroy(), 7);
              case 7:
                return f.return(e);
            }
          });
        }
        function iC(a, b) {
          function c(d, e) {
            return d.robustness == e.robustness && d.contentType == e.contentType;
          }
          return a.keySystem == b.keySystem && a.licenseUri == b.licenseUri && Rc(a.audioCapabilities, b.audioCapabilities, c) && Rc(a.videoCapabilities, b.videoCapabilities, c);
        }
        ;
        function kC(a, b, c) {
          var d = b.presentationTimeline.getDuration();
          b = lC(b);
          return { offlineUri: null, originalManifestUri: a, duration: d, size: 0, expiration: Infinity, tracks: b, appMetadata: c, isIncomplete: false };
        }
        function mC(a, b) {
          var c = ZB(new YB(a.Yb(), a.kb()), b), d = b.appMetadata || {};
          c = lC(c);
          return { offlineUri: a.toString(), originalManifestUri: b.originalManifestUri, duration: b.duration, size: b.size, expiration: b.expiration, tracks: c, appMetadata: d, isIncomplete: b.isIncomplete || false };
        }
        function lC(a) {
          var b = [], c = kg(a.variants);
          c = u(c);
          for (var d = c.next(); !d.done; d = c.next()) b.push(bg(d.value));
          a = u(a.textStreams);
          for (c = a.next(); !c.done; c = a.next()) b.push(cg(c.value));
          return b;
        }
        ;
        function nC() {
          this.g = /* @__PURE__ */ new Map();
        }
        function oC(a, b) {
          var c = b.audio, d = b.video;
          c && !d && a.g.set(c.id, c.bandwidth || b.bandwidth);
          !c && d && a.g.set(d.id, d.bandwidth || b.bandwidth);
          if (c && d) {
            var e = c.bandwidth || 393216, f = d.bandwidth || b.bandwidth - e;
            f <= 0 && (f = b.bandwidth);
            a.g.set(c.id, e);
            a.g.set(d.id, f);
          }
        }
        function pC(a, b) {
          a.g.set(b.id, b.bandwidth || 2048);
        }
        function qC(a, b) {
          a = a.g.get(b);
          a == null && (a = 0);
          return a;
        }
        ;
        function rC(a) {
          var b = this;
          if (a && a.constructor != X) throw new U(2, 9, 9008);
          this.g = this.h = null;
          a ? (this.h = a.g, this.g = a.Vb()) : (this.h = Xn(), this.g = new Vg(), this.g.configure(this.h.networking));
          this.i = [];
          this.l = [];
          var c = !a;
          this.j = new hh(function() {
            var d, e, f, g, h;
            return Q(function(k2) {
              switch (k2.g) {
                case 1:
                  return F(k2, Promise.all(b.l.map(function(l) {
                    return mB(l);
                  })), 2);
                case 2:
                  d = function() {
                  };
                  e = [];
                  f = u(b.i);
                  for (g = f.next(); !g.done; g = f.next()) h = g.value, e.push(h.then(d, d));
                  return F(k2, Promise.all(e), 3);
                case 3:
                  if (!c) {
                    k2.B(4);
                    break;
                  }
                  return F(k2, b.g.destroy(), 4);
                case 4:
                  b.h = null, b.g = null, H(k2);
              }
            });
          });
          this.m = 1e9;
        }
        function sC() {
          if (Fi(Rb())) a: {
            var a = u(DB.values());
            for (var b = a.next(); !b.done; b = a.next()) if (b = b.value, b = b()) {
              b.destroy();
              a = true;
              break a;
            }
            a = false;
          }
          else a = false;
          return a;
        }
        p = rC.prototype;
        p.destroy = function() {
          return this.j.destroy();
        };
        p.configure = function(a, b) {
          arguments.length == 2 && typeof a == "string" && (a = An(a, b));
          return bo(this.h, a);
        };
        p.getConfiguration = function() {
          var a = Xn();
          bo(a, this.h, Xn());
          return a;
        };
        p.Vb = function() {
          return this.g;
        };
        p.store = function(a, b, c, d, e) {
          var f = this, g = this.getConfiguration(), h = new lB(this.g);
          this.l.push(h);
          b = tC(this, a, b || {}, d || [], e || [], function() {
            var k2;
            return Q(function(l) {
              if (l.g == 1) return c ? l.B(2) : F(l, Jo(a, f.g, g.manifest.retryParameters), 3);
              l.g != 2 && (c = l.h);
              k2 = Hi(a, c || null);
              return l.return(k2());
            });
          }, g, h);
          b = new Mg(b, function() {
            return mB(h);
          });
          b.finally(function() {
            Qc(f.l, h);
          });
          return uC(this, b);
        };
        function tC(a, b, c, d, e, f, g, h) {
          var k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P, O;
          return Q(function(M) {
            switch (M.g) {
              case 1:
                return vC(), l = k2 = null, m = new CB(), r = q = n = null, ra(M, 2, 3), F(M, f(), 5);
              case 5:
                return k2 = M.h, F(M, wC(a, b, k2, g), 6);
              case 6:
                t = M.h;
                xC(a);
                w = !t.presentationTimeline.U() && !t.presentationTimeline.ld();
                if (!w) throw new U(2, 9, 9005, b);
                v = u(d);
                z = v.next();
              case 7:
                if (z.done) {
                  M.B(9);
                  break;
                }
                y = z.value;
                return F(M, yC(a, y, t), 10);
              case 10:
                A = M.h;
                t.imageStreams.push(A);
                xC(a);
                z = v.next();
                M.B(7);
                break;
              case 9:
                C = u(e), E = C.next();
              case 11:
                if (E.done) return Lh(g.drm.clearKeys, t.variants), G = t.variants.some(function(R) {
                  if (R.audio) {
                    for (var W = u(R.audio.drmInfos), wa = W.next(); !wa.done; wa = W.next()) if (wa.value.licenseServerUri.startsWith("data:")) return true;
                  }
                  if (R.video) {
                    for (R = u(R.video.drmInfos), W = R.next(); !W.done; W = R.next()) if (W.value.licenseServerUri.startsWith("data:")) return true;
                  }
                  return false;
                }), I = g.offline.usePersistentLicense, G && (I = false), F(M, a.Dd(t, function(R) {
                  r = r || R;
                }, g, I), 15);
                D = E.value;
                return F(
                  M,
                  zC(a, t, D.uri, D.language, D.kind, D.mime, D.codecs),
                  14
                );
              case 14:
                B = M.h;
                t.textStreams.push(B);
                xC(a);
                E = C.next();
                M.B(11);
                break;
              case 15:
                l = M.h;
                xC(a);
                if (r) throw r;
                return F(M, AC(t, l, g, I), 16);
              case 16:
                return F(M, m.init(), 17);
              case 17:
                return xC(a), F(M, EB(m), 18);
              case 18:
                return n = M.h, xC(a), J = BC(l, t, b, c, g, h, I), L = J.Nl, K = J.ti, F(M, n.kb.addManifests([L]), 19);
              case 19:
                N = M.h;
                xC(a);
                q = N[0];
                xC(a);
                if (r) throw r;
                return F(M, CC(a, K, q, L, h, g, n.kb, t, l, I), 20);
              case 20:
                return xC(a), DC(t, L, l, I), F(M, n.kb.updateManifest(q, L), 21);
              case 21:
                return xC(a), P = new WB(
                  "manifest",
                  n.path.Yb,
                  n.path.kb,
                  q
                ), M.return(mC(P, L));
              case 3:
                return va(M), F(M, m.destroy(), 22);
              case 22:
                if (!k2) {
                  M.B(23);
                  break;
                }
                return F(M, k2.stop(), 23);
              case 23:
                if (!l) {
                  M.B(25);
                  break;
                }
                return F(M, l.destroy(), 25);
              case 25:
                xa(M, 0);
                break;
              case 2:
                O = ua(M);
                if (q == null) {
                  M.B(27);
                  break;
                }
                return F(M, EC(q), 27);
              case 27:
                throw r || O;
            }
          });
        }
        function CC(a, b, c, d, e, f, g, h, k2, l) {
          var m, n, q, r, t, w, v, z, y, A, C;
          return Q(function(E) {
            switch (E.g) {
              case 1:
                m = {};
                n = 0;
                q = function() {
                  if (a.j.g || e.l) throw new U(2, 9, 7001);
                };
                r = function(D, B) {
                  var G, I, J, L, K, N, P, O, M;
                  return Q(function(R) {
                    if (R.g == 1) {
                      G = u(D);
                      I = G.next();
                      for (J = {}; !I.done; J = { xc: void 0 }, I = G.next()) J.xc = I.value, q(), L = hB(J.xc, f), K = J.xc.i, N = J.xc.h, P = /* @__PURE__ */ function(W) {
                        return function(wa) {
                          var Y, Ka, Na, La;
                          return Q(function(Ea) {
                            switch (Ea.g) {
                              case 1:
                                Y = W.xc.g;
                                Ka = Y.hc(false);
                                if (!Y.aesKey || Ka) {
                                  Ea.B(2);
                                  break;
                                }
                                return F(Ea, Gm(
                                  wa,
                                  Y.aesKey,
                                  W.xc.j
                                ), 3);
                              case 3:
                                wa = Ea.h;
                              case 2:
                                return Na = gB(Y), F(Ea, g.addSegments([{ data: wa }]), 4);
                              case 4:
                                La = Ea.h, q(), m[Na] = La[0], n += wa.byteLength, H(Ea);
                            }
                          });
                        };
                      }(J), O = J.xc.g, (M = O.hc(false)) ? pB(e, J.xc.groupId, M, K, N, P) : e.queue(J.xc.groupId, L, K, N, P);
                      return F(R, qB(e), 2);
                    }
                    q();
                    if (!B || e.l) return R.B(0);
                    DC(h, d, k2, l);
                    return F(R, g.updateManifest(c, d), 0);
                  });
                };
                t = false;
                ra(E, 2);
                if (!FC(h) || !t || GC(h)) {
                  E.B(4);
                  break;
                }
                return F(E, r(b.filter(function(D) {
                  return D.h;
                }), true), 5);
              case 5:
                return q(), b = b.filter(function(D) {
                  return !D.h;
                }), w = m, v = n, m = {}, n = 0, F(
                  E,
                  HC(g, c, d, w, v, function() {
                    return xC(a);
                  }),
                  6
                );
              case 6:
                q();
              case 4:
                if (t) {
                  E.B(7);
                  break;
                }
                return F(E, r(b, false), 8);
              case 8:
                return q(), z = m, y = n, m = {}, n = 0, F(E, HC(g, c, d, z, y, function() {
                  return q();
                }), 9);
              case 9:
                q();
              case 7:
                ta(E, 0);
                break;
              case 2:
                return A = ua(E), C = Object.values(m), F(E, g.removeSegments(C, function() {
                }), 10);
              case 10:
                throw A;
            }
          });
        }
        function EC(a) {
          var b, c, d, e;
          return Q(function(f) {
            switch (f.g) {
              case 1:
                return b = new CB(), F(f, b.init(), 2);
              case 2:
                return F(f, EB(b), 3);
              case 3:
                return c = f.h, d = new WB("manifest", c.path.Yb, c.path.kb, a), F(f, b.destroy(), 4);
              case 4:
                return e = new rC(), F(f, e.remove(d.toString()), 0);
            }
          });
        }
        function HC(a, b, c, d, e, f) {
          var g, h, k2, l, m, n, q, r, t, w, v;
          return Q(function(z) {
            switch (z.g) {
              case 1:
                g = false;
                ra(z, 2);
                h = true;
                k2 = u(c.streams);
                for (l = k2.next(); !l.done; l = k2.next()) for (m = l.value, n = u(m.segments), q = n.next(); !q.done; q = n.next()) r = q.value, t = r.pendingSegmentRefId ? d[r.pendingSegmentRefId] : null, t != null && (r.dataKey = t, r.pendingSegmentRefId = void 0), t = r.pendingInitSegmentRefId ? d[r.pendingInitSegmentRefId] : null, t != null && (r.initSegmentKey = t, r.pendingInitSegmentRefId = void 0), r.pendingSegmentRefId && (h = false), r.pendingInitSegmentRefId && (h = false);
                c.size += e;
                h && (c.isIncomplete = false);
                return F(z, a.updateManifest(b, c), 4);
              case 4:
                g = true;
                f();
                ta(z, 0);
                break;
              case 2:
                return w = ua(z), F(z, EC(b), 5);
              case 5:
                if (g) {
                  z.B(6);
                  break;
                }
                v = Object.values(d);
                return F(z, a.removeSegments(v, function() {
                }), 6);
              case 6:
                throw w;
            }
          });
        }
        function AC(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E, D, B, G, I, J, L, K, N, P, O, M, R;
          return Q(function(W) {
            switch (W.g) {
              case 1:
                return e = { width: Infinity, height: Infinity }, Jf(a, c.restrictions, e), F(W, Mf(b, a, d, c.drm.preferredKeySystems, c.drm.keySystemsMapping), 2);
              case 2:
                f = [];
                g = c.preferredDecodingAttributes;
                h = c.preferredVideoCodecs;
                k2 = c.preferredAudioCodecs;
                l = c.preferredTextFormats;
                Hf(a, h, k2, g, l);
                m = u(a.variants);
                for (n = m.next(); !n.done; n = m.next()) q = n.value, f.push(bg(q));
                r = u(a.textStreams);
                for (t = r.next(); !t.done; t = r.next()) w = t.value, f.push(cg(w));
                v = u(a.imageStreams);
                for (z = v.next(); !z.done; z = v.next()) y = z.value, f.push(dg(y));
                return F(W, c.offline.trackSelectionCallback(f), 3);
              case 3:
                A = W.h;
                C = a.presentationTimeline.getDuration();
                E = 0;
                D = u(A);
                for (B = D.next(); !B.done; B = D.next()) G = B.value, I = G.bandwidth * C / 8, E += I;
                ra(W, 4);
                return F(W, c.offline.downloadSizeCallback(E), 6);
              case 6:
                J = W.h;
                if (!J) throw new U(2, 9, 9014);
                ta(W, 5);
                break;
              case 4:
                L = ua(W);
                if (L instanceof U) throw L;
                throw new U(2, 9, 9015);
              case 5:
                K = /* @__PURE__ */ new Set();
                N = /* @__PURE__ */ new Set();
                P = /* @__PURE__ */ new Set();
                O = u(A);
                for (M = O.next(); !M.done; M = O.next()) R = M.value, R.type == "variant" && K.add(R.id), R.type == "text" && N.add(R.id), R.type == "image" && P.add(R.id);
                a.variants = a.variants.filter(function(wa) {
                  return K.has(wa.id);
                });
                a.textStreams = a.textStreams.filter(function(wa) {
                  return N.has(wa.id);
                });
                a.imageStreams = a.imageStreams.filter(function(wa) {
                  return P.has(wa.id);
                });
                IC(a);
                H(W);
            }
          });
        }
        function BC(a, b, c, d, e, f, g) {
          var h = kC(c, b, d), k2 = e.offline.progressCallback;
          nB(f, function(t, w) {
            h.size = w;
            k2(h, t);
          }, function(t, w) {
            l && g && m == w && Rh(a, "cenc", t);
          });
          var l = FC(b) && !GC(b), m = null;
          l && (m = JC.get(a.g.keySystem));
          for (var n = new nC(), q = u(b.textStreams), r = q.next(); !r.done; r = q.next()) n.g.set(r.value.id, 52);
          q = u(b.imageStreams);
          for (r = q.next(); !r.done; r = q.next()) pC(n, r.value);
          q = u(b.variants);
          for (r = q.next(); !r.done; r = q.next()) oC(n, r.value);
          f = KC(f, n, b, e);
          e = f.streams;
          f = f.ti;
          (n = a.g) && g && (n.initData = []);
          return { Nl: {
            creationTime: Date.now(),
            originalManifestUri: c,
            duration: b.presentationTimeline.getDuration(),
            size: 0,
            expiration: a.me(),
            streams: e,
            sessionIds: g ? $h(a) : [],
            drmInfo: n,
            appMetadata: d,
            isIncomplete: true,
            sequenceMode: b.sequenceMode,
            type: b.type
          }, ti: f };
        }
        function FC(a) {
          return a.variants.some(function(b) {
            var c = b.audio && b.audio.encrypted;
            return b.video && b.video.encrypted || c;
          });
        }
        function GC(a) {
          return a.variants.some(function(b) {
            return (b.video ? b.video.drmInfos : []).concat(b.audio ? b.audio.drmInfos : []).some(function(c) {
              return c.initData && c.initData.length;
            });
          });
        }
        function DC(a, b, c, d) {
          b.expiration = c.me();
          c = $h(c);
          b.sessionIds = d ? c : [];
          if (FC(a) && d && !c.length) throw new U(2, 9, 9007);
        }
        p.remove = function(a) {
          return LC(this, MC(this, a));
        };
        function MC(a, b) {
          var c, d, e, f, g, h;
          return Q(function(k2) {
            switch (k2.g) {
              case 1:
                vC();
                c = XB(b);
                if (c == null || c.g != "manifest") throw new U(2, 9, 9004, b);
                d = c;
                e = new CB();
                sa(k2, 2);
                return F(k2, e.init(), 4);
              case 4:
                return F(k2, GB(e, d.Yb(), d.kb()), 5);
              case 5:
                return f = k2.h, F(k2, f.getManifests([d.key()]), 6);
              case 6:
                return g = k2.h, h = g[0], F(k2, Promise.all([NC(a, h, e), OC(f, d, h)]), 2);
              case 2:
                return va(k2), F(k2, e.destroy(), 8);
              case 8:
                xa(k2, 0);
            }
          });
        }
        function PC(a, b) {
          for (var c = [], d = u(a.streams), e = d.next(); !e.done; e = d.next()) e = e.value, b && e.type == "video" ? c.push({ contentType: df(e.mimeType, e.codecs), robustness: a.drmInfo.videoRobustness }) : b || e.type != "audio" || c.push({ contentType: df(e.mimeType, e.codecs), robustness: a.drmInfo.audioRobustness });
          return c;
        }
        function NC(a, b, c) {
          return Q(function(d) {
            return F(d, QC(a.g, a.h.drm, c, b), 0);
          });
        }
        function OC(a, b, c) {
          function d() {
          }
          var e = RC(c);
          mC(b, c);
          return Promise.all([a.removeSegments(e, d), a.removeManifests([b.key()], d)]);
        }
        p.hm = function() {
          return LC(this, SC(this));
        };
        function SC(a) {
          var b, c, d, e, f, g, h, k2, l, m;
          return Q(function(n) {
            switch (n.g) {
              case 1:
                return vC(), b = a.g, c = a.h.drm, d = new CB(), e = false, sa(n, 2), F(n, d.init(), 4);
              case 4:
                f = [], HB(d, function(q) {
                  return f.push(q);
                }), g = u(f), h = g.next();
              case 5:
                if (h.done) {
                  n.B(2);
                  break;
                }
                k2 = h.value;
                return F(n, k2.getAll(), 8);
              case 8:
                return l = n.h, F(n, hC(c, b, l), 9);
              case 9:
                return m = n.h, F(n, k2.remove(m), 10);
              case 10:
                m.length != l.length && (e = true);
                h = g.next();
                n.B(5);
                break;
              case 2:
                return va(n), F(n, d.destroy(), 11);
              case 11:
                xa(n, 3);
                break;
              case 3:
                return n.return(!e);
            }
          });
        }
        p.list = function() {
          return LC(this, TC());
        };
        function TC() {
          var a, b, c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                return vC(), a = [], b = new CB(), sa(d, 2), F(d, b.init(), 4);
              case 4:
                return c = Promise.resolve(), FB(b, function(e, f) {
                  c = c.then(function() {
                    var g;
                    return Q(function(h) {
                      if (h.g == 1) return F(h, f.getAllManifests(), 2);
                      g = h.h;
                      g.forEach(function(k2, l) {
                        k2 = mC(new WB("manifest", e.Yb, e.kb, l), k2);
                        a.push(k2);
                      });
                      H(h);
                    });
                  });
                }), F(d, c, 2);
              case 2:
                return va(d), F(d, b.destroy(), 6);
              case 6:
                xa(d, 3);
                break;
              case 3:
                return d.return(a);
            }
          });
        }
        function wC(a, b, c, d) {
          var e, f, g, h, k2;
          return Q(function(l) {
            if (l.g == 1) return e = null, f = a.g, g = {
              networkingEngine: f,
              filter: function() {
                return Promise.resolve();
              },
              makeTextStreamsForClosedCaptions: function() {
              },
              onTimelineRegionAdded: function() {
              },
              onEvent: function() {
              },
              onError: function(m) {
                e = m;
              },
              isLowLatencyMode: function() {
                return false;
              },
              updateDuration: function() {
              },
              newDrmInfo: function() {
              },
              onManifestUpdated: function() {
              },
              getBandwidthEstimate: function() {
                return d.abr.defaultBandwidthEstimate;
              },
              onMetadata: function() {
              },
              disableStream: function() {
              },
              addFont: function() {
              }
            }, c.configure(d.manifest), xC(a), F(l, c.start(b, g), 2);
            if (l.g != 3) return h = l.h, xC(a), k2 = UC(h), F(l, Promise.all(lb(k2, function(m) {
              return m.createSegmentIndex();
            })), 3);
            xC(a);
            if (e) throw e;
            return l.return(h);
          });
        }
        function yC(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z;
          return Q(function(y) {
            switch (y.g) {
              case 1:
                return F(y, VC(a, b), 2);
              case 2:
                d = y.h;
                if (d != "text/vtt") throw new U(1, 2, 2017, b);
                return F(y, WC(b, a.g, a.h.streaming.retryParameters), 3);
              case 3:
                e = y.h;
                f = sf(d);
                if (!f) throw new U(2, 2, 2014, d);
                g = f();
                h = { periodStart: 0, segmentStart: 0, segmentEnd: c.presentationTimeline.getDuration(), vttOffset: 0 };
                k2 = Kb(e);
                l = g.parseMedia(k2, h, b, []);
                m = [];
                n = u(l);
                q = n.next();
                for (r = {}; !q.done; r = { vg: void 0, Fd: void 0 }, q = n.next()) r.Fd = q.value, r.vg = null, t = /* @__PURE__ */ function(A) {
                  return function() {
                    A.vg == null && (A.vg = mc([b], [A.Fd.payload]));
                    return A.vg || [];
                  };
                }(r), w = new yj(r.Fd.startTime, r.Fd.endTime, t, 0, null, null, 0, 0, Infinity), r.Fd.payload.includes("#xywh") && (v = r.Fd.payload.split("#xywh=")[1].split(","), v.length === 4 && w.jg({ height: parseInt(v[3], 10), positionX: parseInt(v[0], 10), positionY: parseInt(v[1], 10), width: parseInt(v[2], 10) })), m.push(w);
                z = d;
                if (!m.length) {
                  y.B(4);
                  break;
                }
                return F(y, Jo(m[0].T()[0], a.g, a.h.manifest.retryParameters), 5);
              case 5:
                z = y.h;
              case 4:
                return y.return({
                  id: a.m++,
                  originalId: null,
                  groupId: null,
                  createSegmentIndex: function() {
                    return Promise.resolve();
                  },
                  segmentIndex: new Xl(m),
                  mimeType: z || "",
                  codecs: "",
                  kind: "",
                  encrypted: false,
                  drmInfos: [],
                  keyIds: /* @__PURE__ */ new Set(),
                  language: "und",
                  originalLanguage: null,
                  label: null,
                  type: "image",
                  primary: false,
                  trickModeVideo: null,
                  dependencyStream: null,
                  emsgSchemeIdUris: null,
                  roles: [],
                  forced: false,
                  channelsCount: null,
                  audioSamplingRate: null,
                  spatialAudio: false,
                  closedCaptions: null,
                  tilesLayout: "1x1",
                  accessibilityPurpose: null,
                  external: true,
                  fastSwitching: false,
                  fullMimeTypes: /* @__PURE__ */ new Set([df(z || "", "")]),
                  isAudioMuxedInVideo: false,
                  baseOriginalId: null
                });
            }
          });
        }
        function zC(a, b, c, d, e, f, g) {
          var h, k2, l;
          return Q(function(m) {
            if (m.g == 1) return f ? m.B(2) : F(m, VC(a, c), 3);
            m.g != 2 && (f = m.h);
            h = {
              id: a.m++,
              originalId: null,
              groupId: null,
              createSegmentIndex: function() {
                return Promise.resolve();
              },
              segmentIndex: Zl(0, b.presentationTimeline.getDuration(), [c]),
              mimeType: f || "",
              codecs: g || "",
              kind: e,
              encrypted: false,
              drmInfos: [],
              keyIds: /* @__PURE__ */ new Set(),
              language: d,
              originalLanguage: d,
              label: null,
              type: sc,
              primary: false,
              trickModeVideo: null,
              dependencyStream: null,
              emsgSchemeIdUris: null,
              roles: [],
              forced: false,
              channelsCount: null,
              audioSamplingRate: null,
              spatialAudio: false,
              closedCaptions: null,
              accessibilityPurpose: null,
              external: true,
              fastSwitching: false,
              fullMimeTypes: /* @__PURE__ */ new Set([df(f || "", g || "")]),
              isAudioMuxedInVideo: false,
              baseOriginalId: null
            };
            k2 = df(h.mimeType, h.codecs);
            l = tf(k2);
            if (!l) throw new U(2, 2, 2014, f);
            return m.return(h);
          });
        }
        function VC(a, b) {
          var c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                return ra(d, 2), F(d, Jo(b, a.g, a.h.streaming.retryParameters), 4);
              case 4:
                c = d.h;
                ta(d, 3);
                break;
              case 2:
                ua(d);
              case 3:
                if (c) return d.return(c);
                throw new U(1, 2, 2011, b);
            }
          });
        }
        function WC(a, b, c) {
          var d, e, f;
          return Q(function(g) {
            if (g.g == 1) return d = fh, e = $g([a], c), e.method = "GET", F(g, b.request(d, e).promise, 2);
            f = g.h;
            return g.return(f.data);
          });
        }
        p.Dd = function(a, b, c, d) {
          var e = this, f;
          return Q(function(g) {
            return g.g == 1 ? (f = new Bh({ Dc: e.g, onError: b, Rf: function() {
            }, onExpirationUpdated: function() {
            }, onEvent: function() {
            } }), f.configure(c.drm), F(g, Gh(f, a.variants, d), 2)) : g.g != 3 ? F(g, Th(f), 3) : g.return(f);
          });
        };
        function KC(a, b, c, d) {
          var e = /* @__PURE__ */ new Map(), f = UC(c), g = /* @__PURE__ */ new Map();
          f = u(f);
          for (var h = f.next(); !h.done; h = f.next()) {
            h = h.value;
            var k2 = XC(a, b, c, h, d, e);
            g.set(h.id, k2);
          }
          a = u(c.variants);
          for (b = a.next(); !b.done; b = a.next()) b = b.value, b.audio && g.get(b.audio.id).variantIds.push(b.id), b.video && g.get(b.video.id).variantIds.push(b.id);
          return { streams: Array.from(g.values()), ti: Array.from(e.values()) };
        }
        function XC(a, b, c, d, e, f) {
          var g = {
            id: d.id,
            originalId: d.originalId,
            groupId: d.groupId,
            primary: d.primary,
            type: d.type,
            mimeType: d.mimeType,
            codecs: d.codecs,
            frameRate: d.frameRate,
            pixelAspectRatio: d.pixelAspectRatio,
            hdr: d.hdr,
            colorGamut: d.colorGamut,
            videoLayout: d.videoLayout,
            kind: d.kind,
            language: d.language,
            originalLanguage: d.originalLanguage,
            label: d.label,
            width: d.width || null,
            height: d.height || null,
            encrypted: d.encrypted,
            keyIds: d.keyIds,
            segments: [],
            variantIds: [],
            roles: d.roles,
            forced: d.forced,
            channelsCount: d.channelsCount,
            audioSamplingRate: d.audioSamplingRate,
            spatialAudio: d.spatialAudio,
            closedCaptions: d.closedCaptions,
            tilesLayout: d.tilesLayout,
            mssPrivateData: d.mssPrivateData,
            external: d.external,
            fastSwitching: d.fastSwitching,
            isAudioMuxedInVideo: d.isAudioMuxedInVideo
          }, h = e.offline.numberOfParallelDownloads, k2 = h === 0 ? d.id : 0;
          YC(d, c.presentationTimeline.Nb(), function(l, m) {
            var n = gB(l), q = void 0;
            if (!f.has(n)) {
              var r = l.endTime - l.startTime;
              r = qC(b, d.id) * r;
              r = jB(a.g, r);
              f.set(n, new fB(l, r, k2, false, m));
            }
            l.ia && (q = gB(l.ia), f.has(q) || (r = qC(
              b,
              d.id
            ) * 0.5, r = jB(a.g, r), f.set(q, new fB(l.ia, r, k2, true, m))));
            g.segments.push({ pendingInitSegmentRefId: q, initSegmentKey: q ? 0 : null, startTime: l.startTime, endTime: l.endTime, appendWindowStart: l.appendWindowStart, appendWindowEnd: l.appendWindowEnd, timestampOffset: l.timestampOffset, tilesLayout: l.tilesLayout, pendingSegmentRefId: n, dataKey: 0, mimeType: l.mimeType, codecs: l.codecs, thumbnailSprite: l.thumbnailSprite });
            h !== 0 && (k2 = (k2 + 1) % h);
          });
          return g;
        }
        function YC(a, b, c) {
          b = a.segmentIndex.find(b);
          if (b != null) for (var d = a.segmentIndex.get(b); d; ) c(d, b), d = a.segmentIndex.get(++b);
        }
        function xC(a) {
          if (a.j.g) throw new U(2, 9, 7001);
        }
        function vC() {
          if (!sC()) throw new U(2, 9, 9e3);
        }
        function LC(a, b) {
          return Q(function(c) {
            if (c.g == 1) return a.i.push(b), sa(c, 2), F(c, b, 4);
            if (c.g != 2) return c.return(c.h);
            va(c);
            Qc(a.i, b);
            return xa(c, 0);
          });
        }
        function uC(a, b) {
          var c = b.promise;
          a.i.push(c);
          return b.finally(function() {
            Qc(a.i, c);
          });
        }
        function RC(a) {
          var b = /* @__PURE__ */ new Set();
          a = u(a.streams);
          for (var c = a.next(); !c.done; c = a.next()) {
            c = u(c.value.segments);
            for (var d = c.next(); !d.done; d = c.next()) d = d.value, d.initSegmentKey != null && b.add(d.initSegmentKey), b.add(d.dataKey);
          }
          return Array.from(b);
        }
        function QC(a, b, c, d) {
          var e, f, g;
          return Q(function(h) {
            if (h.g == 1) {
              if (!d.drmInfo) return h.return();
              e = IB(c);
              f = d.sessionIds.map(function(k2) {
                return { sessionId: k2, keySystem: d.drmInfo.keySystem, licenseUri: d.drmInfo.licenseServerUri, serverCertificate: d.drmInfo.serverCertificate, audioCapabilities: PC(d, false), videoCapabilities: PC(d, true) };
              });
              return F(h, hC(b, a, f), 2);
            }
            return h.g != 3 ? (g = h.h, F(h, e.remove(g), 3)) : F(h, e.add(f.filter(function(k2) {
              return !g.includes(k2.sessionId);
            })), 0);
          });
        }
        function UC(a) {
          for (var b = /* @__PURE__ */ new Set(), c = u(a.variants), d = c.next(); !d.done; d = c.next()) d = d.value, d.audio && b.add(d.audio), d.video && b.add(d.video);
          c = u(a.textStreams);
          for (d = c.next(); !d.done; d = c.next()) b.add(d.value);
          a = u(a.imageStreams);
          for (c = a.next(); !c.done; c = a.next()) b.add(c.value);
          return b;
        }
        function IC(a) {
          a.variants.map(function(f) {
            return f.video;
          });
          var b = new Set(a.variants.map(function(f) {
            return f.audio;
          }));
          a = a.textStreams;
          for (var c = u(b), d = c.next(); !d.done; d = c.next()) {
            d = u(b);
            for (var e = d.next(); !e.done; e = d.next()) ;
          }
          b = u(a);
          for (c = b.next(); !c.done; c = b.next()) for (c = u(a), d = c.next(); !d.done; d = c.next()) ;
        }
        S("shaka.offline.Storage", rC);
        rC.deleteAll = function() {
          var a;
          return Q(function(b) {
            return b.g == 1 ? (a = new CB(), sa(b, 2), F(b, JB(a), 2)) : b.g != 5 ? (va(b), F(b, a.destroy(), 5)) : xa(b, 0);
          });
        };
        rC.prototype.list = rC.prototype.list;
        rC.prototype.removeEmeSessions = rC.prototype.hm;
        rC.prototype.remove = rC.prototype.remove;
        rC.prototype.store = rC.prototype.store;
        rC.prototype.getNetworkingEngine = rC.prototype.Vb;
        rC.prototype.getConfiguration = rC.prototype.getConfiguration;
        rC.prototype.configure = rC.prototype.configure;
        rC.prototype.destroy = rC.prototype.destroy;
        rC.support = sC;
        var JC = (/* @__PURE__ */ new Map()).set("org.w3.clearkey", "1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha", "edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready", "9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation", "9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software", "9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware", "9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay", "3d5e6d359b9a41e8b843dd3c6e72c42c");
        Uq("offline", sC);
        function ZC() {
        }
        function $C() {
          for (var a = u(aD), b = a.next(); !b.done; b = a.next()) {
            b = b.value;
            try {
              b.callback();
            } catch (c) {
              ab("Error installing polyfill!", c);
            }
          }
        }
        function bD(a, b) {
          a = { priority: b || 0, callback: a };
          for (b = 0; b < aD.length; b++) if (aD[b].priority < a.priority) {
            aD.splice(b, 0, a);
            return;
          }
          aD.push(a);
        }
        S("shaka.polyfill", ZC);
        ZC.register = bD;
        ZC.installAll = $C;
        var aD = [];
        function cD() {
        }
        function dD() {
          if (!Object.getOwnPropertyDescriptor(Element.prototype, "ariaHidden")) for (var a = u(["ariaHidden", "ariaLabel", "ariaPressed", "ariaSelected"]), b = a.next(); !b.done; b = a.next()) eD(b.value);
        }
        function eD(a) {
          var b = "aria-" + a.toLowerCase().replace(/^aria/, "");
          Object.defineProperty(Element.prototype, a, { get: function() {
            return this.getAttribute(b);
          }, set: function(c) {
            c == null || c == void 0 ? this.removeAttribute(b) : this.setAttribute(b, c);
          } });
        }
        ZC.Aria = cD;
        cD.install = dD;
        bD(dD);
        function fD(a, b, c) {
          this.g = a;
          this.i = b || null;
          this.h = c || null;
          this.keySystem = a.keySystem;
        }
        fD.prototype.getConfiguration = function() {
          var a = this.g.getConfiguration();
          if (a.videoCapabilities) for (var b = u(a.videoCapabilities), c = b.next(); !c.done; c = b.next()) c.value.encryptionScheme = this.i;
          if (a.audioCapabilities) for (b = u(a.audioCapabilities), c = b.next(); !c.done; c = b.next()) c.value.encryptionScheme = this.h;
          return a;
        };
        fD.prototype.createMediaKeys = function() {
          return this.g.createMediaKeys();
        };
        function gD(a) {
          if (a.startsWith("com.apple")) return "cbcs";
          if (a.startsWith("com.widevine") || a.startsWith("com.microsoft") || a.startsWith("com.chromecast") || a.startsWith("org.w3") || a.startsWith("com.huawei")) return "cenc";
          ab("EmeEncryptionSchemePolyfill: Unknown key system:", a, "Please contribute!");
          return null;
        }
        function hD(a) {
          if (!a) return false;
          a = a.getConfiguration();
          var b = a.audioCapabilities && a.audioCapabilities[0];
          return (a = a.videoCapabilities && a.videoCapabilities[0] || b) && a.encryptionScheme !== void 0 ? true : false;
        }
        function iD(a, b) {
          return !a || a == b || (a == "cbcs" || a == "cbcs-1-9") && Rb().ud() ? true : false;
        }
        ;
        function jD() {
        }
        var kD;
        function lD() {
          Rb().mg() && !kD && !navigator.emeEncryptionSchemePolyfilled && navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration && (kD = navigator.requestMediaKeySystemAccess, navigator.requestMediaKeySystemAccess = mD, navigator.emeEncryptionSchemePolyfilled = true);
        }
        function mD(a, b) {
          var c = this, d, e;
          return Q(function(f) {
            if (f.g == 1) return F(f, kD.call(c, a, b), 2);
            d = f.h;
            if (e = hD(d)) return navigator.requestMediaKeySystemAccess = kD, f.return(d);
            navigator.requestMediaKeySystemAccess = nD;
            return f.return(nD.call(c, a, b));
          });
        }
        function nD(a, b) {
          var c = this, d, e, f, g, h, k2, l, m, n, q, r, t;
          return Q(function(w) {
            if (w.g == 1) {
              d = gD(a);
              e = [];
              f = u(b);
              for (g = f.next(); !g.done; g = f.next()) h = g.value, k2 = oD(h.videoCapabilities, d), l = oD(h.audioCapabilities, d), h.videoCapabilities && h.videoCapabilities.length && !k2.length || h.audioCapabilities && h.audioCapabilities.length && !l.length || (m = Object.assign({}, h), m.videoCapabilities = k2, m.audioCapabilities = l, e.push(m));
              if (!e.length) throw n = Error("Unsupported keySystem or supportedConfigurations."), n.name = "NotSupportedError", n.code = DOMException.NOT_SUPPORTED_ERR, n;
              return F(w, kD.call(c, a, e), 2);
            }
            q = w.h;
            t = r = null;
            e[0] && (e[0].videoCapabilities && (r = e[0].videoCapabilities[0].encryptionScheme), e[0].audioCapabilities && (t = e[0].audioCapabilities[0].encryptionScheme));
            return w.return(new fD(q, r, t));
          });
        }
        function oD(a, b) {
          return a ? a.filter(function(c) {
            return iD(c.encryptionScheme, b);
          }) : a;
        }
        ZC.EmeEncryptionScheme = jD;
        jD.install = lD;
        bD(lD);
        function pD() {
        }
        function qD() {
          if (window2.Document) {
            var a = Element.prototype;
            a.requestFullscreen = a.requestFullscreen || a.mozRequestFullScreen || a.msRequestFullscreen || a.webkitRequestFullscreen;
            a = Document.prototype;
            a.exitFullscreen = a.exitFullscreen || a.mozCancelFullScreen || a.msExitFullscreen || a.webkitCancelFullScreen;
            "fullscreenElement" in document || (Object.defineProperty(document, "fullscreenElement", { get: function() {
              return document.mozFullScreenElement || document.msFullscreenElement || document.webkitCurrentFullScreenElement || document.webkitFullscreenElement;
            } }), Object.defineProperty(document, "fullscreenEnabled", { get: function() {
              return document.mozFullScreenEnabled || document.msFullscreenEnabled || document.webkitFullscreenEnabled;
            } }));
            document.addEventListener("webkitfullscreenchange", rD);
            document.addEventListener("webkitfullscreenerror", rD);
            document.addEventListener("mozfullscreenchange", rD);
            document.addEventListener("mozfullscreenerror", rD);
            document.addEventListener("MSFullscreenChange", rD);
            document.addEventListener("MSFullscreenError", rD);
          }
        }
        function rD(a) {
          var b = a.type.replace(/^(webkit|moz|MS)/, "").toLowerCase(), c = document.createEvent("Event");
          c.initEvent(b, a.bubbles, a.cancelable);
          a.target.dispatchEvent(c);
        }
        ZC.Fullscreen = pD;
        pD.install = qD;
        bD(qD);
        function sD() {
        }
        var tD;
        function uD() {
          Rb().mg() && !tD && !navigator.mediaCapabilitiesEncryptionSchemePolyfilled && navigator.mediaCapabilities && (tD = navigator.mediaCapabilities.decodingInfo, navigator.mediaCapabilities.decodingInfo = vD, navigator.mediaCapabilitiesEncryptionSchemePolyfilled = true);
        }
        function vD(a) {
          var b = this, c, d, e;
          return Q(function(f) {
            switch (f.g) {
              case 1:
                return F(f, tD.call(b, a), 2);
              case 2:
                c = f.h;
                if (!c.supported || !a.keySystemConfiguration) return f.return(c);
                d = c.keySystemAccess;
                if (e = hD(d)) return navigator.mediaCapabilities.decodingInfo = tD, f.return(c);
                navigator.mediaCapabilities.decodingInfo = wD;
                if (d) {
                  f.B(3);
                  break;
                }
                return F(f, xD(a), 4);
              case 4:
                return c.keySystemAccess = f.h, f.return(c);
              case 3:
                return f.return(wD.call(b, a));
            }
          });
        }
        function wD(a) {
          var b = this, c, d, e, f, g, h, k2;
          return Q(function(l) {
            switch (l.g) {
              case 1:
                return d = c = null, !a.keySystemConfiguration || (e = a.keySystemConfiguration, f = e.keySystem, d = e.audio && e.audio.encryptionScheme, c = e.video && e.video.encryptionScheme, g = gD(f), h = { powerEfficient: false, smooth: false, supported: false, keySystemAccess: null, configuration: a }, iD(d, g) && iD(c, g)) ? F(l, tD.call(b, a), 2) : l.return(h);
              case 2:
                k2 = l.h;
                if (k2.keySystemAccess) {
                  k2.keySystemAccess = new fD(k2.keySystemAccess, c, d);
                  l.B(3);
                  break;
                }
                if (!a.keySystemConfiguration) {
                  l.B(3);
                  break;
                }
                return F(l, xD(a), 5);
              case 5:
                k2.keySystemAccess = l.h;
              case 3:
                return l.return(k2);
            }
          });
        }
        function xD(a) {
          var b, c;
          return Q(function(d) {
            if (d.g == 1) {
              var e = a.keySystemConfiguration, f = [], g = [];
              e.audio && f.push({ robustness: e.audio.robustness || "", contentType: a.audio.contentType, encryptionScheme: e.audio.encryptionScheme });
              e.video && g.push({ robustness: e.video.robustness || "", contentType: a.video.contentType, encryptionScheme: e.video.encryptionScheme });
              e = { initDataTypes: e.initDataType ? [e.initDataType] : [], distinctiveIdentifier: e.distinctiveIdentifier, persistentState: e.persistentState, sessionTypes: e.sessionTypes };
              f.length && (e.audioCapabilities = f);
              g.length && (e.videoCapabilities = g);
              b = e;
              return F(d, navigator.requestMediaKeySystemAccess(a.keySystemConfiguration.keySystem, [b]), 2);
            }
            c = d.h;
            return d.return(c);
          });
        }
        ZC.MCapEncryptionScheme = sD;
        sD.install = uD;
        bD(uD, -2);
        function yD() {
        }
        function zD() {
          Rb().mc() || (navigator.mediaCapabilities || (navigator.mediaCapabilities = {}), yD.originalMcap = navigator.mediaCapabilities, navigator.mediaCapabilities.decodingInfo = AD);
        }
        function AD(a) {
          var b, c, d, e, f, g, h, k2, l, m, n;
          return Q(function(q) {
            switch (q.g) {
              case 1:
                b = { supported: false, powerEfficient: true, smooth: true, keySystemAccess: null, configuration: a };
                Rb();
                c = a.video;
                d = a.audio;
                if (a.type != "media-source") {
                  if (a.type == "file") {
                    if (c && (e = c.contentType, f = Gi().canPlayType(e) != "", !f) || d && (g = d.contentType, h = Gi().canPlayType(g) != "", !h)) return q.return(b);
                  } else return q.return(b);
                  q.B(2);
                  break;
                }
                if (!Fi()) return q.return(b);
                if (!c) {
                  q.B(3);
                  break;
                }
                return F(q, BD(c), 4);
              case 4:
                if (k2 = q.h, !k2) return q.return(b);
              case 3:
                if (d) {
                  var r = Rb().Ka(), t = d.contentType;
                  r === "CAST" && d.spatialRendering && (t += "; spatialRendering=true");
                  l = gd(t);
                  if (!l) return q.return(b);
                }
              case 2:
                if (!a.keySystemConfiguration) return b.supported = true, q.return(b);
                m = a.keySystemConfiguration;
                return F(q, CD(c, d, m), 6);
              case 6:
                if (n = q.h) b.supported = true, b.keySystemAccess = n;
              case 5:
                return q.return(b);
            }
          });
        }
        function BD(a) {
          var b, c, d;
          return Q(function(e) {
            return e.g == 1 ? (b = Rb(), c = b.Ka(), c !== "CAST" ? e.B(2) : F(e, DD(a), 3)) : e.g != 2 ? (d = e.h, e.return(d)) : e.return(gd(a.contentType));
          });
        }
        function CD(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r;
          return Q(function(t) {
            switch (t.g) {
              case 1:
                d = [];
                e = [];
                c.audio && (f = { robustness: c.audio.robustness || "", contentType: b.contentType }, Rb().nj() && b.contentType.includes('codecs="ac-3"') && (f.contentType = 'audio/mp4; codecs="ec-3"'), c.audio.encryptionScheme && (f.encryptionScheme = c.audio.encryptionScheme), d.push(f));
                c.video && (g = { robustness: c.video.robustness || "", contentType: a.contentType }, c.video.encryptionScheme && (g.encryptionScheme = c.video.encryptionScheme), e.push(g));
                h = { initDataTypes: [c.initDataType], distinctiveIdentifier: c.distinctiveIdentifier, persistentState: c.persistentState, sessionTypes: c.sessionTypes };
                d.length && (h.audioCapabilities = d);
                e.length && (h.videoCapabilities = e);
                k2 = a ? a.contentType : "";
                l = b ? b.contentType : "";
                m = mf(k2) + ";" + lf(k2);
                n = mf(l) + ";" + lf(l);
                q = c.keySystem;
                r = null;
                ra(t, 2);
                if (Dg.has(m + "#" + n + "#" + q)) {
                  r = Dg.get(m + "#" + n + "#" + q) || null;
                  t.B(4);
                  break;
                }
                return F(t, navigator.requestMediaKeySystemAccess(c.keySystem, [h]), 5);
              case 5:
                r = t.h, Dg.set(m + "#" + n + "#" + q, r);
              case 4:
                ta(
                  t,
                  3
                );
                break;
              case 2:
                ua(t);
              case 3:
                return t.return(r);
            }
          });
        }
        function DD(a) {
          var b, c, d, e, f;
          return Q(function(g) {
            if (g.g == 1) {
              if (!(window2.cast && cast.__platform__ && cast.__platform__.canDisplayType)) return g.return(gd(a.contentType));
              b = a.contentType;
              a.width && a.height && a.width > 1280 && a.height > 720 && (b += "; width=" + a.width + "; height=" + a.height);
              a.framerate && (c = Math.round(a.framerate), c < 24 || c > 30) && (b += "; framerate=" + a.framerate);
              d = a.transferFunction || "";
              switch (d) {
                case "":
                case "srgb":
                  break;
                case "pq":
                  b += "; eotf=smpte2084";
                  break;
                case "hlg":
                  b += "; eotf=arib-std-b67";
                  break;
                default:
                  return g.return(false);
              }
              e = false;
              f = ED;
              return f.has(b) ? (e = f.get(b), g.B(2)) : F(g, cast.__platform__.canDisplayType(b), 3);
            }
            g.g != 2 && (e = g.h, f.set(b, e));
            return g.return(e);
          });
        }
        ZC.MediaCapabilities = yD;
        yD.install = zD;
        yD.originalMcap = null;
        var ED = /* @__PURE__ */ new Map();
        bD(zD, -1);
        function FD() {
        }
        function GD() {
          var a = Rb(), b = a.Ja() === "WEBKIT" ? a.Ga() : null;
          (window2.MediaSource || window2.ManagedMediaSource) && b && window2.MediaSource && (b <= 12 ? (HD(), ID()) : b <= 15 && HD());
          a = u(a.xj());
          for (b = a.next(); !b.done; b = a.next()) JD(b.value);
          (window2.MediaSource || window2.ManagedMediaSource) && KD();
          window2.MediaSource && MediaSource.isTypeSupported('video/webm; codecs="vp9"') && !MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"') && LD();
        }
        function HD() {
          var a = MediaSource.prototype.addSourceBuffer;
          MediaSource.prototype.addSourceBuffer = function() {
            var b = a.apply(this, Ma.apply(0, arguments));
            b.abort = function() {
            };
            return b;
          };
        }
        function ID() {
          var a = SourceBuffer.prototype.remove;
          SourceBuffer.prototype.remove = function(b, c) {
            return a.call(this, b, c - 1e-3);
          };
        }
        function KD() {
          if (window2.MediaSource) {
            var a = MediaSource.isTypeSupported.bind(MediaSource);
            MediaSource.isTypeSupported = function(c) {
              return hf(c) != "mp2t" && a(c);
            };
          }
          if (window2.ManagedMediaSource) {
            var b = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
            window2.ManagedMediaSource.isTypeSupported = function(c) {
              return hf(c) != "mp2t" && b(c);
            };
          }
        }
        function JD(a) {
          var b = MediaSource.isTypeSupported.bind(MediaSource);
          MediaSource.isTypeSupported = function(d) {
            return lf(d) != a && b(d);
          };
          if (window2.ManagedMediaSource) {
            var c = ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);
            window2.ManagedMediaSource.isTypeSupported = function(d) {
              return lf(d) != a && c(d);
            };
          }
        }
        function LD() {
          var a = MediaSource.isTypeSupported;
          Rb().Yj() && (MediaSource.isTypeSupported = function(b) {
            var c = b.split(/ *; */), d = c.findIndex(function(g) {
              return g.startsWith("codecs=");
            });
            if (d < 0) return a(b);
            var e = c[d].replace("codecs=", "").replace(/"/g, "").split(/\s*,\s*/), f = e.findIndex(function(g) {
              return g.startsWith("vp09");
            });
            f >= 0 && (e[f] = "vp9", c[d] = 'codecs="' + e.join(",") + '"', b = c.join("; "));
            return a(b);
          });
        }
        ZC.MediaSource = FD;
        FD.install = GD;
        bD(GD);
        function MD() {
        }
        function ND() {
          screen.orientation && screen.orientation.unlock || (screen.orientation != void 0 ? OD() : window2.orientation != void 0 && PD());
        }
        function OD() {
          screen.orientation.lock === void 0 && (screen.orientation.lock = function() {
            return Promise.resolve();
          });
          screen.orientation.unlock === void 0 && (screen.orientation.unlock = function() {
          });
        }
        function PD() {
          function a() {
            switch (window2.orientation) {
              case -90:
                b.type = "landscape-secondary";
                b.angle = 270;
                break;
              case 0:
                b.type = "portrait-primary";
                b.angle = 0;
                break;
              case 90:
                b.type = "landscape-primary";
                b.angle = 90;
                break;
              case 180:
                b.type = "portrait-secondary", b.angle = 180;
            }
          }
          var b = new QD();
          screen.orientation = b;
          a();
          window2.addEventListener("orientationchange", function() {
            a();
            var c = new T("change");
            b.dispatchEvent(c);
          });
        }
        ZC.Orientation = MD;
        MD.install = ND;
        function QD() {
          kb.call(this);
          this.type = "";
          this.angle = 0;
        }
        la(QD, kb);
        QD.prototype.lock = function(a) {
          function b(d) {
            return screen.lockOrientation ? screen.lockOrientation(d) : screen.mozLockOrientation ? screen.mozLockOrientation(d) : screen.msLockOrientation ? screen.msLockOrientation(d) : false;
          }
          var c = false;
          switch (a) {
            case "natural":
              c = b("default");
              break;
            case "any":
              c = true;
              this.unlock();
              break;
            default:
              c = b(a);
          }
          if (c) return Promise.resolve();
          a = Error("screen.orientation.lock() is not available on this device");
          a.name = "NotSupportedError";
          a.code = DOMException.NOT_SUPPORTED_ERR;
          return Promise.reject(a);
        };
        QD.prototype.unlock = function() {
          screen.unlockOrientation ? screen.unlockOrientation() : screen.mozUnlockOrientation ? screen.mozUnlockOrientation() : screen.msUnlockOrientation && screen.msUnlockOrientation();
        };
        bD(ND);
        function RD() {
        }
        var SD, TD, UD, VD, WD, XD;
        function YD(a) {
          if (window2.HTMLVideoElement && window2.WebKitMediaKeys && window2.shakaMediaKeysPolyfill != ZD) {
            if (a === void 0 ? 0 : a) SD = true, TD = Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype, "mediaKeys"), UD = HTMLMediaElement.prototype.setMediaKeys, VD = window2.MediaKeys, WD = window2.MediaKeySystemAccess, XD = navigator.requestMediaKeySystemAccess;
            delete HTMLMediaElement.prototype.mediaKeys;
            HTMLMediaElement.prototype.mediaKeys = null;
            HTMLMediaElement.prototype.setMediaKeys = $D;
            window2.MediaKeys = aE;
            window2.MediaKeySystemAccess = bE;
            navigator.requestMediaKeySystemAccess = cE;
            window2.shakaMediaKeysPolyfill = ZD;
            Uf.clear();
            Dg.clear();
          }
        }
        function cE(a, b) {
          try {
            var c = new bE(a, b);
            return Promise.resolve(c);
          } catch (d) {
            return Promise.reject(d);
          }
        }
        function $D(a) {
          var b = this.mediaKeys;
          b && b != a && dE(b, null);
          delete this.mediaKeys;
          return (this.mediaKeys = a) ? dE(a, this) : Promise.resolve();
        }
        function eE(a) {
          a = Kb(a.initData);
          if (Ob(a).getUint32(0, true) + 4 != a.byteLength) throw new RangeError("Malformed FairPlay init data");
          a = Xb(a.subarray(4), true);
          a = $b(a);
          var b = new Event("encrypted");
          b.initDataType = "skd";
          b.initData = Lb(a);
          this.dispatchEvent(b);
        }
        ZC.PatchedMediaKeysApple = RD;
        RD.uninstall = function() {
          window2.shakaMediaKeysPolyfill == ZD && SD && (SD = false, Object.defineProperty(HTMLMediaElement.prototype, "mediaKeys", TD), HTMLMediaElement.prototype.setMediaKeys = UD, window2.MediaKeys = VD, window2.MediaKeySystemAccess = WD, navigator.requestMediaKeySystemAccess = XD, TD = XD = UD = WD = VD = null, window2.shakaMediaKeysPolyfill = "", Uf.clear(), Dg.clear());
        };
        RD.install = YD;
        function bE(a, b) {
          this.keySystem = a;
          if (a.startsWith("com.apple.fps")) for (a = u(b), b = a.next(); !b.done; b = a.next()) {
            var c = b.value;
            if (c.persistentState == "required") b = null;
            else {
              b = { audioCapabilities: [], videoCapabilities: [], persistentState: "optional", distinctiveIdentifier: "optional", initDataTypes: c.initDataTypes, sessionTypes: ["temporary"], label: c.label };
              var d = false, e = false;
              if (c.audioCapabilities) for (var f = u(c.audioCapabilities), g = f.next(); !g.done; g = f.next()) g = g.value, g.contentType && (d = true, WebKitMediaKeys.isTypeSupported(
                this.keySystem,
                g.contentType.split(";")[0]
              ) && (b.audioCapabilities.push(g), e = true));
              if (c.videoCapabilities) for (c = u(c.videoCapabilities), f = c.next(); !f.done; f = c.next()) f = f.value, f.contentType && (d = true, WebKitMediaKeys.isTypeSupported(this.keySystem, f.contentType.split(";")[0]) && (b.videoCapabilities.push(f), e = true));
              d || (e = WebKitMediaKeys.isTypeSupported(this.keySystem, "video/mp4"));
              b = e ? b : null;
            }
            if (b) {
              this.g = b;
              return;
            }
          }
          a = Error("Unsupported keySystem");
          a.name = "NotSupportedError";
          a.code = DOMException.NOT_SUPPORTED_ERR;
          throw a;
        }
        bE.prototype.createMediaKeys = function() {
          var a = new aE(this.keySystem);
          return Promise.resolve(a);
        };
        bE.prototype.getConfiguration = function() {
          return this.g;
        };
        function aE(a) {
          this.h = new WebKitMediaKeys(a);
          this.g = new Tc();
        }
        aE.prototype.createSession = function(a) {
          a = a || "temporary";
          if (a != "temporary") throw new TypeError("Session type " + a + " is unsupported on this platform.");
          return new fE(this.h, a);
        };
        aE.prototype.setServerCertificate = function() {
          return Promise.resolve(false);
        };
        function dE(a, b) {
          a.g.Sa();
          if (!b) return Promise.resolve();
          a.g.o(b, "webkitneedkey", eE);
          try {
            return Gl(b, HTMLMediaElement.HAVE_METADATA, a.g, function() {
              b.webkitSetMediaKeys(a.h);
            }), Promise.resolve();
          } catch (c) {
            return Promise.reject(c);
          }
        }
        aE.prototype.getStatusForPolicy = function() {
          return Promise.resolve("usable");
        };
        function fE(a) {
          kb.call(this);
          this.i = null;
          this.l = a;
          this.g = this.h = null;
          this.j = new Tc();
          this.sessionId = "";
          this.expiration = NaN;
          this.closed = new Lg();
          this.keyStatuses = new gE();
          this.onkeystatuseschange = null;
        }
        la(fE, kb);
        p = fE.prototype;
        p.generateRequest = function(a, b) {
          var c = this;
          this.h = new Lg();
          try {
            var d = this.l.createSession("video/mp4", Kb(b));
            this.i = d;
            this.sessionId = d.sessionId || "";
            this.j.o(this.i, "webkitkeymessage", function(e) {
              c.h && (c.h.resolve(), c.h = null);
              e = (/* @__PURE__ */ new Map()).set("messageType", c.keyStatuses.Uc() == void 0 ? "license-request" : "license-renewal").set("message", Lb(e.message));
              e = new T("message", e);
              c.dispatchEvent(e);
            });
            this.j.o(d, "webkitkeyadded", function() {
              c.g && (hE(c, "usable"), c.g.resolve(), c.g = null);
            });
            this.j.o(
              d,
              "webkitkeyerror",
              function() {
                var e = Error("EME PatchedMediaKeysApple key error");
                e.errorCode = c.i.error;
                if (c.h != null) c.h.reject(e), c.h = null;
                else if (c.g != null) c.g.reject(e), c.g = null;
                else switch (c.i.error.code) {
                  case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:
                  case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:
                    hE(c, "output-not-allowed");
                    break;
                  default:
                    hE(c, "internal-error");
                }
              }
            );
            hE(this, "status-pending");
          } catch (e) {
            this.h.reject(e);
          }
          return this.h;
        };
        p.load = function() {
          return Promise.reject(Error("MediaKeySession.load not yet supported"));
        };
        p.update = function(a) {
          this.g = new Lg();
          try {
            this.i.update(Kb(a));
          } catch (b) {
            this.g.reject(b);
          }
          return this.g;
        };
        p.close = function() {
          try {
            this.i.close(), this.closed.resolve(), this.j.Sa();
          } catch (a) {
            this.closed.reject(a);
          }
          return this.closed;
        };
        p.remove = function() {
          return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"));
        };
        function hE(a, b) {
          var c = a.keyStatuses;
          c.size = b == void 0 ? 0 : 1;
          c.g = b;
          b = new T("keystatuseschange");
          a.dispatchEvent(b);
          if (a.onkeystatuseschange) a.onkeystatuseschange(b);
        }
        function gE() {
          this.size = 0;
          this.g = void 0;
        }
        p = gE.prototype;
        p.Uc = function() {
          return this.g;
        };
        p.forEach = function(a) {
          this.g && a(this.g, Cg.value());
        };
        p.get = function(a) {
          if (this.has(a)) return this.g;
        };
        p.has = function(a) {
          var b = Cg.value();
          return this.g && Jb(a, b) ? true : false;
        };
        p.entries = function() {
        };
        p.keys = function() {
        };
        p.values = function() {
        };
        var ZD = "apple";
        bD(function() {
          window2.HTMLVideoElement && window2.WebKitMediaKeys && (navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration || YD());
        });
        function iE() {
        }
        function jE() {
          if (window2.MediaKeys) {
            var a = Rb();
            MediaKeys.prototype.setServerCertificate && a.Je() || (MediaKeys.prototype.setServerCertificate = kE);
          }
        }
        function kE() {
          return Promise.resolve(false);
        }
        ZC.PatchedMediaKeysCert = iE;
        iE.install = jE;
        bD(jE);
        function lE() {
        }
        function mE() {
          if (!(!window2.HTMLVideoElement || navigator.requestMediaKeySystemAccess && MediaKeySystemAccess.prototype.getConfiguration)) {
            if (HTMLMediaElement.prototype.webkitGenerateKeyRequest) nE = "webkit";
            else if (!HTMLMediaElement.prototype.generateKeyRequest) return;
            navigator.requestMediaKeySystemAccess = oE;
            delete HTMLMediaElement.prototype.mediaKeys;
            HTMLMediaElement.prototype.mediaKeys = null;
            HTMLMediaElement.prototype.setMediaKeys = pE;
            window2.MediaKeys = qE;
            window2.MediaKeySystemAccess = rE;
            window2.shakaMediaKeysPolyfill = sE;
          }
        }
        function tE(a) {
          var b = nE;
          return b ? b + a.charAt(0).toUpperCase() + a.slice(1) : a;
        }
        function oE(a, b) {
          try {
            var c = new rE(a, b);
            return Promise.resolve(c);
          } catch (d) {
            return Promise.reject(d);
          }
        }
        function pE(a) {
          var b = this.mediaKeys;
          b && b != a && uE(b, null);
          delete this.mediaKeys;
          (this.mediaKeys = a) && uE(a, this);
          return Promise.resolve();
        }
        ZC.PatchedMediaKeysWebkit = lE;
        lE.install = mE;
        function rE(a, b) {
          this.g = this.keySystem = a;
          var c = false;
          a == "org.w3.clearkey" && (this.g = "webkit-org.w3.clearkey", c = false);
          var d = false;
          var e = document.getElementsByTagName("video");
          e = e.length ? e[0] : document.createElement("video");
          b = u(b);
          for (var f = b.next(); !f.done; f = b.next()) {
            f = f.value;
            var g = { audioCapabilities: [], videoCapabilities: [], persistentState: "optional", distinctiveIdentifier: "optional", initDataTypes: f.initDataTypes, sessionTypes: ["temporary"], label: f.label }, h = false;
            if (f.audioCapabilities) for (var k2 = u(f.audioCapabilities), l = k2.next(); !l.done; l = k2.next()) l = l.value, l.contentType && (h = true, e.canPlayType(l.contentType.split(";")[0], this.g) && (g.audioCapabilities.push(l), d = true));
            if (f.videoCapabilities) for (k2 = u(f.videoCapabilities), l = k2.next(); !l.done; l = k2.next()) l = l.value, l.contentType && (h = true, e.canPlayType(l.contentType, this.g) && (g.videoCapabilities.push(l), d = true));
            h || (d = e.canPlayType("video/mp4", this.g) || e.canPlayType("video/webm", this.g));
            f.persistentState == "required" && (c ? (g.persistentState = "required", g.sessionTypes = ["persistent-license"]) : d = false);
            if (d) {
              this.h = g;
              return;
            }
          }
          c = "Unsupported keySystem";
          if (a == "org.w3.clearkey" || a == "com.widevine.alpha") c = "None of the requested configurations were supported.";
          a = Error(c);
          a.name = "NotSupportedError";
          a.code = DOMException.NOT_SUPPORTED_ERR;
          throw a;
        }
        rE.prototype.createMediaKeys = function() {
          var a = new qE(this.g);
          return Promise.resolve(a);
        };
        rE.prototype.getConfiguration = function() {
          return this.h;
        };
        function qE(a) {
          this.l = a;
          this.h = null;
          this.g = new Tc();
          this.i = [];
          this.j = /* @__PURE__ */ new Map();
        }
        function uE(a, b) {
          a.h = b;
          a.g.Sa();
          var c = nE;
          b && (a.g.o(b, c + "needkey", function(d) {
            var e = new CustomEvent("encrypted");
            e.initDataType = "cenc";
            e.initData = Lb(d.initData);
            a.h.dispatchEvent(e);
          }), a.g.o(b, c + "keymessage", function(d) {
            var e = vE(a, d.sessionId);
            e && (d = (/* @__PURE__ */ new Map()).set("messageType", e.keyStatuses.Uc() == void 0 ? "licenserequest" : "licenserenewal").set("message", d.message), d = new T("message", d), e.h && (e.h.resolve(), e.h = null), e.dispatchEvent(d));
          }), a.g.o(b, c + "keyadded", function(d) {
            (d = vE(a, d.sessionId)) && d.ready();
          }), a.g.o(b, c + "keyerror", function(d) {
            var e = vE(a, d.sessionId);
            if (e) {
              var f = Error("EME v0.1b key error"), g = d.errorCode;
              g.systemCode = d.systemCode;
              f.errorCode = g;
              !d.sessionId && e.h ? (d.systemCode == 45 && (f.message = "Unsupported session type."), e.h.reject(f), e.h = null) : d.sessionId && e.g ? (e.g.reject(f), e.g = null) : (f = d.systemCode, d.errorCode.code == MediaKeyError.MEDIA_KEYERR_OUTPUT ? wE(e, "output-restricted") : f == 1 ? wE(e, "expired") : wE(e, "internal-error"));
            }
          }));
        }
        qE.prototype.createSession = function(a) {
          a = a || "temporary";
          if (a != "temporary" && a != "persistent-license") throw new TypeError("Session type " + a + " is unsupported on this platform.");
          var b = this.h || document.createElement("video");
          b.src || (b.src = "about:blank");
          a = new xE(b, this.l, a);
          this.i.push(a);
          return a;
        };
        qE.prototype.setServerCertificate = function() {
          return Promise.resolve(false);
        };
        qE.prototype.getStatusForPolicy = function() {
          return Promise.resolve("usable");
        };
        function vE(a, b) {
          var c = a.j.get(b);
          return c ? c : (c = a.i.shift()) ? (c.sessionId = b, a.j.set(b, c), c) : null;
        }
        function xE(a, b, c) {
          kb.call(this);
          this.j = a;
          this.m = false;
          this.g = this.h = null;
          this.i = b;
          this.l = c;
          this.sessionId = "";
          this.expiration = NaN;
          this.closed = new Lg();
          this.keyStatuses = new yE();
          this.onkeystatuseschange = null;
        }
        la(xE, kb);
        p = xE.prototype;
        p.ready = function() {
          wE(this, "usable");
          this.g && this.g.resolve();
          this.g = null;
        };
        function zE(a, b, c) {
          if (a.m) return Promise.reject(Error("The session is already initialized."));
          a.m = true;
          try {
            if (a.l == "persistent-license") if (c) var d = Kb($b("LOAD_SESSION|" + c));
            else {
              var e = $b("PERSISTENT|");
              d = lc(e, b);
            }
            else d = Kb(b);
          } catch (g) {
            return Promise.reject(g);
          }
          a.h = new Lg();
          var f = tE("generateKeyRequest");
          try {
            a.j[f](a.i, d);
          } catch (g) {
            if (g.name != "InvalidStateError") return a.h = null, Promise.reject(g);
            new Bf(function() {
              try {
                a.j[f](a.i, d);
              } catch (h) {
                a.h.reject(h), a.h = null;
              }
            }).$(0.01);
          }
          return a.h;
        }
        function AE(a, b, c) {
          if (a.g) a.g.then(function() {
            return AE(a, b, c);
          }).catch(function() {
            return AE(a, b, c);
          });
          else {
            a.g = b;
            if (a.i == "webkit-org.w3.clearkey") {
              var d = Wb(c);
              var e = JSON.parse(d);
              e.keys[0].kty != "oct" && (a.g.reject(Error("Response is not a valid JSON Web Key Set.")), a.g = null);
              d = hc(e.keys[0].k);
              e = hc(e.keys[0].kid);
            } else d = Kb(c), e = null;
            var f = tE("addKey");
            try {
              a.j[f](a.i, d, e, a.sessionId);
            } catch (g) {
              a.g.reject(g), a.g = null;
            }
          }
        }
        function wE(a, b) {
          var c = a.keyStatuses;
          c.size = b == void 0 ? 0 : 1;
          c.g = b;
          b = new T("keystatuseschange");
          a.dispatchEvent(b);
          if (a.onkeystatuseschange) a.onkeystatuseschange(b);
        }
        p.generateRequest = function(a, b) {
          return zE(this, b, null);
        };
        p.load = function(a) {
          return this.l == "persistent-license" ? zE(this, null, a) : Promise.reject(Error("Not a persistent session."));
        };
        p.update = function(a) {
          var b = new Lg();
          AE(this, b, a);
          return b;
        };
        p.close = function() {
          if (this.l != "persistent-license") {
            if (!this.sessionId) return this.closed.reject(Error("The session is not callable.")), this.closed;
            var a = tE("cancelKeyRequest");
            try {
              this.j[a](this.i, this.sessionId);
            } catch (b) {
            }
          }
          this.closed.resolve();
          return this.closed;
        };
        p.remove = function() {
          return this.l != "persistent-license" ? Promise.reject(Error("Not a persistent session.")) : this.close();
        };
        function yE() {
          this.size = 0;
          this.g = void 0;
        }
        p = yE.prototype;
        p.Uc = function() {
          return this.g;
        };
        p.forEach = function(a) {
          this.g && a(this.g, Cg.value());
        };
        p.get = function(a) {
          if (this.has(a)) return this.g;
        };
        p.has = function(a) {
          var b = Cg.value();
          return this.g && Jb(a, b) ? true : false;
        };
        p.entries = function() {
        };
        p.keys = function() {
        };
        p.values = function() {
        };
        var nE = "", sE = "webkit";
        bD(mE);
        function BE() {
        }
        function CE() {
          if (window2.HTMLVideoElement) {
            var a = HTMLVideoElement.prototype;
            a.requestPictureInPicture && document.exitPictureInPicture || !a.webkitSupportsPresentationMode || (document.pictureInPictureEnabled = true, document.pictureInPictureElement = null, a.requestPictureInPicture = DE, Object.defineProperty(a, "disablePictureInPicture", { get: EE, set: FE, enumerable: true, configurable: true }), document.exitPictureInPicture = GE, document.addEventListener("webkitpresentationmodechanged", HE, true));
          }
        }
        function HE(a) {
          a = a.target;
          if (a.webkitPresentationMode == "picture-in-picture") {
            document.pictureInPictureElement = a;
            var b = new Event("enterpictureinpicture");
            a.dispatchEvent(b);
          } else document.pictureInPictureElement == a && (document.pictureInPictureElement = null), b = new Event("leavepictureinpicture"), a.dispatchEvent(b);
        }
        function DE() {
          return this.webkitSupportsPresentationMode("picture-in-picture") ? (this.webkitSetPresentationMode("picture-in-picture"), document.pictureInPictureElement = this, Promise.resolve()) : Promise.reject(Error("PiP not allowed by video element"));
        }
        function GE() {
          var a = document.pictureInPictureElement;
          return a ? (a.webkitSetPresentationMode("inline"), document.pictureInPictureElement = null, Promise.resolve()) : Promise.reject(Error("No picture in picture element found"));
        }
        function EE() {
          return this.hasAttribute("disablePictureInPicture") ? true : !this.webkitSupportsPresentationMode("picture-in-picture");
        }
        function FE(a) {
          a ? this.setAttribute("disablePictureInPicture", "") : this.removeAttribute("disablePictureInPicture");
        }
        ZC.PiPWebkit = BE;
        BE.install = CE;
        bD(CE);
        function IE() {
        }
        function JE() {
          window2.crypto && ("randomUUID" in window2.crypto || (window2.crypto.randomUUID = KE));
        }
        function KE() {
          var a = URL.createObjectURL(new Blob()), b = a.toString();
          URL.revokeObjectURL(a);
          return b.substr(b.lastIndexOf("/") + 1);
        }
        ZC.RandomUUID = IE;
        IE.install = JE;
        bD(JE);
        function LE() {
        }
        function ME() {
          var a = Symbol.prototype;
          "description" in a || Object.defineProperty(a, "description", { get: NE });
        }
        function NE() {
          var a = /\((.*)\)/.exec(this.toString());
          return a ? a[1] : void 0;
        }
        ZC.Symbol = LE;
        LE.install = ME;
        bD(ME);
        function OE() {
        }
        function PE() {
          for (var a = u([Uint8Array, Uint8ClampedArray, Uint16Array, Uint32Array, Int8Array, Int16Array, Int32Array, Float32Array, Float64Array]), b = a.next(); !b.done; b = a.next()) b = b.value, b.prototype.indexOf || (b.prototype.indexOf = QE), b.prototype.lastIndexOf || (b.prototype.lastIndexOf = RE), b.prototype.includes || (b.prototype.includes = SE);
        }
        function QE(a, b) {
          return Array.prototype.indexOf.call(this, a, b);
        }
        function RE(a, b) {
          return Array.prototype.lastIndexOf.call(this, a, b);
        }
        function SE(a, b) {
          return this.indexOf(a, b) !== -1;
        }
        ZC.TypedArray = OE;
        OE.install = PE;
        bD(PE);
        function TE() {
        }
        function UE() {
          if (window2.HTMLMediaElement) {
            var a = HTMLMediaElement.prototype.play;
            HTMLMediaElement.prototype.play = function() {
              var b = a.apply(this);
              b && b.catch(function() {
              });
              return b;
            };
          }
        }
        ZC.VideoPlayPromise = TE;
        TE.install = UE;
        bD(UE);
        function VE() {
        }
        function WE() {
          if (window2.HTMLVideoElement) {
            var a = HTMLVideoElement.prototype;
            !a.getVideoPlaybackQuality && ("webkitDroppedFrameCount" in a || typeof Gi().webkitDroppedFrameCount === "number") && (a.getVideoPlaybackQuality = XE);
          }
        }
        function XE() {
          return { droppedVideoFrames: this.webkitDroppedFrameCount, totalVideoFrames: this.webkitDecodedFrameCount, corruptedVideoFrames: 0, creationTime: NaN, totalFrameDelay: 0 };
        }
        ZC.VideoPlaybackQuality = VE;
        VE.install = WE;
        bD(WE);
        function YE() {
        }
        function ZE() {
          if (!window2.VTTCue && window2.TextTrackCue) {
            var a = null, b = TextTrackCue.length;
            if (b == 3) a = $E;
            else if (b == 6) a = aF;
            else {
              try {
                var c = !!$E(1, 2, "");
              } catch (d) {
                c = false;
              }
              c && (a = $E);
            }
            a && (window2.VTTCue = function(d, e, f) {
              return a(d, e, f);
            });
          }
        }
        function $E(a, b, c) {
          return new window2.TextTrackCue(a, b, c);
        }
        function aF(a, b, c) {
          return new window2.TextTrackCue(a + "-" + b + "-" + c, a, b, c);
        }
        ZC.VTTCue = YE;
        YE.install = ZE;
        bD(ZE);
        function bF(a) {
          kb.call(this);
          this.g = a;
          this.m = null;
          this.h = [];
          this.j = -1;
          this.i = this.l = null;
          this.u = new Tc();
        }
        la(bF, kb);
        p = bF.prototype;
        p.destroy = function() {
          var a = this;
          return Q(function(b) {
            if (b.g == 1) return F(b, a.removeAllItems(), 2);
            a.g = null;
            a.u && (a.u.release(), a.u = null);
            kb.prototype.release.call(a);
            H(b);
          });
        };
        p.configure = function(a) {
          this.m = a;
        };
        p.getConfiguration = function() {
          return this.m;
        };
        p.getCurrentItem = function() {
          return this.h.length && this.j >= 0 && this.j < this.h.length ? this.h[this.j] : null;
        };
        p.getCurrentItemIndex = function() {
          return this.j;
        };
        p.getItems = function() {
          return this.h.slice();
        };
        p.insertItems = function(a) {
          this.h.push.apply(this.h, x(a));
          this.dispatchEvent(new T("itemsinserted"));
        };
        p.removeAllItems = function() {
          var a = this, b, c, d, e;
          return Q(function(f) {
            if (f.g == 1) return a.u.Sa(), a.h.length && a.j >= 0 ? F(f, a.g.tc(), 2) : f.B(2);
            if (f.g != 4) {
              b = [];
              a.i && (a.i.preloadManager.j || b.push(a.i.preloadManager.destroy()), a.i = null);
              a.l && (a.l.preloadManager.j || b.push(a.l.preloadManager.destroy()), a.l = null);
              c = u(a.h);
              for (d = c.next(); !d.done; d = c.next()) e = d.value, e.preloadManager && !e.preloadManager.j && b.push(e.preloadManager.destroy());
              return b.length ? F(f, Promise.all(b), 4) : f.B(4);
            }
            a.h = [];
            a.j = -1;
            a.dispatchEvent(new T("itemsremoved"));
            H(f);
          });
        };
        p.playItem = function(a) {
          var b = this, c, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y;
          return Q(function(A) {
            switch (A.g) {
              case 1:
                b.u.Sa();
                if (!b.h.length || a >= b.h.length) throw new U(2, 7, 7007);
                c = b.getCurrentItem();
                d = b.h[a];
                b.j != a && (b.j = a, b.dispatchEvent(new T("currentitemchanged")));
                e = b.g.h;
                f = b.m ? b.m.preloadNextUrlWindow : 0;
                f > 0 && (g = false, b.u.o(e, "timeupdate", function() {
                  var C, E, D, B;
                  return Q(function(G) {
                    switch (G.g) {
                      case 1:
                        if (b.l || b.h.length <= 1 || g || b.g.U() || !e.duration) return G.return();
                        C = b.g.za().end - e.currentTime;
                        if (isNaN(C)) {
                          G.B(0);
                          break;
                        }
                        if (!(C <= f)) {
                          G.B(0);
                          break;
                        }
                        E = b.m && b.m.repeatMode;
                        D = null;
                        b.j + 1 < b.h.length ? D = b.h[b.j + 1] : E == 1 && (D = b.h[0]);
                        if (!D || D.preloadManager && !D.preloadManager.j) {
                          G.B(0);
                          break;
                        }
                        g = true;
                        B = null;
                        ra(G, 5);
                        return F(G, b.g.preload(D.manifestUri, D.startTime, D.mimeType, D.config), 7);
                      case 7:
                        B = G.h;
                        ta(G, 6);
                        break;
                      case 5:
                        ua(G), B = null;
                      case 6:
                        b.l = { item: D, preloadManager: B }, g = false, H(G);
                    }
                  });
                }));
                b.u.o(b.g, "complete", function() {
                  var C = b.m && b.m.repeatMode, E = false;
                  if (C == 2) E = true;
                  else {
                    var D = b.j + 1;
                    D < b.h.length ? b.playItem(D) : C == 1 && (b.h.length == 1 ? E = true : b.playItem(0));
                  }
                  E && (e.paused ? (e.currentTime = b.g.za().start, e.play()) : b.u.o(e, "paused", function() {
                    e.currentTime = b.g.za().start;
                    e.play();
                  }));
                });
                h = d.manifestUri;
                d.preloadManager && !d.preloadManager.j && (h = d.preloadManager);
                k2 = false;
                b.l && b.l.item == d && b.l.preloadManager ? h = b.l.preloadManager : b.i && b.i.item == d && b.i.preloadManager && (h = b.i.preloadManager, k2 = true);
                if (!b.i) {
                  A.B(2);
                  break;
                }
                if (k2 || b.i.preloadManager.j) {
                  A.B(3);
                  break;
                }
                return F(A, b.i.preloadManager.destroy(), 3);
              case 3:
                b.i = null;
              case 2:
                if (!(b.m && b.m.preloadPrevItem && c && b.g.l === vr)) {
                  A.B(5);
                  break;
                }
                l = null;
                ra(A, 6);
                return F(A, b.g.ck(), 8);
              case 8:
                l = A.h;
                ta(A, 7);
                break;
              case 6:
                ua(A), l = null;
              case 7:
                b.i = { item: c, preloadManager: l };
              case 5:
                return d.config && (b.g.Bj(), b.g.configure(d.config)), F(A, b.g.load(h, d.startTime, d.mimeType), 9);
              case 9:
                b.l = null;
                if (d.extraText) for (m = u(d.extraText), n = m.next(); !n.done; n = m.next()) q = n.value, q.mime ? b.g.ee(q.uri, q.language, q.kind, q.mime, q.codecs) : b.g.ee(q.uri, q.language, q.kind);
                if (d.extraThumbnail) for (r = u(d.extraThumbnail), t = r.next(); !t.done; t = r.next()) w = t.value, b.g.ef(w);
                if (d.extraChapter) for (v = u(d.extraChapter), z = v.next(); !z.done; z = v.next()) y = z.value, b.g.df(y.uri, y.language, y.mime);
                H(A);
            }
          });
        };
        S("shaka.queue.QueueManager", bF);
        bF.prototype.playItem = bF.prototype.playItem;
        bF.prototype.removeAllItems = bF.prototype.removeAllItems;
        bF.prototype.insertItems = bF.prototype.insertItems;
        bF.prototype.getItems = bF.prototype.getItems;
        bF.prototype.getCurrentItemIndex = bF.prototype.getCurrentItemIndex;
        bF.prototype.getCurrentItem = bF.prototype.getCurrentItem;
        bF.prototype.getConfiguration = bF.prototype.getConfiguration;
        bF.prototype.configure = bF.prototype.configure;
        bF.prototype.destroy = bF.prototype.destroy;
        Nq = function(a) {
          return new bF(a);
        };
        function cF() {
        }
        cF.prototype.parseInit = function() {
        };
        cF.prototype.setSequenceMode = function() {
        };
        cF.prototype.setManifestType = function() {
        };
        cF.prototype.parseMedia = function(a, b) {
          var c = null, d = [];
          a = Wb(a).split(/\r?\n/);
          a = u(a);
          for (var e = a.next(); !e.done; e = a.next()) if ((e = e.value) && !/^\s+$/.test(e) && (e = dF.exec(e))) {
            var f = eF.exec(e[1]);
            f = parseInt(f[1], 10) * 60 + parseFloat(f[2].replace(",", "."));
            e = new re(f, b.segmentEnd ? b.segmentEnd : f + 2, e[2]);
            c && (c.endTime = f, d.push(c));
            c = e;
          }
          c && d.push(c);
          return d;
        };
        S("shaka.text.LrcTextParser", cF);
        cF.prototype.parseMedia = cF.prototype.parseMedia;
        cF.prototype.setManifestType = cF.prototype.setManifestType;
        cF.prototype.setSequenceMode = cF.prototype.setSequenceMode;
        cF.prototype.parseInit = cF.prototype.parseInit;
        var dF = /^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/, eF = /^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;
        qf("application/x-subtitle-lrc", function() {
          return new cF();
        });
        function fF() {
          this.g = "UNKNOWN";
        }
        fF.prototype.parseInit = function() {
        };
        fF.prototype.setSequenceMode = function() {
        };
        fF.prototype.setManifestType = function(a) {
          this.g = a;
        };
        fF.prototype.parseMedia = function(a, b, c, d) {
          var e = Wb(a);
          a = [];
          if (e == "") return a;
          var f = Kd(e, "tt", true);
          if (!f) throw new U(2, 2, 2005, "Failed to parse TTML.");
          e = Ud(f, "body")[0];
          if (!e) return [];
          var g = ae(f, gF, "frameRate"), h = ae(f, gF, "subFrameRate"), k2 = ae(f, gF, "frameRateMultiplier"), l = ae(f, gF, "tickRate"), m = ae(f, gF, "cellResolution"), n = f.attributes["xml:space"] || "default", q = ae(f, hF, "extent");
          if (n != "default" && n != "preserve") throw new U(2, 2, 2005, "Invalid xml:space value: " + n);
          n = n == "default";
          g = new iF(g, h, k2, l);
          m = jF(m);
          h = Ud(f, "metadata")[0];
          h = (h ? h.children : []).filter(function(w) {
            return w != "\n";
          });
          k2 = Ud(f, "style");
          f = Ud(f, "region");
          l = [];
          for (var r = u(f), t = r.next(); !t.done; t = r.next()) (t = kF(this, t.value, k2, q)) && l.push(t);
          if (Rd(e, "p").length) throw new U(2, 2, 2001, "<p> can only be inside <div> in TTML");
          q = u(Rd(e, "div"));
          for (r = q.next(); !r.done; r = q.next()) if (Rd(r.value, "span").length) throw new U(2, 2, 2001, "<span> can only be inside <p> in TTML");
          if (b = lF(this, e, b, g, h, k2, f, l, n, m, null, false, c, d)) b.backgroundColor || (b.backgroundColor = "transparent"), a.push(b);
          return a;
        };
        function lF(a, b, c, d, e, f, g, h, k2, l, m, n, q, r) {
          var t = m;
          if (Pd(b)) {
            if (!n) return null;
            var w = { tagName: "span", children: [Sd(b)], attributes: {}, parent: null };
          } else w = b;
          for (var v = null, z = u(mF), y = z.next(); !y.done && !(v = nF(w, "backgroundImage", e, "#", y.value)[0]); y = z.next()) ;
          z = null;
          y = ae(w, mF, "backgroundImage");
          var A = /^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;
          if (y && A.test(y)) {
            z = parseInt(y.split(":").pop(), 10) - 1;
            if (z >= r.length) return null;
            z = r[z];
          } else q && y && !y.startsWith("#") && (A = new qb(q), y = new qb(y), (y = A.resolve(y).toString()) && (z = y));
          if (b.tagName == "p" || v || z) n = true;
          b = n;
          y = (w.attributes["xml:space"] || (k2 ? "default" : "preserve")) == "default";
          A = w.children.every(Pd);
          k2 = [];
          if (!A) for (var C = u(w.children), E = C.next(); !E.done; E = C.next()) (E = lF(a, E.value, c, d, e, f, g, h, y, l, w, n, q, r)) && k2.push(E);
          e = m != null;
          q = Sd(w);
          q = w.children.length && q && /\S/.test(q);
          C = w.attributes.begin || w.attributes.end || w.attributes.dur;
          if (!(C || q || w.tagName == "br" || k2.length != 0 || e && !y)) return null;
          r = oF(w, d);
          q = r.start;
          for (r = r.end; t && t.tagName && t.tagName != "tt"; ) r = pF(t, d, q, r), q = r.start, r = r.end, t = t.parent;
          q == null && (q = 0);
          q += c.periodStart;
          r = r == null ? Infinity : r + c.periodStart;
          a.g !== "HLS" && (q = Math.max(q, c.segmentStart), r = Math.min(r, c.segmentEnd));
          if (!C && k2.length > 0) for (q = Infinity, r = 0, c = u(k2), d = c.next(); !d.done; d = c.next()) d = d.value, q = Math.min(q, d.startTime), r = Math.max(r, d.endTime);
          if (w.tagName == "br") return a = new re(q, r, ""), a.lineBreak = true, a;
          c = "";
          A && (c = cc(Sd(w) || ""), y && (c = c.replace(/\s+/g, " ")));
          c = new re(q, r, c);
          c.nestedCues = k2;
          n || (c.isContainer = true);
          l && (c.cellResolution = l);
          l = nF(
            w,
            "region",
            g,
            ""
          )[0];
          if (w.attributes.region && l && l.attributes["xml:id"]) {
            var D = l.attributes["xml:id"];
            c.region = h.filter(function(B) {
              return B.id == D;
            })[0];
          }
          h = l;
          m && e && !w.attributes.region && !w.attributes.style && (h = nF(m, "region", g, "")[0]);
          qF(a, c, w, h, v, z, f, b, k2.length == 0);
          return c;
        }
        function kF(a, b, c, d) {
          var e = new td(), f = b.attributes["xml:id"];
          if (!f) return null;
          e.id = f;
          f = null;
          d && (f = rF.exec(d) || sF.exec(d));
          d = f ? Number(f[1]) : null;
          f = f ? Number(f[2]) : null;
          var g, h = tF(a, b, c, "extent");
          if (h) {
            var k2 = (g = rF.exec(h)) || sF.exec(h);
            k2 != null && (e.width = Number(k2[1]), e.height = Number(k2[2]), g || (d != null && (e.width = e.width * 100 / d), f != null && (e.height = e.height * 100 / f)), e.widthUnits = g || d != null ? ud : 0, e.heightUnits = g || f != null ? ud : 0);
          }
          if (a = tF(a, b, c, "origin")) {
            if (k2 = (g = rF.exec(a)) || sF.exec(a), k2 != null) e.viewportAnchorX = Number(k2[1]), e.viewportAnchorY = Number(k2[2]), g ? h || (e.width = 100 - e.viewportAnchorX, e.widthUnits = ud, e.height = 100 - e.viewportAnchorY, e.heightUnits = ud) : (f != null && (e.viewportAnchorY = e.viewportAnchorY * 100 / f), d != null && (e.viewportAnchorX = e.viewportAnchorX * 100 / d)), e.viewportAnchorUnits = g || d != null ? ud : 0;
          }
          return e;
        }
        function uF(a) {
          var b = a.match(/rgba\(([^)]+)\)/);
          return b && (b = b[1].split(","), b.length == 4) ? (b[3] = String(Number(b[3]) / 255), "rgba(" + b.join(",") + ")") : a;
        }
        function qF(a, b, c, d, e, f, g, h, k2) {
          h = h || k2;
          vF(a, c, d, g, "direction", h) == "rtl" && (b.direction = "rtl");
          k2 = vF(a, c, d, g, "writingMode", h);
          k2 == "tb" || k2 == "tblr" ? b.writingMode = "vertical-lr" : k2 == "tbrl" ? b.writingMode = "vertical-rl" : k2 == "rltb" || k2 == "rl" ? b.direction = "rtl" : k2 && (b.direction = ue);
          (k2 = vF(a, c, d, g, "textAlign", true)) ? (b.positionAlign = wF.get(k2), b.lineAlign = xF.get(k2), b.textAlign = Re[k2.toUpperCase()]) : b.textAlign = te;
          if (k2 = vF(a, c, d, g, "displayAlign", true)) b.displayAlign = Se[k2.toUpperCase()];
          if (k2 = vF(a, c, d, g, "color", h)) b.color = uF(k2);
          if (k2 = vF(a, c, d, g, "backgroundColor", h)) b.backgroundColor = uF(k2);
          if (k2 = vF(a, c, d, g, "border", h)) b.border = k2;
          if (k2 = vF(a, c, d, g, "fontFamily", h)) switch (k2) {
            case "monospaceSerif":
              b.fontFamily = "Courier New,Liberation Mono,Courier,monospace";
              break;
            case "proportionalSansSerif":
              b.fontFamily = "Arial,Helvetica,Liberation Sans,sans-serif";
              break;
            case "sansSerif":
              b.fontFamily = "sans-serif";
              break;
            case "monospaceSansSerif":
              b.fontFamily = "Consolas,monospace";
              break;
            case "proportionalSerif":
              b.fontFamily = "serif";
              break;
            default:
              b.fontFamily = k2.split(",").filter(function(l) {
                return l != "default";
              }).join(",");
          }
          (k2 = vF(a, c, d, g, "fontWeight", h)) && k2 == "bold" && (b.fontWeight = Oe);
          k2 = vF(a, c, d, g, "wrapOption", h);
          b.wrapLine = k2 && k2 == "noWrap" ? false : true;
          (k2 = vF(a, c, d, g, "lineHeight", h)) && k2.match(yF) && (b.lineHeight = k2);
          (k2 = vF(a, c, d, g, "fontSize", h)) && (k2.match(yF) || k2.match(zF)) && (b.fontSize = k2);
          if (k2 = vF(a, c, d, g, "fontStyle", h)) b.fontStyle = Ue[k2.toUpperCase()];
          e ? (f = e.attributes.imageType || e.attributes.imagetype, k2 = e.attributes.encoding, e = Sd(e).trim(), f == "PNG" && k2 == "Base64" && e && (b.backgroundImage = "data:image/png;base64," + e)) : f && (b.backgroundImage = f);
          if (e = vF(a, c, d, g, "textOutline", h)) e = e.split(" "), e[0].match(yF) ? b.textStrokeColor = b.color : (b.textStrokeColor = uF(e[0]), e.shift()), e[0] && e[0].match(yF) ? b.textStrokeWidth = e[0] : b.textStrokeColor = "";
          (e = vF(a, c, d, g, "letterSpacing", h)) && e.match(yF) && (b.letterSpacing = e);
          (e = vF(a, c, d, g, "linePadding", h)) && e.match(yF) && (b.linePadding = e);
          if (e = vF(a, c, d, g, "opacity", h)) b.opacity = parseFloat(e);
          (e = tF(a, d, g, "textDecoration")) && AF(b, e);
          (e = BF(
            a,
            c,
            g,
            "textDecoration"
          )) && AF(b, e);
          if (e = vF(a, c, d, g, "textCombine", h)) b.textCombineUpright = e;
          switch (vF(a, c, d, g, "ruby", h)) {
            case "container":
              b.rubyTag = "ruby";
              break;
            case "text":
              b.rubyTag = "rt";
          }
        }
        function AF(a, b) {
          b = u(b.split(" "));
          for (var c = b.next(); !c.done; c = b.next()) switch (c.value) {
            case "underline":
              a.textDecoration.includes(Qe) || a.textDecoration.push(Qe);
              break;
            case "noUnderline":
              a.textDecoration.includes(Qe) && Qc(a.textDecoration, Qe);
              break;
            case "lineThrough":
              a.textDecoration.includes("lineThrough") || a.textDecoration.push("lineThrough");
              break;
            case "noLineThrough":
              a.textDecoration.includes("lineThrough") && Qc(a.textDecoration, "lineThrough");
              break;
            case "overline":
              a.textDecoration.includes("overline") || a.textDecoration.push("overline");
              break;
            case "noOverline":
              a.textDecoration.includes("overline") && Qc(a.textDecoration, "overline");
          }
        }
        function vF(a, b, c, d, e, f) {
          f = f === void 0 ? true : f;
          return (b = BF(a, b, d, e)) ? b : f ? tF(a, c, d, e) : null;
        }
        function tF(a, b, c, d) {
          if (!b) return null;
          var e = ae(b, hF, d);
          return e ? e : CF(a, b, c, d);
        }
        function BF(a, b, c, d) {
          var e = ae(b, hF, d);
          return e ? e : CF(a, b, c, d);
        }
        function CF(a, b, c, d) {
          b = nF(b, "style", c, "");
          for (var e = null, f = 0; f < b.length; f++) {
            var g = $d(b[f], "urn:ebu:tt:style", d);
            g || (g = ae(b[f], hF, d));
            g || (g = BF(a, b[f], c, d));
            g && (e = g);
          }
          return e;
        }
        function nF(a, b, c, d, e) {
          var f = [];
          if (!a || c.length < 1) return f;
          var g = a;
          for (a = null; !a && !(a = e ? $d(g, e, b) : g.attributes[b]) && (g = g.parent, g); ) ;
          if (b = a) {
            for (b = u(b.split(" ")), e = b.next(); !e.done; e = b.next()) for (e = e.value, a = u(c), g = a.next(); !g.done; g = a.next()) if (g = g.value, d + g.attributes["xml:id"] == e) {
              f.push(g);
              break;
            }
          }
          return f;
        }
        function pF(a, b, c, d) {
          a = oF(a, b);
          c == null ? c = a.start : a.start != null && (c += a.start);
          d == null ? d = a.end : a.start != null && (d += a.start);
          return { start: c, end: d };
        }
        function oF(a, b) {
          var c = DF(a.attributes.begin, b), d = DF(a.attributes.end, b);
          a = DF(a.attributes.dur, b);
          d == null && a != null && (d = c + a);
          return { start: c, end: d };
        }
        function DF(a, b) {
          var c = null;
          if (EF.test(a)) {
            a = EF.exec(a);
            c = Number(a[1]);
            var d = Number(a[2]), e = Number(a[3]), f = Number(a[4]);
            f += (Number(a[5]) || 0) / b.h;
            e += f / b.frameRate;
            c = e + d * 60 + c * 3600;
          } else if (FF.test(a)) c = GF(FF, a);
          else if (HF.test(a)) c = GF(HF, a);
          else if (IF.test(a)) a = IF.exec(a), c = Number(a[1]) / b.frameRate;
          else if (JF.test(a)) a = JF.exec(a), c = Number(a[1]) / b.g;
          else if (KF.test(a)) c = GF(KF, a);
          else if (a) throw new U(2, 2, 2001, "Could not parse cue time range in TTML");
          return c;
        }
        function GF(a, b) {
          a = a.exec(b);
          return a == null || a[0] == "" ? null : (Number(a[4]) || 0) / 1e3 + (Number(a[3]) || 0) + (Number(a[2]) || 0) * 60 + (Number(a[1]) || 0) * 3600;
        }
        function jF(a) {
          return a ? (a = /^(\d+) (\d+)$/.exec(a)) ? { columns: parseInt(a[1], 10), rows: parseInt(a[2], 10) } : null : null;
        }
        S("shaka.text.TtmlTextParser", fF);
        fF.prototype.parseMedia = fF.prototype.parseMedia;
        fF.prototype.setManifestType = fF.prototype.setManifestType;
        fF.prototype.setSequenceMode = fF.prototype.setSequenceMode;
        fF.prototype.parseInit = fF.prototype.parseInit;
        function iF(a, b, c, d) {
          this.frameRate = Number(a) || 30;
          this.h = Number(b) || 1;
          this.g = Number(d);
          this.g == 0 && (this.g = a ? this.frameRate * this.h : 1);
          c && (a = /^(\d+) (\d+)$/g.exec(c)) && (this.frameRate *= Number(a[1]) / Number(a[2]));
        }
        var rF = /^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/, zF = /^(\d{1,4}(?:\.\d+)?|100)%$/, yF = /^(\d+px|\d+em|\d*\.?\d+c)$/, sF = /^(\d+)px (\d+)px$/, EF = /^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/, FF = /^(?:(\d{2,}):)?(\d{2}):(\d{2})$/, HF = /^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/, IF = /^(\d*(?:\.\d*)?)f$/, JF = /^(\d*(?:\.\d*)?)t$/, KF = RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"), xF = (/* @__PURE__ */ new Map()).set("left", xe).set("center", "center").set(
          "right",
          "end"
        ).set("start", xe).set("end", "end"), wF = (/* @__PURE__ */ new Map()).set("left", "line-left").set("center", "center").set("right", "line-right"), gF = ["http://www.w3.org/ns/ttml#parameter", "http://www.w3.org/2006/10/ttaf1#parameter"], hF = ["http://www.w3.org/ns/ttml#styling", "http://www.w3.org/2006/10/ttaf1#styling"], mF = ["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt", "http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];
        qf("application/ttml+xml", function() {
          return new fF();
        });
        function LF() {
          this.g = new fF();
        }
        LF.prototype.parseInit = function(a) {
          var b = false;
          new oh().box("moov", th).box("trak", th).box("mdia", th).box("minf", th).box("stbl", th).W("stsd", vh).box("stpp", function(c) {
            b = true;
            c.parser.stop();
          }).parse(a);
          if (!b) throw new U(2, 2, 2007);
        };
        LF.prototype.setSequenceMode = function(a) {
          this.g.setSequenceMode(a);
        };
        LF.prototype.setManifestType = function(a) {
          this.g.setManifestType(a);
        };
        LF.prototype.parseMedia = function(a, b, c) {
          var d = [], e = null, f = [], g = /* @__PURE__ */ new Map(), h = [];
          new oh().box("moof", th).box("traf", th).W("tfhd", function(z) {
            e = Ii(z.reader, z.flags).ke;
          }).W("trun", function(z) {
            z = Li(z.reader, z.version, z.flags);
            z = u(z.Zh);
            for (var y = z.next(); !y.done; y = z.next()) h.push(y.value.sampleSize || e || 0);
          }).W("subs", function(z) {
            for (var y = z.reader, A = y.Z(), C = -1, E = 0; E < A; E++) {
              var D = y.Z();
              C += D;
              D = y.Ha();
              for (var B = [], G = 0; G < D; G++) z.version == 1 ? B.push(y.Z()) : B.push(y.Ha()), y.ba(), y.ba(), y.Z();
              g.set(C, B);
            }
          }).box(
            "mdat",
            yh(function(z) {
              f.push(z);
            })
          ).parse(a, false);
          if (f.length == 0) throw new U(2, 2, 2007);
          for (var k2 = lc.apply(dc, x(f)), l = 0, m = 0; m < h.length; m++) {
            var n = Kb(k2, l, h[m]);
            l += h[m];
            var q = g.get(m);
            if (q && q.length) {
              n = Kb(n, 0, q[0]);
              for (var r = [], t = q[0], w = 1; w < q.length; w++) {
                var v = Kb(a, t, q[w]);
                v = ec(v);
                r.push("data:image/png;base64," + v);
                t += q[w];
              }
              d = d.concat(this.g.parseMedia(n, b, c, r));
            } else d = d.concat(this.g.parseMedia(n, b, c, []));
          }
          return d;
        };
        S("shaka.text.Mp4TtmlParser", LF);
        LF.prototype.parseMedia = LF.prototype.parseMedia;
        LF.prototype.setManifestType = LF.prototype.setManifestType;
        LF.prototype.setSequenceMode = LF.prototype.setSequenceMode;
        LF.prototype.parseInit = LF.prototype.parseInit;
        qf('application/mp4; codecs="stpp"', function() {
          return new LF();
        });
        qf('application/mp4; codecs="stpp.ttml"', function() {
          return new LF();
        });
        qf('application/mp4; codecs="stpp.ttml.im1i"', function() {
          return new LF();
        });
        qf('application/mp4; codecs="stpp.ttml.im1t"', function() {
          return new LF();
        });
        qf('application/mp4; codecs="stpp.ttml.im2i"', function() {
          return new LF();
        });
        qf('application/mp4; codecs="stpp.ttml.im2t"', function() {
          return new LF();
        });
        qf('application/mp4; codecs="stpp.ttml.etd1"', function() {
          return new LF();
        });
        qf('application/mp4; codecs="stpp.ttml.etd1|im1t"', function() {
          return new LF();
        });
        qf('application/mp4; codecs="stpp.ttml.im1t|etd1"', function() {
          return new LF();
        });
        qf('application/mp4; codecs="stpp.TTML.im1t"', function() {
          return new LF();
        });
        function MF() {
          this.g = "UNKNOWN";
        }
        MF.prototype.parseInit = function() {
        };
        MF.prototype.setSequenceMode = function() {
        };
        MF.prototype.setManifestType = function(a) {
          this.g = a;
        };
        MF.prototype.parseMedia = function(a, b) {
          a = Wb(a);
          a = a.replace(/\r\n|\r(?=[^\n]|$)/gm, "\n");
          var c = a.split(/\n{2,}/m);
          if (!/^WEBVTT($|[ \t\n])/m.test(c[0])) throw new U(2, 2, 2e3);
          a = b.vttOffset;
          if (this.g == "HLS") if (c[0].includes("X-TIMESTAMP-MAP")) {
            var d = c[0];
            a = d.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m);
            d = d.match(/MPEGTS:(\d+)/m);
            if (!a || !d) throw new U(2, 2, 2e3);
            a = Dd(a[1]);
            if (a == null) throw new U(2, 2, 2e3);
            d = Number(d[1]);
            for (var e = b.segmentStart - b.periodStart; e >= 95443.7176888889; ) e -= 95443.7176888889, d += 8589934592;
            a = b.periodStart + d / 9e4 - a;
          } else b.periodStart && b.vttOffset == b.periodStart && (a = 0);
          b = [];
          d = u(c[0].split("\n"));
          for (e = d.next(); !e.done; e = d.next()) if (e = e.value, /^Region:/.test(e)) {
            e = new wd(e);
            var f = new td();
            zd(e);
            xd(e);
            for (var g = zd(e); g; ) {
              var h = f, k2 = g;
              (g = /^id=(.*)$/.exec(k2)) ? h.id = g[1] : (g = /^width=(\d{1,2}|100)%$/.exec(k2)) ? h.width = Number(g[1]) : (g = /^lines=(\d+)$/.exec(k2)) ? (h.height = Number(g[1]), h.heightUnits = 2) : (g = /^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(k2)) ? (h.regionAnchorX = Number(g[1]), h.regionAnchorY = Number(g[2])) : (g = /^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(k2)) ? (h.viewportAnchorX = Number(g[1]), h.viewportAnchorY = Number(g[2])) : /^scroll=up$/.exec(k2) && (h.scroll = "up");
              xd(e);
              g = zd(e);
            }
            b.push(f);
          }
          d = /* @__PURE__ */ new Map();
          Ee(d);
          e = [];
          c = u(c.slice(1));
          for (f = c.next(); !f.done; f = c.next()) {
            f = f.value.split("\n");
            if ((f.length != 1 || f[0]) && !/^NOTE($|[ \t])/.test(f[0]) && f[0] == "STYLE") {
              h = [];
              g = -1;
              for (k2 = 1; k2 < f.length; k2++) f[k2].includes("::cue") && (h.push([]), g = h.length - 1), g != -1 && (h[g].push(f[k2]), f[k2].includes("}") && (g = -1));
              h = u(h);
              for (g = h.next(); !g.done; g = h.next()) {
                var l = g.value;
                g = "global";
                (k2 = l[0].match(/\((.*)\)/)) && (g = k2.pop());
                k2 = l.slice(1, -1);
                l[0].includes("}") && (l = /\{(.*?)\}/.exec(l[0])) && (k2 = l[1].split(";"));
                (l = d.get(g)) || (l = new re(0, 0, ""));
                for (var m = false, n = 0; n < k2.length; n++) {
                  var q = /^\s*([^:]+):\s*(.*)/.exec(k2[n]);
                  if (q) {
                    var r = q[2].trim().replace(";", "");
                    switch (q[1].trim()) {
                      case "background-color":
                      case "background":
                        m = true;
                        l.backgroundColor = r;
                        break;
                      case "color":
                        m = true;
                        l.color = r;
                        break;
                      case "font-family":
                        m = true;
                        l.fontFamily = r;
                        break;
                      case "font-size":
                        m = true;
                        l.fontSize = r;
                        break;
                      case "font-weight":
                        if (parseInt(r, 10) >= 700 || r == "bold") m = true, l.fontWeight = Oe;
                        break;
                      case "font-style":
                        switch (r) {
                          case "normal":
                            m = true;
                            l.fontStyle = Ae;
                            break;
                          case "italic":
                            m = true;
                            l.fontStyle = Pe;
                            break;
                          case "oblique":
                            m = true, l.fontStyle = "oblique";
                        }
                        break;
                      case "opacity":
                        m = true;
                        l.opacity = parseFloat(r);
                        break;
                      case "text-combine-upright":
                        m = true;
                        l.textCombineUpright = r;
                        break;
                      case "text-shadow":
                        m = true;
                        l.textShadow = r;
                        break;
                      case "white-space":
                        m = true, l.wrapLine = r != "noWrap";
                    }
                  }
                }
                m && d.set(
                  g,
                  l
                );
              }
            }
            l = f;
            m = a;
            if (l.length == 1 && !l[0] || /^NOTE($|[ \t])/.test(l[0]) || l[0] == "STYLE" || l[0] == "REGION") f = null;
            else if (f = null, l[0].includes("-->") || (f = l[0], l.splice(0, 1)), h = new wd(l[0]), g = Ad(h), n = yd(h, /[ \t]+--\x3e[ \t]+/g), k2 = Ad(h), g == null || n == null || k2 == null) ab("Failed to parse VTT time code. Cue skipped:", f, l), f = null;
            else {
              g += m;
              k2 += m;
              m = l.slice(1).join("\n").trim();
              d.has("global") ? (l = d.get("global").clone(), l.startTime = g, l.endTime = k2, l.payload = m) : l = new re(g, k2, m);
              xd(h);
              for (g = zd(h); g; ) NF(l, g, b), xd(h), g = zd(h);
              De(l, d);
              f != null && (l.id = f);
              f = l;
            }
            f && e.push(f);
          }
          return e;
        };
        function NF(a, b, c) {
          var d;
          if (d = /^align:(start|middle|center|end|left|right)$/.exec(b)) b = d[1], b == "middle" ? a.textAlign = te : a.textAlign = Re[b.toUpperCase()];
          else if (d = /^vertical:(lr|rl)$/.exec(b)) a.writingMode = d[1] == "lr" ? "vertical-lr" : "vertical-rl";
          else if (d = /^size:([\d.]+)%$/.exec(b)) a.size = Number(d[1]);
          else if (d = /^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(b)) a.position = Number(d[1]), d[2] && (b = d[2], a.positionAlign = b == "line-left" || b == "start" ? "line-left" : b == "line-right" || b == "end" ? "line-right" : b == "center" || b == "middle" ? "center" : se);
          else if (d = /^region:(.*)$/.exec(b)) {
            if (b = OF(c, d[1])) a.region = b;
          } else if (c = /^line:([\d.]+)%(?:,(start|end|center))?$/.exec(b)) a.lineInterpretation = 1, a.line = Number(c[1]), c[2] && (a.lineAlign = Te[c[2].toUpperCase()]);
          else if (c = /^line:(-?\d+)(?:,(start|end|center))?$/.exec(b)) a.lineInterpretation = we, a.line = Number(c[1]), c[2] && (a.lineAlign = Te[c[2].toUpperCase()]);
        }
        function OF(a, b) {
          a = a.filter(function(c) {
            return c.id == b;
          });
          return a.length ? a[0] : null;
        }
        S("shaka.text.VttTextParser", MF);
        MF.prototype.parseMedia = MF.prototype.parseMedia;
        MF.prototype.setManifestType = MF.prototype.setManifestType;
        MF.prototype.setSequenceMode = MF.prototype.setSequenceMode;
        MF.prototype.parseInit = MF.prototype.parseInit;
        qf("text/vtt", function() {
          return new MF();
        });
        qf('text/vtt; codecs="vtt"', function() {
          return new MF();
        });
        qf('text/vtt; codecs="wvtt"', function() {
          return new MF();
        });
        function PF() {
          this.g = null;
        }
        PF.prototype.parseInit = function(a) {
          var b = this, c = false;
          new oh().box("moov", th).box("trak", th).box("mdia", th).W("mdhd", function(d) {
            d = Ki(d.reader, d.version);
            b.g = d.timescale;
          }).box("minf", th).box("stbl", th).W("stsd", vh).box("wvtt", function() {
            c = true;
          }).parse(a);
          if (!this.g) throw new U(2, 2, 2008);
          if (!c) throw new U(2, 2, 2008);
        };
        PF.prototype.setSequenceMode = function() {
        };
        PF.prototype.setManifestType = function() {
        };
        PF.prototype.parseMedia = function(a, b) {
          if (!a.length) return [];
          if (!this.g) throw new U(2, 2, 2008);
          var c = 0, d = [], e, f = [], g = false, h = false, k2 = false, l = null;
          new oh().box("moof", th).box("traf", th).W("tfdt", function(A) {
            g = true;
            c = Ji(A.reader, A.version).baseMediaDecodeTime;
          }).W("tfhd", function(A) {
            l = Ii(A.reader, A.flags).je;
          }).W("trun", function(A) {
            h = true;
            d = Li(A.reader, A.version, A.flags).Zh;
          }).box("mdat", yh(function(A) {
            k2 = true;
            e = A;
          })).parse(a, false);
          if (!k2 && !g && !h) throw new U(2, 2, 2008);
          a = c;
          for (var m = new lh(e, 0), n = u(d), q = n.next(); !q.done; q = n.next()) {
            q = q.value;
            var r = q.$h || l, t = q.cg ? c + q.cg : a;
            a = t + (r || 0);
            var w = 0;
            do {
              var v = m.Z();
              w += v;
              var z = m.Z(), y = null;
              sh(z) == "vttc" ? v > 8 && (y = m.ac(v - 8)) : m.skip(v - 8);
              r && y && (v = QF(y, b.periodStart + t / this.g, b.periodStart + a / this.g), f.push(v));
            } while (q.sampleSize && w < q.sampleSize);
          }
          return f.filter(Ef);
        };
        function QF(a, b, c) {
          var d, e, f;
          new oh().box("payl", yh(function(g) {
            d = Wb(g);
          })).box("iden", yh(function(g) {
            e = Wb(g);
          })).box("sttg", yh(function(g) {
            f = Wb(g);
          })).parse(a);
          return d ? RF(d, e, f, b, c) : null;
        }
        function RF(a, b, c, d, e) {
          a = new re(d, e, a);
          De(a);
          b && (a.id = b);
          if (c) for (b = new wd(c), c = zd(b); c; ) NF(a, c, []), xd(b), c = zd(b);
          return a;
        }
        S("shaka.text.Mp4VttParser", PF);
        PF.prototype.parseMedia = PF.prototype.parseMedia;
        PF.prototype.setManifestType = PF.prototype.setManifestType;
        PF.prototype.setSequenceMode = PF.prototype.setSequenceMode;
        PF.prototype.parseInit = PF.prototype.parseInit;
        qf('application/mp4; codecs="wvtt"', function() {
          return new PF();
        });
        function SF() {
        }
        SF.prototype.parseInit = function() {
        };
        SF.prototype.setSequenceMode = function() {
        };
        SF.prototype.setManifestType = function() {
        };
        SF.prototype.parseMedia = function(a) {
          var b = Wb(a).replace(/\r+/g, "");
          b = b.trim();
          a = [];
          if (b == "") return a;
          b = u(b.split("\n\n"));
          for (var c = b.next(); !c.done; c = b.next()) {
            c = c.value.split("\n");
            var d = new wd(c[0]), e = Ad(d), f = yd(d, /,/g);
            d = Ad(d);
            if (e == null || f == null || d == null) throw new U(2, 2, 2001, "Could not parse cue time range in SubViewer");
            a.push(new re(e, d, c.slice(1).join("\n").trim()));
          }
          return a;
        };
        S("shaka.text.SbvTextParser", SF);
        SF.prototype.parseMedia = SF.prototype.parseMedia;
        SF.prototype.setManifestType = SF.prototype.setManifestType;
        SF.prototype.setSequenceMode = SF.prototype.setSequenceMode;
        SF.prototype.parseInit = SF.prototype.parseInit;
        qf("text/x-subviewer", function() {
          return new SF();
        });
        function TF() {
          this.g = new MF();
        }
        TF.prototype.parseInit = function() {
        };
        TF.prototype.setSequenceMode = function() {
        };
        TF.prototype.setManifestType = function() {
        };
        TF.prototype.parseMedia = function(a, b, c) {
          a = Wb(a);
          a = UF(a);
          a = Kb($b(a));
          return this.g.parseMedia(a, b, c, []);
        };
        function UF(a) {
          var b = "WEBVTT\n\n";
          if (a == "") return b;
          a = a.replace(/\r+/g, "");
          a = a.trim();
          a = u(a.split("\n\n"));
          for (var c = a.next(); !c.done; c = a.next()) c = c.value.split(/\n/), c[0].match(/\d+/) && c.shift(), c[0] = c[0].replace(/,/g, "."), b += c.join("\n").replace(/{b}/g, "<b>").replace(/{\/b}/g, "</b>").replace(/{i}/g, "<i>").replace(/{\/i}/g, "</i>").replace(/{u}/g, "<u>").replace(/{\/u}/g, "</u>") + "\n\n";
          return b;
        }
        S("shaka.text.SrtTextParser", TF);
        TF.srt2webvtt = UF;
        TF.prototype.parseMedia = TF.prototype.parseMedia;
        TF.prototype.setManifestType = TF.prototype.setManifestType;
        TF.prototype.setSequenceMode = TF.prototype.setSequenceMode;
        TF.prototype.parseInit = TF.prototype.parseInit;
        qf("text/srt", function() {
          return new TF();
        });
        function VF() {
        }
        VF.prototype.parseInit = function() {
        };
        VF.prototype.setSequenceMode = function() {
        };
        VF.prototype.setManifestType = function() {
        };
        VF.prototype.parseMedia = function(a) {
          var b = "", c = "", d = null, e = null;
          e = Wb(a).split(/\r?\n\s*\r?\n/);
          a = u(e);
          for (e = a.next(); !e.done; e = a.next()) {
            var f = e.value;
            e = f;
            if (f = WF.exec(f)) d = f[1], e = f[2];
            d == "V4 Styles" || d == "V4+ Styles" ? (b = e, b = c ? b + ("\n" + e) : e) : d == "Events" && (c = c ? c + ("\n" + e) : e);
          }
          d = [];
          e = null;
          b = u(b.split(/\r?\n/));
          for (a = b.next(); !a.done; a = b.next()) if (a = a.value, !/^\s*;/.test(a) && (f = XF.exec(a))) {
            if (a = f[1].trim(), f = f[2].trim(), a == "Format") e = f.split(YF);
            else if (a == "Style") {
              a = f.split(YF);
              f = {};
              for (var g = 0; g < e.length && g < a.length; g++) f[e[g]] = a[g];
              d.push(f);
            }
          }
          e = [];
          b = null;
          c = u(c.split(/\r?\n/));
          f = c.next();
          for (a = {}; !f.done; a = { Sj: void 0 }, f = c.next()) if (f = f.value, !/^\s*;/.test(f) && (g = XF.exec(f))) {
            if (f = g[1].trim(), g = g[2].trim(), f == "Format") b = g.split(YF);
            else if (f == "Dialogue") {
              g = g.split(YF);
              f = {};
              for (var h = 0; h < b.length && h < g.length; h++) f[b[h]] = g[h];
              h = ZF(f.Start);
              var k2 = ZF(f.End);
              g = new re(h, k2, g.slice(b.length - 1).join(",").replace(/\\N/g, "\n").replace(/\{[^}]+\}/g, ""));
              a.Sj = f.Style;
              (a = d.find(/* @__PURE__ */ function(l) {
                return function(m) {
                  return m.Name == l.Sj;
                };
              }(a))) && $F(g, a);
              e.push(g);
            }
          }
          return e;
        };
        function $F(a, b) {
          var c = b.Fontname;
          c && (a.fontFamily = c);
          if (c = b.Fontsize) a.fontSize = c + "px";
          if (c = b.PrimaryColour) {
            if (c = aG(c)) a.color = c;
          }
          if (c = b.BackColour) {
            if (c = aG(c)) a.backgroundColor = c;
          }
          b.Bold && (a.fontWeight = Oe);
          b.Italic && (a.fontStyle = Pe);
          b.Underline && a.textDecoration.push(Qe);
          if (c = b.Spacing) a.letterSpacing = c + "px";
          if (c = b.Alignment) switch (parseInt(c, 10)) {
            case 1:
              a.displayAlign = ye;
              a.textAlign = "start";
              break;
            case 2:
              a.displayAlign = ye;
              a.textAlign = te;
              break;
            case 3:
              a.displayAlign = ye;
              a.textAlign = "end";
              break;
            case 5:
              a.displayAlign = "before";
              a.textAlign = "start";
              break;
            case 6:
              a.displayAlign = "before";
              a.textAlign = te;
              break;
            case 7:
              a.displayAlign = "before";
              a.textAlign = "end";
              break;
            case 9:
              a.displayAlign = "center";
              a.textAlign = "start";
              break;
            case 10:
              a.displayAlign = "center";
              a.textAlign = te;
              break;
            case 11:
              a.displayAlign = "center", a.textAlign = "end";
          }
          if (b = b.AlphaLevel) a.opacity = parseFloat(b);
        }
        function aG(a) {
          a = parseInt(a.replace("&H", ""), 16);
          return a >= 0 ? "rgba(" + (a & 255) + "," + (a >> 8 & 255) + "," + (a >> 16 & 255) + "," + (a >> 24 & 255 ^ 255) / 255 + ")" : null;
        }
        function ZF(a) {
          a = bG.exec(a);
          return (a[1] ? parseInt(a[1].replace(":", ""), 10) : 0) * 3600 + parseInt(a[2], 10) * 60 + parseFloat(a[3]);
        }
        S("shaka.text.SsaTextParser", VF);
        VF.prototype.parseMedia = VF.prototype.parseMedia;
        VF.prototype.setManifestType = VF.prototype.setManifestType;
        VF.prototype.setSequenceMode = VF.prototype.setSequenceMode;
        VF.prototype.parseInit = VF.prototype.parseInit;
        var WF = /^\s*\[([^\]]+)\]\r?\n([\s\S]*)/, XF = /^\s*([^:]+):\s*(.*)/, YF = /\s*,\s*/, bG = /^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
        qf("text/x-ssa", function() {
          return new VF();
        });
        function cG(a, b) {
          var c = a[b + 1] & 1 ? 7 : 9;
          return b + c <= a.length && (a = ((a[b + 3] & 3) << 11 | a[b + 4] << 3 | (a[b + 5] & 224) >>> 5) - c, a > 0) ? { se: c, ya: a } : null;
        }
        function dG(a, b) {
          var c = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350], d = (a[b + 2] & 60) >>> 2;
          if (d > c.length - 1) return null;
          var e = ((a[b + 2] & 192) >>> 6) + 1, f = (a[b + 2] & 1) << 2;
          f |= (a[b + 3] & 192) >>> 6;
          return { sampleRate: c[d], channelCount: f, codec: "mp4a.40." + e };
        }
        function eG(a, b) {
          if (b + 1 < a.length && a[b] === 255 && (a[b + 1] & 246) === 240) {
            var c = a[b + 1] & 1 ? 7 : 9;
            if (b + c >= a.length) return false;
            var d = (a[b + 3] & 3) << 11 | a[b + 4] << 3 | (a[b + 5] & 224) >>> 5;
            if (d <= c) return false;
            b += d;
            return b === a.length || b + 1 < a.length && a[b] === 255 && (a[b + 1] & 246) === 240;
          }
          return false;
        }
        function fG(a, b) {
          switch (a) {
            case "mp4a.40.2":
              if (b === 1) return new Uint8Array([0, 200, 0, 128, 35, 128]);
              if (b === 2) return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
              if (b === 3) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
              if (b === 4) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56]);
              if (b === 5) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56]);
              if (b === 6) return new Uint8Array([
                0,
                200,
                0,
                128,
                32,
                132,
                1,
                38,
                64,
                8,
                100,
                0,
                130,
                48,
                4,
                153,
                0,
                33,
                144,
                2,
                0,
                178,
                0,
                32,
                8,
                224
              ]);
              break;
            default:
              if (b === 1) return new Uint8Array([1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
              if (b === 2 || b === 3) return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
          }
          return null;
        }
        ;
        function gG(a) {
          this.j = a;
          this.h = 0;
          this.g = /* @__PURE__ */ new Map();
          this.i = null;
        }
        p = gG.prototype;
        p.destroy = function() {
          this.g.clear();
        };
        p.isSupported = function(a) {
          return a.toLowerCase().split(";")[0] == "audio/aac" ? gd(this.convertCodecs("audio", a)) : false;
        };
        p.convertCodecs = function(a, b) {
          return b.toLowerCase().split(";")[0] == "audio/aac" ? 'audio/mp4; codecs="' + (nf(b) || "mp4a.40.2") + '"' : b;
        };
        p.getOriginalMimeType = function() {
          return this.j;
        };
        p.transmux = function(a, b, c, d) {
          for (var e = Kb(a), f = Zj(e), g = f.length; g < e.length && !eG(e, g); g++) ;
          a = c.endTime * 1e3;
          f = Yj(f);
          f.length && c && (f = f.find(function(m) {
            return m.description === "com.apple.streaming.transportStreamTimestamp";
          })) && (a = f.data);
          f = dG(e, g);
          if (!f) return Promise.reject(new U(2, 3, 3018, c ? c.T()[0] : null));
          b.audioSamplingRate = f.sampleRate;
          b.channelsCount = f.channelCount;
          for (var h = []; g < e.length; ) {
            var k2 = cG(e, g);
            if (!k2) return Promise.reject(new U(2, 3, 3018, c ? c.T()[0] : null));
            var l = k2.se + k2.ya;
            g + l <= e.length && h.push({ data: e.subarray(g + k2.se, g + l), size: k2.ya, duration: 1024, Cb: 0, flags: { Eb: 0, wb: 0, ub: 0, rb: 0, sb: 2, Fb: 0 } });
            g += l;
          }
          e = f.sampleRate;
          a = Math.floor(a * e / 1e3);
          d = { id: b.id, type: "audio", codecs: f.codec, encrypted: b.encrypted && b.drmInfos.length > 0, timescale: e, duration: d, Hb: [], Na: new Uint8Array([]), Ya: new Uint8Array([]), eb: 0, gb: 0, data: { sequenceNumber: this.h, baseMediaDecodeTime: a, Gb: h }, stream: b };
          d = new Ri([d]);
          c = b.id + "_" + c.i;
          this.g.has(c) ? b = this.g.get(c) : (b = Si(d), this.g.set(c, b));
          c = this.i !== b;
          d = mj(d);
          this.i = b;
          this.h++;
          return Promise.resolve({ data: d, init: c ? b : null });
        };
        S("shaka.transmuxer.AacTransmuxer", gG);
        gG.prototype.transmux = gG.prototype.transmux;
        gG.prototype.getOriginalMimeType = gG.prototype.getOriginalMimeType;
        gG.prototype.convertCodecs = gG.prototype.convertCodecs;
        gG.prototype.isSupported = gG.prototype.isSupported;
        gG.prototype.destroy = gG.prototype.destroy;
        We("audio/aac", function() {
          return new gG("audio/aac");
        }, bf);
        function hG(a, b) {
          if (b + 8 > a.length || a[b] !== 11 || a[b + 1] !== 119) return null;
          var c = a[b + 4] >> 6;
          if (c >= 3) return null;
          var d = a[b + 4] & 63, e = [
            64,
            69,
            96,
            64,
            70,
            96,
            80,
            87,
            120,
            80,
            88,
            120,
            96,
            104,
            144,
            96,
            105,
            144,
            112,
            121,
            168,
            112,
            122,
            168,
            128,
            139,
            192,
            128,
            140,
            192,
            160,
            174,
            240,
            160,
            175,
            240,
            192,
            208,
            288,
            192,
            209,
            288,
            224,
            243,
            336,
            224,
            244,
            336,
            256,
            278,
            384,
            256,
            279,
            384,
            320,
            348,
            480,
            320,
            349,
            480,
            384,
            417,
            576,
            384,
            418,
            576,
            448,
            487,
            672,
            448,
            488,
            672,
            512,
            557,
            768,
            512,
            558,
            768,
            640,
            696,
            960,
            640,
            697,
            960,
            768,
            835,
            1152,
            768,
            836,
            1152,
            896,
            975,
            1344,
            896,
            976,
            1344,
            1024,
            1114,
            1536,
            1024,
            1115,
            1536,
            1152,
            1253,
            1728,
            1152,
            1254,
            1728,
            1280,
            1393,
            1920,
            1280,
            1394,
            1920
          ][d * 3 + c] * 2;
          if (b + e > a.length) return null;
          var f = a[b + 6] >> 5, g = 0;
          f === 2 ? g += 2 : (f & 1 && f !== 1 && (g += 2), f & 4 && (g += 2));
          g = (a[b + 6] << 8 | a[b + 7]) >> 12 - g & 1;
          var h = a[b + 5] & 7;
          a = new Uint8Array([c << 6 | a[b + 5] >> 3 << 1 | h >> 2, (h & 3) << 6 | f << 3 | g << 2 | d >> 4, d << 4 & 224]);
          return { sampleRate: [48e3, 44100, 32e3][c], channelCount: [2, 1, 2, 3, 3, 4, 4, 5][f] + g, Na: a, ya: e };
        }
        function iG(a, b) {
          if (a[b] === 11 && a[b + 1] === 119) {
            var c = 0, d = 5;
            b += d;
            for (var e, f; d > 0; ) {
              f = a[b];
              var g = Math.min(d, 8), h = 8 - g;
              e = 4278190080 >>> 24 + h << h;
              e = (f & e) >> h;
              c = c ? c << g | e : e;
              b += 1;
              d -= g;
            }
            if (c < 16) return true;
          }
          return false;
        }
        ;
        function jG(a) {
          this.j = a;
          this.h = 0;
          this.g = /* @__PURE__ */ new Map();
          this.i = null;
        }
        p = jG.prototype;
        p.destroy = function() {
          this.g.clear();
        };
        p.isSupported = function(a) {
          return a.toLowerCase().split(";")[0] == "audio/ac3" ? gd(this.convertCodecs("audio", a)) : false;
        };
        p.convertCodecs = function(a, b) {
          return b.toLowerCase().split(";")[0] == "audio/ac3" ? Rb().Fe() ? 'audio/mp4; codecs="ec-3"' : 'audio/mp4; codecs="ac-3"' : b;
        };
        p.getOriginalMimeType = function() {
          return this.j;
        };
        p.transmux = function(a, b, c, d) {
          a = Kb(a);
          for (var e = Zj(a), f = e.length; f < a.length && !iG(a, f); f++) ;
          var g = c.endTime * 1e3;
          e = Yj(e);
          e.length && c && (e = e.find(function(m) {
            return m.description === "com.apple.streaming.transportStreamTimestamp";
          })) && (g = e.data);
          e = 0;
          for (var h = new Uint8Array([]), k2 = []; f < a.length; ) {
            var l = hG(a, f);
            if (!l) return Promise.reject(new U(2, 3, 3018, c ? c.T()[0] : null));
            b.audioSamplingRate = l.sampleRate;
            b.channelsCount = l.channelCount;
            e = l.sampleRate;
            h = l.Na;
            k2.push({
              data: a.subarray(f, f + l.ya),
              size: l.ya,
              duration: 1536,
              Cb: 0,
              flags: { Eb: 0, wb: 0, ub: 0, rb: 0, sb: 2, Fb: 0 }
            });
            f += l.ya;
          }
          a = Math.floor(g * e / 1e3);
          d = { id: b.id, type: "audio", codecs: "ac-3", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: e, duration: d, Hb: [], Na: h, Ya: new Uint8Array([]), eb: 0, gb: 0, data: { sequenceNumber: this.h, baseMediaDecodeTime: a, Gb: k2 }, stream: b };
          d = new Ri([d]);
          c = b.id + "_" + c.i;
          this.g.has(c) ? b = this.g.get(c) : (b = Si(d), this.g.set(c, b));
          c = this.i !== b;
          d = mj(d);
          this.i = b;
          this.h++;
          return Promise.resolve({ data: d, init: c ? b : null });
        };
        S("shaka.transmuxer.Ac3Transmuxer", jG);
        jG.prototype.transmux = jG.prototype.transmux;
        jG.prototype.getOriginalMimeType = jG.prototype.getOriginalMimeType;
        jG.prototype.convertCodecs = jG.prototype.convertCodecs;
        jG.prototype.isSupported = jG.prototype.isSupported;
        jG.prototype.destroy = jG.prototype.destroy;
        We("audio/ac3", function() {
          return new jG("audio/ac3");
        }, bf);
        function kG(a, b) {
          if (b + 8 > a.length || (a[b] << 8 | a[b + 1] << 0) !== 2935) return null;
          var c = new bk(a.subarray(b + 2));
          dk(c, 2);
          dk(c, 3);
          var d = ek(c, 11) + 1 << 1, e = ek(c, 2);
          if (e == 3) {
            e = ek(c, 2);
            e = [24e3, 22060, 16e3][e];
            var f = 3;
          } else e = [48e3, 44100, 32e3][e], f = ek(c, 2);
          var g = ek(c, 3), h = ek(c, 1);
          c = ek(c, 5);
          if (b + d > a.byteLength) return null;
          a = Math.floor(d * e / ([1, 2, 3, 6][f] * 16));
          a = new Uint8Array([(a & 8160) >> 5, (a & 31) << 3, e << 6 | c << 1 | 0, 0 | g << 1 | h << 0, 0]);
          return { sampleRate: e, channelCount: [2, 1, 2, 3, 3, 4, 4, 5][g] + h, Na: a, ya: d };
        }
        ;
        function lG(a) {
          this.j = a;
          this.h = 0;
          this.g = /* @__PURE__ */ new Map();
          this.i = null;
        }
        p = lG.prototype;
        p.destroy = function() {
          this.g.clear();
        };
        p.isSupported = function(a) {
          return a.toLowerCase().split(";")[0] == "audio/ec3" ? gd(this.convertCodecs("audio", a)) : false;
        };
        p.convertCodecs = function(a, b) {
          return b.toLowerCase().split(";")[0] == "audio/ec3" ? 'audio/mp4; codecs="ec-3"' : b;
        };
        p.getOriginalMimeType = function() {
          return this.j;
        };
        p.transmux = function(a, b, c, d) {
          a = Kb(a);
          for (var e = Zj(a), f = e.length; f < a.length && (a[f] << 8 | a[f + 1] << 0) !== 2935; f++) ;
          var g = c.endTime * 1e3;
          e = Yj(e);
          e.length && c && (e = e.find(function(m) {
            return m.description === "com.apple.streaming.transportStreamTimestamp";
          })) && (g = e.data);
          e = 0;
          for (var h = new Uint8Array([]), k2 = []; f < a.length; ) {
            var l = kG(a, f);
            if (!l) return Promise.reject(new U(2, 3, 3018, c ? c.T()[0] : null));
            b.audioSamplingRate = l.sampleRate;
            b.channelsCount = l.channelCount;
            e = l.sampleRate;
            h = l.Na;
            k2.push({
              data: a.subarray(f, f + l.ya),
              size: l.ya,
              duration: 1536,
              Cb: 0,
              flags: { Eb: 0, wb: 0, ub: 0, rb: 0, sb: 2, Fb: 0 }
            });
            f += l.ya;
          }
          a = Math.floor(g * e / 1e3);
          d = { id: b.id, type: "audio", codecs: "ec-3", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: e, duration: d, Hb: [], Na: h, Ya: new Uint8Array([]), eb: 0, gb: 0, data: { sequenceNumber: this.h, baseMediaDecodeTime: a, Gb: k2 }, stream: b };
          d = new Ri([d]);
          c = b.id + "_" + c.i;
          this.g.has(c) ? b = this.g.get(c) : (b = Si(d), this.g.set(c, b));
          c = this.i !== b;
          d = mj(d);
          this.i = b;
          this.h++;
          return Promise.resolve({ data: d, init: c ? b : null });
        };
        S("shaka.transmuxer.Ec3Transmuxer", lG);
        lG.prototype.transmux = lG.prototype.transmux;
        lG.prototype.getOriginalMimeType = lG.prototype.getOriginalMimeType;
        lG.prototype.convertCodecs = lG.prototype.convertCodecs;
        lG.prototype.isSupported = lG.prototype.isSupported;
        lG.prototype.destroy = lG.prototype.destroy;
        We("audio/ec3", function() {
          return new lG("audio/ec3");
        }, bf);
        function mG(a) {
          if (!a.length) return null;
          var b = a.find(function(w) {
            return w.type == 7;
          });
          a = a.find(function(w) {
            return w.type == 8;
          });
          if (!b || !a) return null;
          var c = new bk(b.data), d = kk(c);
          kk(c);
          kk(c);
          gk(c);
          if (nG.includes(d) && (d = hk(c), d === 3 && dk(c, 1), gk(c), gk(c), dk(c, 1), jk(c))) {
            d = d !== 3 ? 8 : 12;
            for (var e = 0; e < d; e++) jk(c) && (e < 6 ? lk(c, 16) : lk(c, 64));
          }
          gk(c);
          d = hk(c);
          if (d === 0) hk(c);
          else if (d === 1) for (dk(c, 1), gk(c), gk(c), d = hk(c), e = 0; e < d; e++) gk(c);
          gk(c);
          dk(c, 1);
          var f = hk(c), g = hk(c), h = ek(c, 1);
          h === 0 && dk(c, 1);
          dk(c, 1);
          var k2 = 0, l = 0, m = 0, n = 0;
          jk(c) && (k2 = hk(c), l = hk(c), m = hk(c), n = hk(c));
          e = d = 1;
          if (jk(c) && jk(c)) {
            var q = kk(c), r = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2], t = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];
            q > 0 && q <= 16 ? (d = r[q - 1], e = t[q - 1]) : q === 255 && (d = ek(c, 16), e = ek(c, 16));
          }
          c = (2 - h) * (g + 1) * 16 - m * 2 - n * 2;
          f = (f + 1) * 16 - k2 * 2 - l * 2;
          k2 = [];
          b = b.fullData;
          k2.push(b.byteLength >>> 8 & 255);
          k2.push(b.byteLength & 255);
          k2 = k2.concat.apply(k2, x(b));
          b = [];
          a = a.fullData;
          b.push(a.byteLength >>> 8 & 255);
          b.push(a.byteLength & 255);
          b = b.concat.apply(b, x(a));
          a = new Uint8Array([
            1,
            k2[3],
            k2[4],
            k2[5],
            255,
            225
          ].concat(k2, [1], b));
          return { height: c, width: f, Ya: a, eb: d, gb: e };
        }
        function oG(a) {
          function b(t) {
            e = { data: new Uint8Array([]), frame: false, isKeyframe: false, pts: t.pts, dts: t.dts, nalus: [] };
          }
          function c() {
            if (e && e.nalus.length && e.frame) {
              for (var t = [], w = u(e.nalus), v = w.next(); !v.done; v = w.next()) {
                v = v.value;
                var z = v.fullData.byteLength, y = new Uint8Array(4);
                y[0] = z >> 24 & 255;
                y[1] = z >> 16 & 255;
                y[2] = z >> 8 & 255;
                y[3] = z & 255;
                t.push(y);
                t.push(v.fullData);
              }
              e.data = lc.apply(dc, x(t));
              d.push(e);
            }
          }
          for (var d = [], e = null, f = false, g = 0; g < a.length; g++) {
            var h = a[g], k2 = h.nalus, l = false;
            e && k2.length && !f && (c(), b(h));
            k2 = u(h.nalus);
            for (var m = k2.next(); !m.done; m = k2.next()) {
              m = m.value;
              var n = false;
              switch (m.type) {
                case 1:
                  var q = false;
                  n = true;
                  var r = m.data;
                  l && r.length > 4 && (r = mk(new bk(r)), r === 2 || r === 4 || r === 7 || r === 9) && (q = true);
                  q && e && e.frame && !e.isKeyframe && (c(), e = null);
                  e || b(h);
                  e.frame = true;
                  e.isKeyframe = q;
                  break;
                case 5:
                  n = true;
                  e && e.frame && !e.isKeyframe && (c(), e = null);
                  e || b(h);
                  e.frame = true;
                  e.isKeyframe = true;
                  break;
                case 6:
                  n = true;
                  break;
                case 7:
                  l = n = true;
                  break;
                case 8:
                  n = true;
                  break;
                case 9:
                  f = n = true;
                  e && e.frame && (c(), e = null);
                  e || b(h);
                  break;
                case 12:
                  n = true;
                  break;
                default:
                  n = false;
              }
              e && n && e.nalus.push(m);
            }
          }
          c();
          return d;
        }
        var nG = [100, 110, 122, 244, 44, 83, 86, 118, 128, 138, 139, 134];
        function pG(a) {
          if (!a.length) return null;
          var b = a.find(function(g) {
            return g.type == 32;
          }), c = a.find(function(g) {
            return g.type == 33;
          }), d = a.find(function(g) {
            return g.type == 34;
          });
          if (!b || !c || !d) return null;
          var e = qG(b.fullData);
          a = rG(c.fullData);
          var f = sG(d.fullData);
          b = tG(b.fullData, c.fullData, d.fullData, { Mh: e.Mh, ri: e.ri, kh: a.kh, mh: a.mh, eh: a.eh, jh: a.jh, fh: a.fh, gh: a.gh, hh: a.hh, ih: a.ih, Yg: a.Yg, Zg: a.Zg, $g: a.$g, ah: a.ah, bh: a.bh, dh: a.dh, Mf: a.Mf, Ng: a.Ng, Jg: a.Jg, Ig: a.Ig, Oh: f.Oh, Xg: a.Xg, Wg: a.Wg });
          return {
            height: a.height,
            width: a.width,
            Ya: b,
            eb: a.om,
            gb: a.nm
          };
        }
        function qG(a) {
          var b = new bk(a, true);
          kk(b);
          kk(b);
          ek(b, 4);
          ek(b, 2);
          ek(b, 6);
          a = ek(b, 3);
          b = jk(b);
          return { Mh: a + 1, ri: b };
        }
        function rG(a) {
          a = new bk(a, true);
          kk(a);
          kk(a);
          var b = 0, c = 0, d = 0, e = 0;
          ek(a, 4);
          var f = ek(a, 3);
          jk(a);
          for (var g = ek(a, 2), h = ek(a, 1), k2 = ek(a, 5), l = kk(a), m = kk(a), n = kk(a), q = kk(a), r = kk(a), t = kk(a), w = kk(a), v = kk(a), z = kk(a), y = kk(a), A = kk(a), C = [], E = [], D = 0; D < f; D++) C.push(jk(a)), E.push(jk(a));
          if (f > 0) for (D = f; D < 8; D++) ek(a, 2);
          for (D = 0; D < f; D++) C[D] && ek(a, 88), E[D] && kk(a);
          hk(a);
          C = hk(a);
          C == 3 && ek(a, 1);
          E = hk(a);
          D = hk(a);
          jk(a) && (b += hk(a), c += hk(a), d += hk(a), e += hk(a));
          var B = hk(a), G = hk(a), I = hk(a);
          if (jk(a)) for (var J = 0; J <= f; J++) hk(a), hk(a), hk(a);
          else hk(a), hk(a), hk(a);
          hk(a);
          hk(a);
          hk(a);
          hk(a);
          hk(a);
          hk(a);
          if (jk(a) && jk(a)) for (J = 0; J < 4; J++) for (var L = 0; L < (J === 3 ? 2 : 6); L++) if (jk(a)) {
            var K = Math.min(64, 1 << 4 + (J << 1));
            J > 1 && ik(a);
            for (var N = 0; N < K; N++) ik(a);
          } else hk(a);
          jk(a);
          jk(a);
          jk(a) && (kk(a), hk(a), hk(a), jk(a));
          J = hk(a);
          for (K = L = 0; K < J; K++) if (N = false, K !== 0 && (N = jk(a)), N) {
            K === J && hk(a);
            jk(a);
            hk(a);
            for (var P = N = 0; P <= L; P++) {
              var O = jk(a), M = false;
              O || (M = jk(a));
              (O || M) && N++;
            }
            L = N;
          } else {
            P = hk(a);
            N = hk(a);
            L = P + N;
            for (O = 0; O < P; O++) hk(a), jk(a);
            for (P = 0; P < N; P++) hk(a), jk(a);
          }
          if (jk(a)) for (J = hk(a), L = 0; L < J; L++) {
            for (K = 0; K < I + 4; K++) ek(a, 1);
            ek(a, 1);
          }
          J = I = 1;
          L = true;
          K = 1;
          P = N = 0;
          jk(a);
          jk(a);
          if (jk(a)) {
            if (jk(a)) {
              O = kk(a);
              M = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];
              var R = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];
              O > 0 && O <= 16 ? (I = M[O - 1], J = R[O - 1]) : O === 255 && (I = ek(a, 16), J = ek(a, 16));
            }
            jk(a) && jk(a);
            jk(a) && (ek(a, 3), jk(a), jk(a) && (kk(a), kk(a), kk(a)));
            jk(a) && (hk(a), hk(a));
            jk(a);
            jk(a);
            jk(a);
            if (O = jk(a)) gk(a), gk(a), gk(a), gk(a);
            if (jk(a) && (K = ek(a, 32), N = ek(a, 32), jk(a) && hk(a), jk(a))) {
              R = false;
              O = jk(a);
              M = jk(a);
              if (O || M) {
                if (R = jk(a)) kk(a), ek(a, 5), jk(a), ek(a, 5);
                ek(a, 4);
                ek(a, 4);
                R && ek(a, 4);
                ek(a, 5);
                ek(a, 5);
                ek(a, 5);
              }
              for (var W = 0; W <= f; W++) {
                L = jk(a);
                var wa = true, Y = 1;
                L || (wa = jk(a));
                var Ka = false;
                wa ? hk(a) : Ka = jk(a);
                Ka || (Y = hk(a) + 1);
                if (O) {
                  for (wa = 0; wa < Y; wa++) hk(a), hk(a), R && (hk(a), hk(a));
                  jk(a);
                }
                if (M) {
                  for (wa = 0; wa < Y; wa++) hk(a), hk(a), R && (hk(a), hk(a));
                  jk(a);
                }
              }
            }
            jk(a) && (jk(a), jk(a), jk(a), P = hk(a), hk(a), hk(a), hk(a), hk(a));
          }
          return { eh: A, kh: g, mh: h, jh: k2, fh: l, gh: m, hh: n, ih: q, Yg: r, Zg: t, $g: w, ah: v, bh: z, dh: y, Mf: P, Ng: C, Jg: B, Ig: G, width: E - (b + c) * (C === 1 || C === 2 ? 2 : 1), height: D - (d + e) * (C === 1 ? 2 : 1), om: I, nm: J, Xg: N / K, Wg: L };
        }
        function sG(a) {
          var b = new bk(a, true);
          kk(b);
          kk(b);
          hk(b);
          hk(b);
          jk(b);
          jk(b);
          ek(b, 3);
          jk(b);
          jk(b);
          hk(b);
          hk(b);
          ik(b);
          jk(b);
          jk(b);
          jk(b) && hk(b);
          ik(b);
          ik(b);
          jk(b);
          jk(b);
          jk(b);
          jk(b);
          a = jk(b);
          b = jk(b);
          var c = 1;
          b && a ? c = 0 : b ? c = 3 : a && (c = 2);
          return { Oh: c };
        }
        function tG(a, b, c, d) {
          var e = new Uint8Array(23 + (5 + a.byteLength) + (5 + b.byteLength) + (5 + c.byteLength));
          e[0] = 1;
          e[1] = (d.kh & 3) << 6 | (d.mh ? 1 : 0) << 5 | d.jh & 31;
          e[2] = d.fh;
          e[3] = d.gh;
          e[4] = d.hh;
          e[5] = d.ih;
          e[6] = d.Yg;
          e[7] = d.Zg;
          e[8] = d.$g;
          e[9] = d.ah;
          e[10] = d.bh;
          e[11] = d.dh;
          e[12] = d.eh;
          e[13] = 240 | (d.Mf & 3840) >> 8;
          e[14] = d.Mf & 255;
          e[15] = 252 | d.Oh & 3;
          e[16] = 252 | d.Ng & 3;
          e[17] = 248 | d.Jg & 7;
          e[18] = 248 | d.Ig & 7;
          e[19] = 0;
          e[20] = parseInt(d.Xg, 10);
          e[21] = ((d.Wg ? 1 : 0) & 3) << 6 | (d.Mh & 7) << 3 | (d.ri ? 1 : 0) << 2 | 3;
          e[22] = 3;
          a = [a, b, c];
          b = 23;
          c = a.length - 1;
          for (d = 0; d < a.length; d += 1) e.set(new Uint8Array([32 + d | (d === c ? 128 : 0), 0, 1]), b), b += 3, e.set(new Uint8Array([a[d].byteLength >> 8, a[d].byteLength & 255]), b), b += 2, e.set(a[d], b), b += a[d].byteLength;
          return e;
        }
        ;
        function uG(a, b) {
          var c = a[b + 1] >> 3 & 3, d = a[b + 1] >> 1 & 3, e = a[b + 2] >> 4 & 15, f = a[b + 2] >> 2 & 3;
          if (c !== 1 && e !== 0 && e !== 15 && f !== 3) {
            var g = a[b + 3] >> 6;
            e = vG[(c === 3 ? 3 - d : d === 3 ? 3 : 4) * 14 + e - 1] * 1e3;
            f = wG[(c === 3 ? 0 : c === 2 ? 1 : 2) * 3 + f];
            c = xG[c][d];
            var h = yG[d], k2 = Math.floor(c * e / f + (a[b + 2] >> 1 & 1)) * h, l = (navigator.userAgent || "").match(/Chrome\/(\d+)/i);
            (l = l ? parseInt(l[1], 10) : 0) && l <= 87 && d === 2 && e >= 224e3 && g === 0 && (a[b + 3] |= 128);
            return { sampleRate: f, channelCount: g === 3 ? 1 : 2, ya: k2, lm: c * 8 * h };
          }
          return null;
        }
        function zG(a, b) {
          return a[b] === 255 && (a[b + 1] & 224) === 224 && (a[b + 1] & 6) !== 0;
        }
        function AG(a, b) {
          if (b + 1 < a.length && zG(a, b)) {
            var c = uG(a, b), d = 4;
            c && c.ya && (d = c.ya);
            b += d;
            return b === a.length || b + 1 < a.length && zG(a, b);
          }
          return false;
        }
        var vG = [32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160], wG = [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3], xG = [[0, 72, 144, 12], [0, 0, 0, 0], [0, 72, 144, 12], [0, 144, 144, 12]], yG = [0, 1, 1, 4];
        function BG(a) {
          this.j = a;
          this.h = 0;
          this.g = /* @__PURE__ */ new Map();
          this.i = null;
        }
        p = BG.prototype;
        p.destroy = function() {
          this.g.clear();
        };
        p.isSupported = function(a) {
          return a.toLowerCase().split(";")[0] == "audio/mpeg" ? gd(this.convertCodecs("audio", a)) : false;
        };
        p.convertCodecs = function(a, b) {
          return b.toLowerCase().split(";")[0] == "audio/mpeg" ? 'audio/mp4; codecs="mp3"' : b;
        };
        p.getOriginalMimeType = function() {
          return this.j;
        };
        p.transmux = function(a, b, c, d) {
          for (var e = Kb(a), f = Zj(e).length; f < e.length && !AG(e, f); f++) ;
          var g;
          for (a = []; f < e.length; ) {
            var h = uG(e, f);
            if (!h) return Promise.reject(new U(2, 3, 3018, c ? c.T()[0] : null));
            g || (g = h);
            f + h.ya <= e.length && a.push({ data: e.subarray(f, f + h.ya), size: h.ya, duration: 1152, Cb: 0, flags: { Eb: 0, wb: 0, ub: 0, rb: 0, sb: 2, Fb: 0 } });
            f += h.ya;
          }
          if (!g) return Promise.reject(new U(2, 3, 3018, c ? c.T()[0] : null));
          e = g.lm * 9e4 / g.sampleRate * this.h;
          d = {
            id: b.id,
            type: "audio",
            codecs: "mp3",
            encrypted: b.encrypted && b.drmInfos.length > 0,
            timescale: g.sampleRate,
            duration: d,
            Hb: [],
            Na: new Uint8Array([]),
            Ya: new Uint8Array([]),
            eb: 0,
            gb: 0,
            data: { sequenceNumber: this.h, baseMediaDecodeTime: e, Gb: a },
            stream: b
          };
          d = new Ri([d]);
          c = b.id + "_" + c.i;
          this.g.has(c) ? b = this.g.get(c) : (b = Si(d), this.g.set(c, b));
          c = this.i !== b;
          d = mj(d);
          this.i = b;
          this.h++;
          return Promise.resolve({ data: d, init: c ? b : null });
        };
        S("shaka.transmuxer.Mp3Transmuxer", BG);
        BG.prototype.transmux = BG.prototype.transmux;
        BG.prototype.getOriginalMimeType = BG.prototype.getOriginalMimeType;
        BG.prototype.convertCodecs = BG.prototype.convertCodecs;
        BG.prototype.isSupported = BG.prototype.isSupported;
        BG.prototype.destroy = BG.prototype.destroy;
        We("audio/mpeg", function() {
          return new BG("audio/mpeg");
        }, bf);
        function CG(a) {
          this.h = a;
          this.g = null;
        }
        p = CG.prototype;
        p.destroy = function() {
        };
        p.isSupported = function(a) {
          if (a.toLowerCase().split(";")[0] != "video/mp2t") return false;
          var b = nf(a).split(","), c = qc("audio", b);
          b = qc("video", b);
          return !c || b || jf(c) != "mp3" ? false : gd(this.convertCodecs("audio", a));
        };
        p.convertCodecs = function(a, b) {
          return b.toLowerCase().split(";")[0] == "video/mp2t" ? "audio/mpeg" : b;
        };
        p.getOriginalMimeType = function() {
          return this.h;
        };
        p.transmux = function(a, b, c, d, e) {
          this.g ? this.g.clearData() : this.g = new nk();
          this.g.gg(c.i);
          a = Kb(a);
          a = this.g.parse(a);
          if (a.le().audio != "mp3" || e != "audio") return Promise.reject(new U(2, 3, 3018, c ? c.T()[0] : null));
          c = new Uint8Array([]);
          e = u(a.Db());
          for (a = e.next(); !a.done; a = e.next()) if (a = a.value.data) for (b = 0; b < a.length; ) (d = uG(a, b)) ? (b + d.ya <= a.length && (c = lc(c, a.subarray(b, b + d.ya))), b += d.ya) : b++;
          return Promise.resolve(c);
        };
        S("shaka.transmuxer.MpegTsTransmuxer", CG);
        CG.prototype.transmux = CG.prototype.transmux;
        CG.prototype.getOriginalMimeType = CG.prototype.getOriginalMimeType;
        CG.prototype.convertCodecs = CG.prototype.convertCodecs;
        CG.prototype.isSupported = CG.prototype.isSupported;
        CG.prototype.destroy = CG.prototype.destroy;
        We("video/mp2t", function() {
          return new CG("video/mp2t");
        }, af);
        function DG(a) {
          this.h = a;
          (this.g = dy.get("ISOBoxer")()) && EG(this);
        }
        function EG(a) {
          function b() {
            this._procFullBox();
            this.flags & 1 && (this._procField("AlgorithmID", "uint", 24), this._procField("IV_size", "uint", 8), this._procFieldArray("KID", 16, "uint", 8));
            this._procField("sample_count", "uint", 32);
            this._procEntries("entry", this.sample_count, function(c) {
              this._procEntryField(c, "InitializationVector", "data", 8);
              this.flags & 2 && (this._procEntryField(c, "NumberOfEntries", "uint", 16), this._procSubEntries(c, "clearAndCryptedData", c.NumberOfEntries, function(d) {
                this._procEntryField(
                  d,
                  "BytesOfClearData",
                  "uint",
                  16
                );
                this._procEntryField(d, "BytesOfEncryptedData", "uint", 32);
              }));
            });
          }
          a.g.addBoxProcessor("saio", function() {
            this._procFullBox();
            this.flags & 1 && (this._procField("aux_info_type", "uint", 32), this._procField("aux_info_type_parameter", "uint", 32));
            this._procField("entry_count", "uint", 32);
            this._procFieldArray("offset", this.entry_count, "uint", this.version === 1 ? 64 : 32);
          });
          a.g.addBoxProcessor("saiz", function() {
            this._procFullBox();
            this.flags & 1 && (this._procField("aux_info_type", "uint", 32), this._procField(
              "aux_info_type_parameter",
              "uint",
              32
            ));
            this._procField("default_sample_info_size", "uint", 8);
            this._procField("sample_count", "uint", 32);
            this.default_sample_info_size === 0 && this._procFieldArray("sample_info_size", this.sample_count, "uint", 8);
          });
          a.g.addBoxProcessor("senc", b);
          a.g.addBoxProcessor("uuid", function() {
            for (var c = true, d = 0; d < 16; d++) this.usertype[d] !== FG[d] && (c = false);
            c && (this._parsing && (this.type = "sepiff"), b.call(this));
          });
        }
        p = DG.prototype;
        p.destroy = function() {
        };
        p.isSupported = function(a, b) {
          var c = a.startsWith("mss/");
          if (!this.g || !c) return false;
          if (b) return gd(this.convertCodecs(b, a));
          b = this.convertCodecs("audio", a);
          a = this.convertCodecs("video", a);
          return gd(b) || gd(a);
        };
        p.convertCodecs = function(a, b) {
          return b.replace("mss/", "");
        };
        p.getOriginalMimeType = function() {
          return this.h;
        };
        p.transmux = function(a, b, c) {
          if (!c) return Promise.resolve(Kb(a));
          if (!b.mssPrivateData) return Promise.reject(new U(2, 3, 3020, c ? c.T()[0] : null));
          try {
            var d, e = this.g.parseBuffer(a), f = e.fetch("tfhd");
            f.track_ID = b.id + 1;
            var g = e.fetch("tfdt"), h = e.fetch("traf");
            g === null && (g = this.g.createFullBox("tfdt", h, f), g.version = 1, g.flags = 0, g.baseMediaDecodeTime = Math.floor(c.startTime * b.mssPrivateData.timescale));
            var k2 = e.fetch("trun"), l = e.fetch("tfxd");
            l && l._parent.boxes.splice(l._parent.boxes.indexOf(l), 1);
            var m = e.fetch("tfrf");
            m && m._parent.boxes.splice(m._parent.boxes.indexOf(m), 1);
            var n = e.fetch("sepiff");
            if (n !== null) {
              n.type = "senc";
              n.usertype = void 0;
              var q = e.fetch("saio");
              if (q === null) {
                q = this.g.createFullBox("saio", h);
                q.version = 0;
                q.flags = 0;
                q.entry_count = 1;
                q.offset = [0];
                var r = this.g.createFullBox("saiz", h);
                r.version = 0;
                r.flags = 0;
                r.sample_count = n.sample_count;
                r.default_sample_info_size = 0;
                r.sample_info_size = [];
                if (n.flags & 2) for (d = 0; d < n.sample_count; d += 1) r.sample_info_size[d] = 10 + 6 * n.entry[d].NumberOfEntries;
                else r.default_sample_info_size = 8;
              }
            }
            f.flags &= 16777214;
            f.flags |= 131072;
            k2.flags |= 1;
            var t = e.fetch("moof");
            k2.data_offset = t.getLength() + 8;
            var w = e.fetch("saio");
            w !== null && (w.offset[0] = GG(t, "traf") + GG(h, "senc") + 16);
            var v = Kb(e.write());
            return Promise.resolve(v);
          } catch (z) {
            return z instanceof U ? Promise.reject(z) : Promise.reject(new U(2, 3, 3022, c ? c.T()[0] : null));
          }
        };
        function GG(a, b) {
          for (var c = 8, d = 0; d < a.boxes.length && a.boxes[d].type !== b; d++) c += a.boxes[d].size;
          return c;
        }
        S("shaka.transmuxer.MssTransmuxer", DG);
        DG.prototype.transmux = DG.prototype.transmux;
        DG.prototype.getOriginalMimeType = DG.prototype.getOriginalMimeType;
        DG.prototype.convertCodecs = DG.prototype.convertCodecs;
        DG.prototype.isSupported = DG.prototype.isSupported;
        DG.prototype.destroy = DG.prototype.destroy;
        var FG = new Uint8Array([162, 57, 79, 82, 90, 155, 79, 20, 162, 68, 108, 66, 124, 100, 141, 244]);
        We("mss/audio/mp4", function() {
          return new DG("mss/audio/mp4");
        }, bf);
        We("mss/video/mp4", function() {
          return new DG("mss/video/mp4");
        }, bf);
        function HG(a) {
          this.m = a;
          this.g = 0;
          this.j = /* @__PURE__ */ new Map();
          this.l = this.i = this.h = null;
        }
        p = HG.prototype;
        p.destroy = function() {
          this.j.clear();
          this.i && this.i.destroy();
        };
        p.isSupported = function(a, b) {
          if (a.toLowerCase().split(";")[0] != "video/mp2t") return false;
          var c = a;
          b && (c = this.convertCodecs(b, a));
          var d = nf(c).split(",");
          c = qc("audio", d);
          d = qc("video", d);
          if (c && (c = jf(c), !IG.includes(c)) || d && (c = jf(d), !JG.includes(c))) return false;
          if (b) return gd(this.convertCodecs(b, a));
          b = this.convertCodecs("audio", a);
          a = this.convertCodecs("video", a);
          return gd(b) || gd(a);
        };
        p.convertCodecs = function(a, b) {
          return b.toLowerCase().split(";")[0] == "video/mp2t" ? (b = nf(b).replace("mp4a.40.34", "mp3").split(",").map(function(c) {
            return Xf(c, "audio/mp4");
          }).map(Yf).join(","), a == "audio" ? 'audio/mp4; codecs="' + b + '"' : 'video/mp4; codecs="' + b + '"') : b;
        };
        p.getOriginalMimeType = function() {
          return this.m;
        };
        p.transmux = function(a, b, c, d, e) {
          var f = Kb(a);
          if (e == "audio" && !vk(f)) {
            for (var g = Zj(f), h = g.length; h < f.length; h++) if (AG(f, h)) return Promise.reject(new U(2, 3, 3018, c ? c.T()[0] : null));
            for (h = g.length; h < f.length; h++) if (eG(f, h)) return this.i || (this.i = new gG("audio/aac")), this.i.transmux(a, b, c, d, e);
            return Promise.reject(new U(2, 3, 3018, c ? c.T()[0] : null));
          }
          this.h ? this.h.clearData() : this.h = new nk();
          this.h.gg(c.i);
          var k2 = this.h.parse(f), l = [], m = k2.le();
          try {
            var n = null;
            if (e == "video") {
              switch (m.video) {
                case "avc":
                  var q = [], r = null, t = k2.Jd(), w = oG(t);
                  if (!w.length) throw new U(2, 3, 3023, c ? c.T()[0] : null);
                  for (var v = 0; v < w.length; v++) {
                    var z = w[v];
                    r == null && (r = z.dts);
                    var y = void 0;
                    y = v + 1 < w.length ? (w[v + 1].dts || 0) - (z.dts || 0) : w.length > 1 ? (z.dts || 0) - (w[v - 1].dts || 0) : (c.endTime - c.startTime) * 9e4;
                    q.push({ data: z.data, size: z.data.byteLength, duration: y, Cb: Math.round((z.pts || 0) - (z.dts || 0)), flags: { Eb: 0, wb: 0, ub: 0, rb: 0, sb: z.isKeyframe ? 2 : 1, Fb: z.isKeyframe ? 0 : 1 } });
                  }
                  for (var A = [], C = u(t), E = C.next(); !E.done; E = C.next()) A.push.apply(A, x(E.value.nalus));
                  var D = mG(A);
                  if (!D || r == null) throw new U(2, 3, 3018, c ? c.T()[0] : null);
                  b.height = D.height;
                  b.width = D.width;
                  n = { id: b.id, type: "video", codecs: "avc1", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: 9e4, duration: d, Hb: [], Na: new Uint8Array([]), Ya: D.Ya, eb: D.eb, gb: D.gb, data: { sequenceNumber: this.g, baseMediaDecodeTime: r, Gb: q }, stream: b };
                  break;
                case "hvc":
                  var B = [], G = null, I = [], J = k2.Jd();
                  if (!J.length) throw new U(2, 3, 3023, c ? c.T()[0] : null);
                  for (var L = 0; L < J.length; L++) {
                    var K = J[L], N = K.nalus;
                    I.push.apply(I, x(N));
                    for (var P = false, O = [], M = false, R = u(N), W = R.next(); !W.done; W = R.next()) {
                      var wa = W.value;
                      switch (wa.type) {
                        case 1:
                        case 0:
                          var Y = M = true;
                          break;
                        case 19:
                        case 20:
                        case 21:
                          P = Y = M = true;
                          break;
                        case 32:
                          Y = true;
                          break;
                        case 33:
                          Y = true;
                          break;
                        case 34:
                          Y = true;
                          break;
                        case 35:
                          M = Y = true;
                          break;
                        case 39:
                        case 40:
                          Y = true;
                          break;
                        default:
                          Y = false;
                      }
                      if (M && Y) {
                        var Ka = wa.fullData.byteLength, Na = new Uint8Array(4);
                        Na[0] = Ka >> 24 & 255;
                        Na[1] = Ka >> 16 & 255;
                        Na[2] = Ka >> 8 & 255;
                        Na[3] = Ka & 255;
                        O.push(Na);
                        O.push(wa.fullData);
                      }
                    }
                    var La = O.length ? { data: lc.apply(dc, x(O)), isKeyframe: P } : null;
                    if (La) {
                      G == null && K.dts != null && (G = K.dts);
                      var Ea = void 0;
                      Ea = L + 1 < J.length ? (J[L + 1].dts || 0) - (K.dts || 0) : J.length > 1 ? (K.dts || 0) - (J[L - 1].dts || 0) : (c.endTime - c.startTime) * 9e4;
                      B.push({ data: La.data, size: La.data.byteLength, duration: Ea, Cb: Math.round((K.pts || 0) - (K.dts || 0)), flags: { Eb: 0, wb: 0, ub: 0, rb: 0, sb: La.isKeyframe ? 2 : 1, Fb: La.isKeyframe ? 0 : 1 } });
                    }
                  }
                  var za = pG(I);
                  if (!za || G == null) throw new U(2, 3, 3018, c ? c.T()[0] : null);
                  b.height = za.height;
                  b.width = za.width;
                  n = {
                    id: b.id,
                    type: "video",
                    codecs: "hvc1",
                    encrypted: b.encrypted && b.drmInfos.length > 0,
                    timescale: 9e4,
                    duration: d,
                    Hb: [],
                    Na: new Uint8Array([]),
                    Ya: za.Ya,
                    eb: za.eb,
                    gb: za.gb,
                    data: { sequenceNumber: this.g, baseMediaDecodeTime: G, Gb: B },
                    stream: b
                  };
              }
              n && (l.push(n), n = null);
            }
            if (e == "audio") {
              switch (m.audio) {
                case "aac":
                  for (var Fa = [], Da, Aa = null, Ca = null, gb = null, ib = u(k2.Db()), jb = ib.next(); !jb.done; jb = ib.next()) {
                    var Ab = jb.value, yb = Ab.data;
                    if (yb) {
                      var Wa = 0;
                      if (Ca == -1 && gb) yb = lc(gb, Ab.data), Ca = null;
                      else if (Ca != null && gb) {
                        Wa = Math.max(0, Ca);
                        var Yd = lc(gb, yb.subarray(0, Wa));
                        Fa.push({ data: Yd, size: Yd.byteLength, duration: 1024, Cb: 0, flags: {
                          Eb: 0,
                          wb: 0,
                          ub: 0,
                          rb: 0,
                          sb: 2,
                          Fb: 0
                        } });
                        Ca = gb = null;
                      }
                      Da = dG(yb, Wa);
                      if (!Da) throw new U(2, 3, 3018, c ? c.T()[0] : null);
                      b.audioSamplingRate = Da.sampleRate;
                      b.channelsCount = Da.channelCount;
                      Aa == null && Ab.pts !== null && (Aa = Ab.pts);
                      for (; Wa < yb.length; ) {
                        var Oc = cG(yb, Wa);
                        if (!Oc) {
                          gb = yb.subarray(Wa, yb.length);
                          Ca = -1;
                          break;
                        }
                        var Je = Oc.se + Oc.ya;
                        Ca = Math.max(0, Wa + Je - yb.length);
                        Ca != 0 ? gb = yb.subarray(Wa + Oc.se, Wa + Je) : Wa + Je <= yb.length && Fa.push({ data: yb.subarray(Wa + Oc.se, Wa + Je), size: Oc.ya, duration: 1024, Cb: 0, flags: { Eb: 0, wb: 0, ub: 0, rb: 0, sb: 2, Fb: 0 } });
                        Wa += Je;
                      }
                    }
                  }
                  if (!Da || Aa == null) {
                    Aa = c.startTime * 9e4;
                    var Cd = qc("audio", b.codecs.split(","));
                    if (!Cd || !b.channelsCount || !b.audioSamplingRate) throw new U(2, 3, 3018, c ? c.T()[0] : null);
                    Da = { sampleRate: b.audioSamplingRate, channelCount: b.channelsCount, codec: Cd };
                    var Ag = fG(Cd, b.channelsCount);
                    if (!Ag) throw new U(2, 3, 3018, c ? c.T()[0] : null);
                    for (var Ik = Aa + (c.endTime - c.startTime) * 9e4, fi = Aa; fi < Ik; ) Fa.push({ data: Ag, size: Ag.byteLength, duration: 1024, Cb: 0, flags: { Eb: 0, wb: 0, ub: 0, rb: 0, sb: 2, Fb: 0 } }), fi += 1024 / Da.sampleRate * 9e4;
                  }
                  var jd = Da.sampleRate, AK = Aa / 9e4 * jd;
                  n = { id: b.id, type: "audio", codecs: Da.codec, encrypted: b.encrypted && b.drmInfos.length > 0, timescale: jd, duration: d, Hb: [], Na: new Uint8Array([]), Ya: new Uint8Array([]), eb: 0, gb: 0, data: { sequenceNumber: this.g, baseMediaDecodeTime: AK, Gb: Fa }, stream: b };
                  break;
                case "ac3":
                  for (var Yz = [], ql = 0, Vp = new Uint8Array([]), rl = null, Zz = u(k2.Db()), Wp = Zz.next(); !Wp.done; Wp = Zz.next()) {
                    var Xp = Wp.value, Yp = Xp.data;
                    rl == null && Xp.pts !== null && (rl = Xp.pts);
                    for (var Hg = 0; Hg < Yp.length; ) {
                      var Le = hG(Yp, Hg);
                      Le ? (b.audioSamplingRate = Le.sampleRate, b.channelsCount = Le.channelCount, ql = Le.sampleRate, Vp = Le.Na, Yz.push({ data: Yp.subarray(Hg, Hg + Le.ya), size: Le.ya, duration: 1536, Cb: 0, flags: { Eb: 0, wb: 0, ub: 0, rb: 0, sb: 2, Fb: 0 } }), Hg += Le.ya) : Hg++;
                    }
                  }
                  if (ql == 0 || Vp.byteLength == 0 || rl == null) throw new U(2, 3, 3018, c ? c.T()[0] : null);
                  var BK = rl / 9e4 * ql;
                  n = { id: b.id, type: "audio", codecs: "ac-3", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: ql, duration: d, Hb: [], Na: Vp, Ya: new Uint8Array([]), eb: 0, gb: 0, data: { sequenceNumber: this.g, baseMediaDecodeTime: BK, Gb: Yz }, stream: b };
                  break;
                case "ec3":
                  for (var $z = [], sl = 0, Zp = new Uint8Array([]), tl = null, aA = u(k2.Db()), $p = aA.next(); !$p.done; $p = aA.next()) {
                    var aq = $p.value, bq = aq.data;
                    tl == null && aq.pts !== null && (tl = aq.pts);
                    for (var Ig = 0; Ig < bq.length; ) {
                      var Me = kG(bq, Ig);
                      Me ? (b.audioSamplingRate = Me.sampleRate, b.channelsCount = Me.channelCount, sl = Me.sampleRate, Zp = Me.Na, $z.push({ data: bq.subarray(Ig, Ig + Me.ya), size: Me.ya, duration: 1536, Cb: 0, flags: { Eb: 0, wb: 0, ub: 0, rb: 0, sb: 2, Fb: 0 } }), Ig += Me.ya) : Ig++;
                    }
                  }
                  if (sl == 0 || Zp.byteLength == 0 || tl == null) throw new U(2, 3, 3018, c ? c.T()[0] : null);
                  var CK = tl / 9e4 * sl;
                  n = { id: b.id, type: "audio", codecs: "ec-3", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: sl, duration: d, Hb: [], Na: Zp, Ya: new Uint8Array([]), eb: 0, gb: 0, data: { sequenceNumber: this.g, baseMediaDecodeTime: CK, Gb: $z }, stream: b };
                  break;
                case "mp3":
                  for (var bA = [], ul, vl = null, cA = u(k2.Db()), cq = cA.next(); !cq.done; cq = cA.next()) {
                    var dq = cq.value, ri = dq.data;
                    if (ri) {
                      vl == null && dq.pts !== null && (vl = dq.pts);
                      for (var xf = 0; xf < ri.length; ) {
                        var Jg = uG(ri, xf);
                        Jg ? (ul || (ul = Jg), xf + Jg.ya <= ri.length && bA.push({
                          data: ri.subarray(xf, xf + Jg.ya),
                          size: Jg.ya,
                          duration: 1152,
                          Cb: 0,
                          flags: { Eb: 0, wb: 0, ub: 0, rb: 0, sb: 2, Fb: 0 }
                        }), xf += Jg.ya) : xf++;
                      }
                    }
                  }
                  if (!ul || vl == null) throw new U(2, 3, 3018, c ? c.T()[0] : null);
                  var dA = ul.sampleRate, DK = vl / 9e4 * dA;
                  n = { id: b.id, type: "audio", codecs: "mp3", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: dA, duration: d, Hb: [], Na: new Uint8Array([]), Ya: new Uint8Array([]), eb: 0, gb: 0, data: { sequenceNumber: this.g, baseMediaDecodeTime: DK, Gb: bA }, stream: b };
                  break;
                case "opus":
                  var eA = [], wl = null, Ed = k2.H;
                  if (!Ed) throw new U(2, 3, 3018, c ? c.T()[0] : null);
                  var kc = [];
                  switch (Ed.pk) {
                    case 1:
                    case 2:
                      kc = [0];
                      break;
                    case 0:
                      kc = [255, 1, 1, 0, 1];
                      break;
                    case 128:
                      kc = [255, 2, 0, 0, 1];
                      break;
                    case 3:
                      kc = [1, 2, 1, 0, 2, 1];
                      break;
                    case 4:
                      kc = [1, 2, 2, 0, 1, 2, 3];
                      break;
                    case 5:
                      kc = [1, 3, 2, 0, 4, 1, 2, 3];
                      break;
                    case 6:
                      kc = [1, 4, 2, 0, 4, 1, 2, 3, 5];
                      break;
                    case 7:
                      kc = [1, 4, 2, 0, 4, 1, 2, 3, 5, 6];
                      break;
                    case 8:
                      kc = [1, 5, 3, 0, 6, 1, 2, 3, 4, 5, 7];
                      break;
                    case 130:
                      kc = [1, 1, 2, 0, 1];
                      break;
                    case 131:
                      kc = [1, 1, 3, 0, 1, 2];
                      break;
                    case 132:
                      kc = [1, 1, 4, 0, 1, 2, 3];
                      break;
                    case 133:
                      kc = [1, 1, 5, 0, 1, 2, 3, 4];
                      break;
                    case 134:
                      kc = [1, 1, 6, 0, 1, 2, 3, 4, 5];
                      break;
                    case 135:
                      kc = [
                        1,
                        1,
                        7,
                        0,
                        1,
                        2,
                        3,
                        4,
                        5,
                        6
                      ];
                      break;
                    case 136:
                      kc = [1, 1, 8, 0, 1, 2, 3, 4, 5, 6, 7];
                  }
                  var fA = new Uint8Array([0, Ed.channelCount, 0, 0, Ed.sampleRate >>> 24 & 255, Ed.sampleRate >>> 17 & 255, Ed.sampleRate >>> 8 & 255, Ed.sampleRate >>> 0 & 255, 0, 0].concat(x(kc)));
                  for (var gA = Ed.sampleRate, hA = u(k2.Db()), eq = hA.next(); !eq.done; eq = hA.next()) {
                    var fq = eq.value, Kg = fq.data;
                    wl == null && fq.pts !== null && (wl = fq.pts);
                    for (var si = 0; si < Kg.length; ) {
                      for (var EK = (Kg[si + 1] & 16) !== 0, FK = (Kg[si + 1] & 8) !== 0, je = si + 2, xl = 0; Kg[je] === 255; ) xl += 255, je += 1;
                      xl += Kg[je];
                      je += 1;
                      je += EK ? 2 : 0;
                      je += FK ? 2 : 0;
                      var iA = Kg.slice(je, je + xl);
                      eA.push({ data: iA, size: iA.byteLength, duration: 960, Cb: 0, flags: { Eb: 0, wb: 0, ub: 0, rb: 0, sb: 2, Fb: 0 } });
                      si = je + xl;
                    }
                  }
                  if (fA.byteLength == 0 || wl == null) throw new U(2, 3, 3018, c ? c.T()[0] : null);
                  b.audioSamplingRate = Ed.sampleRate;
                  b.channelsCount = Ed.channelCount;
                  var GK = wl / 9e4 * gA;
                  n = { id: b.id, type: "audio", codecs: "opus", encrypted: b.encrypted && b.drmInfos.length > 0, timescale: gA, duration: d, Hb: [], Na: fA, Ya: new Uint8Array([]), eb: 0, gb: 0, data: { sequenceNumber: this.g, baseMediaDecodeTime: GK, Gb: eA }, stream: b };
              }
              n && (l.push(n), n = null);
            }
          } catch (gq) {
            return gq && gq.code == 3023 ? Promise.resolve(new Uint8Array([])) : Promise.reject(gq);
          }
          if (!l.length) return Promise.reject(new U(2, 3, 3018, c ? c.T()[0] : null));
          var jA = new Ri(l), hq = b.id + "_" + c.i;
          if (this.j.has(hq)) var ti = this.j.get(hq);
          else ti = Si(jA), this.j.set(hq, ti);
          var HK = this.l !== ti, IK = mj(jA);
          this.l = ti;
          this.g++;
          return Promise.resolve({ data: IK, init: HK ? ti : null });
        };
        S("shaka.transmuxer.TsTransmuxer", HG);
        HG.prototype.transmux = HG.prototype.transmux;
        HG.prototype.getOriginalMimeType = HG.prototype.getOriginalMimeType;
        HG.prototype.convertCodecs = HG.prototype.convertCodecs;
        HG.prototype.isSupported = HG.prototype.isSupported;
        HG.prototype.destroy = HG.prototype.destroy;
        var IG = ["aac", "ac-3", "ec-3", "mp3", "opus"], JG = ["avc", "hevc"];
        We("video/mp2t", function() {
          return new HG("video/mp2t");
        }, $e);
        function KG() {
        }
        la(KG, Dn);
        S("shaka.util.FairPlayUtils", KG);
        function LG(a, b) {
          var c = this;
          this.parent = a;
          this.controls = b;
          this.eventManager = new Tc();
          this.localization = this.controls.sa;
          this.player = this.controls.Wb();
          this.video = this.controls.Vc();
          this.adManager = this.player.tf();
          this.ad = b.getAd();
          this.eventManager.o(this.adManager, "ad-started", function(d) {
            c.ad = d.ad;
          });
          this.eventManager.o(this.adManager, "ad-stopped", function() {
            c.ad = null;
          });
        }
        LG.prototype.release = function() {
          this.eventManager.release();
          this.ad = this.adManager = this.video = this.player = this.localization = this.eventManager = this.controls = this.parent = null;
        };
        S("shaka.ui.Element", LG);
        LG.prototype.release = LG.prototype.release;
        function MG(a, b) {
          this.parent = a;
          this.g = Kj("svg");
          this.h = Kj("path");
          this.g.classList.add("material-svg-icon");
          this.g.setAttribute("viewBox", "0 -960 960 960");
          b && this.use(b);
          this.g.appendChild(this.h);
          this.parent && a.appendChild(this.g);
        }
        MG.prototype.use = function(a) {
          a && typeof a == "string" && this.h.setAttribute("d", a);
        };
        MG.prototype.kl = function() {
          return this.g;
        };
        S("shaka.ui.MaterialSVGIcon", MG);
        MG.prototype.getSvgElement = MG.prototype.kl;
        MG.prototype.use = MG.prototype.use;
        function NG(a) {
          return OG(a, "shaka-back-to-overflow-button");
        }
        function OG(a, b) {
          a = a.getElementsByClassName(b);
          return a.length ? a[0] : null;
        }
        function PG(a) {
          a && (a = OG(a, "shaka-chosen-item")) && a.parentElement.focus();
        }
        function QG() {
          var a = new MG(null, "m382-354 339-339q12-12 28-12t28 12q12 12 12 28.5T777-636L410-268q-12 12-28 12t-28-12L182-440q-12-12-11.5-28.5T183-497q12-12 28.5-12t28.5 12l142 143Z").g;
          a.classList.add("shaka-chosen-item");
          a.ariaHidden = "true";
          return a;
        }
        function RG(a, b) {
          a && (b ? a.classList.remove("shaka-hidden") : a.classList.add("shaka-hidden"));
        }
        function SG(a, b) {
          var c = Math.floor(a / 86400), d = Math.floor(a % 86400 / 3600), e = Math.floor(a / 60 % 60);
          a = Math.floor(a % 60);
          a < 10 && (a = "0" + a);
          a = e + ":" + a;
          b && (e < 10 && (a = "0" + a), a = d + ":" + a, c > 0 && (d < 10 && (a = "0" + a), a = c + ":" + a));
          return a;
        }
        ;
        function TG(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.g = Lj();
          this.g.classList.add("shaka-ad-info");
          this.g.disabled = true;
          this.parent.appendChild(this.g);
          this.h = new Bf(function() {
            if (c.ad.isLinear()) {
              var d = "", e = c.ad.getSequenceLength();
              e > 1 && (d = c.ad.getPositionInSequence(), d = c.localization.resolve("AD_PROGRESS").replace("[AD_ON]", String(d)).replace("[NUM_ADS]", String(e)));
              var f = Math.round(c.ad.getRemainingTime()), g = c.ad.getDuration();
              f == -1 || g == -1 ? (c.g.textContent = d, RG(c.g, d != "")) : f > 0 ? (f = SG(g - f, false) + " / " + SG(
                g,
                false
              ), d = e > 1 ? d + ("" + f) : c.localization.resolve("AD_TIME").replace("[AD_TIME]", f), c.g.textContent = d, RG(c.g, d != "")) : (c.h.stop(), c.g.textContent = "");
            }
          });
          this.eventManager.o(this.localization, "locale-updated", function() {
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
          });
          this.eventManager.o(this.adManager, "ad-started", function() {
            c.h.La();
            c.h.wa(0.5);
          });
          this.eventManager.o(this.adManager, "ad-stopped", function() {
            c.h.stop();
            c.g.textContent = "";
          });
          this.ad && (this.h.La(), this.h.wa(0.5));
        }
        la(TG, LG);
        TG.prototype.release = function() {
          this.h.stop();
          this.h = null;
          LG.prototype.release.call(this);
        };
        S("shaka.ui.AdInfo", TG);
        function UG(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.j = this.controls.g;
          this.h = this.controls.i;
          this.i = [];
          this.g = V("div");
          this.g.classList.add("shaka-no-propagation");
          this.g.classList.add("shaka-context-menu");
          this.g.classList.add("shaka-hidden");
          this.h.appendChild(this.g);
          this.eventManager.o(this.h, "contextmenu", function(d) {
            if (c.g.classList.contains("shaka-hidden")) {
              d.preventDefault();
              var e = c.h.getBoundingClientRect();
              c.g.style.left = d.clientX - e.left + "px";
              c.g.style.top = d.clientY - e.top + "px";
              RG(c.g, true);
            } else RG(
              c.g,
              false
            );
          });
          this.eventManager.o(window2, "click", function() {
            RG(c.g, false);
          });
          this.eventManager.o(this.g, "click", function() {
            RG(c.g, false);
          });
          VG(this);
        }
        la(UG, LG);
        UG.prototype.release = function() {
          this.h = null;
          for (var a = u(this.i), b = a.next(); !b.done; b = a.next()) b.value.release();
          this.i = [];
          LG.prototype.release.call(this);
        };
        UG.prototype.Oi = function() {
          RG(this.g, false);
        };
        function WG(a, b) {
          XG.set(a, b);
        }
        function VG(a) {
          for (var b = u(a.j.contextMenuElements), c = b.next(); !c.done; c = b.next()) {
            c = c.value;
            var d = XG.get(c);
            d ? a.i.push(d.create(a.g, a.controls)) : ab("Unrecognized context menu element:", c);
          }
        }
        S("shaka.ui.ContextMenu", UG);
        UG.registerElement = WG;
        UG.prototype.closeMenu = UG.prototype.Oi;
        var XG = /* @__PURE__ */ new Map();
        function YG(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.button = Lj();
          this.parent.appendChild(this.button);
          this.h = new MG(this.button);
          this.eventManager.o(this.localization, "locale-updated", function() {
            ZG(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            ZG(c);
          });
          this.eventManager.o(this.video, "play", function() {
            ZG(c);
            c.g();
          });
          this.eventManager.o(this.video, "pause", function() {
            ZG(c);
            c.g();
          });
          this.eventManager.o(this.video, "seeking", function() {
            ZG(c);
            c.g();
          });
          this.eventManager.o(
            this.player,
            "loaded",
            function() {
              ZG(c);
              c.g();
            }
          );
          this.eventManager.o(this.adManager, "ad-paused", function() {
            ZG(c);
            c.g();
          });
          this.eventManager.o(this.adManager, "ad-resumed", function() {
            ZG(c);
            c.g();
          });
          this.eventManager.o(this.adManager, "ad-started", function() {
            ZG(c);
            c.g();
          });
          this.eventManager.o(this.adManager, "ad-stopped", function() {
            ZG(c);
            c.g();
          });
          this.eventManager.o(this.button, "click", function() {
            c.controls.Ca() && $G(c.controls);
          });
          ZG(this);
          this.g();
        }
        la(YG, LG);
        YG.prototype.isPaused = function() {
          if (this.ad && this.ad.isLinear()) var a = this.ad.isPaused();
          else a = this.controls, a = a.C.paused && !a.S;
          return a;
        };
        YG.prototype.isEnded = function() {
          return this.ad && this.ad.isLinear() ? false : this.player ? this.player.isEnded() : true;
        };
        function ZG(a) {
          if (a.isEnded() && a.video.duration) a.button.ariaLabel = a.localization.resolve("REPLAY");
          else {
            var b = a.isPaused() ? "PLAY" : "PAUSE";
            a.button.ariaLabel = a.localization.resolve(b);
          }
        }
        YG.prototype.g = function() {
          this.isEnded() && this.video.duration ? this.h.use("M480-80q-75 0-140.5-28.5t-114-77q-48.5-48.5-77-114T120-440q0-17 11.5-28.5T160-480q17 0 28.5 11.5T200-440q0 117 81.5 198.5T480-160q117 0 198.5-81.5T760-440q0-117-81.5-198.5T480-720h-6l34 34q12 12 11.5 28T508-630q-12 12-28.5 12.5T451-629L348-732q-12-12-12-28t12-28l103-103q12-12 28.5-11.5T508-890q11 12 11.5 28T508-834l-34 34h6q75 0 140.5 28.5t114 77q48.5 48.5 77 114T840-440q0 75-28.5 140.5t-77 114q-48.5 48.5-114 77T480-80Z") : this.h.use(this.isPaused() ? "M320-273v-414q0-17 12-28.5t28-11.5q5 0 10.5 1.5T381-721l326 207q9 6 13.5 15t4.5 19q0 10-4.5 19T707-446L381-239q-5 3-10.5 4.5T360-233q-16 0-28-11.5T320-273Z" : "M640-200q-33 0-56.5-23.5T560-280v-400q0-33 23.5-56.5T640-760q33 0 56.5 23.5T720-680v400q0 33-23.5 56.5T640-200Zm-320 0q-33 0-56.5-23.5T240-280v-400q0-33 23.5-56.5T320-760q33 0 56.5 23.5T400-680v400q0 33-23.5 56.5T320-200Z");
        };
        S("shaka.ui.PlayButton", YG);
        function aH(a, b) {
          YG.call(this, a, b);
          this.button.classList.add("shaka-play-button");
          this.button.classList.add("shaka-no-propagation");
        }
        la(aH, YG);
        aH.prototype.g = function() {
          this.isEnded() ? this.button.setAttribute("icon", "replay") : this.isPaused() ? this.button.setAttribute("icon", "play") : this.button.setAttribute("icon", "pause");
        };
        S("shaka.ui.BigPlayButton", aH);
        function bH(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.m = null;
          this.i = this.D = false;
          this.C = this.A = null;
          this.j = new Bf(function() {
            parseInt(c.h.textContent, 10) === 0 && cH(c.controls, true);
            var d = parseInt(c.h.textContent, 10);
            d !== 0 && (c.video.currentTime = c.controls.ph() + d);
            c.g.style.opacity = "0";
            c.D = false;
            c.h.textContent = "0s";
          });
          this.g = V("div");
          this.g.classList.add("shaka-no-propagation");
          this.parent.appendChild(this.g);
          this.h = V("span");
          this.h.textContent = "0s";
          this.g.appendChild(this.h);
          this.u = new MG(this.g);
          this.u.g.classList.add("shaka-forward-rewind-container-icon");
          this.l = false;
          this.eventManager.o(this.g, "touchstart", function(d) {
            d.touches.length > 0 && (c.A = d.touches[0].clientX, c.C = d.touches[0].clientY);
            c.i = false;
          });
          this.eventManager.o(this.g, "touchmove", function(d) {
            if (d.touches.length > 0 && c.A != null && c.C != null) {
              var e = d.touches[0].clientX - c.A;
              d = d.touches[0].clientY - c.C;
              Math.sqrt(e * e + d * d) > 10 && (c.i = true);
            }
          });
          this.eventManager.o(this.g, "touchend", function(d) {
            if (!c.i) {
              if (c.controls.Lc()) d.preventDefault(), c.controls.Wc();
              else if (c.controls.g.tapSeekDistance > 0) {
                if (d.preventDefault(), d = c.controls.g.tapSeekDistance, !c.D) c.D = true, c.m = Date.now(), c.j.$(0.5);
                else if (c.m + 500 > Date.now()) {
                  c.j.stop();
                  c.m = Date.now();
                  var e = parseInt(c.h.textContent, 10);
                  e = c.l ? e - d : e + d;
                  c.h.textContent = e.toString() + "s";
                  c.g.style.opacity = "1";
                  c.j.$(0.5);
                }
              }
            }
          });
        }
        la(bH, LG);
        S("shaka.ui.HiddenSeekButton", bH);
        function dH(a, b) {
          bH.call(this, a, b);
          this.g.classList.add("shaka-fast-forward-container");
          this.u.use("M100-315v-330q0-18 12-29t28-11q5 0 11 1t11 5l248 166q9 6 13.5 14.5T428-480q0 10-4.5 18.5T410-447L162-281q-5 4-11 5t-11 1q-16 0-28-11t-12-29Zm400 0v-330q0-18 12-29t28-11q5 0 11 1t11 5l248 166q9 6 13.5 14.5T828-480q0 10-4.5 18.5T810-447L562-281q-5 4-11 5t-11 1q-16 0-28-11t-12-29Z");
          this.l = false;
        }
        la(dH, bH);
        S("shaka.ui.HiddenFastForwardButton", dH);
        function eH(a, b) {
          bH.call(this, a, b);
          this.g.classList.add("shaka-rewind-container");
          this.u.use("M798-281 550-447q-9-6-13.5-14.5T532-480q0-10 4.5-18.5T550-513l248-166q5-4 11-5t11-1q16 0 28 11t12 29v330q0 18-12 29t-28 11q-5 0-11-1t-11-5Zm-400 0L150-447q-9-6-13.5-14.5T132-480q0-10 4.5-18.5T150-513l248-166q5-4 11-5t11-1q16 0 28 11t12 29v330q0 18-12 29t-28 11q-5 0-11-1t-11-5Z");
          this.l = true;
        }
        la(eH, bH);
        S("shaka.ui.HiddenRewindButton", eH);
        function fH(a, b, c, d) {
          LG.call(this, a, b);
          var e = this;
          this.container = V("div");
          this.container.classList.add("shaka-range-container");
          this.container.classList.add.apply(this.container.classList, x(c));
          this.i = false;
          this.bar = document.createElement("input");
          this.G = new Bf(function() {
            e.onChangeEnd();
            e.i = false;
          });
          this.bar.classList.add("shaka-range-element");
          this.bar.classList.add.apply(this.bar.classList, x(d));
          this.bar.type = "range";
          this.bar.step = "any";
          this.bar.min = "0";
          this.bar.max = "1";
          this.bar.value = "0";
          this.bar.disabled = !this.controls.Ca();
          this.container.appendChild(this.bar);
          this.parent.appendChild(this.container);
          this.L = new Bf(function() {
            e.bar.disabled = false;
          });
          this.eventManager.o(this.controls, "showingui", function() {
            e.L.$(0);
          });
          this.eventManager.o(this.controls, "hidingui", function() {
            e.L.stop();
            e.bar.disabled = true;
          });
          this.eventManager.o(this.bar, "mousedown", function(f) {
            e.bar.disabled || (e.i = true, e.onChangeStart(), f.stopPropagation());
          });
          this.eventManager.o(this.bar, "touchstart", function(f) {
            e.bar.disabled || (e.i = true, gH(e, f), e.onChangeStart(), f.stopPropagation());
          });
          this.eventManager.o(this.bar, "input", function() {
            e.onChange();
          });
          this.eventManager.o(this.bar, "touchmove", function(f) {
            e.i && (gH(e, f), e.onChange(), f.stopPropagation());
          });
          this.eventManager.o(this.bar, "touchend", function(f) {
            e.i && (e.i = false, gH(e, f), e.onChangeEnd(), f.stopPropagation());
          });
          this.eventManager.o(this.bar, "touchcancel", function(f) {
            e.i && (e.i = false, gH(e, f), e.onChangeEnd(), f.stopPropagation());
          });
          this.eventManager.o(this.bar, "mouseup", function(f) {
            e.i && (e.i = false, e.onChangeEnd(), f.stopPropagation());
          });
          this.eventManager.o(this.bar, "blur", function() {
            e.i && (e.i = false, e.onChangeEnd());
          });
          this.eventManager.o(this.bar, "contextmenu", function(f) {
            f.preventDefault();
            f.stopPropagation();
          });
        }
        la(fH, LG);
        p = fH.prototype;
        p.release = function() {
          this.G && (this.G.stop(), this.G = null);
          LG.prototype.release.call(this);
        };
        p.setRange = function(a, b) {
          this.bar.min = a;
          this.bar.max = b;
        };
        p.onChangeStart = function() {
        };
        p.onChange = function() {
        };
        p.onChangeEnd = function() {
        };
        p.changeTo = function(a) {
          this.i || (this.i = true, this.onChangeStart());
          var b = parseFloat(this.bar.min), c = parseFloat(this.bar.max);
          this.bar.value = a > c ? c : a < b ? b : a;
          this.onChange();
          this.G.$(0.5);
        };
        p.getValue = function() {
          return parseFloat(this.bar.value);
        };
        p.setValue = function(a) {
          this.i || (this.bar.value = a);
        };
        function hH(a, b) {
          var c = a.bar.getBoundingClientRect(), d = parseFloat(a.bar.min), e = parseFloat(a.bar.max);
          a = parseFloat(a.bar.step) || 1;
          var f = c.left + 6;
          c = c.right - 6;
          b = d + (Math.max(f, Math.min(c, b)) - f) / (c - f) * (e - d);
          b = Math.round((b - d) / a) * a + d;
          return b = Math.min(e, Math.max(d, b));
        }
        function gH(a, b) {
          b.preventDefault();
          a.bar.value = hH(a, b.changedTouches[0].clientX);
        }
        S("shaka.ui.RangeElement", fH);
        fH.prototype.setValue = fH.prototype.setValue;
        fH.prototype.getValue = fH.prototype.getValue;
        fH.prototype.changeTo = fH.prototype.changeTo;
        fH.prototype.onChangeEnd = fH.prototype.onChangeEnd;
        fH.prototype.onChange = fH.prototype.onChange;
        fH.prototype.onChangeStart = fH.prototype.onChangeStart;
        fH.prototype.setRange = fH.prototype.setRange;
        function iH(a, b) {
          fH.call(this, a, b, ["shaka-seek-bar-container"], ["shaka-seek-bar", "shaka-no-propagation", "shaka-show-controls-on-mouse-over"]);
          var c = this;
          this.F = V("div");
          this.F.classList.add("shaka-ad-markers");
          this.container.insertBefore(this.F, this.container.childNodes[0]);
          this.I = this.controls.g;
          this.C = new Bf(function() {
            var d = c.getValue();
            c.player.U() || d == c.video.duration && (d -= 1e-3);
            c.video.currentTime = d;
          });
          this.D = new Bf(function() {
            jH(c);
          });
          this.M = false;
          this.h = V("div");
          this.h.id = "shaka-player-ui-thumbnail-container";
          this.g = V("img");
          this.g.id = "shaka-player-ui-thumbnail-image";
          this.g.draggable = false;
          this.K = V("div");
          this.K.id = "shaka-player-ui-thumbnail-time-container";
          this.H = V("div");
          this.H.id = "shaka-player-ui-thumbnail-time";
          this.K.appendChild(this.H);
          this.h.appendChild(this.g);
          this.h.appendChild(this.K);
          this.container.appendChild(this.h);
          this.j = V("div");
          this.j.id = "shaka-player-ui-time-container";
          this.container.appendChild(this.j);
          this.l = this.u = null;
          this.J = false;
          this.A = new Bf(function() {
            kH(c);
          });
          this.m = [];
          this.eventManager.o(
            this.bar,
            "input",
            function() {
              c.controls.Wc();
            }
          );
          this.eventManager.o(this.localization, "locale-updated", function() {
            return lH(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            return lH(c);
          });
          this.eventManager.o(this.adManager, "ad-started", function() {
            mH(c) || RG(c.container, false);
          });
          this.eventManager.o(this.adManager, "ad-stopped", function() {
            mH(c) && RG(c.container, true);
          });
          this.eventManager.o(this.adManager, "ad-cue-points-changed", function(d) {
            c.m = d.cuepoints;
            nH(c);
          });
          this.eventManager.o(
            this.player,
            "unloading",
            function() {
              c.m = [];
              nH(c);
              c.l && (c.l.abort(), c.l = null);
              c.u = null;
              kH(c);
              oH(c);
            }
          );
          this.eventManager.o(this.bar, "mousemove", function(d) {
            if (c.controls.Lc()) oH(c), kH(c);
            else {
              var e = hH(c, d.clientX), f = c.bar.getBoundingClientRect();
              d = Math.max(0, d.clientX - f.left);
              c.player.qh().length ? (oH(c), pH(c, d, e)) : (kH(c), qH(c, d, e));
            }
          });
          this.eventManager.o(this.container, "mouseleave", function() {
            oH(c);
            c.A.stop();
            c.A.$(0.25);
          });
          this.setValue(this.video.currentTime);
          this.update();
          lH(this);
          this.ad && RG(this.container, false);
        }
        la(iH, fH);
        p = iH.prototype;
        p.release = function() {
          this.C && (this.C.stop(), this.C = null, this.D.stop(), this.D = null);
          fH.prototype.release.call(this);
        };
        p.onChangeStart = function() {
          this.M = !this.video.paused;
          this.controls.ii(true);
          this.video.pause();
          this.A.stop();
          this.J = true;
        };
        p.onChange = function() {
          if (this.video.duration) if (this.update(), this.C.$(0.125), this.player.qh().length && !this.controls.Lc()) {
            var a = parseFloat(this.bar.min), b = parseFloat(this.bar.max), c = this.bar.getBoundingClientRect(), d = Math.round(this.getValue());
            pH(this, (d - a) / ((b - a) / c.width), d);
          } else kH(this);
        };
        p.onChangeEnd = function() {
          this.C.La();
          this.controls.ii(false);
          this.M && this.video.play();
          this.J && (this.J = false, this.A.stop(), this.A.$(0.25));
        };
        p.isShowing = function() {
          return !this.container.classList.contains("shaka-hidden");
        };
        p.update = function() {
          var a = this.I.seekBarColors, b = this.getValue(), c = this.video.buffered.length, d = c ? this.video.buffered.start(0) : 0, e = c ? this.video.buffered.end(c - 1) : 0;
          c = this.player.za();
          var f = c.end - c.start;
          this.setRange(c.start, c.end);
          mH(this) ? (RG(this.container, true), d = (Math.max(d, c.start) - c.start) / f || 0, e = (Math.min(e, c.end) - c.start) / f || 0, b = (Math.min(Math.max(b, c.start), c.end) - c.start) / f || 0, this.container.style.background = "linear-gradient(" + ["to right", (this.I.showUnbufferedStart ? a.base : a.played) + " " + d * 100 + "%", a.played + " " + d * 100 + "%", a.played + " " + b * 100 + "%", a.buffered + " " + b * 100 + "%", a.buffered + " " + e * 100 + "%", a.base + " " + e * 100 + "%"].join() + ")") : RG(this.container, false);
        };
        function jH(a) {
          if (a.m.length) {
            for (var b = a.player.za(), c = b.end - b.start, d = ["to right"], e = [], f = a.I.seekBarColors.adBreaks, g = false, h = u(a.m), k2 = h.next(); !k2.done; k2 = h.next()) if (k2 = k2.value, k2.start == -1 && !k2.end) g = true;
            else if (!k2.end && k2.start >= b.start || typeof k2.end == "number" && k2.end > b.start) {
              var l = (Math.max(k2.start, b.start) - b.start) / c || 0, m = l + 0.01;
              k2.end && (m = (k2.end - b.start) / c || 0);
              e.push({ start: l, end: m });
            }
            e = e.sort(function(n, q) {
              return n.start - q.start;
            });
            b = u(e);
            for (c = b.next(); !c.done; c = b.next()) c = c.value, d.push("transparent " + c.start * 100 + "%"), d.push(f + " " + c.start * 100 + "%"), d.push(f + " " + c.end * 100 + "%"), d.push("transparent " + c.end * 100 + "%");
            g && (d.push("transparent 99%"), d.push(f + " 99%"));
            a.F.style.background = "linear-gradient(" + d.join(",") + ")";
          } else a.F.style.background = "transparent", a.D.stop();
        }
        function nH(a) {
          function b() {
            jH(a);
            var c = a.player.za();
            c = c.end - c.start;
            a.player.U() && c > 5 && a.D.wa(0.25);
          }
          a.player.aa ? b() : a.eventManager.ua(a.player, "loaded", b);
        }
        function mH(a) {
          var b = a.player.za();
          b = b.end - b.start;
          return a.player.U() && (b < 5 || !isFinite(b)) ? false : a.ad == null || !a.ad.isLinear();
        }
        function lH(a) {
          a.bar.ariaLabel = a.localization.resolve("SEEK");
        }
        function qH(a, b, c) {
          var d = a.j.clientWidth;
          a.j.style.width = "auto";
          a.j.style.height = "20px";
          a.j.style.top = "-30px";
          a.j.style.left = Math.min(a.bar.offsetWidth - d, Math.max(0, b - d / 2)) + "px";
          a.j.style.right = "";
          a.j.style.visibility = "visible";
          b = a.player.za();
          a.player.U() ? (c = b.end - c, c < 1 ? (a.j.textContent = a.localization.resolve("LIVE"), a.j.style.left = "", a.j.style.right = "0px") : a.j.textContent = "-" + SG(c, c >= 3600)) : (c -= b.start, a.j.textContent = SG(c, c >= 3600));
        }
        function pH(a, b, c) {
          var d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C;
          Q(function(E) {
            switch (E.g) {
              case 1:
                c < 0 && (c = 0);
                d = false;
                a.m.length && (d = a.m.some(function(D) {
                  return D.end ? c >= D.start && c <= D.end : false;
                }));
                if (d) return kH(a), qH(a, b, c), E.return();
                e = a.player.za();
                f = Math.max(Math.ceil(e.start), Math.min(Math.floor(e.end), c));
                a.player.U() ? (g = e.end - c, a.H.textContent = g < 1 ? a.localization.resolve("LIVE") : "-" + SG(g, g >= 3600)) : a.H.textContent = SG(c, c >= 3600);
                return F(E, a.player.$i(null, f), 2);
              case 2:
                h = E.h;
                if (!h || !h.uris || !h.uris.length) return kH(a), qH(a, b, c), E.return();
                h.width < h.height ? a.h.classList.add("portrait-thumbnail") : a.h.classList.remove("portrait-thumbnail");
                k2 = -10;
                l = a.h.clientWidth;
                m = Math.floor(l * 9 / 16);
                a.h.style.height = m + "px";
                a.h.style.top = -(m - k2) + "px";
                n = Math.min(a.bar.offsetWidth - l, Math.max(0, b - l / 2));
                a.h.style.left = n + "px";
                a.h.style.visibility = "visible";
                q = h.uris[0].split("#xywh=")[0];
                if (a.u && q === a.u.uris[0].split("#xywh=")[0] && h.startByte == a.u.startByte && h.endByte == a.u.endByte) {
                  E.B(3);
                  break;
                }
                a.u = h;
                a.l && (a.l.abort(), a.l = null);
                if (h.codecs != "mjpg" && !q.startsWith("offline:")) {
                  E.B(4);
                  break;
                }
                a.g.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>';
                ra(E, 5);
                r = fh;
                t = Hm(h.uris, h.startByte, h.endByte, a.player.getConfiguration().streaming.retryParameters);
                a.l = a.player.Vb().request(r, t, { type: 1 });
                return F(E, a.l.promise, 7);
              case 7:
                w = E.h;
                a.l = null;
                h.codecs == "mjpg" ? (v = new oh().box("mdat", yh(function(D) {
                  q = URL.createObjectURL(new Blob([D], { type: "image/jpeg" }));
                })), v.parse(w.data, false)) : (z = h.mimeType || "image/jpeg", y = new Blob([w.data], { type: z }), q = URL.createObjectURL(y));
                ta(E, 4);
                break;
              case 5:
                A = ua(E);
                if (A.code == 7001) return E.return();
                throw A;
              case 4:
                try {
                  a.h.removeChild(a.g);
                } catch (D) {
                }
                a.g = V("img");
                a.g.id = "shaka-player-ui-thumbnail-image";
                a.g.draggable = false;
                a.g.src = q;
                a.g.onload = function() {
                  q.startsWith("blob:") && URL.revokeObjectURL(q);
                };
                a.h.insertBefore(a.g, a.h.firstChild);
              case 3:
                C = l / h.width, h.imageHeight ? a.g.height = h.imageHeight : h.sprite || (a.g.style.height = "100%", a.g.style.objectFit = "contain"), h.imageWidth ? a.g.width = h.imageWidth : h.sprite || (a.g.style.width = "100%", a.g.style.objectFit = "contain"), a.g.style.left = "-" + C * h.positionX + "px", a.g.style.top = "-" + C * h.positionY + "px", a.g.style.transform = "scale(" + C + ")", a.g.style.transformOrigin = "left top", m = Math.floor(l * h.height / h.width), a.h.style.height = m + "px", a.h.style.top = -(m - k2) + "px", H(E);
            }
          });
        }
        function kH(a) {
          a.h.style.visibility = "hidden";
        }
        function oH(a) {
          a.j.style.visibility = "hidden";
        }
        S("shaka.ui.SeekBar", iH);
        function rH() {
        }
        rH.prototype.create = function(a, b) {
          return new iH(a, b);
        };
        iH.Factory = rH;
        function sH(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.j = V("div");
          this.j.classList.add("shaka-skip-ad-container");
          this.parent.appendChild(this.j);
          this.h = V("div");
          this.h.classList.add("shaka-skip-ad-counter");
          RG(this.h, false);
          this.j.appendChild(this.h);
          this.g = Lj();
          this.g.classList.add("shaka-skip-ad-button");
          this.g.disabled = true;
          RG(this.g, false);
          this.g.classList.add("shaka-no-propagation");
          this.j.appendChild(this.g);
          tH(this);
          this.i = new Bf(function() {
            if (c.ad.isSkippable()) {
              var d = Math.round(c.ad.getTimeUntilSkippable());
              d > 0 ? c.h.textContent = d : (c.i.stop(), RG(c.h, false));
            } else uH(c);
          });
          this.eventManager.o(this.localization, "locale-updated", function() {
            tH(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            tH(c);
          });
          this.eventManager.o(this.adManager, "ad-started", function() {
            vH(c);
          });
          this.eventManager.o(this.adManager, "ad-skip-state-changed", function() {
            c.ad.isSkippable() ? c.ad.canSkipNow() && (c.g.disabled = false, c.i.stop(), RG(c.h, false)) : uH(c);
          });
          this.eventManager.o(this.adManager, "ad-stopped", function() {
            uH(c);
          });
          this.eventManager.o(
            this.g,
            "click",
            function() {
              c.ad.skip();
            }
          );
          this.ad && vH(this);
        }
        la(sH, LG);
        sH.prototype.release = function() {
          this.i.stop();
          this.i = null;
          LG.prototype.release.call(this);
        };
        function tH(a) {
          a.g.textContent = a.localization.resolve("SKIP_AD");
        }
        function vH(a) {
          a.ad.isSkippable() && a.ad.needsSkipUI() && (RG(a.g, true), RG(a.h, true), a.h.textContent = "", a.i.La(), a.i.wa(0.5));
        }
        function uH(a) {
          a.i.stop();
          a.g.disabled = true;
          RG(a.g, false);
          RG(a.h, false);
        }
        S("shaka.ui.SkipAdButton", sH);
        function wH() {
          var a = new Float32Array(16);
          a[0] = 1;
          a[5] = 1;
          a[10] = 1;
          a[15] = 1;
          return a;
        }
        function xH(a, b, c) {
          b = 1 / Math.tan(b / 2);
          a[0] = b / c;
          a[1] = 0;
          a[2] = 0;
          a[3] = 0;
          a[4] = 0;
          a[5] = b;
          a[6] = 0;
          a[7] = 0;
          a[8] = 0;
          a[9] = 0;
          a[11] = -1;
          a[12] = 0;
          a[13] = 0;
          a[15] = 0;
          c = 1 / -99.9;
          a[10] = 100.1 * c;
          a[14] = 20 * c;
        }
        function yH(a, b, c) {
          var d = b[0], e = b[1], f = b[2], g = b[3], h = b[4], k2 = b[5], l = b[6], m = b[7], n = b[8], q = b[9], r = b[10], t = b[11], w = b[12], v = b[13], z = b[14];
          b = b[15];
          var y = c[0], A = c[1], C = c[2], E = c[3];
          a[0] = y * d + A * h + C * n + E * w;
          a[1] = y * e + A * k2 + C * q + E * v;
          a[2] = y * f + A * l + C * r + E * z;
          a[3] = y * g + A * m + C * t + E * b;
          y = c[4];
          A = c[5];
          C = c[6];
          E = c[7];
          a[4] = y * d + A * h + C * n + E * w;
          a[5] = y * e + A * k2 + C * q + E * v;
          a[6] = y * f + A * l + C * r + E * z;
          a[7] = y * g + A * m + C * t + E * b;
          y = c[8];
          A = c[9];
          C = c[10];
          E = c[11];
          a[8] = y * d + A * h + C * n + E * w;
          a[9] = y * e + A * k2 + C * q + E * v;
          a[10] = y * f + A * l + C * r + E * z;
          a[11] = y * g + A * m + C * t + E * b;
          y = c[12];
          A = c[13];
          C = c[14];
          E = c[15];
          a[12] = y * d + A * h + C * n + E * w;
          a[13] = y * e + A * k2 + C * q + E * v;
          a[14] = y * f + A * l + C * r + E * z;
          a[15] = y * g + A * m + C * t + E * b;
        }
        function zH(a, b) {
          var c = new Float32Array(3), d = b[0], e = b[1], f = b[2], g = b[4], h = b[5], k2 = b[6], l = b[8], m = b[9], n = b[10];
          c[0] = Math.sqrt(d * d + e * e + f * f);
          c[1] = Math.sqrt(g * g + h * h + k2 * k2);
          c[2] = Math.sqrt(l * l + m * m + n * n);
          k2 = 1 / c[0];
          l = 1 / c[1];
          m = 1 / c[2];
          g = b[0] * k2;
          c = b[1] * l;
          d = b[2] * m;
          e = b[4] * k2;
          h = b[5] * l;
          f = b[6] * m;
          k2 *= b[8];
          l *= b[9];
          b = b[10] * m;
          m = g + h + b;
          m > 0 ? (b = Math.sqrt(m + 1) * 2, a[3] = 0.25 * b, a[0] = (f - l) / b, a[1] = (k2 - d) / b, a[2] = (c - e) / b) : g > h && g > b ? (b = Math.sqrt(1 + g - h - b) * 2, a[3] = (f - l) / b, a[0] = 0.25 * b, a[1] = (c + e) / b, a[2] = (k2 + d) / b) : h > b ? (b = Math.sqrt(1 + h - g - b) * 2, a[3] = (k2 - d) / b, a[0] = (c + e) / b, a[1] = 0.25 * b, a[2] = (f + l) / b) : (b = Math.sqrt(1 + b - g - h) * 2, a[3] = (c - e) / b, a[0] = (k2 + d) / b, a[1] = (f + l) / b, a[2] = 0.25 * b);
        }
        function AH(a, b) {
          var c = b[0], d = b[1], e = b[2];
          b = b[3];
          var f = c + c, g = d + d, h = e + e;
          c *= f;
          var k2 = d * f;
          d *= g;
          var l = e * f, m = e * g;
          e *= h;
          f *= b;
          g *= b;
          b *= h;
          a[0] = 1 - d - e;
          a[1] = k2 + b;
          a[2] = l - g;
          a[3] = 0;
          a[4] = k2 - b;
          a[5] = 1 - c - e;
          a[6] = m + f;
          a[7] = 0;
          a[8] = l + g;
          a[9] = m - f;
          a[10] = 1 - c - d;
          a[11] = 0;
          a[12] = 0;
          a[13] = 0;
          a[14] = 0;
          a[15] = 1;
        }
        ;
        function BH() {
          var a = new Float32Array(4);
          a[3] = 1;
          return a;
        }
        function CH(a, b) {
          var c = b[0], d = b[1], e = b[2];
          b = b[3];
          var f = c * c + d * d + e * e + b * b;
          f > 0 && (f = 1 / Math.sqrt(f));
          a[0] = c * f;
          a[1] = d * f;
          a[2] = e * f;
          a[3] = b * f;
        }
        ;
        function DH(a) {
          var b = [], c = [], d = [], e = Math.PI;
          a = (a === void 0 ? 0 : a) ? e / 2 : e;
          for (var f = 0; f <= 100; f++) {
            var g = f * e / 100, h = Math.sin(g);
            g = Math.cos(g);
            for (var k2 = 0; k2 <= 100; k2++) {
              var l = k2 * 2 * a / 100;
              b.push(Math.sin(l) * h, g, Math.cos(l) * h);
              c.push(k2 / 100, f / 100);
            }
          }
          for (e = 0; e < 100; e++) for (a = 0; a < 100; a++) f = e * 101 + a, h = f + 100 + 1, d.push(f, h, f + 1), d.push(h, h + 1, f + 1);
          return { ek: b, $j: c, indices: d };
        }
        ;
        function EH(a, b, c, d, e) {
          this.i = a;
          this.ra = b;
          this.u = c;
          this.g = d;
          this.A = new Tc();
          this.M = BH();
          this.h = BH();
          this.ea = this.oa = this.aa = this.l = null;
          this.F = wH();
          this.J = wH();
          this.O = wH();
          this.X = wH();
          this.D = null;
          this.P = false;
          this.K = this.C = null;
          this.sa = this.xa = 0;
          this.Y = this.R = this.S = this.L = null;
          this.I = this.H = 0;
          this.j = 75;
          this.V = 0;
          this.m = e;
          this.G = -1;
          FH(this);
        }
        EH.prototype.release = function() {
          this.G != -1 && (this.i.cancelVideoFrameCallback(this.G), this.G = -1);
          this.A && (this.A.release(), this.A = null);
          this.C && (this.C.stop(), this.C = null);
          this.K && (this.K.stop(), this.K = null);
        };
        EH.prototype.$d = function() {
          (this.P = !this.P) || this.g.viewport(0, 0, this.u.width, this.u.height);
          GH(this, false);
        };
        function FH(a) {
          HH(a);
          IH(a);
          JH(a);
          KH(a);
          LH(a);
          Gl(a.i, HTMLMediaElement.HAVE_CURRENT_DATA, a.A, function() {
            a.i.readyState >= HTMLMediaElement.HAVE_ENOUGH_DATA && GH(a);
            if ("requestVideoFrameCallback" in a.i) {
              var b = function() {
                a.G != -1 && (GH(a), a.G != -1 && (a.G = a.i.requestVideoFrameCallback(b)));
              };
              a.G = a.i.requestVideoFrameCallback(b);
            } else {
              var c;
              a.A.o(a.i, "canplaythrough", function() {
                GH(a);
              });
              a.A.o(a.i, "playing", function() {
                a.C && a.C.stop();
                if (!c) {
                  var d = a.ra.Ob();
                  d = u(d);
                  for (var e = d.next(); !e.done; e = d.next()) (e = e.value.frameRate) && (!c || c < e) && (c = e);
                }
                c || (c = 60);
                GH(a);
                a.C = new Bf(function() {
                  GH(a);
                }).La().wa(1 / c);
              });
              a.A.o(a.i, "pause", function() {
                a.C && a.C.stop();
                a.C = null;
                GH(a);
              });
              a.A.o(a.i, "seeked", function() {
                GH(a);
              });
              a.A.o(document, "visibilitychange", function() {
                GH(a);
              });
            }
          });
        }
        function HH(a) {
          var b = a.F, c = [0, 0, 0], d = [1, 0, 0], e = [0, 1, 0], f = c[0], g = c[1];
          c = c[2];
          var h = e[0];
          var k2 = e[1];
          var l = e[2];
          var m = d[0];
          e = d[1];
          var n = d[2];
          if (Math.abs(f - m) < 1e-6 && Math.abs(g - e) < 1e-6 && Math.abs(c - n) < 1e-6) for (f = 0; f < 16; f++) b[f] = f % 5 == 0 ? 1 : 0;
          else {
            d = f - m;
            e = g - e;
            m = c - n;
            var q = 1 / Math.sqrt(d * d + e * e + m * m);
            d *= q;
            e *= q;
            m *= q;
            n = k2 * m - l * e;
            l = l * d - h * m;
            h = h * e - k2 * d;
            (q = Math.sqrt(n * n + l * l + h * h)) ? (q = 1 / q, n *= q, l *= q, h *= q) : h = l = n = 0;
            k2 = e * h - m * l;
            var r = m * n - d * h;
            var t = d * l - e * n;
            (q = Math.sqrt(k2 * k2 + r * r + t * t)) ? (q = 1 / q, k2 *= q, r *= q, t *= q) : t = r = k2 = 0;
            b[0] = n;
            b[1] = k2;
            b[2] = d;
            b[3] = 0;
            b[4] = l;
            b[5] = r;
            b[6] = e;
            b[7] = 0;
            b[8] = h;
            b[9] = t;
            b[10] = m;
            b[11] = 0;
            b[12] = -(n * f + l * g + h * c);
            b[13] = -(k2 * f + r * g + t * c);
            b[14] = -(d * f + e * g + m * c);
            b[15] = 1;
          }
          zH(a.M, a.F);
          a = b = a.X;
          c = [4, 4, 4];
          f = c[0];
          g = c[1];
          c = c[2];
          b[0] = a[0] * f;
          b[1] = a[1] * f;
          b[2] = a[2] * f;
          b[3] = a[3] * f;
          b[4] = a[4] * g;
          b[5] = a[5] * g;
          b[6] = a[6] * g;
          b[7] = a[7] * g;
          b[8] = a[8] * c;
          b[9] = a[9] * c;
          b[10] = a[10] * c;
          b[11] = a[11] * c;
          b[12] = a[12];
          b[13] = a[13];
          b[14] = a[14];
          b[15] = a[15];
        }
        function IH(a) {
          MH(a);
          a.g.viewport(0, 0, a.g.drawingBufferWidth, a.g.drawingBufferHeight);
          a.g.clearColor(0, 0, 0, 1);
          a.g.enable(a.g.CULL_FACE);
          a.g.cullFace(a.g.FRONT);
          a.g.clear(a.g.COLOR_BUFFER_BIT);
        }
        function JH(a) {
          var b = NH(a, a.g.VERTEX_SHADER), c = NH(a, a.g.FRAGMENT_SHADER);
          a.l = a.g.createProgram();
          a.g.attachShader(a.l, b);
          a.g.attachShader(a.l, c);
          a.g.linkProgram(a.l);
          a.m == "cubemap" ? (a.S = a.g.getAttribLocation(a.l, "aVertexPosition"), a.R = a.g.getAttribLocation(a.l, "aTextureCoord")) : (a.S = a.g.getAttribLocation(a.l, "a_vPosition"), a.g.enableVertexAttribArray(a.S), a.R = a.g.getAttribLocation(a.l, "a_TexCoordinate"), a.g.enableVertexAttribArray(a.R));
        }
        function NH(a, b) {
          switch (b) {
            case a.g.VERTEX_SHADER:
              var c = a.m == "cubemap" ? "attribute vec4 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvarying highp vec2 vTextureCoord;\nvarying highp vec3 vLighting;\nvoid main(void) {\n  gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n  vTextureCoord = aTextureCoord;\n}" : "attribute vec4 a_vPosition;\n// Per-vertex texture coordinate info\nattribute vec2 a_TexCoordinate;\nuniform mat4 u_VPMatrix;\n// Passed into the fragment shader.\nvarying vec2 v_TexCoordinate;\nvarying vec3 pass_position;\nvoid main()\n{\n gl_Position = u_VPMatrix * a_vPosition;\n // Pass through texture coord\n v_TexCoordinate = a_TexCoordinate;\n pass_position = a_vPosition.xyz;\n}";
              break;
            case a.g.FRAGMENT_SHADER:
              c = a.m == "cubemap" ? "varying highp vec2 vTextureCoord;\nuniform sampler2D uSampler;\nvoid main(void) {\n  highp vec4 texelColor = texture2D(uSampler, vTextureCoord);\n  gl_FragColor = vec4(texelColor.rgb , texelColor.a);\n}" : "precision highp float;\n#define PI 3.141592653589793238462643383279\nvarying vec2 v_TexCoordinate;\nvarying vec3 pass_position;\nuniform sampler2D uSampler;\nvoid main(void) {\nhighp float xValue =\n      (PI + atan(pass_position.z, pass_position.x)) / (2.0 * PI);\n vec2 tc = vec2(xValue, v_TexCoordinate.t);\n tc = vec2(tc.x , tc.y);\nhighp vec4 texelColor =\n      texture2D(uSampler, tc);\n  gl_FragColor = vec4(texelColor.rgb, texelColor.a);\n}";
              break;
            default:
              return null;
          }
          b = a.g.createShader(b);
          a.g.shaderSource(b, c);
          a.g.compileShader(b);
          return b;
        }
        function KH(a) {
          a.L = a.m == "cubemap" ? { ek: [-1, -1, -1, -1, -1, 1, -1, 1, 1, -1, 1, -1, -1, 1, -1, -1, 1, 1, 1, 1, 1, 1, 1, -1, -1, -1, 1, 1, -1, 1, 1, 1, 1, -1, 1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, 1, -1, 1, -1, -1, -1, 1, -1, -1, 1, -1, 1, -1, -1, 1, -1, -1, -1, -1, 1, -1, 1, 1, -1, 1, -1, -1], $j: [2 / 3, 0.5, 1 / 3, 0.5, 1 / 3, 0, 2 / 3, 0, 2 / 3, 0.5, 2 / 3, 0, 1, 0, 1, 0.5, 1, 1, 2 / 3, 1, 2 / 3, 0.5, 1, 0.5, 0, 0.5, 0, 0, 1 / 3, 0, 1 / 3, 0.5, 0, 0.5, 1 / 3, 0.5, 1 / 3, 1, 0, 1, 1 / 3, 1, 1 / 3, 0.5, 2 / 3, 0.5, 2 / 3, 1], indices: [0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11, 12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23] } : a.m == "halfequirectangular" ? DH(true) : DH();
          a.aa = a.g.createBuffer();
          a.g.bindBuffer(a.g.ARRAY_BUFFER, a.aa);
          a.g.bufferData(a.g.ARRAY_BUFFER, new Float32Array(a.L.ek), a.g.STATIC_DRAW);
          a.oa = a.g.createBuffer();
          a.g.bindBuffer(a.g.ARRAY_BUFFER, a.oa);
          a.g.bufferData(a.g.ARRAY_BUFFER, new Float32Array(a.L.$j), a.g.STATIC_DRAW);
          a.ea = a.g.createBuffer();
          a.g.bindBuffer(a.g.ELEMENT_ARRAY_BUFFER, a.ea);
          a.g.bufferData(a.g.ELEMENT_ARRAY_BUFFER, new Uint16Array(a.L.indices), a.g.STATIC_DRAW);
        }
        function LH(a) {
          a.Y = a.g.createTexture();
          a.g.bindTexture(a.g.TEXTURE_2D, a.Y);
          a.g.texParameteri(a.g.TEXTURE_2D, a.g.TEXTURE_WRAP_S, a.g.CLAMP_TO_EDGE);
          a.g.texParameteri(a.g.TEXTURE_2D, a.g.TEXTURE_WRAP_T, a.g.CLAMP_TO_EDGE);
          a.g.texParameteri(a.g.TEXTURE_2D, a.g.TEXTURE_MIN_FILTER, a.g.NEAREST);
          a.g.texParameteri(a.g.TEXTURE_2D, a.g.TEXTURE_MAG_FILTER, a.g.NEAREST);
        }
        function GH(a, b) {
          b = b === void 0 ? true : b;
          var c = a.ra.l == vr;
          if (!(!a.i || a.i.readyState < 2 || !c && a.i.playbackRate == 0)) {
            xH(a.J, a.j * Math.PI / 180, 1.5625);
            a.m == "cubemap" ? xH(a.J, a.j * Math.PI / 180, 2.5) : xH(a.J, a.j * Math.PI / 180, 1.5625);
            a.g.useProgram(a.l);
            a.g.clear(a.g.COLOR_BUFFER_BIT);
            MH(a);
            b && (a.g.activeTexture(a.g.TEXTURE0), a.g.bindTexture(a.g.TEXTURE_2D, a.Y), a.g.pixelStorei(a.g.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0), a.g.texImage2D(a.g.TEXTURE_2D, 0, a.g.RGBA, a.g.RGBA, a.g.UNSIGNED_BYTE, a.i));
            if (a.m == "equirectangular" || a.m == "halfequirectangular") yH(a.O, a.F, a.X), yH(a.O, a.J, a.O);
            a.g.bindBuffer(a.g.ARRAY_BUFFER, a.aa);
            a.g.vertexAttribPointer(a.S, 3, a.g.FLOAT, false, 0, 0);
            a.g.enableVertexAttribArray(a.S);
            a.g.bindBuffer(a.g.ARRAY_BUFFER, a.oa);
            a.g.vertexAttribPointer(a.R, 2, a.g.FLOAT, false, 0, 0);
            a.g.enableVertexAttribArray(a.R);
            a.g.bindBuffer(a.g.ELEMENT_ARRAY_BUFFER, a.ea);
            a.m == "cubemap" ? (a.g.uniformMatrix4fv(a.g.getUniformLocation(a.l, "uProjectionMatrix"), false, a.J), a.g.uniformMatrix4fv(
              a.g.getUniformLocation(a.l, "uModelViewMatrix"),
              false,
              a.O
            )) : a.g.uniformMatrix4fv(a.g.getUniformLocation(a.l, "u_VPMatrix"), false, a.O);
            a.g.uniform1i(a.g.getUniformLocation(a.l, "uSampler"), 0);
            a.P && a.g.viewport(0, 0, a.u.width / 2, a.u.height);
            a.g.drawElements(a.g.TRIANGLES, a.L.indices.length, a.g.UNSIGNED_SHORT, 0);
            a.P && (a.g.viewport(a.u.width / 2, 0, a.u.width / 2, a.u.height), a.g.drawElements(a.g.TRIANGLES, a.L.indices.length, a.g.UNSIGNED_SHORT, 0));
          }
        }
        function MH(a) {
          var b = a.i.videoWidth;
          b || (b = a.u.scrollWidth);
          var c = a.i.videoHeight;
          c || (c = a.u.scrollHeight);
          if (a.xa !== b || a.sa !== c) {
            a.u.width = b;
            a.u.height = c;
            a.xa = b;
            a.sa = c;
            var d = b / c, e = a.J, f = -d, g = 1 / (d - f);
            e[0] = 0 * g;
            e[1] = 0;
            e[2] = 0;
            e[3] = 0;
            e[4] = 0;
            e[5] = 0;
            e[6] = 0;
            e[7] = 0;
            e[8] = (d + f) * g;
            e[9] = 0;
            e[10] = -1;
            e[11] = -1;
            e[12] = 0;
            e[13] = 0;
            e[14] = -0;
            e[15] = 0;
            a.J = e;
            a.g.viewport(0, 0, b, c);
          }
        }
        function OH(a, b, c, d) {
          var e = Infinity, f = 90 * Math.PI / 180;
          a.m == "halfequirectangular" && (e = 90 * Math.PI / 180, f /= 2);
          var g = a.m == "cubemap" ? a.O : a.F;
          a.H += b;
          a.I += c;
          if (a.H < e && a.H > -e) {
            e = Math.sin(b);
            b = Math.cos(b);
            var h = g[0], k2 = g[1], l = g[2], m = g[3], n = g[8], q = g[9], r = g[10], t = g[11];
            g !== g && (g[4] = g[4], g[5] = g[5], g[6] = g[6], g[7] = g[7], g[12] = g[12], g[13] = g[13], g[14] = g[14], g[15] = g[15]);
            g[0] = h * b - n * e;
            g[1] = k2 * b - q * e;
            g[2] = l * b - r * e;
            g[3] = m * b - t * e;
            g[8] = h * e + n * b;
            g[9] = k2 * e + q * b;
            g[10] = l * e + r * b;
            g[11] = m * e + t * b;
          } else a.H -= b;
          a.I < f && a.I > -f ? (f = wH(), e = wH(), b = -1 * c, c = Math.sin(b), b = Math.cos(b), h = e[4], k2 = e[5], l = e[6], m = e[7], n = e[8], q = e[9], r = e[10], t = e[11], e !== f && (f[0] = e[0], f[1] = e[1], f[2] = e[2], f[3] = e[3], f[12] = e[12], f[13] = e[13], f[14] = e[14], f[15] = e[15]), f[4] = h * b + n * c, f[5] = k2 * b + q * c, f[6] = l * b + r * c, f[7] = m * b + t * c, f[8] = n * b - h * c, f[9] = q * b - k2 * c, f[10] = r * b - l * c, f[11] = t * b - m * c, yH(g, f, g)) : a.I -= c;
          c = wH();
          f = wH();
          e = Math.sin(d);
          d = Math.cos(d);
          b = f[0];
          h = f[1];
          k2 = f[2];
          l = f[3];
          m = f[4];
          n = f[5];
          q = f[6];
          r = f[7];
          f !== c && (c[8] = f[8], c[9] = f[9], c[10] = f[10], c[11] = f[11], c[12] = f[12], c[13] = f[13], c[14] = f[14], c[15] = f[15]);
          c[0] = b * d + m * e;
          c[1] = h * d + n * e;
          c[2] = k2 * d + q * e;
          c[3] = l * d + r * e;
          c[4] = m * d - b * e;
          c[5] = n * d - h * e;
          c[6] = q * d - k2 * e;
          c[7] = r * d - l * e;
          yH(g, c, g);
          GH(a, false);
        }
        function PH(a, b) {
          if (b === void 0 || b) zH(a.h, a.F), a.V = 0, a.D = BH(), a.D[0] = (a.h[0] - a.M[0]) / 20, a.D[1] = (a.h[1] - a.M[1]) / 20, a.D[2] = (a.h[2] - a.M[2]) / 20, a.D[3] = (a.h[3] - a.M[3]) / 20;
          a.h[0] -= a.D[0];
          a.h[1] -= a.D[1];
          a.h[2] -= a.D[2];
          a.h[3] -= a.D[3];
          b = wH();
          CH(a.h, a.h);
          AH(b, a.h);
          a.F = b;
          a.K && (a.K.stop(), a.K = null);
          a.V < 20 ? a.K = new Bf(function() {
            PH(a, false);
            a.H = 0;
            a.I = 0;
            a.V++;
            GH(a, false);
          }).$(0.025) : (AH(b, a.M), a.F = b);
        }
        ;
        function QH(a, b, c, d, e) {
          kb.call(this);
          var f = this;
          this.i = a;
          this.l = b;
          this.G = c;
          this.K = d;
          this.A = e;
          this.u = new Tc();
          this.h = new Tc();
          this.C = RH(this.l);
          this.g = null;
          this.m = false;
          this.J = this.I = this.H = this.F = this.D = 0;
          this.j = null;
          this.u.o(d, "loading", function() {
            f.g && PH(f.g);
            SH(f);
          });
          this.u.o(d, "spatialvideoinfo", function(g) {
            g = g.detail;
            switch (g.projection) {
              case "rect":
                f.j = null;
                break;
              case "equi":
                f.j = "equirectangular";
                break;
              case "hequ":
                switch (g.hfov) {
                  case 360:
                    f.j = "equirectangular";
                    break;
                  case 180:
                    f.j = "halfequirectangular";
                    break;
                  default:
                    g.hfov == null ? f.j = "halfequirectangular" : f.j = null;
                }
                break;
              case "fish":
                f.j = "halfequirectangular";
                break;
              default:
                f.j = null;
            }
            SH(f);
          });
          this.u.o(d, "nospatialvideoinfo", function() {
            f.j = null;
            SH(f);
          });
          this.u.o(d, "unloading", function() {
            f.j = null;
            SH(f);
          });
          SH(this);
        }
        la(QH, kb);
        p = QH.prototype;
        p.release = function() {
          this.u && (this.u.release(), this.u = null);
          this.h && (this.h.release(), this.h = null);
          this.g && (this.g.release(), this.g = null);
          kb.prototype.release.call(this);
        };
        p.configure = function(a) {
          this.A = a;
          SH(this);
        };
        p.Lg = function() {
          return this.l ? !!this.C : !!RH(document.createElement("canvas"));
        };
        p.Xb = function() {
          return !!this.g;
        };
        p.$d = function() {
          this.g ? this.g.$d() : ab("Not playing VR content");
        };
        p.Bh = function(a) {
          this.g ? OH(this.g, a * TH, 0, 0) : ab("Not playing VR content");
        };
        p.yh = function(a) {
          this.g ? OH(this.g, 0, a * TH, 0) : ab("Not playing VR content");
        };
        p.Ah = function(a) {
          this.g ? OH(this.g, 0, 0, a * TH) : ab("Not playing VR content");
        };
        function SH(a) {
          if (a.A.displayInVrMode || a.j) {
            a.l || (a.l = document.createElement("canvas"), a.l.classList.add("shaka-vr-canvas-container"), a.G.parentElement.insertBefore(a.l, a.G.nextElementSibling), a.C = RH(a.l));
            var b = a.j || a.A.defaultVrProjectionMode;
            a.g ? a.g.m != b && (a.h.Sa(), a.g.release(), UH(a, b)) : (a.l.style.display = "", UH(a, b), a.dispatchEvent(new T("vrstatuschanged", (/* @__PURE__ */ new Map()).set("newStatus", a.Xb()))));
          } else !a.A.displayInVrMode && !a.j && a.l && a.g && (a.l.style.display = "none", a.h.Sa(), a.g.release(), a.g = null, a.dispatchEvent(new T(
            "vrstatuschanged",
            (/* @__PURE__ */ new Map()).set("newStatus", a.Xb())
          )));
        }
        function UH(a, b) {
          a.C && a.l && (a.g = new EH(a.G, a.K, a.l, a.C, b), VH(a));
        }
        function RH(a) {
          if (!a) return null;
          var b = Rb().Ka();
          if (b == "TV" || b == "CONSOLE" || b == "CAST") return null;
          b = u(["webgl2", "webgl"]);
          for (var c = b.next(); !c.done; c = b.next()) if (c = a.getContext(c.value)) return c;
          return null;
        }
        function VH(a) {
          a.h.o(a.i, "mousedown", function(d) {
            if (!a.m) {
              var e = d.clientX;
              d = d.clientY;
              a.m = true;
              a.D = e;
              a.F = d;
            }
          });
          navigator.maxTouchPoints > 0 && a.h.o(a.i, "touchstart", function(d) {
            if (!a.m) {
              var e = d.touches[0].clientX;
              d = d.touches[0].clientY;
              a.m = true;
              a.D = e;
              a.F = d;
            }
          });
          a.h.o(a.i, "wheel", function(d) {
            if (!a.m) {
              var e = a.g, f = d.deltaY;
              f /= 50;
              e.j >= 20 && e.j <= 100 && (e.j += f);
              e.j < 20 ? e.j = 20 : e.j > 100 && (e.j = 100);
              GH(e, false);
              d.preventDefault();
              d.stopPropagation();
            }
          });
          a.h.o(a.i, "mousemove", function(d) {
            a.m && WH(a, d.clientX, d.clientY);
          });
          navigator.maxTouchPoints > 0 && a.h.o(a.i, "touchmove", function(d) {
            a.m && WH(a, d.touches[0].clientX, d.touches[0].clientY);
            d.preventDefault();
          });
          a.h.o(a.i, "mouseleave", function() {
            a.m = false;
          });
          a.h.o(a.i, "mouseup", function() {
            a.m = false;
          });
          navigator.maxTouchPoints > 0 && a.h.o(a.i, "touchend", function() {
            a.m = false;
          });
          var b = false;
          if (window2.DeviceOrientationEvent) if (typeof DeviceMotionEvent.requestPermission == "function") {
            var c = function() {
              DeviceMotionEvent.requestPermission().then(function(d) {
                d !== "granted" || b || (b = true, XH(a));
              });
            };
            DeviceMotionEvent.requestPermission().then(function(d) {
              a.h.Ea(
                a.i,
                "click",
                c
              );
              a.h.Ea(a.i, "mouseup", c);
              navigator.maxTouchPoints > 0 && a.h.Ea(a.i, "touchend", c);
              d !== "granted" ? (a.h.ua(a.i, "click", c), a.h.ua(a.i, "mouseup", c), navigator.maxTouchPoints > 0 && a.h.ua(a.i, "touchend", c)) : (b = true, XH(a));
            }).catch(function() {
              a.h.Ea(a.i, "click", c);
              a.h.Ea(a.i, "mouseup", c);
              navigator.maxTouchPoints > 0 && a.h.Ea(a.i, "touchend", c);
              a.h.ua(a.i, "click", c);
              a.h.ua(a.i, "mouseup", c);
              navigator.maxTouchPoints > 0 && a.h.ua(a.i, "touchend", c);
            });
          } else b = true, XH(a);
        }
        function XH(a) {
          a.h.o(window2, "deviceorientation", function(b) {
            if (a.g) {
              var c = (b.alpha || 0) - a.H, d = (b.beta || 0) - a.I, e = (b.gamma || 0) - a.J;
              if (Math.abs(c) > 10 || Math.abs(d) > 10 || Math.abs(e) > 5) d = e = c = 0;
              a.H = b.alpha || 0;
              a.I = b.beta || 0;
              a.J = b.gamma || 0;
              b = screen.orientation.angle;
              b == 90 || b == -90 ? OH(a.g, c * TH * -1, e * TH * -1, 0) : OH(a.g, c * TH * -1, d * TH, 0);
            }
          });
        }
        function WH(a, b, c) {
          var d = -0.6 * Math.PI / 180;
          OH(a.g, (b - a.D) * d, (c - a.F) * -1 * d, 0);
          a.D = b;
          a.F = c;
        }
        var TH = Math.PI / 180;
        function Z(a, b, c, d, e) {
          kb.call(this);
          var f = this;
          this.Y = true;
          this.g = e;
          this.F = new St(c, a, this.g.castReceiverAppId, this.g.castAndroidReceiverCompatible);
          this.ra = true;
          this.C = this.F.Vc();
          this.u = c;
          this.m = this.F.Wb();
          this.aa = a;
          this.l = b;
          this.Pb = d;
          this.oa = this.m.tf();
          this.A = this.j = null;
          this.S = false;
          this.J = [];
          this.fb = [];
          this.Oa = false;
          this.K = new Bf(function() {
            f.l.classList.add("no-cursor");
            f.Oa = false;
            YH(f);
          });
          this.ea = new Bf(function() {
            f.i.removeAttribute("shown");
            ZH(f);
            $H(f);
            f.X && f.X.Oi();
            f.O.$(f.g.closeMenusDelay);
          });
          this.O = new Bf(function() {
            for (var g = u(f.J), h = g.next(); !h.done; h = g.next()) RG(h.value, false);
            f.g.enableTooltips && f.G.classList.add("shaka-tooltips-on");
          });
          this.xa = new Bf(function() {
            f.Ca() && aI(f);
          });
          this.P = null;
          this.I = [];
          this.sa = bI();
          this.h = new Tc();
          this.D = null;
          this.configure(this.g);
          cI(this);
          dI(this);
          this.V = /* @__PURE__ */ new Set();
          eI(this);
          this.xa.wa(this.g.refreshTickInSeconds);
          this.h.o(this.sa, "locale-changed", function(g) {
            g = g.locales[0];
            f.oa.setLocale(g);
            f.l.setAttribute("lang", g);
          });
          this.oa.initInterstitial(this.H, this.aa, this.u);
          this.h.o(this.m, "texttrackvisibility", function() {
            $H(f);
          });
          this.h.o(this.m, "unloading", function() {
            f.j || (f.xb() && fI(f), f.Md() && f.cd());
          });
        }
        la(Z, kb);
        p = Z.prototype;
        p.destroy = function(a) {
          a = a === void 0 ? false : a;
          var b = this;
          return Q(function(c) {
            switch (c.g) {
              case 1:
                if (document.pictureInPictureElement != b.u) {
                  c.B(2);
                  break;
                }
                return F(c, document.exitPictureInPicture(), 2);
              case 2:
                b.h && (b.h.release(), b.h = null);
                b.K && (b.K.stop(), b.K = null);
                b.ea && (b.ea.stop(), b.ea = null);
                b.O && (b.O.stop(), b.O = null);
                b.xa && (b.xa.stop(), b.xa = null);
                b.D && (b.D.release(), b.D = null);
                gI(b);
                b.i && (b.l.removeChild(b.i), b.i = null);
                if (!b.F) {
                  c.B(4);
                  break;
                }
                return F(c, b.F.destroy(a), 5);
              case 5:
                b.F = null;
              case 4:
                b.L && (b.l.removeChild(b.L), b.L = null);
                b.H && (b.l.removeChild(b.H), b.H = null);
                if (!b.aa) {
                  c.B(6);
                  break;
                }
                return F(c, b.aa.destroy(), 7);
              case 7:
                b.aa = null;
              case 6:
                b.m = null, b.u = null, b.C = null, b.sa = null, b.V.clear(), hI(b), kb.prototype.release.call(b), H(c);
            }
          });
        };
        function gI(a) {
          for (var b = u(a.I), c = b.next(); !c.done; c = b.next()) c.value.release();
          a.I = [];
        }
        function iI(a, b) {
          jI.set(a, b);
        }
        p.kk = function(a) {
          this.ra = a;
          eI(this);
        };
        p.Ml = function() {
          YH(this);
        };
        p.configure = function(a) {
          var b = this;
          this.g = a;
          this.F.Mi(a.castReceiverAppId, a.castAndroidReceiverCompatible);
          this.A && (this.A = null);
          this.Ma && (this.Ma = null);
          this.X && (this.X = null);
          this.D && this.D.configure(a);
          this.i ? (Pj(this.i), gI(this)) : (kI(this), lI(this), this.D = new QH(this.i, this.Pb, this.u, this.m, this.g));
          this.l.classList.add("shaka-video-container");
          this.u.classList.add("shaka-video");
          mI(this);
          this.g.addBigPlayButton && nI(this);
          this.g.customContextMenu && (this.X = new UG(this.G, this), this.I.push(this.X));
          this.L || oI(this);
          this.g.seekOnTaps && (pI(this), qI(this));
          this.Fa = V("div");
          this.Fa.classList.add("shaka-server-side-ad-container");
          this.i.appendChild(this.Fa);
          rI(this);
          this.J = Array.from(this.l.getElementsByClassName("shaka-settings-menu"));
          this.J.push.apply(this.J, x(Array.from(this.l.getElementsByClassName("shaka-overflow-menu"))));
          this.fb = Array.from(this.l.getElementsByClassName("shaka-show-controls-on-mouse-over"));
          YH(this);
          a = u(this.l.getElementsByClassName("shaka-no-propagation"));
          for (var c = a.next(); !c.done; c = a.next()) {
            c = c.value;
            var d = function(e) {
              return e.stopPropagation();
            };
            this.h.o(c, "click", d);
            this.h.o(c, "dblclick", d);
            navigator.maxTouchPoints > 0 && this.h.o(c, "touchend", function(e) {
              b.Ca() && e.stopPropagation();
            });
          }
        };
        p.di = function(a) {
          (this.Y = a) ? (this.l.setAttribute("shaka-controls", "true"), this.u.tabIndex = -1, this.u.controls = false) : this.l.removeAttribute("shaka-controls");
          YH(this);
        };
        p.Lj = function(a) {
          this.u.controls = a;
          this.u.tabIndex = a ? 0 : -1;
          a && this.di(false);
        };
        p.getAd = function() {
          return this.j;
        };
        p.Dk = function() {
          return this.F;
        };
        p.Vk = function() {
          return this.sa;
        };
        p.yl = function() {
          return this.l;
        };
        p.Vc = function() {
          return this.C;
        };
        p.Uk = function() {
          return this.u;
        };
        p.Wb = function() {
          return this.m;
        };
        p.Tk = function() {
          return this.aa;
        };
        p.Kk = function() {
          return this.i;
        };
        p.jl = function() {
          return this.Fa;
        };
        p.Gk = function() {
          return this.H;
        };
        p.Hk = function() {
          return this.g;
        };
        p.Jl = function() {
          return this.S;
        };
        p.ii = function(a) {
          (this.S = a) ? this.K.stop() : this.K.$(3);
        };
        p.Dl = function() {
          return this.ra;
        };
        p.ph = function() {
          return this.A ? this.A.getValue() : this.C.currentTime;
        };
        p.Mj = function(a) {
          this.P = a;
        };
        p.Lc = function() {
          return this.J.some(function(a) {
            return !a.classList.contains("shaka-hidden");
          });
        };
        p.Wc = function() {
          this.O.La();
        };
        function sI(a) {
          return !document.fullscreenEnabled || a.u.webkitSupportsFullscreen && a.g.preferVideoFullScreenInVisionOS && Rb().Ka() == "APPLE_VR" ? false : true;
        }
        function tI(a) {
          return "documentPictureInPicture" in window2 && a.g.preferDocumentPictureInPicture;
        }
        p.ve = function() {
          return this.F.Qa() ? false : sI(this) || (!this.j || !this.j.isUsingAnotherMediaElement()) && this.u.webkitSupportsFullscreen ? true : false;
        };
        p.xb = function() {
          if (sI(this)) return !!document.fullscreenElement;
          var a = this.u;
          return a.webkitSupportsFullscreen ? a.webkitDisplayingFullscreen : false;
        };
        function uI(a) {
          var b, c, d;
          return Q(function(e) {
            switch (e.g) {
              case 1:
                ra(e, 2);
                if (!sI(a)) {
                  b = a.u;
                  b.webkitSupportsFullscreen && b.webkitEnterFullscreen();
                  e.B(4);
                  break;
                }
                if (!a.Md()) {
                  e.B(5);
                  break;
                }
                return F(e, a.cd(), 6);
              case 6:
                if (!tI(a)) {
                  e.B(5);
                  break;
                }
                return F(e, new Promise(function(f) {
                  new Bf(f).$(0.05);
                }), 5);
              case 5:
                return c = a.g.fullScreenElement, F(e, c.requestFullscreen({ navigationUI: "hide" }), 9);
              case 9:
                if (!a.g.forceLandscapeOnFullscreen || !screen.orientation) {
                  e.B(4);
                  break;
                }
                ra(e, 11);
                return F(
                  e,
                  screen.orientation.lock("landscape"),
                  13
                );
              case 13:
                ta(e, 4, 2);
                break;
              case 11:
                ua(e, 2);
              case 4:
                ta(e, 0);
                break;
              case 2:
                d = ua(e), a.dispatchEvent(new T("error", (/* @__PURE__ */ new Map()).set("detail", d))), H(e);
            }
          });
        }
        function fI(a) {
          var b;
          return Q(function(c) {
            if (!sI(a)) return b = a.u, b.webkitSupportsFullscreen && b.webkitExitFullscreen(), c.B(0);
            screen.orientation && screen.orientation.unlock();
            return F(c, document.exitFullscreen(), 0);
          });
        }
        p.og = function() {
          var a = this;
          return Q(function(b) {
            return a.xb() ? F(b, fI(a), 0) : F(b, uI(a), 0);
          });
        };
        p.Ef = function() {
          return this.F.Qa() ? false : document.pictureInPictureEnabled || tI(this) ? !this.u.disablePictureInPicture : false;
        };
        p.Md = function() {
          return !!(window2.documentPictureInPicture && window2.documentPictureInPicture.window || document.pictureInPictureElement);
        };
        p.cd = function() {
          var a = this, b, c;
          return Q(function(d) {
            switch (d.g) {
              case 1:
                ra(d, 2);
                if (tI(a)) {
                  if (!a.xb()) {
                    d.B(10);
                    break;
                  }
                  return F(d, fI(a), 10);
                }
                return document.pictureInPictureElement ? F(d, document.exitPictureInPicture(), 5) : (a.xb() && fI(a), b = a.u, F(d, b.requestPictureInPicture(), 5));
              case 10:
                return F(d, vI(a), 5);
              case 5:
                ta(d, 0);
                break;
              case 2:
                c = ua(d), a.dispatchEvent(new T("error", (/* @__PURE__ */ new Map()).set("detail", c))), H(d);
            }
          });
        };
        function vI(a) {
          var b, c, d, e, f, g;
          return Q(function(h) {
            if (h.g == 1) {
              if (window2.documentPictureInPicture.window) return window2.documentPictureInPicture.window.close(), h.return();
              b = a.l;
              c = b.getBoundingClientRect();
              return F(h, window2.documentPictureInPicture.requestWindow({ width: c.width, height: c.height }), 2);
            }
            d = h.h;
            wI(d);
            e = b.parentNode || document.body;
            f = a.l.cloneNode(true);
            f.style.visibility = "hidden";
            f.style.height = getComputedStyle(b).height;
            e.appendChild(f);
            g = document.createElement("style");
            g.append("[data-shaka-player-container] {\n      width: 100% !important; max-height: 100%}");
            d.document.head.append(g);
            d.document.body.append(b);
            a.h.ua(d, "pagehide", function() {
              f.replaceWith(b);
            });
            H(h);
          });
        }
        function wI(a) {
          var b = [].concat(x(document.styleSheets)).map(function(d) {
            try {
              return [].concat(x(d.cssRules)).map(function(f) {
                return f.cssText;
              }).join("");
            } catch (f) {
              var e = document.createElement("link");
              e.rel = "stylesheet";
              e.type = d.type;
              e.media = d.media;
              e.href = d.href;
              a.document.head.appendChild(e);
            }
            return "";
          }).filter(Boolean).join("\n"), c = document.createElement("style");
          c.textContent = b;
          a.document.head.appendChild(c);
        }
        p.Rj = function() {
          RG(this.R, true);
          RG(this.H, true);
          this.j.hasCustomClick() ? this.i.setAttribute("ad-active", "true") : this.i.removeAttribute("ad-active");
        };
        p.aj = function() {
          RG(this.R, false);
          RG(this.H, false);
          this.i.removeAttribute("ad-active");
        };
        function $G(a) {
          if (a.Y) {
            if (a.j && (a.j && a.j.isPaused() ? a.j.play() : a.j && a.j.pause(), a.j.isLinear())) return;
            a.C.duration && (a.C.paused && !a.S ? (a.m.isEnded() && (a.C.currentTime = a.m.za().start), a.C.play()) : a.C.pause());
          }
        }
        function kI(a) {
          a.i = V("div");
          a.i.classList.add("shaka-controls-container");
          a.l.appendChild(a.i);
          a.l.setAttribute("shaka-controls", "true");
          a.h.o(a.i, "touchend", function(b) {
            a.C.duration && (a.Ca() ? (a.P = Date.now(), cH(a, true)) : xI(a, b), b.cancelable && b.preventDefault());
          });
          a.h.o(a.i, "click", function() {
            cH(a);
          });
          a.h.o(a.i, "dblclick", function() {
            a.g.doubleClickForFullscreen && a.ve() && a.og();
          });
        }
        function nI(a) {
          var b = V("div");
          b.classList.add("shaka-play-button-container");
          a.i.appendChild(b);
          a.Ma = new aH(b, a);
          a.I.push(a.Ma);
        }
        function mI(a) {
          var b = V("div");
          b.classList.add("shaka-scrim-container");
          a.i.appendChild(b);
        }
        function yI(a) {
          a.R = V("div");
          a.R.classList.add("shaka-ad-controls");
          var b = a.j != null && a.j.isLinear();
          RG(a.R, b);
          a.M.appendChild(a.R);
          b = new sH(a.R, a);
          a.I.push(b);
        }
        function oI(a) {
          a.L = V("div");
          a.L.classList.add("shaka-spinner-container");
          a.l.appendChild(a.L);
          var b = V("div");
          b.classList.add("shaka-spinner");
          a.L.appendChild(b);
          b.insertAdjacentHTML("beforeend", '<svg focusable="false" stroke="currentColor"\n         viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg"\n         width="50px" height="50px" class="q-spinner text-grey-9">\n      <g transform="translate(1 1)" stroke-width="6" fill="none"\n        fill-rule="evenodd">\n        <circle stroke-opacity=".5" cx="18" cy="18" r="16"></circle>\n        <path d="M34 18c0-9.94-8.06-16-16-16">\n          <animateTransform attributeName="transform" type="rotate"\n            from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite">\n          </animateTransform>\n        </path>\n      </g>\n    </svg>');
        }
        function pI(a) {
          var b = V("div");
          b.classList.add("shaka-hidden-fast-forward-container");
          a.i.appendChild(b);
          a.ib = new dH(b, a);
          a.I.push(a.ib);
        }
        function qI(a) {
          var b = V("div");
          b.classList.add("shaka-hidden-rewind-container");
          a.i.appendChild(b);
          a.jb = new eH(b, a);
          a.I.push(a.jb);
        }
        function rI(a) {
          a.M = V("div");
          a.M.classList.add("shaka-bottom-controls");
          a.M.classList.add("shaka-no-propagation");
          a.i.appendChild(a.M);
          a.h.o(a.M, "click", function(e) {
            e.target.closest(".shaka-overflow-button") || a.Wc();
          });
          yI(a);
          zI(a);
          a.G = V("div");
          a.G.classList.add("shaka-controls-button-panel");
          a.G.classList.add("shaka-show-controls-on-mouse-over");
          a.g.enableTooltips && a.G.classList.add("shaka-tooltips-on");
          a.M.appendChild(a.G);
          for (var b = u(a.g.controlPanelElements), c = b.next(); !c.done; c = b.next()) if (c = c.value, jI.get(c)) {
            var d = jI.get(c).create(a.G, a);
            a.I.push(d);
            c == "time_and_duration" && (c = new TG(a.G, a), a.I.push(c));
          } else ab("Unrecognized control panel element requested:", c);
        }
        function zI(a) {
          if (a.g.addSeekBar) a.A = AI.create(a.M, a), a.I.push(a.A);
          else {
            for (var b = u(a.J), c = b.next(); !c.done; c = b.next()) c.value.classList.add("shaka-low-position");
            a = a.G;
            a.classList.contains("shaka-tooltips-on") && a.classList.add("shaka-tooltips-low-position");
          }
        }
        function lI(a) {
          a.H = V("div");
          a.H.classList.add("shaka-client-side-ad-container");
          RG(a.H, false);
          a.h.o(a.H, "click", function() {
            cH(a);
          });
          a.l.appendChild(a.H);
        }
        function cI(a) {
          a.h.o(a.m, "buffering", function() {
            BI(a);
          });
          BI(a);
          a.h.o(window2, "keydown", function(b) {
            CI(a, b);
          });
          a.h.o(window2, "click", function() {
            return a.Wc();
          });
          a.h.o(a, "submenuopen", function() {
            a.Wc();
          });
          a.h.o(a.C, "play", function() {
            YH(a);
          });
          a.h.o(a.C, "pause", function() {
            YH(a);
          });
          a.h.o(a.l, "mousemove", function(b) {
            xI(a, b);
          });
          a.h.o(a.l, "touchmove", function(b) {
            xI(a, b);
          }, { passive: true });
          a.h.o(a.l, "touchend", function(b) {
            xI(a, b);
          }, { passive: true });
          a.h.o(a.l, "mouseleave", function() {
            a.P || a.K.La();
          });
          a.h.o(a.l, "wheel", function(b) {
            xI(
              a,
              b
            );
          }, { passive: true });
          a.h.o(a.F, "caststatuschanged", function() {
            eI(a);
          });
          a.h.o(a.D, "vrstatuschanged", function() {
            a.dispatchEvent(new T("vrstatuschanged"));
          });
          a.h.o(a.l, "keydown", function(b) {
            a.g.enableKeyboardPlaybackControlsInWindow || a.xb() || DI(a, b);
          });
          a.h.o(a.l, "keyup", function(b) {
            a.g.enableKeyboardPlaybackControlsInWindow || a.xb() || a.V.delete(b.key);
          });
          a.h.o(window2, "keydown", function(b) {
            (a.g.enableKeyboardPlaybackControlsInWindow || a.xb()) && DI(a, b);
          });
          a.h.o(window2, "keyup", function(b) {
            (a.g.enableKeyboardPlaybackControlsInWindow || a.xb()) && a.V.delete(b.key);
          });
          a.h.o(a.oa, "ad-started", function(b) {
            a.j = b.ad;
            a.Rj();
            BI(a);
          });
          a.h.o(a.oa, "ad-stopped", function() {
            a.j = null;
            a.aj();
            BI(a);
          });
          screen.orientation && a.h.o(screen.orientation, "change", function() {
            return Q(function(b) {
              return F(b, EI(a), 0);
            });
          });
        }
        function dI(a) {
          if (a.g.setupMediaSession && navigator.mediaSession) {
            var b = function(f, g) {
              try {
                navigator.mediaSession.setActionHandler(f, function(h) {
                  g(h);
                });
              } catch (h) {
              }
            }, c = function() {
              if (a.j && a.j.isLinear()) d();
              else {
                var f = a.m.za(), g = f.end - f.start;
                f = parseFloat((a.C.currentTime - f.start).toFixed(2));
                a.m.U() && Math.abs(g - f) < 1 && (g = Infinity);
                try {
                  navigator.mediaSession.setPositionState({ duration: Math.max(0, g), playbackRate: a.C.playbackRate, position: Math.max(0, f) });
                } catch (h) {
                }
              }
            }, d = function() {
              try {
                navigator.mediaSession.setPositionState();
              } catch (f) {
              }
            }, e = function(f) {
              var g = a.g.keyboardSeekDistance;
              switch (f.action) {
                case "pause":
                  $G(a);
                  break;
                case "play":
                  $G(a);
                  break;
                case "seekbackward":
                  if (f.seekOffset && !isFinite(f.seekOffset)) break;
                  a.j && a.j.isLinear() || FI(a, a.A.getValue() - (f.seekOffset || g));
                  break;
                case "seekforward":
                  if (f.seekOffset && !isFinite(f.seekOffset)) break;
                  a.j && a.j.isLinear() || FI(a, a.A.getValue() + (f.seekOffset || g));
                  break;
                case "seekto":
                  if (f.seekTime && !isFinite(f.seekTime)) break;
                  a.j && a.j.isLinear() || FI(a, a.m.za().start + f.seekTime);
                  break;
                case "stop":
                  a.m.tc();
                  break;
                case "enterpictureinpicture":
                  a.j && a.j.isLinear() || a.cd();
              }
            };
            b("pause", e);
            b("play", e);
            b("seekbackward", e);
            b("seekforward", e);
            b("seekto", e);
            b("stop", e);
            ("documentPictureInPicture" in window2 || document.pictureInPictureEnabled) && b("enterpictureinpicture", e);
            b = function() {
              a.m.U() || a.m.za().start != 0 ? (c(), a.h.o(a.C, "timeupdate", c)) : d();
            };
            a.m.aa && b();
            a.h.o(a.m, "loaded", b);
            a.h.o(a.m, "unloading", function() {
              a.h.Ea(a.C, "timeupdate", c);
            });
            a.h.o(a.m, "metadata", function(f) {
              if (f = f.payload) {
                var g;
                f.key == "TIT2" && f.data && (g = f.data);
                var h;
                f.key == "APIC" && f.mimeType == "-->" && (h = f.data);
                g && (f = { title: g, artwork: [] }, navigator.mediaSession.metadata && (f = navigator.mediaSession.metadata, f.title = g), navigator.mediaSession.metadata = new MediaMetadata(f));
                h && (g = a.u, h != g.poster && (g.poster = h), g = { title: "", artwork: [{ src: h }] }, navigator.mediaSession.metadata && (g = navigator.mediaSession.metadata, g.artwork = [{ src: h }]), navigator.mediaSession.metadata = new MediaMetadata(g));
              }
            });
          }
        }
        function hI(a) {
          if (a.g.setupMediaSession && navigator.mediaSession) {
            try {
              navigator.mediaSession.setPositionState();
            } catch (b) {
            }
            a = function(b) {
              try {
                navigator.mediaSession.setActionHandler(b, null);
              } catch (c) {
              }
            };
            a("pause");
            a("play");
            a("seekbackward");
            a("seekforward");
            a("seekto");
            a("stop");
            a("enterpictureinpicture");
          }
        }
        function EI(a) {
          return Q(function(b) {
            return a.C && a.C.readyState != 0 && !a.F.Qa() && a.g.enableFullscreenOnRotation && a.ve() ? screen.orientation.type.includes("landscape") && !a.xb() ? F(b, uI(a), 0) : screen.orientation.type.includes("portrait") && a.xb() ? F(b, fI(a), 0) : b.B(0) : b.return();
          });
        }
        function xI(a, b) {
          b.type == "mousemove" && (a.i.classList.remove("shaka-keyboard-navigation"), YH(a));
          b.type == "touchstart" || b.type == "touchmove" || b.type == "touchend" || b.type == "keyup" ? a.P = Date.now() : a.P + 1e3 < Date.now() && (a.P = null);
          a.P && b.type == "mousemove" || (a.l.classList.remove("no-cursor"), a.Oa = true, a.O.stop(), a.Ca() || (aI(a), YH(a)), a.K.stop(), b.type != "touchend" && b.type != "wheel" && b.type != "keyup" && a.P || a.K.$(3));
        }
        function GI(a) {
          return window2.matchMedia("hover: hover").matches ? a.fb.some(function(b) {
            return b.matches(":hover");
          }) : false;
        }
        function $H(a) {
          var b = a.l.getElementsByClassName("shaka-text-container")[0];
          b && (a.Ca() ? b.style.bottom = a.M.clientHeight + "px" : b.style.bottom = "0px");
        }
        function YH(a) {
          var b = a.j ? a.j.isPaused() : false, c = a.C.paused && !a.S, d = a.i.classList.contains("shaka-keyboard-navigation");
          b || (!a.j || !a.j.isLinear()) && c || a.Oa || d || GI(a) ? (aI(a), a.i.getAttribute("shown") == null && (a.i.setAttribute("shown", "true"), ZH(a)), $H(a), a.ea.stop()) : a.ea.$(a.g.fadeDelay);
          a.Lc() && a.G.classList.remove("shaka-tooltips-on");
        }
        function cH(a, b) {
          b = b === void 0 ? false : b;
          a.Y && !a.Xb() && (a.Lc() ? a.O.La() : a.g.singleClickForPlayAndPause ? $G(a) : b && a.Ca() && a.bj());
        }
        function eI(a) {
          var b = a.F.Qa();
          a.dispatchEvent(new T("caststatuschanged", (/* @__PURE__ */ new Map()).set("newStatus", b)));
          b ? a.i.getAttribute("casting") == null && (a.i.setAttribute("casting", "true"), ZH(a)) : a.i.getAttribute("casting") != null && (a.i.removeAttribute("casting"), ZH(a));
        }
        function DI(a, b) {
          var c = document.activeElement, d = c && c.classList ? c.classList.contains("shaka-volume-bar") : false, e = c && c.classList && c.classList.contains("shaka-seek-bar"), f = a.xb();
          c = a.i.contains(c);
          f = f || a.g.enableKeyboardPlaybackControlsInWindow;
          c && xI(a, b);
          if (a.g.enableKeyboardPlaybackControls && a.m.hd()) {
            var g = a.g.keyboardSeekDistance, h = a.g.keyboardLargeSeekDistance;
            switch (b.key) {
              case "ArrowLeft":
                a.A && g > 0 && (e || f) && !d && (b.preventDefault(), FI(a, a.A.getValue() - g));
                break;
              case "ArrowRight":
                a.A && g > 0 && (e || f) && !d && (b.preventDefault(), FI(a, a.A.getValue() + g));
                break;
              case "PageDown":
                a.A && h > 0 && (e || f) && (b.preventDefault(), FI(a, a.A.getValue() - h));
                break;
              case "PageUp":
                a.A && h > 0 && (e || f) && (b.preventDefault(), FI(a, a.A.getValue() + h));
                break;
              case "Home":
                a.A && FI(a, a.m.za().start);
                break;
              case "End":
                a.A && FI(a, a.m.za().end);
                break;
              case "c":
                a.m.Zd(!a.m.Xc());
                break;
              case "f":
                a.ve() && a.og();
                break;
              case "m":
                a.j && a.j.isLinear() ? a.j.setMuted(!a.j.isMuted()) : a.u.muted = !a.u.muted;
                break;
              case "p":
                a.Ef() && a.cd();
                break;
              case ">":
                b = a.g.playbackRates.indexOf(a.m.Za());
                b > -1 && b + 1 < a.g.playbackRates.length && a.m.sc(a.g.playbackRates[b + 1], false);
                break;
              case "<":
                b = a.g.playbackRates.indexOf(a.m.Za());
                b > -1 && b - 1 >= 0 && a.m.sc(a.g.playbackRates[b - 1], false);
                break;
              case " ":
                (e || f && !c) && $G(a);
            }
          }
        }
        function BI(a) {
          a.Y && (a.j && a.j.isClientRendering() && a.j.isLinear() ? RG(a.L, false) : RG(a.L, a.m.Cf()));
        }
        p.Ca = function() {
          return this.Y ? this.i.getAttribute("shown") != null || this.i.getAttribute("casting") != null : false;
        };
        function ZH(a) {
          a.Ca() ? a.dispatchEvent(new T("showingui")) : a.dispatchEvent(new T("hidingui"));
        }
        function FI(a, b) {
          a.C.currentTime = b;
          aI(a);
        }
        function aI(a) {
          if (a.A) if (a.A.setValue(a.C.currentTime), a.A.update(), a.A.isShowing()) {
            for (var b = u(a.J), c = b.next(); !c.done; c = b.next()) c.value.classList.remove("shaka-low-position");
            b = a.G;
            b.classList.contains("shaka-tooltips-on") && b.classList.remove("shaka-tooltips-low-position");
          } else {
            b = u(a.J);
            for (c = b.next(); !c.done; c = b.next()) c.value.classList.add("shaka-low-position");
            b = a.G;
            b.classList.contains("shaka-tooltips-on") && b.classList.add("shaka-tooltips-low-position");
          }
          a.dispatchEvent(new T("timeandseekrangeupdated"));
        }
        function CI(a, b) {
          a.V.add(b.key);
          var c = a.Lc();
          b.key == "Tab" && (a.i.classList.add("shaka-keyboard-navigation"), YH(a), a.h.o(window2, "mousedown", function() {
            a.h.Ea(window2, "mousedown");
          }));
          b.key == "Escape" && a.O.La();
          c && a.V.has("Tab") && HI(a, b);
        }
        function HI(a, b) {
          var c = a.J.filter(function(f) {
            return !f.classList.contains("shaka-hidden");
          });
          if (c.length) {
            var d = c[0];
            if (d.childNodes.length) {
              for (c = d.firstElementChild; c && c.classList.contains("shaka-hidden"); ) c = c.nextElementSibling;
              for (d = d.lastElementChild; d && d.classList.contains("shaka-hidden"); ) d = d.previousElementSibling;
              var e = document.activeElement;
              a.V.has("Shift") ? e == c && (b.preventDefault(), d.focus()) : e == d && (b.preventDefault(), c.focus());
            }
          }
        }
        p.zm = function() {
          var a = new Event("mousemove", { bubbles: false, cancelable: false });
          xI(this, a);
        };
        p.bj = function() {
          this.K.La();
        };
        p.Lg = function() {
          return this.D.Lg();
        };
        p.Xb = function() {
          return this.D.Xb();
        };
        p.wl = function() {
          var a = this.D;
          if (a.g) {
            a = a.g;
            zH(a.h, a.F);
            var b = a.h;
            a = b[0];
            var c = b[1], d = b[2];
            b = b[3];
            var e = d * d, f = b * b;
            var g = a * a + c * c + e + f;
            var h = a * b - c * d;
            h > 0.499995 * g ? (g = Math.PI / 2, a = 2 * Math.atan2(c, a)) : h < -0.499995 * g ? (g = -Math.PI / 2, a = 2 * Math.atan2(c, a)) : (g = Math.asin(2 * (a * d - b * c)), a = Math.atan2(2 * (a * b + c * d), 1 - 2 * (e + f)));
            a = Math.acos(Math.cos(a) * Math.cos(g)) * 180 / Math.PI;
          } else ab("Not playing VR content"), a = null;
          return a;
        };
        p.vl = function() {
          var a = this.D;
          a.g ? a = a.g.j : (ab("Not playing VR content"), a = null);
          return a;
        };
        p.xm = function(a) {
          var b = this.D;
          b.g ? (a < 0 ? (ab("Field of view should be greater than 0"), a = 0) : a > 100 && (ab("Field of view should be less than 100"), a = 100), b = b.g, b.j = a, GH(b, false)) : ab("Not playing VR content");
        };
        p.$d = function() {
          this.D.$d();
        };
        p.Bh = function(a) {
          this.D.Bh(a);
        };
        p.yh = function(a) {
          this.D.yh(a);
        };
        p.Ah = function(a) {
          this.D.Ah(a);
        };
        function bI() {
          var a = new Hc("en");
          a.Xa("ar", /* @__PURE__ */ new Map([
            ["AD_DURATION", " "],
            ["AD_PROGRESS", " [AD_ON]  [NUM_ADS]"],
            ["AD_STATISTICS", " "],
            ["AD_TIME", ": [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", ""],
            ["BACK", ""],
            ["CAPTIONS", " "],
            ["CAST", "..."],
            ["CHAPTERS", ""],
            ["DOWNLOAD_VIDEO_FRAME", "  "],
            ["ENTER_LOOP_MODE", "  "],
            ["ENTER_PICTURE_IN_PICTURE", '   "  "'],
            ["EXIT_FULL_SCREEN", "   "],
            ["EXIT_LOOP_MODE", "   "],
            ["EXIT_PICTURE_IN_PICTURE", '   "  "'],
            ["FAST_FORWARD", " "],
            ["FULL_SCREEN", " "],
            ["LANGUAGE", ""],
            ["LIVE", ""],
            ["LOOP", ""],
            ["MORE_SETTINGS", "  "],
            ["MULTIPLE_LANGUAGES", " "],
            ["MUTE", " "],
            ["NOT_APPLICABLE", " "],
            ["OFF", ""],
            ["ON", ""],
            ["PAUSE", " "],
            ["PICTURE_IN_PICTURE", "  "],
            ["PLAY", ""],
            ["PLAYBACK_RATE", " "],
            ["QUALITY", ""],
            ["RECENTER_VR", " "],
            ["REPLAY", " "],
            ["RESOLUTION", " "],
            ["REWIND", ""],
            ["SEEK", " "],
            ["SKIP_AD", " "],
            ["SKIP_TO_LIVE", "   "],
            ["STATISTICS", ""],
            ["SUBTITLE_FORCED", " "],
            ["SURROUND", " "],
            ["TOGGLE_STEREOSCOPIC", "    "],
            ["UNDETERMINED_LANGUAGE", " "],
            ["UNMUTE", " "],
            ["UNRECOGNIZED_LANGUAGE", " "],
            ["VOLUME", " "]
          ]));
          a.Xa("de", /* @__PURE__ */ new Map([
            ["AD_DURATION", "Dauer der Werbeanzeige"],
            ["AD_PROGRESS", "Werbung[AD_ON] von[NUM_ADS]"],
            ["AD_STATISTICS", "Anzeigenstatistiken"],
            ["AD_TIME", "Werbeanzeige: [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", "Automatisch"],
            ["BACK", "Zurck"],
            ["CAPTIONS", "Untertitel"],
            ["CAST", "Streamen..."],
            ["CHAPTERS", "Kapitel"],
            [
              "DOWNLOAD_VIDEO_FRAME",
              "Videoframe speichern"
            ],
            ["ENTER_LOOP_MODE", "In Endlosschleife spielen"],
            ["ENTER_PICTURE_IN_PICTURE", "Bild im Bild aktivieren"],
            ["EXIT_FULL_SCREEN", "Vollbildmodus beenden"],
            ["EXIT_LOOP_MODE", "Endlosschleife stoppen"],
            ["EXIT_PICTURE_IN_PICTURE", "Bild im Bild beenden"],
            ["FAST_FORWARD", "Vorspulen"],
            ["FULL_SCREEN", "Vollbildmodus"],
            ["LANGUAGE", "Sprache"],
            ["LIVE", "Live"],
            ["LOOP", "Schleife"],
            ["MORE_SETTINGS", "Weitere Einstellungen"],
            ["MULTIPLE_LANGUAGES", "Mehrere Sprachen"],
            ["MUTE", "Stummschalten"],
            [
              "NOT_APPLICABLE",
              "Nicht zutreffend"
            ],
            ["OFF", "Aus"],
            ["ON", "Ein"],
            ["PAUSE", "Pause"],
            ["PICTURE_IN_PICTURE", "Bild im Bild"],
            ["PLAY", "Wiedergabe"],
            ["PLAYBACK_RATE", "Geschwindigkeit"],
            ["QUALITY", "Qualitt"],
            ["RECENTER_VR", "Zentrieren"],
            ["REPLAY", "Noch einmal wiedergeben"],
            ["RESOLUTION", "Auflsung"],
            ["REWIND", "Zurckspulen"],
            ["SEEK", "Suche"],
            ["SKIP_AD", "berspringen"],
            ["SKIP_TO_LIVE", "Zum Live-Videostream wechseln"],
            ["STATISTICS", "Statistiken"],
            ["SUBTITLE_FORCED", "Erzwungen"],
            ["SURROUND", "Surround"],
            ["TOGGLE_STEREOSCOPIC", "Einstellung stereoskopisch ein/ausschalten"],
            ["UNDETERMINED_LANGUAGE", "Unbestimmt"],
            ["UNMUTE", "Stummschaltung aufheben"],
            ["UNRECOGNIZED_LANGUAGE", "Unbekannt"],
            ["VOLUME", "Lautstrke"]
          ]));
          a.Xa("en", /* @__PURE__ */ new Map([
            ["AD_DURATION", "Ad duration"],
            ["AD_PROGRESS", "Ad [AD_ON] of [NUM_ADS]"],
            ["AD_STATISTICS", "Ad statistics"],
            ["AD_TIME", "Ad: [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", "Auto"],
            ["BACK", "Back"],
            ["CAPTIONS", "Captions"],
            ["CAST", "Cast..."],
            [
              "CHAPTERS",
              "Chapters"
            ],
            ["DOWNLOAD_VIDEO_FRAME", "Save video frame"],
            ["ENTER_LOOP_MODE", "Loop the current video"],
            ["ENTER_PICTURE_IN_PICTURE", "Enter Picture-in-Picture"],
            ["EXIT_FULL_SCREEN", "Exit full screen"],
            ["EXIT_LOOP_MODE", "Stop looping the current video"],
            ["EXIT_PICTURE_IN_PICTURE", "Exit Picture-in-Picture"],
            ["FAST_FORWARD", "Fast-forward"],
            ["FULL_SCREEN", "Full screen"],
            ["LANGUAGE", "Language"],
            ["LIVE", "Live"],
            ["LOOP", "Loop"],
            ["MORE_SETTINGS", "More settings"],
            ["MULTIPLE_LANGUAGES", "Multiple languages"],
            [
              "MUTE",
              "Mute"
            ],
            ["NOT_APPLICABLE", "Not applicable"],
            ["OFF", "Off"],
            ["ON", "On"],
            ["PAUSE", "Pause"],
            ["PICTURE_IN_PICTURE", "Picture-in-Picture"],
            ["PLAY", "Play"],
            ["PLAYBACK_RATE", "Playback speed"],
            ["QUALITY", "Quality"],
            ["RECENTER_VR", "Recenter"],
            ["REPLAY", "Replay"],
            ["RESOLUTION", "Resolution"],
            ["REWIND", "Rewind"],
            ["SEEK", "Seek"],
            ["SKIP_AD", "Skip Ad"],
            ["SKIP_NEXT", "Next"],
            ["SKIP_PREVIOUS", "Previous"],
            ["SKIP_TO_LIVE", "Skip ahead to live"],
            ["STATISTICS", "Statistics"],
            ["SUBTITLE_FORCED", "Forced"],
            ["SURROUND", "Surround"],
            ["TOGGLE_STEREOSCOPIC", "Toggle stereoscopic"],
            ["UNDETERMINED_LANGUAGE", "Undetermined"],
            ["UNMUTE", "Unmute"],
            ["UNRECOGNIZED_LANGUAGE", "Unrecognized"],
            ["VOLUME", "Volume"]
          ]));
          a.Xa("en-GB", /* @__PURE__ */ new Map([
            ["AD_DURATION", "Ad duration"],
            ["AD_PROGRESS", "Ad [AD_ON] of [NUM_ADS]"],
            ["AD_STATISTICS", "Ad statistics"],
            ["AD_TIME", "Ad: [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", "Auto"],
            ["BACK", "Back"],
            ["CAPTIONS", "Captions"],
            ["CAST", "Cast..."],
            ["CHAPTERS", "Chapters"],
            ["DOWNLOAD_VIDEO_FRAME", "Save video frame"],
            [
              "ENTER_LOOP_MODE",
              "Loop the current video"
            ],
            ["ENTER_PICTURE_IN_PICTURE", "Enter picture-in-picture"],
            ["EXIT_FULL_SCREEN", "Exit full screen"],
            ["EXIT_LOOP_MODE", "Stop looping the current video"],
            ["EXIT_PICTURE_IN_PICTURE", "Exit picture-in-picture"],
            ["FAST_FORWARD", "Fast-forward"],
            ["FULL_SCREEN", "Full screen"],
            ["LANGUAGE", "Language"],
            ["LIVE", "Live"],
            ["LOOP", "Loop"],
            ["MORE_SETTINGS", "More settings"],
            ["MULTIPLE_LANGUAGES", "Multiple languages"],
            ["MUTE", "Mute"],
            ["NOT_APPLICABLE", "Not applicable"],
            ["OFF", "Off"],
            ["ON", "On"],
            ["PAUSE", "Pause"],
            ["PICTURE_IN_PICTURE", "Picture-in-picture"],
            ["PLAY", "Play"],
            ["PLAYBACK_RATE", "Playback speed"],
            ["QUALITY", "Quality"],
            ["RECENTER_VR", "Recentre"],
            ["REPLAY", "Replay"],
            ["RESOLUTION", "Resolution"],
            ["REWIND", "Rewind"],
            ["SEEK", "Seek"],
            ["SKIP_AD", "Skip ad"],
            ["SKIP_TO_LIVE", "Skip ahead to live"],
            ["STATISTICS", "Statistics"],
            ["SUBTITLE_FORCED", "Forced"],
            ["SURROUND", "Surround"],
            ["TOGGLE_STEREOSCOPIC", "Toggle stereoscopic"],
            ["UNDETERMINED_LANGUAGE", "Undetermined"],
            ["UNMUTE", "Unmute"],
            [
              "UNRECOGNIZED_LANGUAGE",
              "Unrecognised"
            ],
            ["VOLUME", "volume"]
          ]));
          a.Xa("es", /* @__PURE__ */ new Map([
            ["AD_DURATION", "Duracin del anuncio"],
            ["AD_PROGRESS", "Anuncio [AD_ON] de [NUM_ADS]"],
            ["AD_STATISTICS", "Estadsticas del anuncio"],
            ["AD_TIME", "Anuncio: [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", "Automtico"],
            ["BACK", "Atrs"],
            ["CAPTIONS", "Subttulos"],
            ["CAST", "Enviar..."],
            ["CHAPTERS", "Captulos"],
            ["DOWNLOAD_VIDEO_FRAME", "Guardar fotograma"],
            ["ENTER_LOOP_MODE", "Reproducir en bucle el vdeo actual"],
            ["ENTER_PICTURE_IN_PICTURE", "Activar el modo imagen en imagen"],
            ["EXIT_FULL_SCREEN", "Salir del modo de pantalla completa"],
            ["EXIT_LOOP_MODE", "Dejar de reproducir en bucle el vdeo actual"],
            ["EXIT_PICTURE_IN_PICTURE", "Salir del modo imagen en imagen"],
            ["FAST_FORWARD", "Avanzar rpidamente"],
            ["FULL_SCREEN", "Pantalla completa"],
            ["LANGUAGE", "Idioma"],
            ["LIVE", "En directo"],
            ["LOOP", "Reproducir en bucle"],
            ["MORE_SETTINGS", "Ms ajustes"],
            ["MULTIPLE_LANGUAGES", "Varios idiomas"],
            ["MUTE", "Silenciar"],
            ["NOT_APPLICABLE", "No aplicable"],
            ["OFF", "Desactivado"],
            ["ON", "Activado"],
            ["PAUSE", "Pausar"],
            ["PICTURE_IN_PICTURE", "Imagen en imagen"],
            ["PLAY", "Reproducir"],
            ["PLAYBACK_RATE", "Velocidad de reproduccin"],
            ["QUALITY", "Calidad"],
            ["RECENTER_VR", "Volver a centrar"],
            ["REPLAY", "Volver a reproducir"],
            ["RESOLUTION", "Resolucin"],
            ["REWIND", "Rebobinar"],
            ["SEEK", "Buscar"],
            ["SKIP_AD", "Saltar anuncio"],
            ["SKIP_NEXT", "Siguiente"],
            ["SKIP_PREVIOUS", "Anterior"],
            ["SKIP_TO_LIVE", "Ir al vdeo en directo"],
            ["STATISTICS", "Estadsticas"],
            ["SUBTITLE_FORCED", "Forzado"],
            ["SURROUND", "Envolvente"],
            ["TOGGLE_STEREOSCOPIC", "Activar/Desactivar estereoscpica"],
            ["UNDETERMINED_LANGUAGE", "Sin especificar"],
            ["UNMUTE", "Activar sonido"],
            ["UNRECOGNIZED_LANGUAGE", "No reconocida"],
            ["VOLUME", "Volumen"]
          ]));
          a.Xa("es-419", /* @__PURE__ */ new Map([
            ["AD_DURATION", "Duracin del anuncio"],
            ["AD_PROGRESS", "Anuncio [AD_ON] de [NUM_ADS]"],
            ["AD_STATISTICS", "Estadsticas de anuncios"],
            ["AD_TIME", "Anuncio: [AD_TIME]"],
            [
              "AIRPLAY",
              "AirPlay"
            ],
            ["AUTO_QUALITY", "Automtico"],
            ["BACK", "Atrs"],
            ["CAPTIONS", "Subttulos"],
            ["CAST", "Transmitir..."],
            ["CHAPTERS", "Captulos"],
            ["DOWNLOAD_VIDEO_FRAME", "Guardar fotograma"],
            ["ENTER_LOOP_MODE", "Repetir indefinidamente el video actual"],
            ["ENTER_PICTURE_IN_PICTURE", "Ingresar al modo de pantalla en pantalla"],
            ["EXIT_FULL_SCREEN", "Salir de pantalla completa"],
            ["EXIT_LOOP_MODE", "Detener la repeticin indefinida del video actual"],
            ["EXIT_PICTURE_IN_PICTURE", "Salir del modo de pantalla en pantalla"],
            ["FAST_FORWARD", "Avanzar"],
            ["FULL_SCREEN", "Pantalla completa"],
            ["LANGUAGE", "Idioma"],
            ["LIVE", "En directo"],
            ["LOOP", "Repetir indefinidamente"],
            ["MORE_SETTINGS", "Ms opciones de configuracin"],
            ["MULTIPLE_LANGUAGES", "Varios idiomas"],
            ["MUTE", "Silenciar"],
            ["NOT_APPLICABLE", "No aplicable"],
            ["OFF", "Desactivado"],
            ["ON", "Activado"],
            ["PAUSE", "Detener"],
            ["PICTURE_IN_PICTURE", "Pantalla en pantalla"],
            ["PLAY", "Reproducir"],
            ["PLAYBACK_RATE", "Velocidad de reproduccin"],
            ["QUALITY", "Calidad"],
            [
              "RECENTER_VR",
              "Volver a centrar"
            ],
            ["REPLAY", "Volver a reproducir"],
            ["RESOLUTION", "Resolucin"],
            ["REWIND", "Retroceder"],
            ["SEEK", "Buscar"],
            ["SKIP_AD", "Omitir anuncio"],
            ["SKIP_TO_LIVE", "Adelantar hasta la transmisin en vivo"],
            ["STATISTICS", "Estadsticas"],
            ["SUBTITLE_FORCED", "Forzado"],
            ["SURROUND", "Sonido envolvente"],
            ["TOGGLE_STEREOSCOPIC", "Activar o desactivar el modo estereoscpico"],
            ["UNDETERMINED_LANGUAGE", "Sin especificar"],
            ["UNMUTE", "Dejar de silenciar"],
            ["UNRECOGNIZED_LANGUAGE", "No reconocida"],
            ["VOLUME", "Volumen"]
          ]));
          a.Xa("fr", /* @__PURE__ */ new Map([
            ["AD_DURATION", "Dure de l'annonce"],
            ["AD_PROGRESS", "Annonce[AD_ON] sur[NUM_ADS]"],
            ["AD_STATISTICS", "Statistiques sur les annonces"],
            ["AD_TIME", "Annonce: [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", "Automatique"],
            ["BACK", "Retour"],
            ["CAPTIONS", "Sous-titres"],
            ["CAST", "Caster"],
            ["CHAPTERS", "Chapitres"],
            ["DOWNLOAD_VIDEO_FRAME", "Tlcharger l'image de la vido"],
            ["ENTER_LOOP_MODE", "Lire en boucle la vido en cours"],
            ["ENTER_PICTURE_IN_PICTURE", "Utiliser le mode Picture-in-Picture"],
            ["EXIT_FULL_SCREEN", "Quitter le mode plein cran"],
            ["EXIT_LOOP_MODE", "Arrter la lecture en boucle de la vido en cours"],
            ["EXIT_PICTURE_IN_PICTURE", "Quitter le modePIP (Picture-in-picture)"],
            ["FAST_FORWARD", "Avance rapide"],
            ["FULL_SCREEN", "Plein cran"],
            ["LANGUAGE", "Langue"],
            ["LIVE", "En direct"],
            ["LOOP", "Rpter"],
            ["MORE_SETTINGS", "Plus de paramtres"],
            ["MULTIPLE_LANGUAGES", "Plusieurs langues"],
            ["MUTE", "Couper le son"],
            ["NOT_APPLICABLE", "Non applicable"],
            ["OFF", "Dsactive"],
            ["ON", "Active"],
            ["PAUSE", "Pause"],
            ["PICTURE_IN_PICTURE", "Picture-in-Picture"],
            ["PLAY", "Visionner"],
            ["PLAYBACK_RATE", "Vitesse de lecture"],
            ["QUALITY", "Qualit"],
            ["RECENTER_VR", "Recentrer"],
            ["REPLAY", "Revoir"],
            ["RESOLUTION", "Rsolution"],
            ["REWIND", "Retour arrire"],
            ["SEEK", "Chercher"],
            ["SKIP_AD", "Passer l'annonce"],
            ["SKIP_NEXT", "Suivante"],
            ["SKIP_PREVIOUS", "Prcdente"],
            [
              "SKIP_TO_LIVE",
              "Accder  la partie la plus rcente du direct"
            ],
            ["STATISTICS", "Statistiques"],
            ["SUBTITLE_FORCED", "Forc"],
            ["SURROUND", "Surround"],
            ["TOGGLE_STEREOSCOPIC", "Activer/Dsactiver le mode stroscopique"],
            ["UNDETERMINED_LANGUAGE", "Langue indtermine"],
            ["UNMUTE", "Ractiver le son"],
            ["UNRECOGNIZED_LANGUAGE", "Non reconnu"],
            ["VOLUME", "Volume"]
          ]));
          a.Xa("it", /* @__PURE__ */ new Map([
            ["AD_DURATION", "Durata dell'annuncio"],
            ["AD_PROGRESS", "Annuncio [AD_ON] di [NUM_ADS]"],
            [
              "AD_STATISTICS",
              "Statistiche sugli annunci"
            ],
            ["AD_TIME", "Annuncio: [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", "Automatica"],
            ["BACK", "Indietro"],
            ["CAPTIONS", "Sottotitoli"],
            ["CAST", "Trasmetti..."],
            ["CHAPTERS", "Capitoli"],
            ["DOWNLOAD_VIDEO_FRAME", "Salva fotogramma"],
            ["ENTER_LOOP_MODE", "Riproduci in loop il video corrente"],
            ["ENTER_PICTURE_IN_PICTURE", "Attiva Picture in picture"],
            ["EXIT_FULL_SCREEN", "Esci da schermo intero"],
            ["EXIT_LOOP_MODE", "Interrompi riproduzione in loop del video corrente"],
            [
              "EXIT_PICTURE_IN_PICTURE",
              "Esci da Picture in picture"
            ],
            ["FAST_FORWARD", "Avanti veloce"],
            ["FULL_SCREEN", "Schermo intero"],
            ["LANGUAGE", "Lingua"],
            ["LIVE", "Dal vivo"],
            ["LOOP", "Riproduci in loop"],
            ["MORE_SETTINGS", "Altre impostazioni"],
            ["MULTIPLE_LANGUAGES", "Pi lingue"],
            ["MUTE", "Disattiva audio"],
            ["NOT_APPLICABLE", "Non applicabile"],
            ["OFF", "Disattivo"],
            ["ON", "Attivo"],
            ["PAUSE", "Metti in pausa"],
            ["PICTURE_IN_PICTURE", "Picture in picture"],
            ["PLAY", "Riproduci"],
            ["PLAYBACK_RATE", "Velocit di riproduzione"],
            ["QUALITY", "Qualit"],
            ["RECENTER_VR", "Ricentra"],
            ["REPLAY", "Riproduci di nuovo"],
            ["RESOLUTION", "Risoluzione"],
            ["REWIND", "Riavvolgi"],
            ["SEEK", "Cerca"],
            ["SKIP_AD", "Salta annuncio"],
            ["SKIP_TO_LIVE", "Passa alla trasmissione dal vivo"],
            ["STATISTICS", "Statistiche"],
            ["SUBTITLE_FORCED", "Forzata"],
            ["SURROUND", "Surround"],
            ["TOGGLE_STEREOSCOPIC", "Pulsante di attivazione/disattivazione stereoscopico"],
            ["UNDETERMINED_LANGUAGE", "Indeterminata"],
            ["UNMUTE", "Riattiva audio"],
            ["UNRECOGNIZED_LANGUAGE", "Non riconosciuto"],
            ["VOLUME", "Volume"]
          ]));
          a.Xa("ja", /* @__PURE__ */ new Map([
            ["AD_DURATION", ""],
            ["AD_PROGRESS", "[AD_ON]  [NUM_ADS] "],
            ["AD_STATISTICS", ""],
            ["AD_TIME", ": [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", ""],
            ["BACK", ""],
            ["CAPTIONS", ""],
            ["CAST", "..."],
            ["CHAPTERS", ""],
            ["DOWNLOAD_VIDEO_FRAME", ""],
            ["ENTER_LOOP_MODE", ""],
            ["ENTER_PICTURE_IN_PICTURE", "  "],
            ["EXIT_FULL_SCREEN", ""],
            ["EXIT_LOOP_MODE", ""],
            ["EXIT_PICTURE_IN_PICTURE", "  "],
            ["FAST_FORWARD", ""],
            ["FULL_SCREEN", ""],
            ["LANGUAGE", ""],
            ["LIVE", ""],
            ["LOOP", ""],
            ["MORE_SETTINGS", ""],
            ["MULTIPLE_LANGUAGES", ""],
            ["MUTE", ""],
            ["NOT_APPLICABLE", ""],
            ["OFF", ""],
            ["ON", ""],
            ["PAUSE", ""],
            ["PICTURE_IN_PICTURE", "  "],
            ["PLAY", ""],
            ["PLAYBACK_RATE", ""],
            ["QUALITY", ""],
            ["RECENTER_VR", ""],
            ["REPLAY", ""],
            ["RESOLUTION", ""],
            ["REWIND", ""],
            ["SEEK", ""],
            ["SKIP_AD", ""],
            ["SKIP_TO_LIVE", ""],
            ["STATISTICS", ""],
            ["SUBTITLE_FORCED", ""],
            ["SURROUND", ""],
            ["TOGGLE_STEREOSCOPIC", ""],
            ["UNDETERMINED_LANGUAGE", ""],
            ["UNMUTE", ""],
            ["UNRECOGNIZED_LANGUAGE", ""],
            ["VOLUME", ""]
          ]));
          a.Xa("ko", /* @__PURE__ */ new Map([
            ["AD_DURATION", " "],
            ["AD_PROGRESS", " [AD_ON]/[NUM_ADS]"],
            ["AD_STATISTICS", " "],
            [
              "AD_TIME",
              ": [AD_TIME]"
            ],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", ""],
            ["BACK", ""],
            ["CAPTIONS", ""],
            ["CAST", "..."],
            ["CHAPTERS", ""],
            ["DOWNLOAD_VIDEO_FRAME", "  "],
            ["ENTER_LOOP_MODE", "   "],
            ["ENTER_PICTURE_IN_PICTURE", "PIP  "],
            ["EXIT_FULL_SCREEN", " "],
            ["EXIT_LOOP_MODE", "    "],
            ["EXIT_PICTURE_IN_PICTURE", "PIP  "],
            ["FAST_FORWARD", " "],
            ["FULL_SCREEN", ""],
            ["LANGUAGE", ""],
            ["LIVE", ""],
            ["LOOP", " "],
            ["MORE_SETTINGS", " "],
            ["MULTIPLE_LANGUAGES", " "],
            ["MUTE", ""],
            ["NOT_APPLICABLE", "  "],
            ["OFF", " "],
            ["ON", ""],
            [
              "PAUSE",
              ""
            ],
            ["PICTURE_IN_PICTURE", "PIP "],
            ["PLAY", ""],
            ["PLAYBACK_RATE", " "],
            ["QUALITY", ""],
            ["RECENTER_VR", " "],
            ["REPLAY", ""],
            ["RESOLUTION", ""],
            ["REWIND", ""],
            ["SEEK", ""],
            ["SKIP_AD", " "],
            ["SKIP_TO_LIVE", "  "],
            [
              "STATISTICS",
              ""
            ],
            ["SUBTITLE_FORCED", ""],
            ["SURROUND", ""],
            ["TOGGLE_STEREOSCOPIC", "  "],
            ["UNDETERMINED_LANGUAGE", ""],
            ["UNMUTE", " "],
            ["UNRECOGNIZED_LANGUAGE", "  "],
            ["VOLUME", ""]
          ]));
          a.Xa("nl", /* @__PURE__ */ new Map([
            ["AD_DURATION", "Advertentieduur"],
            ["AD_PROGRESS", "Advertentie [AD_ON] van [NUM_ADS]"],
            ["AD_STATISTICS", "Advertentiestatistieken"],
            ["AD_TIME", "Advertentie: [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", "Automatisch"],
            ["BACK", "Terug"],
            ["CAPTIONS", "Ondertiteling"],
            ["CAST", "Casten..."],
            ["CHAPTERS", "Hoofdstukken"],
            ["DOWNLOAD_VIDEO_FRAME", "Videoframe opslaan"],
            ["ENTER_LOOP_MODE", "De huidige video lussen"],
            ["ENTER_PICTURE_IN_PICTURE", "Scherm-in-scherm openen"],
            ["EXIT_FULL_SCREEN", "Volledig scherm sluiten"],
            ["EXIT_LOOP_MODE", "De huidige video niet meer lussen"],
            ["EXIT_PICTURE_IN_PICTURE", "Scherm-in-scherm afsluiten"],
            ["FAST_FORWARD", "Vooruitspoelen"],
            [
              "FULL_SCREEN",
              "Volledig scherm"
            ],
            ["LANGUAGE", "Taal"],
            ["LIVE", "Live"],
            ["LOOP", "Lussen"],
            ["MORE_SETTINGS", "Meer instellingen"],
            ["MULTIPLE_LANGUAGES", "Meerdere talen"],
            ["MUTE", "Geluid uitzetten"],
            ["NOT_APPLICABLE", "Niet van toepassing"],
            ["OFF", "Uit"],
            ["ON", "Aan"],
            ["PAUSE", "Onderbreken"],
            ["PICTURE_IN_PICTURE", "Scherm-in-scherm"],
            ["PLAY", "Afspelen"],
            ["PLAYBACK_RATE", "Afspeelsnelheid"],
            ["QUALITY", "Kwaliteit"],
            ["RECENTER_VR", "Opnieuw centreren"],
            ["REPLAY", "Opnieuw afspelen"],
            ["RESOLUTION", "Resolutie"],
            ["REWIND", "Terugspoelen"],
            ["SEEK", "Zoeken"],
            ["SKIP_AD", "Advertentie overslaan"],
            ["SKIP_TO_LIVE", "Doorgaan naar live"],
            ["STATISTICS", "Statistieken"],
            ["SUBTITLE_FORCED", "Afgedwongen"],
            ["SURROUND", "Surround"],
            ["TOGGLE_STEREOSCOPIC", "Stereoscopisch aan-/uitzetten"],
            ["UNDETERMINED_LANGUAGE", "Onbepaald"],
            ["UNMUTE", "Geluid aanzetten"],
            ["UNRECOGNIZED_LANGUAGE", "Onbekend"],
            ["VOLUME", "Volume"]
          ]));
          a.Xa("pl", /* @__PURE__ */ new Map([
            ["AD_DURATION", "Czas trwania reklamy"],
            ["AD_PROGRESS", "Reklama[AD_ON] z[NUM_ADS]"],
            ["AD_STATISTICS", "Statystyki reklam"],
            ["AD_TIME", "Reklama: [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", "Automatycznie"],
            ["BACK", "Wstecz"],
            ["CAPTIONS", "Napisy"],
            ["CAST", "Przesyaj..."],
            ["CHAPTERS", "Rozdziay"],
            ["DOWNLOAD_VIDEO_FRAME", "Zapisz klatk filmu"],
            ["ENTER_LOOP_MODE", "Odtwarzaj biecy film wptli"],
            ["ENTER_PICTURE_IN_PICTURE", "Wcz tryb obrazu wobrazie"],
            ["EXIT_FULL_SCREEN", "Zamknij peny ekran"],
            ["EXIT_LOOP_MODE", "Wycz odtwarzanie biecego filmu wptli"],
            ["EXIT_PICTURE_IN_PICTURE", "Wycz tryb obrazu wobrazie"],
            ["FAST_FORWARD", "Przewi do przodu"],
            ["FULL_SCREEN", "Peny ekran"],
            ["LANGUAGE", "Jzyk"],
            ["LIVE", "Na ywo"],
            ["LOOP", "Odtwarzaj wptli"],
            ["MORE_SETTINGS", "Wicej ustawie"],
            ["MULTIPLE_LANGUAGES", "Wiele jzykw"],
            ["MUTE", "Wycisz"],
            ["NOT_APPLICABLE", "Nie dotyczy"],
            ["OFF", "Wyczone"],
            ["ON", "Wczone"],
            ["PAUSE", "Wstrzymaj"],
            ["PICTURE_IN_PICTURE", "Obraz wobrazie"],
            ["PLAY", "Odtwrz"],
            ["PLAYBACK_RATE", "Szybko odtwarzania"],
            ["QUALITY", "Jako"],
            ["RECENTER_VR", "Wyrodkuj"],
            ["REPLAY", "Odtwrz ponownie"],
            ["RESOLUTION", "Rozdzielczo"],
            ["REWIND", "Przewi do tyu"],
            ["SEEK", "Szukaj"],
            ["SKIP_AD", "Pomi reklam"],
            ["SKIP_NEXT", "Dalej"],
            ["SKIP_PREVIOUS", "Poprzedni"],
            ["SKIP_TO_LIVE", "Przejd do transmisji na ywo"],
            ["STATISTICS", "Statystyki"],
            ["SUBTITLE_FORCED", "Wymuszone"],
            ["SURROUND", "Przestrzenny"],
            ["TOGGLE_STEREOSCOPIC", "Przecz tryb stereoskopowy"],
            ["UNDETERMINED_LANGUAGE", "Nie okrelono"],
            ["UNMUTE", "Wycz wyciszenie"],
            ["UNRECOGNIZED_LANGUAGE", "Nierozpoznany"],
            ["VOLUME", "Gono"]
          ]));
          a.Xa("pt-BR", /* @__PURE__ */ new Map([
            ["AD_DURATION", "Durao do anncio"],
            ["AD_PROGRESS", "Anncio [AD_ON] de [NUM_ADS]"],
            ["AD_STATISTICS", "Estatsticas de anncios"],
            ["AD_TIME", "Anncio: [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", "Automtica"],
            ["BACK", "Voltar"],
            ["CAPTIONS", "Legendas"],
            ["CAST", "Transmitir..."],
            ["CHAPTERS", "Captulos"],
            ["DOWNLOAD_VIDEO_FRAME", "Salvar frame do vdeo"],
            ["ENTER_LOOP_MODE", "Repetir o vdeo atual"],
            ["ENTER_PICTURE_IN_PICTURE", "Entrar no modo picture-in-picture"],
            ["EXIT_FULL_SCREEN", "Sair do modo tela cheia"],
            ["EXIT_LOOP_MODE", "Parar repetio do vdeo atual"],
            ["EXIT_PICTURE_IN_PICTURE", "Sair de picture-in-picture"],
            ["FAST_FORWARD", "Avanar"],
            ["FULL_SCREEN", "Tela cheia"],
            [
              "LANGUAGE",
              "Idioma"
            ],
            ["LIVE", "Ao vivo"],
            ["LOOP", "Repetir"],
            ["MORE_SETTINGS", "Mais definies"],
            ["MULTIPLE_LANGUAGES", "Vrios idiomas"],
            ["MUTE", "Desativar som"],
            ["NOT_APPLICABLE", "No relevante"],
            ["OFF", "Desativado"],
            ["ON", "Ativado"],
            ["PAUSE", "Pausar"],
            ["PICTURE_IN_PICTURE", "Picture-in-picture"],
            ["PLAY", "Reproduzir"],
            ["PLAYBACK_RATE", "Velocidade da reproduo"],
            ["QUALITY", "Qualidade"],
            ["RECENTER_VR", "Centralizar"],
            ["REPLAY", "Repetir"],
            ["RESOLUTION", "Resoluo"],
            [
              "REWIND",
              "Voltar"
            ],
            ["SEEK", "Procurar"],
            ["SKIP_AD", "Pular anncio"],
            ["SKIP_TO_LIVE", "Pular para transmisso ao vivo"],
            ["STATISTICS", "Estatsticas"],
            ["SUBTITLE_FORCED", "Exibio forada"],
            ["SURROUND", "Surround"],
            ["TOGGLE_STEREOSCOPIC", "Alternar imagem estereoscpica"],
            ["UNDETERMINED_LANGUAGE", "Indeterminado"],
            ["UNMUTE", "Ativar som"],
            ["UNRECOGNIZED_LANGUAGE", "No reconhecido"],
            ["VOLUME", "Volume"]
          ]));
          a.Xa("ru", /* @__PURE__ */ new Map([
            ["AD_DURATION", " "],
            ["AD_PROGRESS", " [AD_ON]  [NUM_ADS]"],
            ["AD_STATISTICS", " "],
            ["AD_TIME", ": [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", ""],
            ["BACK", ""],
            ["CAPTIONS", ""],
            ["CAST", "..."],
            ["CHAPTERS", ""],
            ["DOWNLOAD_VIDEO_FRAME", "  "],
            ["ENTER_LOOP_MODE", "  "],
            ["ENTER_PICTURE_IN_PICTURE", '   "  "'],
            ["EXIT_FULL_SCREEN", " "],
            ["EXIT_LOOP_MODE", "   "],
            ["EXIT_PICTURE_IN_PICTURE", '   "  "'],
            ["FAST_FORWARD", " "],
            ["FULL_SCREEN", " "],
            ["LANGUAGE", ""],
            ["LIVE", " "],
            ["LOOP", ""],
            ["MORE_SETTINGS", " "],
            ["MULTIPLE_LANGUAGES", " "],
            ["MUTE", " "],
            ["NOT_APPLICABLE", ""],
            ["OFF", "."],
            ["ON", "."],
            ["PAUSE", ""],
            ["PICTURE_IN_PICTURE", "  "],
            ["PLAY", ""],
            ["PLAYBACK_RATE", " "],
            ["QUALITY", ""],
            ["RECENTER_VR", " "],
            ["REPLAY", ""],
            ["RESOLUTION", ""],
            ["REWIND", " "],
            ["SEEK", ""],
            ["SKIP_AD", ""],
            ["SKIP_TO_LIVE", "     "],
            ["STATISTICS", ""],
            ["SUBTITLE_FORCED", " "],
            ["SURROUND", " "],
            ["TOGGLE_STEREOSCOPIC", "    "],
            ["UNDETERMINED_LANGUAGE", " "],
            ["UNMUTE", " "],
            ["UNRECOGNIZED_LANGUAGE", " "],
            ["VOLUME", ""]
          ]));
          a.Xa("th", /* @__PURE__ */ new Map([
            ["AD_DURATION", ""],
            ["AD_PROGRESS", " [AD_ON]  [NUM_ADS] "],
            ["AD_STATISTICS", ""],
            ["AD_TIME", ": [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", ""],
            ["BACK", ""],
            ["CAPTIONS", ""],
            ["CAST", "..."],
            ["CHAPTERS", ""],
            ["DOWNLOAD_VIDEO_FRAME", ""],
            ["ENTER_LOOP_MODE", ""],
            ["ENTER_PICTURE_IN_PICTURE", ""],
            ["EXIT_FULL_SCREEN", ""],
            [
              "EXIT_LOOP_MODE",
              ""
            ],
            ["EXIT_PICTURE_IN_PICTURE", ""],
            ["FAST_FORWARD", ""],
            ["FULL_SCREEN", ""],
            ["LANGUAGE", ""],
            ["LIVE", ""],
            ["LOOP", ""],
            ["MORE_SETTINGS", ""],
            ["MULTIPLE_LANGUAGES", ""],
            ["MUTE", ""],
            ["NOT_APPLICABLE", ""],
            ["OFF", ""],
            ["ON", ""],
            ["PAUSE", ""],
            ["PICTURE_IN_PICTURE", ""],
            ["PLAY", ""],
            ["PLAYBACK_RATE", ""],
            ["QUALITY", ""],
            ["RECENTER_VR", ""],
            ["REPLAY", ""],
            ["RESOLUTION", ""],
            ["REWIND", ""],
            ["SEEK", ""],
            ["SKIP_AD", ""],
            ["SKIP_TO_LIVE", ""],
            ["STATISTICS", ""],
            ["SUBTITLE_FORCED", ""],
            ["SURROUND", ""],
            ["TOGGLE_STEREOSCOPIC", "/"],
            ["UNDETERMINED_LANGUAGE", ""],
            ["UNMUTE", ""],
            ["UNRECOGNIZED_LANGUAGE", ""],
            ["VOLUME", ""]
          ]));
          a.Xa("tr", /* @__PURE__ */ new Map([
            ["AD_DURATION", "Reklam sresi"],
            ["AD_PROGRESS", "[AD_ON]/[NUM_ADS] reklam"],
            ["AD_STATISTICS", "Reklam istatistikleri"],
            ["AD_TIME", "Reklam: [AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", "Otomatik"],
            ["BACK", "Geri"],
            ["CAPTIONS", "Altyazlar"],
            ["CAST", "Yaynla..."],
            ["CHAPTERS", "Blmler"],
            ["DOWNLOAD_VIDEO_FRAME", "Video karesini kaydet"],
            ["ENTER_LOOP_MODE", "Mevcut videoyu dngye al"],
            ["ENTER_PICTURE_IN_PICTURE", "Pencere iinde Pencere moduna gir"],
            ["EXIT_FULL_SCREEN", "Tam ekrandan k"],
            ["EXIT_LOOP_MODE", "Mevcut videonun dngsn durdur"],
            ["EXIT_PICTURE_IN_PICTURE", "Pencere inde Pencereden k"],
            ["FAST_FORWARD", "leri sar"],
            ["FULL_SCREEN", "Tam ekran"],
            ["LANGUAGE", "Dil"],
            ["LIVE", "Canl"],
            ["LOOP", "Dng"],
            ["MORE_SETTINGS", "Daha fazla ayar"],
            ["MULTIPLE_LANGUAGES", "Birden ok dil"],
            ["MUTE", "Sesi kapat"],
            ["NOT_APPLICABLE", "Geerli deil"],
            ["OFF", "Kapal"],
            ["ON", "Ak"],
            ["PAUSE", "Duraklat"],
            ["PICTURE_IN_PICTURE", "Pencere inde Pencere"],
            ["PLAY", "Oynat"],
            ["PLAYBACK_RATE", "alma hz"],
            ["QUALITY", "Kalite"],
            ["RECENTER_VR", "Ortala"],
            ["REPLAY", "Tekrar Oynat"],
            ["RESOLUTION", "znrlk"],
            ["REWIND", "Geri sar"],
            ["SEEK", "Ara"],
            ["SKIP_AD", "Reklam Atla"],
            ["SKIP_TO_LIVE", "Canl yayna atla"],
            ["STATISTICS", "statistikler"],
            ["SUBTITLE_FORCED", "Zorunlu"],
            ["SURROUND", "Surround"],
            [
              "TOGGLE_STEREOSCOPIC",
              "Stereoskopik modu a/kapat"
            ],
            ["UNDETERMINED_LANGUAGE", "Belirsiz"],
            ["UNMUTE", "Sesi a"],
            ["UNRECOGNIZED_LANGUAGE", "Tannmayan"],
            ["VOLUME", "Ses"]
          ]));
          a.Xa("zh", /* @__PURE__ */ new Map([
            ["AD_DURATION", ""],
            ["AD_PROGRESS", " [AD_ON]/[NUM_ADS]"],
            ["AD_STATISTICS", ""],
            ["AD_TIME", "[AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", ""],
            ["BACK", ""],
            ["CAPTIONS", ""],
            ["CAST", ""],
            ["CHAPTERS", ""],
            ["DOWNLOAD_VIDEO_FRAME", ""],
            ["ENTER_LOOP_MODE", ""],
            ["ENTER_PICTURE_IN_PICTURE", ""],
            ["EXIT_FULL_SCREEN", ""],
            ["EXIT_LOOP_MODE", ""],
            ["EXIT_PICTURE_IN_PICTURE", ""],
            ["FAST_FORWARD", ""],
            ["FULL_SCREEN", ""],
            ["LANGUAGE", ""],
            ["LIVE", ""],
            ["LOOP", ""],
            ["MORE_SETTINGS", ""],
            ["MULTIPLE_LANGUAGES", ""],
            ["MUTE", ""],
            ["NOT_APPLICABLE", ""],
            ["OFF", ""],
            ["ON", ""],
            ["PAUSE", ""],
            ["PICTURE_IN_PICTURE", ""],
            ["PLAY", ""],
            ["PLAYBACK_RATE", ""],
            ["QUALITY", ""],
            [
              "RECENTER_VR",
              ""
            ],
            ["REPLAY", ""],
            ["RESOLUTION", ""],
            ["REWIND", ""],
            ["SEEK", ""],
            ["SKIP_AD", ""],
            ["SKIP_TO_LIVE", ""],
            ["STATISTICS", ""],
            ["SUBTITLE_FORCED", ""],
            ["SURROUND", ""],
            ["TOGGLE_STEREOSCOPIC", ""],
            ["UNDETERMINED_LANGUAGE", ""],
            ["UNMUTE", ""],
            ["UNRECOGNIZED_LANGUAGE", ""],
            ["VOLUME", ""]
          ]));
          a.Xa("zh-TW", /* @__PURE__ */ new Map([
            ["AD_DURATION", ""],
            ["AD_PROGRESS", " [AD_ON]/[NUM_ADS]"],
            ["AD_STATISTICS", ""],
            ["AD_TIME", "[AD_TIME]"],
            ["AIRPLAY", "AirPlay"],
            ["AUTO_QUALITY", ""],
            ["BACK", ""],
            ["CAPTIONS", ""],
            ["CAST", "..."],
            ["CHAPTERS", ""],
            ["DOWNLOAD_VIDEO_FRAME", ""],
            ["ENTER_LOOP_MODE", ""],
            ["ENTER_PICTURE_IN_PICTURE", ""],
            ["EXIT_FULL_SCREEN", ""],
            ["EXIT_LOOP_MODE", ""],
            ["EXIT_PICTURE_IN_PICTURE", ""],
            ["FAST_FORWARD", ""],
            ["FULL_SCREEN", ""],
            ["LANGUAGE", ""],
            ["LIVE", ""],
            ["LOOP", ""],
            ["MORE_SETTINGS", ""],
            ["MULTIPLE_LANGUAGES", ""],
            ["MUTE", ""],
            ["NOT_APPLICABLE", ""],
            ["OFF", ""],
            ["ON", ""],
            ["PAUSE", ""],
            ["PICTURE_IN_PICTURE", ""],
            ["PLAY", ""],
            ["PLAYBACK_RATE", ""],
            ["QUALITY", ""],
            ["RECENTER_VR", ""],
            ["REPLAY", ""],
            ["RESOLUTION", ""],
            [
              "REWIND",
              ""
            ],
            ["SEEK", ""],
            ["SKIP_AD", ""],
            ["SKIP_TO_LIVE", ""],
            ["STATISTICS", ""],
            ["SUBTITLE_FORCED", ""],
            ["SURROUND", ""],
            ["TOGGLE_STEREOSCOPIC", ""],
            ["UNDETERMINED_LANGUAGE", ""],
            ["UNMUTE", ""],
            ["UNRECOGNIZED_LANGUAGE", ""],
            ["VOLUME", ""]
          ]));
          a.Li(navigator.languages || []);
          return a;
        }
        S("shaka.ui.Controls", Z);
        Z.prototype.incrementRoll = Z.prototype.Ah;
        Z.prototype.incrementPitch = Z.prototype.yh;
        Z.prototype.incrementYaw = Z.prototype.Bh;
        Z.prototype.toggleStereoscopicMode = Z.prototype.$d;
        Z.prototype.setVRFieldOfView = Z.prototype.xm;
        Z.prototype.getVRFieldOfView = Z.prototype.vl;
        Z.prototype.getVRNorth = Z.prototype.wl;
        Z.prototype.isPlayingVR = Z.prototype.Xb;
        Z.prototype.canPlayVR = Z.prototype.Lg;
        Z.prototype.hideUI = Z.prototype.bj;
        Z.prototype.showUI = Z.prototype.zm;
        Z.prototype.isOpaque = Z.prototype.Ca;
        Z.prototype.hideAdUI = Z.prototype.aj;
        Z.prototype.showAdUI = Z.prototype.Rj;
        Z.prototype.togglePiP = Z.prototype.cd;
        Z.prototype.isPiPEnabled = Z.prototype.Md;
        Z.prototype.isPiPAllowed = Z.prototype.Ef;
        Z.prototype.toggleFullScreen = Z.prototype.og;
        Z.prototype.isFullScreenEnabled = Z.prototype.xb;
        Z.prototype.isFullScreenSupported = Z.prototype.ve;
        Z.prototype.hideSettingsMenus = Z.prototype.Wc;
        Z.prototype.anySettingsMenusAreOpen = Z.prototype.Lc;
        Z.prototype.setLastTouchEventTime = Z.prototype.Mj;
        Z.prototype.getDisplayTime = Z.prototype.ph;
        Z.prototype.isCastAllowed = Z.prototype.Dl;
        Z.prototype.setSeeking = Z.prototype.ii;
        Z.prototype.isSeeking = Z.prototype.Jl;
        Z.prototype.getConfig = Z.prototype.Hk;
        Z.prototype.getClientSideAdContainer = Z.prototype.Gk;
        Z.prototype.getServerSideAdContainer = Z.prototype.jl;
        Z.prototype.getControlsContainer = Z.prototype.Kk;
        Z.prototype.getLocalPlayer = Z.prototype.Tk;
        Z.prototype.getPlayer = Z.prototype.Wb;
        Z.prototype.getLocalVideo = Z.prototype.Uk;
        Z.prototype.getVideo = Z.prototype.Vc;
        Z.prototype.getVideoContainer = Z.prototype.yl;
        Z.prototype.getLocalization = Z.prototype.Vk;
        Z.prototype.getCastProxy = Z.prototype.Dk;
        Z.prototype.getAd = Z.prototype.getAd;
        Z.prototype.setEnabledNativeControls = Z.prototype.Lj;
        Z.prototype.setEnabledShakaControls = Z.prototype.di;
        Z.prototype.configure = Z.prototype.configure;
        Z.prototype.loadComplete = Z.prototype.Ml;
        Z.prototype.allowCast = Z.prototype.kk;
        Z.registerSeekBar = function(a) {
          AI = a;
        };
        Z.registerElement = iI;
        Z.prototype.destroy = Z.prototype.destroy;
        var jI = /* @__PURE__ */ new Map(), AI = new rH();
        function II(a, b) {
          function c() {
            return JI(d);
          }
          LG.call(this, a, b);
          var d = this;
          this.m = this.controls.g;
          this.l = this.controls.i;
          this.u = this.controls.l;
          this.j = [];
          KI(this);
          this.g = V("div");
          this.g.classList.add("shaka-overflow-menu");
          this.g.classList.add("shaka-no-propagation");
          this.g.classList.add("shaka-show-controls-on-mouse-over");
          this.g.classList.add("shaka-hidden");
          this.l.appendChild(this.g);
          LI(this);
          this.eventManager.o(this.localization, "locale-updated", function() {
            MI(d);
          });
          this.eventManager.o(
            this.localization,
            "locale-changed",
            function() {
              MI(d);
            }
          );
          this.eventManager.o(this.adManager, "ad-started", function() {
            d.ad && d.ad.isLinear() && RG(d.h, false);
          });
          this.eventManager.o(this.adManager, "ad-stopped", function() {
            RG(d.h, true);
          });
          this.eventManager.o(this.controls, "submenuopen", function() {
            RG(d.g, false);
          });
          this.eventManager.o(this.g, "touchstart", function(e) {
            d.controls.Mj(Date.now());
            e.stopPropagation();
          });
          this.eventManager.o(this.h, "click", function() {
            d.controls.Ca() && NI(d);
          });
          MI(this);
          this.ad && this.ad.isLinear() && RG(this.h, false);
          this.i = null;
          window2.ResizeObserver ? (this.i = new ResizeObserver(c), this.i.observe(this.controls.l)) : this.eventManager.o(window2, "resize", c);
        }
        la(II, LG);
        II.prototype.release = function() {
          this.l = null;
          for (var a = u(this.j), b = a.next(); !b.done; b = a.next()) b.value.release();
          this.j = [];
          this.i && (this.i.disconnect(), this.i = null);
          LG.prototype.release.call(this);
        };
        function OI(a, b) {
          PI.set(a, b);
        }
        function KI(a) {
          a.h = Lj();
          a.h.classList.add("shaka-overflow-menu-button");
          a.h.classList.add("shaka-no-propagation");
          a.h.classList.add("shaka-tooltip");
          new MG(a.h).use("M433-80q-27 0-46.5-18T363-142l-9-66q-13-5-24.5-12T307-235l-62 26q-25 11-50 2t-39-32l-47-82q-14-23-8-49t27-43l53-40q-1-7-1-13.5v-27q0-6.5 1-13.5l-53-40q-21-17-27-43t8-49l47-82q14-23 39-32t50 2l62 26q11-8 23-15t24-12l9-66q4-26 23.5-44t46.5-18h94q27 0 46.5 18t23.5 44l9 66q13 5 24.5 12t22.5 15l62-26q25-11 50-2t39 32l47 82q14 23 8 49t-27 43l-53 40q1 7 1 13.5v27q0 6.5-2 13.5l53 40q21 17 27 43t-8 49l-48 82q-14 23-39 32t-50-2l-60-26q-11 8-23 15t-24 12l-9 66q-4 26-23.5 44T527-80h-94Zm49-260q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Z");
          var b = V("span");
          b.classList.add("shaka-overflow-quality-mark");
          b.style.display = "none";
          a.h.appendChild(b);
          a.parent.appendChild(a.h);
        }
        function LI(a) {
          for (var b = u(a.m.overflowMenuButtons), c = b.next(); !c.done; c = b.next()) c = c.value, PI.get(c) ? (c = PI.get(c), a.j.push(c.create(a.g, a.controls))) : ab("Unrecognized overflow menu element requested:", c);
        }
        function NI(a) {
          if (a.controls.Lc()) a.controls.Wc();
          else {
            RG(a.g, true);
            YH(a.controls);
            var b = function(c) {
              return c.classList.contains("shaka-hidden") == 0;
            };
            nb(a.g.childNodes, b) && ob(a.g.childNodes, b)[0].focus();
            JI(a);
          }
        }
        function MI(a) {
          a.h.ariaLabel = a.localization.resolve("MORE_SETTINGS");
        }
        function JI(a) {
          var b = a.g.getBoundingClientRect(), c = window2.getComputedStyle(a.g), d = parseFloat(c.paddingTop);
          c = parseFloat(c.paddingBottom);
          var e = a.u.getBoundingClientRect();
          a.g.style.maxHeight = b.bottom - e.top - d - c + "px";
        }
        S("shaka.ui.OverflowMenu", II);
        II.registerElement = OI;
        function QI() {
        }
        QI.prototype.create = function(a, b) {
          return new II(a, b);
        };
        iI("overflow_menu", new QI());
        var PI = /* @__PURE__ */ new Map();
        function RI(a, b) {
          function c(e) {
            return d.i[e];
          }
          LG.call(this, a, b);
          var d = this;
          this.h = Lj();
          this.h.classList.add("shaka-ad-statistics-button");
          this.u = new MG(this.h, "M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Zm120 200q-17 0-28.5 11.5T280-520v200q0 17 11.5 28.5T320-280q17 0 28.5-11.5T360-320v-200q0-17-11.5-28.5T320-560Zm160-120q-17 0-28.5 11.5T440-640v320q0 17 11.5 28.5T480-280q17 0 28.5-11.5T520-320v-320q0-17-11.5-28.5T480-680Zm160 240q-17 0-28.5 11.5T600-400v80q0 17 11.5 28.5T640-280q17 0 28.5-11.5T680-320v-80q0-17-11.5-28.5T640-440Z");
          a = V("label");
          a.classList.add("shaka-overflow-button-label");
          a.classList.add("shaka-simple-overflow-button-label-inline");
          this.A = V("span");
          a.appendChild(this.A);
          this.l = V("span");
          this.l.classList.add("shaka-current-selection-span");
          a.appendChild(this.l);
          this.h.appendChild(a);
          this.parent.appendChild(this.h);
          this.g = V("div");
          this.g.classList.add("shaka-no-propagation");
          this.g.classList.add("shaka-show-controls-on-mouse-over");
          this.g.classList.add("shaka-ad-statistics-container");
          this.g.classList.add("shaka-hidden");
          this.controls.i.appendChild(this.g);
          this.D = [];
          this.i = this.adManager.getStats();
          RG(this.h, this.i.started > 0);
          this.m = /* @__PURE__ */ new Map();
          this.C = (/* @__PURE__ */ new Map()).set("loadTimes", function(e) {
            var f = 0;
            e = u(d.i[e]);
            for (var g = e.next(); !g.done; g = e.next()) f += parseFloat(g.value);
            return f;
          }).set("averageLoadTime", c).set("started", c).set("overlayAds", c).set("playedCompletely", c).set("skipped", c).set("errors", c);
          this.j = new Bf(function() {
            d.i = d.adManager.getStats();
            for (var e = u(d.D), f = e.next(); !f.done; f = e.next()) f = f.value, d.m.get(f).textContent = d.C.get(f)(f);
          });
          SI(this);
          TI(this);
          this.eventManager.o(this.localization, "locale-updated", function() {
            SI(d);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            SI(d);
          });
          this.eventManager.o(this.h, "click", function() {
            d.controls.Ca() && (UI(d), SI(d));
          });
          this.eventManager.o(this.player, "loading", function() {
            RG(d.h, false);
          });
          this.eventManager.o(this.adManager, "ad-started", function() {
            RG(d.h, true);
          });
        }
        la(RI, LG);
        function UI(a) {
          a.g.classList.contains("shaka-hidden") ? (a.u.use("M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm120-440q-17 0-28.5 11.5T280-520v200q0 17 11.5 28.5T320-280q17 0 28.5-11.5T360-320v-200q0-17-11.5-28.5T320-560Zm160-120q-17 0-28.5 11.5T440-640v320q0 17 11.5 28.5T480-280q17 0 28.5-11.5T520-320v-320q0-17-11.5-28.5T480-680Zm160 240q-17 0-28.5 11.5T600-400v80q0 17 11.5 28.5T640-280q17 0 28.5-11.5T680-320v-80q0-17-11.5-28.5T640-440Z"), a.j.wa(0.1), RG(a.g, true)) : (a.u.use("M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Zm120 200q-17 0-28.5 11.5T280-520v200q0 17 11.5 28.5T320-280q17 0 28.5-11.5T360-320v-200q0-17-11.5-28.5T320-560Zm160-120q-17 0-28.5 11.5T440-640v320q0 17 11.5 28.5T480-280q17 0 28.5-11.5T520-320v-320q0-17-11.5-28.5T480-680Zm160 240q-17 0-28.5 11.5T600-400v80q0 17 11.5 28.5T640-280q17 0 28.5-11.5T680-320v-80q0-17-11.5-28.5T640-440Z"), a.j.stop(), RG(a.g, false));
        }
        function SI(a) {
          a.A.textContent = a.localization.resolve("AD_STATISTICS");
          a.h.ariaLabel = a.localization.resolve("AD_STATISTICS");
          a.l.textContent = a.localization.resolve(a.g.classList.contains("shaka-hidden") ? "OFF" : "ON");
        }
        function VI(a, b) {
          var c = V("div"), d = V("label");
          d.textContent = b + ":";
          c.appendChild(d);
          d = V("span");
          d.textContent = a.C.get(b)(b);
          c.appendChild(d);
          a.m.set(b, d);
          return c;
        }
        function TI(a) {
          var b = V("div");
          b.classList.add("shaka-no-propagation");
          b.classList.add("shaka-statistics-close");
          var c = new MG(b, "M480-424 284-228q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536-480l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480-424Z").g;
          c.classList.add("material-icons", "notranslate");
          a.g.appendChild(b);
          a.eventManager.o(c, "click", function() {
            UI(a);
          });
          b = u(a.controls.g.adStatisticsList);
          for (c = b.next(); !c.done; c = b.next()) c = c.value, c in a.i ? (a.g.appendChild(VI(a, c)), a.D.push(c)) : ab("Unrecognized ad statistic element:", c);
        }
        RI.prototype.release = function() {
          this.j.stop();
          this.j = null;
          LG.prototype.release.call(this);
        };
        S("shaka.ui.AdStatisticsButton", RI);
        function WI() {
        }
        WI.prototype.create = function(a, b) {
          return new RI(a, b);
        };
        OI("ad_statistics", new WI());
        WG("ad_statistics", new WI());
        function XI(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.g = Lj();
          this.g.classList.add("shaka-airplay-button");
          this.g.classList.add("shaka-tooltip");
          this.g.ariaPressed = "false";
          new MG(this.g).use("M312-120q-14 0-22-9.5t-8-20.5q0-5 2-10.5t7-10.5l161-161q6-6 13-9t15-3q8 0 15 3t13 9l161 161q5 5 7 10.5t2 10.5q0 11-8 20.5t-22 9.5H312ZM160-840h640q33 0 56.5 23.5T880-760v480q0 33-23.5 56.5T800-200h-7q-16 0-30.5-6T737-223L565-395q-17-17-39-26t-46-9q-24 0-46 9t-39 26L223-223q-11 11-25.5 17t-30.5 6h-7q-33 0-56.5-23.5T80-280v-480q0-33 23.5-56.5T160-840Z");
          window2.WebKitPlaybackTargetAvailabilityEvent || this.g.classList.add("shaka-hidden");
          a = V("label");
          a.classList.add("shaka-overflow-button-label");
          a.classList.add("shaka-overflow-menu-only");
          this.i = V("span");
          a.appendChild(this.i);
          this.h = V("span");
          this.h.classList.add("shaka-current-selection-span");
          a.appendChild(this.h);
          this.g.appendChild(a);
          this.parent.appendChild(this.g);
          YI(this);
          ZI(this);
          this.eventManager.o(this.localization, "locale-updated", function() {
            YI(c);
          });
          this.eventManager.o(
            this.localization,
            "locale-changed",
            function() {
              YI(c);
            }
          );
          this.eventManager.o(this.g, "click", function() {
            c.controls.Ca() && c.controls.Vc().webkitShowPlaybackTargetPicker();
          });
          a = this.controls.Vc();
          this.eventManager.o(a, "webkitplaybacktargetavailabilitychanged", function(d) {
            var e = c.player.l == zr;
            RG(c.g, d.availability == "available" && e);
          });
          this.eventManager.o(a, "webkitcurrentplaybacktargetiswirelesschanged", function() {
            ZI(c);
          });
        }
        la(XI, LG);
        function ZI(a) {
          var b = a.controls.Vc();
          a.g.ariaPressed = b && b.webkitCurrentPlaybackTargetIsWireless ? "true" : "false";
        }
        function YI(a) {
          a.g.ariaLabel = a.localization.resolve("AIRPLAY");
          a.i.textContent = a.localization.resolve("AIRPLAY");
        }
        S("shaka.ui.AirPlayButton", XI);
        function $I() {
        }
        $I.prototype.create = function(a, b) {
          return new XI(a, b);
        };
        OI("airplay", new $I());
        iI("airplay", new $I());
        function aJ(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.g = document.createElement("canvas");
          this.g.style.position = "absolute";
          this.g.style.top = "0";
          this.g.style.left = "0";
          this.g.style.pointerEvents = "none";
          this.parent.appendChild(this.g);
          bJ(this);
          this.i = this.h = null;
          window2.ResizeObserver ? (this.i = new ResizeObserver(function() {
            return bJ(c);
          }), this.i.observe(this.parent)) : window2.addEventListener("resize", function() {
            return bJ(c);
          });
        }
        la(aJ, LG);
        function cJ(a) {
          return (a = a.g.getContext("2d")) ? a : null;
        }
        function bJ(a) {
          a.g.width = a.parent.offsetWidth;
          a.g.height = a.parent.offsetHeight;
        }
        aJ.prototype.ig = function(a, b) {
          a = { type: "static", text: a, position: "top-right", color: "rgba(255, 255, 255, 0.7)", size: 20, alpha: 0.7, interval: 2e3, skip: 500, displayDuration: 2e3, transitionDuration: 0.5 };
          b = Object.assign({}, a, b || a);
          if (b.type === "static") {
            if (a = cJ(this)) {
              a.clearRect(0, 0, this.g.width, this.g.height);
              a.globalAlpha = b.alpha;
              a.fillStyle = b.color;
              a.font = b.size + "px Arial";
              var c = a.measureText(b.text);
              switch (b.position) {
                case "top-left":
                  c = 20;
                  var d = b.size + 20;
                  break;
                case "top-right":
                  c = this.g.width - c.width - 20;
                  d = b.size + 20;
                  break;
                case "bottom-left":
                  c = 20;
                  d = this.g.height - 20;
                  break;
                case "bottom-right":
                  c = this.g.width - c.width - 20;
                  d = this.g.height - 20;
                  break;
                default:
                  c = (this.g.width - c.width) / 2, d = (this.g.height + b.size) / 2;
              }
              a.fillText(b.text, c, d);
            }
          } else b.type === "dynamic" && dJ(this, b);
        };
        function dJ(a, b) {
          function c() {
            if (a.h) {
              e.clearRect(0, 0, a.g.width, a.g.height);
              switch (h) {
                case "fadeIn":
                  g = Math.min(b.alpha, g + l);
                  g >= b.alpha && (h = "display");
                  break;
                case "display":
                  --k2 <= 0 && (h = "fadeOut");
                  break;
                case "fadeOut":
                  g = Math.max(0, g - l), g <= 0 && (h = "transition", f = d(), k2 = Math.round(b.displayDuration * 60), h = "fadeIn");
              }
              g > 0 && (e.globalAlpha = g, e.fillStyle = b.color, e.font = b.size + "px Arial", e.fillText(b.text, f.left, f.top));
              a.h && (a.h = requestAnimationFrame(c));
            }
          }
          function d() {
            e.font = b.size + "px Arial";
            var n = e.measureText(b.text).width, q = b.size;
            n = [{ left: 20, top: q + 20 }, { left: a.g.width - n - 20, top: q + 20 }, { left: 20, top: a.g.height - 20 }, { left: a.g.width - n - 20, top: a.g.height - 20 }, { left: (a.g.width - n) / 2, top: (a.g.height + q) / 2 }];
            q = n[m];
            m = (m + 1) % n.length;
            return q;
          }
          var e = a.g.getContext("2d"), f = { left: 0, top: 0 }, g = 0, h = "fadeIn", k2 = Math.round(b.displayDuration * 60), l = 1 / (Math.round(b.transitionDuration * 60) / 2), m = 0;
          f = d();
          a.h = requestAnimationFrame(c);
        }
        aJ.prototype.$f = function() {
          this.h && (cancelAnimationFrame(this.h), this.h = null);
          var a = cJ(this);
          a && a.clearRect(0, 0, this.g.width, this.g.height);
        };
        aJ.prototype.release = function() {
          var a = this;
          this.g && this.g.parentNode && this.g.parentNode.removeChild(this.g);
          this.i ? (this.i.disconnect(), this.i = null) : window2.removeEventListener("resize", function() {
            return bJ(a);
          });
          LG.prototype.release.call(this);
        };
        S("shaka.ui.Watermark", aJ);
        aJ.prototype.removeWatermark = aJ.prototype.$f;
        aJ.prototype.setTextWatermark = aJ.prototype.ig;
        function eJ(a, b, c, d) {
          d = d === void 0 ? null : d;
          this.j = a;
          this.l = b;
          this.h = fJ(this);
          var e = "", f = false;
          b.dataset && b.dataset.shakaPlayerCastReceiverId ? (f = b.dataset, e = f.shakaPlayerCastReceiverId, f = f.shakaPlayerCastAndroidReceiverCompatible === "true") : c.dataset && c.dataset.shakaPlayerCastReceiverId && (f = c.dataset, e = f.shakaPlayerCastReceiverId, f = f.shakaPlayerCastAndroidReceiverCompatible === "true");
          e.length && (this.h.castReceiverAppId = e, this.h.castAndroidReceiverCompatible = f);
          b.dataset.shakaPlayerContainer = "";
          b.ui = this;
          this.Fh() && b.classList.add("shaka-mobile");
          this.g = new Z(a, b, c, d, this.h);
          c.controls || a.ji(b);
          b.ui = this;
          c.ui = this;
          this.i = null;
        }
        p = eJ.prototype;
        p.destroy = function(a) {
          a = a === void 0 ? false : a;
          var b = this;
          return Q(function(c) {
            if (c.g == 1) return b.g ? F(c, b.g.destroy(a), 2) : c.B(2);
            if (c.g != 4) return b.g = null, b.j ? F(c, b.j.destroy(), 4) : c.B(4);
            b.j = null;
            b.i = null;
            H(c);
          });
        };
        p.Fh = function() {
          return Rb().Ka() == "MOBILE";
        };
        p.Gh = function() {
          return Rb().Ka() == "TV";
        };
        p.getConfiguration = function() {
          var a = fJ(this);
          zn(a, this.h, fJ(this), {}, "");
          return a;
        };
        p.configure = function(a, b) {
          arguments.length == 2 && typeof a == "string" && (a = An(a, b));
          var c = Object.assign({}, this.h);
          zn(c, a, fJ(this), {}, "");
          var d = Cn(c, this.h);
          if (Object.keys(d).length && (this.h = c, this.g.configure(this.h), this.g.dispatchEvent(new T("uiupdated")), (c = this.h.castSenderUrl) && this.h.castReceiverAppId && window2.chrome && !chrome.cast && !this.Gh())) {
            d = false;
            for (var e = u(document.getElementsByTagName("script")), f = e.next(); !f.done; f = e.next()) if (f.value.src === c) {
              d = true;
              break;
            }
            d || (d = document.createElement("script"), d.src = c, d.defer = true, document.head.appendChild(d));
          }
        };
        p.Jk = function() {
          return this.g;
        };
        p.vm = function(a) {
          this.g.di(a);
        };
        p.ig = function(a, b) {
          a && !this.i && this.l && this.g && (this.i = new aJ(this.l, this.g));
          this.i && this.i.ig(a, b);
        };
        p.$f = function() {
          this.i && this.i.$f();
        };
        function fJ(a) {
          var b = "play_pause skip_previous skip_next mute volume time_and_duration spacer overflow_menu".split(" ");
          window2.chrome && b.push("cast");
          "remote" in HTMLMediaElement.prototype ? b.push("remote") : window2.WebKitPlaybackTargetAvailabilityEvent && b.push("airplay");
          b.push("fullscreen");
          b = {
            controlPanelElements: b,
            overflowMenuButtons: "captions quality language chapter picture_in_picture playback_rate recenter_vr toggle_stereoscopic".split(" "),
            statisticsList: "width height currentCodecs corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent manifestSizeBytes bytesDownloaded nonFatalErrorCount manifestPeriodCount manifestGapCount".split(" "),
            adStatisticsList: "loadTimes averageLoadTime started overlayAds playedCompletely skipped errors".split(" "),
            contextMenuElements: ["loop", "picture_in_picture", "save_video_frame", "statistics", "ad_statistics"],
            playbackRates: [0.5, 0.75, 1, 1.25, 1.5, 1.75, 2],
            fastForwardRates: [2, 4, 8, 1],
            rewindRates: [-1, -2, -4, -8],
            addSeekBar: true,
            addBigPlayButton: false,
            customContextMenu: false,
            castReceiverAppId: "",
            castAndroidReceiverCompatible: false,
            clearBufferOnQualityChange: true,
            showUnbufferedStart: false,
            seekBarColors: {
              base: "rgba(255, 255, 255, 0.3)",
              buffered: "rgba(255, 255, 255, 0.54)",
              played: "rgb(255, 255, 255)",
              adBreaks: "rgb(255, 204, 0)"
            },
            volumeBarColors: { base: "rgba(255, 255, 255, 0.54)", level: "rgb(255, 255, 255)" },
            qualityMarks: { 720: "", 1080: "HD", 1440: "2K", 2160: "4K", 4320: "8K" },
            trackLabelFormat: gJ,
            textTrackLabelFormat: gJ,
            fadeDelay: 0,
            closeMenusDelay: 2,
            doubleClickForFullscreen: true,
            singleClickForPlayAndPause: true,
            enableKeyboardPlaybackControls: true,
            enableFullscreenOnRotation: false,
            forceLandscapeOnFullscreen: false,
            enableTooltips: true,
            keyboardSeekDistance: 5,
            keyboardLargeSeekDistance: 60,
            fullScreenElement: a.l,
            preferDocumentPictureInPicture: true,
            showAudioChannelCountVariants: true,
            seekOnTaps: false,
            tapSeekDistance: 10,
            refreshTickInSeconds: 0.125,
            displayInVrMode: false,
            defaultVrProjectionMode: "equirectangular",
            setupMediaSession: true,
            preferVideoFullScreenInVisionOS: true,
            showAudioCodec: true,
            showVideoCodec: true,
            castSenderUrl: "https://www.gstatic.com/cv/js/sender/v1/cast_sender.js",
            enableKeyboardPlaybackControlsInWindow: false,
            alwaysShowVolumeBar: false
          };
          if (a.Fh()) {
            b.addBigPlayButton = true;
            b.singleClickForPlayAndPause = false;
            b.seekOnTaps = true;
            b.enableTooltips = false;
            b.doubleClickForFullscreen = false;
            a = Rb();
            b.enableFullscreenOnRotation = a.Ja() !== "WEBKIT";
            b.forceLandscapeOnFullscreen = true;
            var c = ["play_pause", "skip_previous", "skip_next", "volume"];
            b.controlPanelElements = b.controlPanelElements.filter(function(e) {
              return !c.includes(e);
            });
            b.overflowMenuButtons = b.overflowMenuButtons.filter(function(e) {
              return !c.includes(e);
            });
            b.contextMenuElements = b.contextMenuElements.filter(function(e) {
              return !c.includes(e);
            });
          } else if (a.Gh()) {
            b.addBigPlayButton = true;
            b.singleClickForPlayAndPause = false;
            b.enableTooltips = false;
            b.doubleClickForFullscreen = false;
            var d = "play_pause cast remote airplay volume save_video_frame".split(" ");
            b.controlPanelElements = b.controlPanelElements.filter(function(e) {
              return !d.includes(e);
            });
            b.overflowMenuButtons = b.overflowMenuButtons.filter(function(e) {
              return !d.includes(e);
            });
            b.contextMenuElements = b.contextMenuElements.filter(function(e) {
              return !d.includes(e);
            });
          }
          return b;
        }
        function hJ() {
          var a, b, c, d, e, f, g, h, k2, l, m, n, q, r, t, w, v, z, y, A, C, E;
          return Q(function(D) {
            switch (D.g) {
              case 1:
                $C();
                if (!Wq()) return iJ("shaka-ui-load-failed", jJ), D.return();
                a = document.querySelectorAll("[data-shaka-player-container]");
                b = document.querySelectorAll("[data-shaka-player]");
                c = document.querySelectorAll("[data-shaka-player-canvas]");
                d = document.querySelectorAll("[data-shaka-player-vr-canvas]");
                if (!b.length && !a.length) {
                  D.B(2);
                  break;
                }
                if (b.length && !a.length) {
                  e = u(b);
                  for (f = e.next(); !f.done; f = e.next()) g = f.value, g.ui || (h = document.createElement("div"), k2 = g.parentElement, k2.replaceChild(h, g), h.appendChild(g), l = kJ(h, c, d), m = l.ij, n = l.gk, lJ(h, g, m, n));
                  D.B(2);
                  break;
                }
                q = u(a);
                r = q.next();
              case 4:
                if (r.done) {
                  D.B(2);
                  break;
                }
                t = r.value;
                if (t.ui) {
                  D.B(5);
                  break;
                }
                w = null;
                v = u(b);
                for (z = v.next(); !z.done; z = v.next()) if (y = z.value, y.parentElement == t) {
                  w = y;
                  break;
                }
                w || (w = document.createElement("video"), w.setAttribute("playsinline", ""), t.appendChild(w));
                A = kJ(t, c, d);
                C = A.ij;
                E = A.gk;
                ra(D, 7);
                return F(D, lJ(t, w, C, E), 9);
              case 9:
                ta(D, 5);
                break;
              case 7:
                return ua(D), iJ("shaka-ui-load-failed", mJ), D.return();
              case 5:
                r = q.next();
                D.B(4);
                break;
              case 2:
                iJ("shaka-ui-loaded"), H(D);
            }
          });
        }
        function iJ(a, b) {
          var c = null;
          b != void 0 && (c = { reasonCode: b });
          a = new CustomEvent(a, { detail: c });
          document.dispatchEvent(a);
        }
        function lJ(a, b, c, d) {
          var e, f, g, h, k2, l, m, n, q, r;
          return Q(function(t) {
            switch (t.g) {
              case 1:
                e = new X();
                f = new eJ(e, a, b, d ? d : null);
                e.Gi(c);
                b.controls && f.g.Lj(true);
                g = [];
                if (h = b.getAttribute("src")) g.push(h), b.removeAttribute("src");
                k2 = u(b.getElementsByTagName("source"));
                for (l = k2.next(); !l.done; l = k2.next()) m = l.value, g.push(m.src), b.removeChild(m);
                return F(t, e.cc(b), 2);
              case 2:
                n = u(g), q = n.next();
              case 3:
                if (q.done) {
                  t.B(0);
                  break;
                }
                r = q.value;
                ra(t, 6);
                return F(t, f.g.Wb().load(r), 8);
              case 8:
                t.B(0);
                break;
              case 6:
                ua(t);
              case 4:
                q = n.next(), t.B(3);
            }
          });
        }
        function kJ(a, b, c) {
          var d = null;
          b = u(b);
          for (var e = b.next(); !e.done; e = b.next()) if (e = e.value, e.parentElement == a) {
            d = e;
            break;
          }
          d || (d = document.createElement("canvas"), d.classList.add("shaka-canvas-container"), a.appendChild(d));
          b = null;
          c = u(c);
          for (e = c.next(); !e.done; e = c.next()) if (e = e.value, e.parentElement == a) {
            b = e;
            break;
          }
          return { ij: d, gk: b };
        }
        S("shaka.ui.Overlay", eJ);
        eJ.prototype.removeWatermark = eJ.prototype.$f;
        eJ.prototype.setTextWatermark = eJ.prototype.ig;
        eJ.prototype.setEnabled = eJ.prototype.vm;
        eJ.prototype.getControls = eJ.prototype.Jk;
        eJ.prototype.configure = eJ.prototype.configure;
        eJ.prototype.getConfiguration = eJ.prototype.getConfiguration;
        eJ.prototype.isSmartTV = eJ.prototype.Gh;
        eJ.prototype.isMobile = eJ.prototype.Fh;
        eJ.prototype.destroy = eJ.prototype.destroy;
        var gJ = 0;
        eJ.TrackLabelFormat = { LANGUAGE: gJ, ROLE: 1, LANGUAGE_ROLE: 2, LABEL: 3 };
        var jJ = 0, mJ = 1;
        eJ.FailReasonCode = { NO_BROWSER_SUPPORT: jJ, PLAYER_FAILED_TO_LOAD: mJ };
        document.readyState == "complete" ? Q(function(a) {
          if (a.g == 1) return F(a, Promise.resolve(), 2);
          hJ();
          H(a);
        }) : window2.addEventListener("load", hJ);
        function nJ(a) {
          function b(d) {
            return { codecs: d.codecs, channelCount: d.channelCount, language: d.language, roles: d.roles, spatialAudio: d.spatialAudio };
          }
          var c = b(a[0]);
          return a.every(function(d) {
            return JSON.stringify(b(d)) === JSON.stringify(c);
          });
        }
        function oJ(a, b, c, d, e, f, g, h) {
          function k2(J) {
            var L = "";
            J == "aac" ? L = "AAC" : J === "ac-3" ? L = "Dolby" : J === "ec-3" ? L = "DD+" : J === "ac-4" ? L = "Dolby AC-4" : J === "opus" ? L = "Opus" : J === "flac" && (L = "fLaC");
            return L ? " " + L : L;
          }
          function l(J) {
            var L = "";
            J >= 5 && (L = " " + e.resolve("SURROUND"));
            return L;
          }
          function m(J, L, K, N, P, O) {
            L = [J, L, O];
            g && N != null && L.push(N);
            h && n(J) && P && L.push(P);
            K && f == 3 && L.push(K);
            return L.join(": ");
          }
          function n(J) {
            return r.has(J) && r.get(J).size > 1;
          }
          var q = a.find(function(J) {
            return J.active == 1;
          });
          a.length > 1 && a[0].label && f != 3 && nJ(a) && (f = 3);
          for (var r = /* @__PURE__ */ new Map(), t = u(a), w = t.next(); !w.done; w = t.next()) w = w.value, w.codecs && (r.has(w.language) || r.set(w.language, /* @__PURE__ */ new Set()), r.get(w.language).add(jf(w.codecs)));
          t = NG(b);
          Pj(b);
          b.appendChild(t);
          t = /* @__PURE__ */ new Set();
          q = q ? m(q.language, q.roles.join(", "), q.label, q.channelsCount, q.codecs && jf(q.codecs), q.spatialAudio) : "";
          a = u(a);
          var v = a.next();
          for (w = {}; !v.done; w = { bc: void 0 }, v = a.next()) {
            w.bc = v.value;
            v = w.bc.language;
            var z = w.bc.roles.join(", "), y = w.bc.label, A = w.bc.channelsCount, C = w.bc.codecs && jf(w.bc.codecs), E = w.bc.spatialAudio, D = m(v, z, y, A, C, E);
            if (!t.has(D)) {
              t.add(D);
              var B = Lj();
              B.addEventListener("click", /* @__PURE__ */ function(J) {
                return function() {
                  c(J.bc);
                };
              }(w));
              var G = V("span");
              B.appendChild(G);
              G.textContent = pJ(v, e);
              var I = "";
              h && g && E && (C == "ec-3" || C == "ac-4") ? I += " Dolby Atmos" : (h && n(v) && (I += k2(C)), g && (I += l(A)));
              switch (f) {
                case gJ:
                  G.textContent += I;
                  break;
                case 1:
                  G.textContent += I;
                  z ? G.textContent = z : (ab("Track #" + JSON.stringify(w.bc) + " does not have a role, but the UI is configured to only show role."), G.textContent = "?");
                  break;
                case 2:
                  G.textContent += I;
                  z && (G.textContent += ": " + z);
                  break;
                case 3:
                  y ? G.textContent = y : (ab("Track #" + JSON.stringify(w.bc) + " does not have a label, but the UI is configured to only show labels."), G.textContent = "?");
              }
              D == q && (B.appendChild(QG()), G.classList.add("shaka-chosen-item"), B.ariaSelected = "true", d.textContent = G.textContent);
              b.appendChild(B);
            }
          }
        }
        function qJ(a, b, c, d, e, f, g) {
          function h(A, C, E) {
            A = [A, C];
            E && g == 3 && A.push(E);
            return A.join(": ");
          }
          var k2 = a.find(function(A) {
            return A.active == 1;
          }), l = NG(b);
          Pj(b);
          b.appendChild(l);
          l = /* @__PURE__ */ new Set();
          k2 = k2 ? h(k2.language, k2.roles.join(", "), k2.label) : "";
          a = u(a);
          for (var m = a.next(), n = {}; !m.done; n = { dd: void 0 }, m = a.next()) {
            n.dd = m.value;
            m = n.dd.language;
            var q = n.dd.forced, r = f.resolve("SUBTITLE_FORCED"), t = n.dd.roles.join(", "), w = n.dd.label, v = h(m, t, w);
            if (!l.has(v)) {
              l.add(v);
              var z = Lj();
              z.addEventListener("click", /* @__PURE__ */ function(A) {
                return function() {
                  c(A.dd);
                };
              }(n));
              var y = V("span");
              z.appendChild(y);
              y.textContent = pJ(m, f);
              switch (g) {
                case gJ:
                  q && (y.textContent += " (" + r + ")");
                  break;
                case 1:
                  t ? y.textContent = t : (ab("Track #" + n.dd.id + " does not have a role, but the UI is configured to only show role."), y.textContent = "?");
                  q && (y.textContent += " (" + r + ")");
                  break;
                case 2:
                  t && (y.textContent += ": " + t);
                  q && (y.textContent += " (" + r + ")");
                  break;
                case 3:
                  w ? y.textContent = w : (ab("Track #" + n.dd.id + " does not have a label, but the UI is configured to only show labels."), y.textContent = "?");
              }
              d && v == k2 && (z.appendChild(QG()), y.classList.add("shaka-chosen-item"), z.ariaSelected = "true", e.textContent = y.textContent);
              b.appendChild(z);
            }
          }
        }
        function pJ(a, b) {
          if (!a && !b) return "";
          switch (a) {
            case "mul":
              return b.resolve("MULTIPLE_LANGUAGES");
            case "und":
              return b.resolve("UNDETERMINED_LANGUAGE");
            case "zxx":
              return b.resolve("NOT_APPLICABLE");
          }
          var c = Dc(a);
          return a in Lo ? Lo[a] : c in Lo ? Lo[c] + " (" + a + ")" : b.resolve("UNRECOGNIZED_LANGUAGE") + " (" + a + ")";
        }
        ;
        function rJ(a, b, c) {
          function d() {
            return sJ(e);
          }
          LG.call(this, a, b);
          var e = this;
          this.m = this.controls.l;
          tJ(this, c);
          uJ(this);
          vJ(this);
          this.eventManager.o(this.button, "click", function() {
            e.controls.Ca() && (e.menu.classList.contains("shaka-hidden") ? (e.controls.dispatchEvent(new T("submenuopen")), RG(e.menu, true), PG(e.menu), sJ(e)) : RG(e.menu, false));
          });
          this.j = null;
          window2.ResizeObserver ? (this.j = new ResizeObserver(d), this.j.observe(this.controls.l)) : this.eventManager.o(window2, "resize", d);
        }
        la(rJ, LG);
        rJ.prototype.release = function() {
          this.j && (this.j.disconnect(), this.j = null);
          LG.prototype.release.call(this);
        };
        function tJ(a, b) {
          a.button = Lj();
          a.button.classList.add("shaka-overflow-button");
          a.icon = new MG(a.button, b);
          b = V("label");
          b.classList.add("shaka-overflow-button-label");
          b.classList.add("shaka-overflow-menu-only");
          b.classList.add("shaka-overflow-button-label-inline");
          a.nameSpan = V("span");
          b.appendChild(a.nameSpan);
          a.currentSelection = V("span");
          a.currentSelection.classList.add("shaka-current-selection-span");
          b.appendChild(a.currentSelection);
          a.button.appendChild(b);
          a.parent.appendChild(a.button);
        }
        function uJ(a) {
          a.menu = V("div");
          a.menu.classList.add("shaka-no-propagation");
          a.menu.classList.add("shaka-show-controls-on-mouse-over");
          a.menu.classList.add("shaka-settings-menu");
          a.menu.classList.add("shaka-hidden");
          a.backButton = Lj();
          a.backButton.classList.add("shaka-back-to-overflow-button");
          a.menu.appendChild(a.backButton);
          a.eventManager.o(a.backButton, "click", function() {
            a.controls.Wc();
          });
          a.u = new MG(a.backButton, "M480-424 284-228q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536-480l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480-424Z");
          a.backSpan = V("span");
          a.backButton.appendChild(a.backSpan);
          a.controls.i.appendChild(a.menu);
        }
        function vJ(a) {
          a.parent.classList.contains("shaka-overflow-menu") && (a.u.use("m432-480 156 156q11 11 11 28t-11 28q-11 11-28 11t-28-11L348-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 28-11t28 11q11 11 11 28t-11 28L432-480Z"), a.eventManager.o(a.menu, "click", function() {
            function b(c) {
              return c.classList.contains("shaka-hidden") == 0;
            }
            RG(a.menu, false);
            RG(a.parent, true);
            nb(a.parent.childNodes, b) && ob(a.parent.childNodes, b)[0].focus();
            YH(a.controls);
            sJ(a);
          }));
        }
        function sJ(a) {
          var b = a.menu.getBoundingClientRect(), c = window2.getComputedStyle(a.menu), d = parseFloat(c.paddingTop);
          c = parseFloat(c.paddingBottom);
          var e = a.m.getBoundingClientRect();
          a.menu.style.maxHeight = b.bottom - e.top - d - c + "px";
        }
        S("shaka.ui.SettingsMenu", rJ);
        function wJ(a, b) {
          rJ.call(this, a, b, "M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 31.5-155.5t86-127Q252-817 325-848.5T480-880q83 0 155.5 31.5t127 86q54.5 54.5 86 127T880-480q0 82-31.5 155t-86 127.5q-54.5 54.5-127 86T480-80Zm0-82q26-36 45-75t31-83H404q12 44 31 83t45 75Zm-104-16q-18-33-31.5-68.5T322-320H204q29 50 72.5 87t99.5 55Zm208 0q56-18 99.5-55t72.5-87H638q-9 38-22.5 73.5T584-178ZM170-400h136q-3-20-4.5-39.5T300-480q0-21 1.5-40.5T306-560H170q-5 20-7.5 39.5T160-480q0 21 2.5 40.5T170-400Zm216 0h188q3-20 4.5-39.5T580-480q0-21-1.5-40.5T574-560H386q-3 20-4.5 39.5T380-480q0 21 1.5 40.5T386-400Zm268 0h136q5-20 7.5-39.5T800-480q0-21-2.5-40.5T790-560H654q3 20 4.5 39.5T660-480q0 21-1.5 40.5T654-400Zm-16-240h118q-29-50-72.5-87T584-782q18 33 31.5 68.5T638-640Zm-234 0h152q-12-44-31-83t-45-75q-26 36-45 75t-31 83Zm-200 0h118q9-38 22.5-73.5T376-782q-56 18-99.5 55T204-640Z");
          var c = this;
          this.button.classList.add("shaka-language-button");
          this.button.classList.add("shaka-tooltip-status");
          this.menu.classList.add("shaka-audio-languages");
          this.eventManager.o(this.localization, "locale-updated", function() {
            xJ(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            xJ(c);
          });
          this.eventManager.o(this.player, "loading", function() {
            yJ(c);
          });
          this.eventManager.o(this.player, "loaded", function() {
            yJ(c);
          });
          this.eventManager.o(this.player, "unloading", function() {
            yJ(c);
          });
          this.eventManager.o(
            this.player,
            "audiotrackschanged",
            function() {
              yJ(c);
            }
          );
          xJ(this);
          yJ(this);
        }
        la(wJ, rJ);
        function yJ(a) {
          var b = a.player.getAudioTracks() || [];
          oJ(b, a.menu, function(c) {
            a.player.Hj(c);
            a.player.configure("preferredAudioLanguage", c.language);
            c.label && a.player.configure("preferredAudioLabel", c.label);
            c.channelsCount && a.player.configure("preferredAudioChannelCount", c.channelsCount);
            a.player.configure("preferSpatialAudio", c.spatialAudio);
          }, a.currentSelection, a.localization, a.controls.g.trackLabelFormat, a.controls.g.showAudioChannelCountVariants, a.controls.g.showAudioCodec);
          PG(a.menu);
          a.controls.dispatchEvent(new T("languageselectionupdated"));
          a.button.setAttribute("shaka-status", a.currentSelection.innerText);
          RG(a.button, a.menu.getElementsByTagName("button").length > 2);
        }
        function xJ(a) {
          a.backButton.ariaLabel = a.localization.resolve("BACK");
          a.button.ariaLabel = a.localization.resolve("LANGUAGE");
          a.nameSpan.textContent = a.localization.resolve("LANGUAGE");
          a.backSpan.textContent = a.localization.resolve("LANGUAGE");
        }
        S("shaka.ui.AudioLanguageSelection", wJ);
        function zJ() {
        }
        zJ.prototype.create = function(a, b) {
          return new wJ(a, b);
        };
        OI("language", new zJ());
        iI("language", new zJ());
        function AJ(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.h = this.controls.F;
          this.g = Lj();
          this.g.classList.add("shaka-cast-button");
          this.g.classList.add("shaka-tooltip");
          this.g.ariaPressed = "false";
          this.l = new MG(this.g, "M880-240q0 33-23.5 56.5T800-160H633q-14 0-23.5-10.5T599-195q-6-95-43.5-177.5t-98-146.5q-60.5-64-141-105T143-676q-26-3-44.5-20.5T80-740q0-26 18.5-43t44.5-17h657q33 0 56.5 23.5T880-720v480Zm-560 80q-16 0-28-9.5T277-195q-11-63-56.5-107T112-357q-15-2-23.5-14.5T80-400q0-17 11-28.5t26-9.5q94 12 160.5 79T357-198q2 16-9 27t-28 11Zm160 0q-17 0-28.5-11T438-199q-14-128-104.5-217T115-518q-16-2-25.5-14T80-560q0-17 10.5-29t25.5-10q161 13 274 125t128 273q2 17-9.5 29T480-160Zm-350 0q-21 0-35.5-14.5T80-210q0-21 14.5-35.5T130-260q21 0 35.5 14.5T180-210q0 21-14.5 35.5T130-160Z");
          a = V("label");
          a.classList.add("shaka-overflow-button-label");
          a.classList.add("shaka-overflow-menu-only");
          a.classList.add("shaka-simple-overflow-button-label-inline");
          this.j = V("span");
          a.appendChild(this.j);
          this.i = V("span");
          this.i.classList.add("shaka-current-selection-span");
          a.appendChild(this.i);
          this.g.appendChild(a);
          this.parent.appendChild(this.g);
          BJ(this);
          CJ(this);
          this.eventManager.o(this.localization, "locale-updated", function() {
            BJ(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            BJ(c);
          });
          this.eventManager.o(this.g, "click", function() {
            c.controls.Ca() && DJ(c);
          });
          this.eventManager.o(this.controls, "caststatuschanged", function() {
            CJ(c);
          });
        }
        la(AJ, LG);
        function DJ(a) {
          var b;
          Q(function(c) {
            if (c.g == 1) {
              if (a.h.Qa()) return a.h.Vj(), c.B(0);
              ra(c, 3);
              a.g.disabled = true;
              return F(c, a.h.cast(), 5);
            }
            if (c.g != 3) return a.g.disabled = false, ta(c, 0);
            b = ua(c);
            a.g.disabled = false;
            b.code != 8004 && a.controls.dispatchEvent(new T("error", (/* @__PURE__ */ new Map()).set("detail", b)));
            H(c);
          });
        }
        function CJ(a) {
          var b = a.h.Kg() && a.controls.ra, c = a.h.Qa();
          RG(a.g, b);
          a.l.use(c ? "M720-600v240q0 17-11.5 28.5T680-320h-87q-8 0-14.5-4.5T569-337q-29-81-81.5-147T364-596q-16-10-11.5-27t21.5-17h306q17 0 28.5 11.5T720-600ZM320-160q-16 0-28-9.5T277-195q-11-63-56.5-107T112-357q-15-2-23.5-14.5T80-400q0-17 11-28.5t26-9.5q94 12 160.5 79T357-198q2 16-9 27t-28 11Zm160 0q-17 0-28.5-11T438-199q-14-128-104.5-217T115-518q-16-2-25.5-14T80-560q0-17 10.5-29t25.5-10q161 13 274 125.5T518-201q2 17-9.5 29T480-160Zm-340 0q-25 0-42.5-17.5T80-220q0-25 17.5-42.5T140-280q25 0 42.5 17.5T200-220q0 25-17.5 42.5T140-160Zm740-560v480q0 33-23.5 56.5T800-160H638q-17 0-28.5-11.5T598-200q0-17 11.5-28.5T638-240h162v-480H160v6q0 17-11.5 28.5T120-674q-17 0-28.5-11.5T80-714v-6q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720Z" : "M880-240q0 33-23.5 56.5T800-160H633q-14 0-23.5-10.5T599-195q-6-95-43.5-177.5t-98-146.5q-60.5-64-141-105T143-676q-26-3-44.5-20.5T80-740q0-26 18.5-43t44.5-17h657q33 0 56.5 23.5T880-720v480Zm-560 80q-16 0-28-9.5T277-195q-11-63-56.5-107T112-357q-15-2-23.5-14.5T80-400q0-17 11-28.5t26-9.5q94 12 160.5 79T357-198q2 16-9 27t-28 11Zm160 0q-17 0-28.5-11T438-199q-14-128-104.5-217T115-518q-16-2-25.5-14T80-560q0-17 10.5-29t25.5-10q161 13 274 125t128 273q2 17-9.5 29T480-160Zm-350 0q-21 0-35.5-14.5T80-210q0-21 14.5-35.5T130-260q21 0 35.5 14.5T180-210q0 21-14.5 35.5T130-160Z");
          b && (a.g.ariaPressed = c ? "true" : "false");
          EJ(a);
        }
        function EJ(a) {
          a.i.textContent = a.h.Qa() ? a.h.Yf() : a.localization.resolve("OFF");
        }
        function BJ(a) {
          a.g.ariaLabel = a.localization.resolve("CAST");
          a.j.textContent = a.localization.resolve("CAST");
          EJ(a);
        }
        S("shaka.ui.CastButton", AJ);
        function FJ() {
        }
        FJ.prototype.create = function(a, b) {
          return new AJ(a, b);
        };
        OI("cast", new FJ());
        iI("cast", new FJ());
        function GJ(a, b) {
          rJ.call(this, a, b, "m400-200-182 91q-20 10-39-1.5T160-145v-495q0-33 23.5-56.5T240-720h320q33 0 56.5 23.5T640-640v495q0 23-19 34.5t-39 1.5l-182-91Zm360-40q-17 0-28.5-11.5T720-280v-520H320q-17 0-28.5-11.5T280-840q0-17 11.5-28.5T320-880h400q33 0 56.5 23.5T800-800v520q0 17-11.5 28.5T760-240Z");
          var c = this;
          this.button.classList.add("shaka-chapter-button");
          this.menu.classList.add("shaka-chapters");
          this.button.classList.add("shaka-tooltip-status");
          this.g = [];
          this.h = "und";
          this.eventManager.o(
            this.localization,
            "locale-updated",
            function() {
              HJ(c);
              IJ(c);
            }
          );
          this.eventManager.o(this.localization, "locale-changed", function() {
            HJ(c);
            IJ(c);
          });
          this.eventManager.o(this.player, "unloading", function() {
            JJ(c);
            c.h = "und";
            c.g = [];
          });
          this.eventManager.o(this.player, "trackschanged", function() {
            IJ(c);
          });
          HJ(this);
          IJ(this);
        }
        la(GJ, rJ);
        function HJ(a) {
          a.backButton.ariaLabel = a.localization.resolve("BACK");
          a.button.ariaLabel = a.localization.resolve("CHAPTERS");
          a.nameSpan.textContent = a.localization.resolve("CHAPTERS");
          a.backSpan.textContent = a.localization.resolve("CHAPTERS");
        }
        function JJ(a) {
          var b = NG(a.menu);
          Pj(a.menu);
          a.menu.appendChild(b);
          RG(a.button, false);
        }
        function IJ(a) {
          var b, c, d, e, f, g, h, k2, l, m, n, q, r, t;
          Q(function(w) {
            switch (w.g) {
              case 1:
                b = function(v, z) {
                  return !v && !z || v.id === z.id && v.title === z.title && v.startTime === z.startTime && v.endTime === z.endTime;
                }, c = "und", d = [], e = a.localization.g, f = u(Array.from(e)), g = f.next();
              case 2:
                if (g.done) {
                  w.B(4);
                  break;
                }
                c = h = g.value;
                if (!a.player) {
                  w.B(5);
                  break;
                }
                return F(w, a.player.oh(c), 6);
              case 6:
                d = w.h || [];
              case 5:
                if (d.length) {
                  w.B(4);
                  break;
                }
                g = f.next();
                w.B(2);
                break;
              case 4:
                if (d.length) {
                  w.B(7);
                  break;
                }
                c = "und";
                if (!a.player) {
                  w.B(7);
                  break;
                }
                return F(
                  w,
                  a.player.oh(c),
                  9
                );
              case 9:
                d = w.h || [];
              case 7:
                k2 = c !== a.h;
                l = a.g.length !== d.length || !a.g.some(function(v, z) {
                  z = d.at(z);
                  return b(v, z) || d.some(function(y) {
                    return b(v, y);
                  });
                });
                a.h = c;
                a.g = d;
                if (!d.length) JJ(a);
                else if (k2 || l) {
                  m = u(a.g);
                  n = m.next();
                  for (q = {}; !n.done; q = { Mg: void 0 }, n = m.next()) q.Mg = n.value, r = Lj(), t = V("span"), t.classList.add("shaka-chapter"), t.textContent = q.Mg.title, r.appendChild(t), a.eventManager.o(r, "click", /* @__PURE__ */ function(v) {
                    return function() {
                      a.controls.Ca() && (a.video.currentTime = v.Mg.startTime);
                    };
                  }(q)), a.menu.appendChild(r);
                  RG(a.button, true);
                  PG(a.menu);
                }
                H(w);
            }
          });
        }
        S("shaka.ui.ChapterSelection", GJ);
        function KJ() {
        }
        KJ.prototype.create = function(a, b) {
          return new GJ(a, b);
        };
        OI("chapter", new KJ());
        iI("chapter", new KJ());
        function LJ(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.g = Lj();
          this.g.classList.add("shaka-fast-forward-button");
          this.g.classList.add("shaka-tooltip-status");
          this.g.setAttribute("shaka-status", "1x");
          new MG(this.g).use("M100-315v-330q0-18 12-29t28-11q5 0 11 1t11 5l248 166q9 6 13.5 14.5T428-480q0 10-4.5 18.5T410-447L162-281q-5 4-11 5t-11 1q-16 0-28-11t-12-29Zm400 0v-330q0-18 12-29t28-11q5 0 11 1t11 5l248 166q9 6 13.5 14.5T828-480q0 10-4.5 18.5T810-447L562-281q-5 4-11 5t-11 1q-16 0-28-11t-12-29Z");
          this.parent.appendChild(this.g);
          MJ(this);
          this.h = this.controls.g.fastForwardRates;
          this.eventManager.o(this.localization, "locale-updated", function() {
            MJ(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            MJ(c);
          });
          this.eventManager.o(this.g, "click", function() {
            if (c.controls.Ca() && c.video.duration) {
              var d = c.h.indexOf(c.player.Za()) + 1;
              d = d != c.h.length ? c.h[d] : c.h[0];
              c.video.paused && c.video.play();
              c.player.sc(d);
              c.g.setAttribute("shaka-status", d + "x");
            }
          });
          this.eventManager.o(this.player, "ratechange", function() {
            c.g.setAttribute(
              "shaka-status",
              c.player.Za() + "x"
            );
          });
        }
        la(LJ, LG);
        function MJ(a) {
          a.g.ariaLabel = a.localization.resolve("FAST_FORWARD");
        }
        S("shaka.ui.FastForwardButton", LJ);
        function NJ() {
        }
        NJ.prototype.create = function(a, b) {
          return new LJ(a, b);
        };
        iI("fast_forward", new NJ());
        function OJ(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.h = this.controls.u;
          this.g = Lj();
          this.g.classList.add("shaka-fullscreen-button");
          this.g.classList.add("shaka-tooltip");
          this.i = new MG(this.g, "M200-200h80q17 0 28.5 11.5T320-160q0 17-11.5 28.5T280-120H160q-17 0-28.5-11.5T120-160v-120q0-17 11.5-28.5T160-320q17 0 28.5 11.5T200-280v80Zm560 0v-80q0-17 11.5-28.5T800-320q17 0 28.5 11.5T840-280v120q0 17-11.5 28.5T800-120H680q-17 0-28.5-11.5T640-160q0-17 11.5-28.5T680-200h80ZM200-760v80q0 17-11.5 28.5T160-640q-17 0-28.5-11.5T120-680v-120q0-17 11.5-28.5T160-840h120q17 0 28.5 11.5T320-800q0 17-11.5 28.5T280-760h-80Zm560 0h-80q-17 0-28.5-11.5T640-800q0-17 11.5-28.5T680-840h120q17 0 28.5 11.5T840-800v120q0 17-11.5 28.5T800-640q-17 0-28.5-11.5T760-680v-80Z");
          PJ(this);
          this.parent.appendChild(this.g);
          QJ(this);
          this.eventManager.o(this.localization, "locale-updated", function() {
            QJ(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            QJ(c);
          });
          this.eventManager.o(this.g, "click", function() {
            return Q(function(d) {
              return c.controls.Ca() ? F(d, c.controls.og(), 0) : d.return();
            });
          });
          this.eventManager.o(document, "fullscreenchange", function() {
            c.i.use(c.controls.xb() ? "M240-240h-80q-17 0-28.5-11.5T120-280q0-17 11.5-28.5T160-320h120q17 0 28.5 11.5T320-280v120q0 17-11.5 28.5T280-120q-17 0-28.5-11.5T240-160v-80Zm480 0v80q0 17-11.5 28.5T680-120q-17 0-28.5-11.5T640-160v-120q0-17 11.5-28.5T680-320h120q17 0 28.5 11.5T840-280q0 17-11.5 28.5T800-240h-80ZM240-720v-80q0-17 11.5-28.5T280-840q17 0 28.5 11.5T320-800v120q0 17-11.5 28.5T280-640H160q-17 0-28.5-11.5T120-680q0-17 11.5-28.5T160-720h80Zm480 0h80q17 0 28.5 11.5T840-680q0 17-11.5 28.5T800-640H680q-17 0-28.5-11.5T640-680v-120q0-17 11.5-28.5T680-840q17 0 28.5 11.5T720-800v80Z" : "M200-200h80q17 0 28.5 11.5T320-160q0 17-11.5 28.5T280-120H160q-17 0-28.5-11.5T120-160v-120q0-17 11.5-28.5T160-320q17 0 28.5 11.5T200-280v80Zm560 0v-80q0-17 11.5-28.5T800-320q17 0 28.5 11.5T840-280v120q0 17-11.5 28.5T800-120H680q-17 0-28.5-11.5T640-160q0-17 11.5-28.5T680-200h80ZM200-760v80q0 17-11.5 28.5T160-640q-17 0-28.5-11.5T120-680v-120q0-17 11.5-28.5T160-840h120q17 0 28.5 11.5T320-800q0 17-11.5 28.5T280-760h-80Zm560 0h-80q-17 0-28.5-11.5T640-800q0-17 11.5-28.5T680-840h120q17 0 28.5 11.5T840-800v120q0 17-11.5 28.5T800-640q-17 0-28.5-11.5T760-680v-80Z");
            QJ(c);
          });
          this.eventManager.o(this.h, "loadedmetadata", function() {
            PJ(c);
          });
          this.eventManager.o(this.h, "loadeddata", function() {
            PJ(c);
          });
          this.eventManager.o(this.adManager, "ad-started", function() {
            PJ(c);
          });
          this.eventManager.o(this.adManager, "ad-stopped", function() {
            PJ(c);
          });
        }
        la(OJ, LG);
        function PJ(a) {
          a.controls.ve() ? a.g.classList.remove("shaka-hidden") : a.g.classList.add("shaka-hidden");
        }
        function QJ(a) {
          var b = a.controls.xb() ? "EXIT_FULL_SCREEN" : "FULL_SCREEN";
          a.g.ariaLabel = a.localization.resolve(b);
        }
        S("shaka.ui.FullscreenButton", OJ);
        function RJ() {
        }
        RJ.prototype.create = function(a, b) {
          return new OJ(a, b);
        };
        iI("fullscreen", new RJ());
        function SJ(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.g = Lj();
          this.g.classList.add("shaka-loop-button");
          this.g.classList.add("shaka-tooltip");
          this.m = new MG(this.g, "m274-200 34 34q12 12 11.5 28T308-110q-12 12-28.5 12.5T251-109L148-212q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l103-103q12-12 28.5-11.5T308-370q11 12 11.5 28T308-314l-34 34h406v-120q0-17 11.5-28.5T720-440q17 0 28.5 11.5T760-400v120q0 33-23.5 56.5T680-200H274Zm412-480H280v120q0 17-11.5 28.5T240-520q-17 0-28.5-11.5T200-560v-120q0-33 23.5-56.5T280-760h406l-34-34q-12-12-11.5-28t11.5-28q12-12 28.5-12.5T709-851l103 103q6 6 8.5 13t2.5 15q0 8-2.5 15t-8.5 13L709-589q-12 12-28.5 11.5T652-590q-11-12-11.5-28t11.5-28l34-34Z");
          a = V("label");
          a.classList.add("shaka-overflow-button-label");
          a.classList.add("shaka-overflow-menu-only");
          a.classList.add("shaka-simple-overflow-button-label-inline");
          this.j = V("span");
          this.j.textContent = this.localization.resolve("LOOP");
          a.appendChild(this.j);
          this.i = V("span");
          this.i.classList.add("shaka-current-selection-span");
          a.appendChild(this.i);
          this.g.appendChild(a);
          TJ(this);
          this.parent.appendChild(this.g);
          this.eventManager.o(this.localization, "locale-updated", function() {
            TJ(c);
          });
          this.eventManager.o(
            this.localization,
            "locale-changed",
            function() {
              TJ(c);
            }
          );
          this.eventManager.o(this.g, "click", function() {
            c.controls.Ca() && (c.video.loop = !c.video.loop, c.h.La(), c.h.wa(1));
          });
          this.l = this.video.loop;
          this.h = new Bf(function() {
            c.l != c.video.loop && (TJ(c), c.l = c.video.loop);
          });
          this.h.wa(1);
          this.eventManager.o(this.player, "unloading", function() {
            UJ(c);
          });
          this.eventManager.o(this.player, "loaded", function() {
            UJ(c);
          });
          this.eventManager.o(this.player, "manifestupdated", function() {
            UJ(c);
          });
          this.eventManager.o(this.video, "durationchange", function() {
            UJ(c);
          });
        }
        la(SJ, LG);
        SJ.prototype.release = function() {
          this.h.stop();
          this.h = null;
          LG.prototype.release.call(this);
        };
        function TJ(a) {
          a.j.textContent = a.localization.resolve("LOOP");
          a.i.textContent = a.localization.resolve(a.video.loop ? "ON" : "OFF");
          a.m.use(a.video.loop ? "M120-40q-33 0-56.5-23.5T40-120v-720q0-33 23.5-56.5T120-920h720q33 0 56.5 23.5T920-840v720q0 33-23.5 56.5T840-40H120Zm154-160h406q33 0 56.5-23.5T760-280v-120q0-17-11.5-28.5T720-440q-17 0-28.5 11.5T680-400v120H274l34-34q12-12 11.5-28T308-370q-12-12-28.5-12.5T251-371L148-268q-6 6-8.5 13t-2.5 15q0 8 2.5 15t8.5 13l103 103q12 12 28.5 11.5T308-110q11-12 11.5-28T308-166l-34-34Zm412-480-34 34q-12 12-11.5 28t11.5 28q12 12 28.5 12.5T709-589l103-103q6-6 8.5-13t2.5-15q0-8-2.5-15t-8.5-13L709-851q-12-12-28.5-11.5T652-850q-11 12-11.5 28t11.5 28l34 34H280q-33 0-56.5 23.5T200-680v120q0 17 11.5 28.5T240-520q17 0 28.5-11.5T280-560v-120h406Z" : "m274-200 34 34q12 12 11.5 28T308-110q-12 12-28.5 12.5T251-109L148-212q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l103-103q12-12 28.5-11.5T308-370q11 12 11.5 28T308-314l-34 34h406v-120q0-17 11.5-28.5T720-440q17 0 28.5 11.5T760-400v120q0 33-23.5 56.5T680-200H274Zm412-480H280v120q0 17-11.5 28.5T240-520q-17 0-28.5-11.5T200-560v-120q0-33 23.5-56.5T280-760h406l-34-34q-12-12-11.5-28t11.5-28q12-12 28.5-12.5T709-851l103 103q6 6 8.5 13t2.5 15q0 8-2.5 15t-8.5 13L709-589q-12 12-28.5 11.5T652-590q-11-12-11.5-28t11.5-28l34-34Z");
          a.g.ariaLabel = a.localization.resolve(a.video.loop ? "EXIT_LOOP_MODE" : "ENTER_LOOP_MODE");
        }
        function UJ(a) {
          RG(a.g, !a.player.U());
        }
        S("shaka.ui.LoopButton", SJ);
        function VJ() {
        }
        VJ.prototype.create = function(a, b) {
          return new SJ(a, b);
        };
        OI("loop", new VJ());
        iI("loop", new VJ());
        WG("loop", new VJ());
        function WJ(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.g = Lj();
          this.g.classList.add("shaka-mute-button");
          this.g.classList.add("shaka-tooltip");
          this.j = new MG(this.g, "M760-481q0-83-44-151.5T598-735q-15-7-22-21.5t-2-29.5q6-16 21.5-23t31.5 0q97 43 155 131.5T840-481q0 108-58 196.5T627-153q-16 7-31.5 0T574-176q-5-15 2-29.5t22-21.5q74-34 118-102.5T760-481ZM280-360H160q-17 0-28.5-11.5T120-400v-160q0-17 11.5-28.5T160-600h120l132-132q19-19 43.5-8.5T480-703v446q0 27-24.5 37.5T412-228L280-360Zm380-120q0 42-19 79.5T591-339q-10 6-20.5.5T560-356v-250q0-12 10.5-17.5t20.5.5q31 25 50 63t19 80Z");
          a = V("label");
          a.classList.add("shaka-overflow-button-label");
          a.classList.add("shaka-overflow-menu-only");
          this.h = V("span");
          this.h.textContent = this.localization.resolve("MUTE");
          a.appendChild(this.h);
          this.i = V("span");
          this.i.classList.add("shaka-current-selection-span");
          a.appendChild(this.i);
          this.g.appendChild(a);
          this.parent.appendChild(this.g);
          XJ(this);
          YJ(this);
          this.eventManager.o(this.localization, "locale-updated", function() {
            XJ(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            XJ(c);
          });
          this.eventManager.o(this.g, "click", function() {
            c.controls.Ca() && (c.ad && c.ad.isLinear() ? c.ad.setMuted(!c.ad.isMuted()) : c.video.muted || c.video.volume != 0 ? c.video.muted = !c.video.muted : c.video.volume = 1);
          });
          this.eventManager.o(this.video, "volumechange", function() {
            XJ(c);
            YJ(c);
          });
          this.eventManager.o(this.player, "loading", function() {
            XJ(c);
            YJ(c);
          });
          this.eventManager.o(this.player, "loaded", function() {
            ZJ(c);
          });
          this.eventManager.o(this.player, "unloading", function() {
            ZJ(c);
          });
          this.eventManager.o(
            this.player,
            "trackschanged",
            function() {
              ZJ(c);
            }
          );
          this.eventManager.o(this.controls, "caststatuschanged", function() {
            XJ(c);
            YJ(c);
          });
          this.eventManager.o(this.adManager, "ad-volume-changed", function() {
            XJ(c);
            YJ(c);
          });
          this.eventManager.o(this.adManager, "ad-muted", function() {
            XJ(c);
            YJ(c);
          });
          this.eventManager.o(this.adManager, "ad-started", function() {
            ZJ(c);
          });
          this.eventManager.o(this.adManager, "ad-stopped", function() {
            c.ad = null;
            XJ(c);
            YJ(c);
            ZJ(c);
          });
          ZJ(this);
        }
        la(WJ, LG);
        function XJ(a) {
          var b = a.ad ? a.ad.isMuted() ? "UNMUTE" : "MUTE" : a.video.muted || a.video.volume == 0 ? "UNMUTE" : "MUTE";
          a.g.ariaLabel = a.localization.resolve(b);
          a.h.textContent = a.localization.resolve(b);
        }
        function YJ(a) {
          var b = a.ad ? a.ad.isMuted() ? "M671-177q-11 7-22 13t-23 11q-15 7-30.5 0T574-176q-6-15 1.5-29.5T598-227q4-2 7.5-4t7.5-4L480-368v111q0 27-24.5 37.5T412-228L280-360H160q-17 0-28.5-11.5T120-400v-160q0-17 11.5-28.5T160-600h88L84-764q-11-11-11-28t11-28q11-11 28-11t28 11l680 680q11 11 11 28t-11 28q-11 11-28 11t-28-11l-93-93Zm89-304q0-83-44-151.5T598-735q-15-7-22-21.5t-2-29.5q6-16 21.5-23t31.5 0q97 43 155 131t58 197q0 33-6 65.5T817-353q-8 22-24.5 27.5t-30.5.5q-14-5-22.5-18t-.5-30q11-26 16-52.5t5-55.5ZM591-623q33 21 51 63t18 80v10q0 5-1 10-2 13-14 17t-22-6l-51-51q-6-6-9-13.5t-3-15.5v-77q0-12 10.5-17.5t20.5.5Zm-201-59q-6-6-6-14t6-14l22-22q19-19 43.5-8.5T480-703v63q0 14-12 19t-22-5l-56-56Z" : "M760-481q0-83-44-151.5T598-735q-15-7-22-21.5t-2-29.5q6-16 21.5-23t31.5 0q97 43 155 131.5T840-481q0 108-58 196.5T627-153q-16 7-31.5 0T574-176q-5-15 2-29.5t22-21.5q74-34 118-102.5T760-481ZM280-360H160q-17 0-28.5-11.5T120-400v-160q0-17 11.5-28.5T160-600h120l132-132q19-19 43.5-8.5T480-703v446q0 27-24.5 37.5T412-228L280-360Zm380-120q0 42-19 79.5T591-339q-10 6-20.5.5T560-356v-250q0-12 10.5-17.5t20.5.5q31 25 50 63t19 80Z" : a.video.muted || a.video.volume == 0 ? "M671-177q-11 7-22 13t-23 11q-15 7-30.5 0T574-176q-6-15 1.5-29.5T598-227q4-2 7.5-4t7.5-4L480-368v111q0 27-24.5 37.5T412-228L280-360H160q-17 0-28.5-11.5T120-400v-160q0-17 11.5-28.5T160-600h88L84-764q-11-11-11-28t11-28q11-11 28-11t28 11l680 680q11 11 11 28t-11 28q-11 11-28 11t-28-11l-93-93Zm89-304q0-83-44-151.5T598-735q-15-7-22-21.5t-2-29.5q6-16 21.5-23t31.5 0q97 43 155 131t58 197q0 33-6 65.5T817-353q-8 22-24.5 27.5t-30.5.5q-14-5-22.5-18t-.5-30q11-26 16-52.5t5-55.5ZM591-623q33 21 51 63t18 80v10q0 5-1 10-2 13-14 17t-22-6l-51-51q-6-6-9-13.5t-3-15.5v-77q0-12 10.5-17.5t20.5.5Zm-201-59q-6-6-6-14t6-14l22-22q19-19 43.5-8.5T480-703v63q0 14-12 19t-22-5l-56-56Z" : "M760-481q0-83-44-151.5T598-735q-15-7-22-21.5t-2-29.5q6-16 21.5-23t31.5 0q97 43 155 131.5T840-481q0 108-58 196.5T627-153q-16 7-31.5 0T574-176q-5-15 2-29.5t22-21.5q74-34 118-102.5T760-481ZM280-360H160q-17 0-28.5-11.5T120-400v-160q0-17 11.5-28.5T160-600h120l132-132q19-19 43.5-8.5T480-703v446q0 27-24.5 37.5T412-228L280-360Zm380-120q0 42-19 79.5T591-339q-10 6-20.5.5T560-356v-250q0-12 10.5-17.5t20.5.5q31 25 50 63t19 80Z";
          a.j.use(b);
        }
        function ZJ(a) {
          var b = true;
          a.ad && a.ad.isLinear() ? b = true : a.player.Hh() && (b = false);
          RG(a.g, b);
        }
        S("shaka.ui.MuteButton", WJ);
        function $J() {
        }
        $J.prototype.create = function(a, b) {
          return new WJ(a, b);
        };
        OI("mute", new $J());
        iI("mute", new $J());
        WG("mute", new $J());
        function aK(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.j = this.controls.u;
          this.g = Lj();
          this.g.classList.add("shaka-pip-button");
          this.g.classList.add("shaka-tooltip");
          this.l = new MG(this.g, "M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm320-120h240q17 0 28.5-11.5T760-320v-160q0-17-11.5-28.5T720-520H480q-17 0-28.5 11.5T440-480v160q0 17 11.5 28.5T480-280Zm120-120Z");
          a = V("label");
          a.classList.add("shaka-overflow-button-label");
          a.classList.add("shaka-overflow-menu-only");
          a.classList.add("shaka-simple-overflow-button-label-inline");
          this.i = V("span");
          this.i.textContent = this.localization.resolve("PICTURE_IN_PICTURE");
          a.appendChild(this.i);
          this.h = V("span");
          this.h.classList.add("shaka-current-selection-span");
          a.appendChild(this.h);
          this.g.appendChild(a);
          bK(this);
          this.parent.appendChild(this.g);
          this.controls.Ef() || RG(this.g, false);
          this.eventManager.o(this.localization, "locale-updated", function() {
            bK(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            bK(c);
          });
          this.eventManager.o(this.g, "click", function() {
            c.controls.Ca() && c.controls.cd();
          });
          this.eventManager.o(this.j, "enterpictureinpicture", function() {
            cK(c);
          });
          this.eventManager.o(this.j, "leavepictureinpicture", function() {
            dK(c);
          });
          this.eventManager.o(this.controls, "caststatuschanged", function() {
            eK(c);
          });
          this.eventManager.o(this.player, "trackschanged", function() {
            eK(c);
          });
          "documentPictureInPicture" in window2 && this.eventManager.o(window2.documentPictureInPicture, "enter", function(d) {
            cK(c);
            c.eventManager.ua(
              d.window,
              "pagehide",
              function() {
                dK(c);
              }
            );
          });
        }
        la(aK, LG);
        function cK(a) {
          a.l.use("M160-160q-33 0-56.5-23.5T80-240v-240q0-17 11.5-28.5T120-520h240q33 0 56.5-23.5T440-600v-160q0-17 11.5-28.5T480-800h320q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm360-400q-17 0-28.5 11.5T480-520v160q0 17 11.5 28.5T520-320q17 0 28.5-11.5T560-360v-63l95 95q12 12 28 12t28-12q12-12 12-28.5T711-385l-95-95h64q17 0 28.5-11.5T720-520q0-17-11.5-28.5T680-560H520Zm-400-40q-17 0-28.5-11.5T80-640v-120q0-17 11.5-28.5T120-800h200q17 0 28.5 11.5T360-760v120q0 17-11.5 28.5T320-600H120Z");
          a.g.ariaLabel = a.localization.resolve("EXIT_PICTURE_IN_PICTURE");
          a.h.textContent = a.localization.resolve("ON");
        }
        function dK(a) {
          a.l.use("M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720v480q0 33-23.5 56.5T800-160H160Zm320-120h240q17 0 28.5-11.5T760-320v-160q0-17-11.5-28.5T720-520H480q-17 0-28.5 11.5T440-480v160q0 17 11.5 28.5T480-280Zm120-120Z");
          a.g.ariaLabel = a.localization.resolve("ENTER_PICTURE_IN_PICTURE");
          a.h.textContent = a.localization.resolve("OFF");
        }
        function bK(a) {
          a.i.textContent = a.localization.resolve("PICTURE_IN_PICTURE");
          var b = a.controls.Md();
          a.g.ariaLabel = a.localization.resolve(b ? "EXIT_PICTURE_IN_PICTURE" : "ENTER_PICTURE_IN_PICTURE");
          a.h.textContent = a.localization.resolve(b ? "ON" : "OFF");
        }
        function eK(a) {
          Q(function(b) {
            if (!a.controls.Ef()) return RG(a.g, false), a.controls.Md() ? F(b, a.controls.cd(), 0) : b.B(0);
            if (!a.player || !a.player.Ld()) return RG(a.g, true), b.B(0);
            RG(a.g, false);
            return a.controls.Md() ? F(b, a.controls.cd(), 0) : b.B(0);
          });
        }
        S("shaka.ui.PipButton", aK);
        function fK() {
        }
        fK.prototype.create = function(a, b) {
          return new aK(a, b);
        };
        OI("picture_in_picture", new fK());
        iI("picture_in_picture", new fK());
        WG("picture_in_picture", new fK());
        function gK(a, b) {
          rJ.call(this, a, b, "m426-330 195-125q14-9 14-25t-14-25L426-630q-15-10-30.5-1.5T380-605v250q0 18 15.5 26.5T426-330ZM121-440q17 0 30.5 11t18.5 28q6 23 14.5 43.5T204-317q9 15 7.5 32T198-256q-11 11-27 10t-25-14q-22-31-37-66.5T86-400q-3-16 7.5-28t27.5-12Zm77-264q12 12 13 29t-7 31q-11 20-19.5 41T170-559q-5 17-18.5 28T121-520q-17 0-27.5-12.5T87-561q8-38 23-73.5t36-66.5q9-13 25-13.5t27 10.5Zm56 505q12-13 29.5-14t32.5 8q20 11 40.5 20t42.5 15q17 5 28 18t11 30q0 17-12.5 27T397-88q-38-8-71.5-23T260-146q-14-9-15.5-25t9.5-28Zm186-639q0 17-10.5 30T402-790q-23 6-44 14.5T317-755q-15 9-32.5 7.5T255-761q-12-12-10.5-28.5T260-815q32-20 66.5-34.5T399-872q16-3 28.5 7t12.5 27Zm360 358q0-113-69.5-199.5T553-792q-15-4-24-17t-9-29q0-16 11-26.5t25-7.5q140 28 232 137t92 255q0 146-92 255T556-88q-14 3-25-7.5T520-122q0-16 9-29t24-17q108-26 177.5-112.5T800-480Z");
          var c = this;
          this.button.classList.add("shaka-playbackrate-button");
          this.menu.classList.add("shaka-playback-rates");
          this.button.classList.add("shaka-tooltip-status");
          Array.from(a.classList).includes("shaka-overflow-menu") || (this.g = V("span"), this.g.classList.add("shaka-overflow-playback-rate-mark"), this.button.appendChild(this.g));
          this.eventManager.o(this.localization, "locale-updated", function() {
            hK(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            hK(c);
          });
          this.eventManager.o(
            this.player,
            "loaded",
            function() {
              iK(c);
            }
          );
          this.eventManager.o(this.player, "ratechange", function() {
            iK(c);
          });
          hK(this);
          jK(this);
          iK(this);
        }
        la(gK, rJ);
        function hK(a) {
          a.backButton.ariaLabel = a.localization.resolve("BACK");
          a.button.ariaLabel = a.localization.resolve("PLAYBACK_RATE");
          a.nameSpan.textContent = a.localization.resolve("PLAYBACK_RATE");
          a.backSpan.textContent = a.localization.resolve("PLAYBACK_RATE");
        }
        function iK(a) {
          var b = a.player.Za(), c = OG(a.menu, "material-svg-icon shaka-chosen-item");
          if (c) {
            var d = c.parentElement;
            d.removeAttribute("aria-selected");
            var e = d.getElementsByTagName("span")[0];
            e && e.classList.remove("shaka-chosen-item");
            d.removeChild(c);
          }
          if (c = Array.from(a.menu.querySelectorAll("span")).find(function(f) {
            return f.textContent == b + "x";
          })) d = c.parentElement, d.appendChild(QG()), d.ariaSelected = "true", c.classList.add("shaka-chosen-item");
          a.currentSelection.textContent = b + "x";
          a.button.setAttribute(
            "shaka-status",
            b + "x"
          );
          a.g && (a.g.textContent = b + "x");
        }
        function jK(a) {
          for (var b = u(a.controls.g.playbackRates), c = b.next(), d = {}; !c.done; d = { Xf: void 0 }, c = b.next()) {
            d.Xf = c.value;
            c = Lj();
            var e = V("span");
            e.textContent = d.Xf + "x";
            c.appendChild(e);
            a.eventManager.o(c, "click", /* @__PURE__ */ function(f) {
              return function() {
                f.Xf == a.video.defaultPlaybackRate ? a.player.Bd() : a.player.sc(f.Xf, false);
              };
            }(d));
            a.menu.appendChild(c);
          }
          PG(a.menu);
        }
        S("shaka.ui.PlaybackRateSelection", gK);
        function kK() {
        }
        kK.prototype.create = function(a, b) {
          return new gK(a, b);
        };
        OI("playback_rate", new kK());
        iI("playback_rate", new kK());
        function lK(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.g = Lj();
          this.g.classList.add("shaka-current-time");
          mK(this, "0:00");
          this.parent.appendChild(this.g);
          this.eventManager.o(this.g, "click", function() {
            c.controls.Ca() && c.player.U() && (c.video.currentTime = c.player.za().end);
          });
          this.eventManager.o(this.player, "loading", function() {
            RG(c.g, true);
          });
          this.eventManager.o(this.controls, "timeandseekrangeupdated", function() {
            var d = c.controls.S, e = c.controls.ph(), f = c.player.za(), g = f.end - f.start;
            isFinite(g) ? c.player.U() ? (e = Math.max(0, Math.floor(f.end - e)), g = g >= 3600, e >= 1 || d ? (mK(c, "- " + SG(e, g)), c.g.disabled = false) : (mK(c, c.localization.resolve("LIVE")), c.g.disabled = true)) : (d = g >= 3600, e = SG(Math.max(0, e - f.start), d), g && (e += " / " + SG(g, d)), mK(c, e), c.g.disabled = true) : (mK(c, c.localization.resolve("LIVE")), c.g.disabled = true);
          });
          this.eventManager.o(this.player, "trackschanged", function() {
            c.player.U() && (c.g.ariaLabel = c.localization.resolve("SKIP_TO_LIVE"));
          });
          this.eventManager.o(this.adManager, "ad-started", function() {
            RG(c.g, !c.ad.isLinear());
          });
          this.eventManager.o(this.adManager, "ad-stopped", function() {
            RG(c.g, true);
          });
        }
        la(lK, LG);
        function mK(a, b) {
          b != a.g.textContent && (a.g.textContent = b);
        }
        S("shaka.ui.PresentationTimeTracker", lK);
        function nK() {
        }
        nK.prototype.create = function(a, b) {
          return new lK(a, b);
        };
        iI("time_and_duration", new nK());
        function oK(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.g = Lj();
          this.g.classList.add("shaka-recenter-vr-button");
          this.g.classList.add("shaka-tooltip");
          this.g.ariaPressed = "false";
          new MG(this.g, "M479-359q-50 0-85-35t-35-85q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35Zm-57 222-85-85q-12-12-11.5-28.5T338-279q12-12 28.5-12t28.5 12l85 86 85-85q11-11 28-11t28 11q11 11 11 28t-11 28l-85 85q-12 12-27 18t-30 6q-15 0-30-6t-27-18ZM221-337l-85-85q-12-12-18-27t-6-30q0-15 6-30t18-27l85-85q12-12 28.5-12t28.5 12q12 12 12 28.5T278-564l-86 86 85 85q11 11 11 28t-11 28q-11 11-28 11t-28-11Zm116-401 85-85q12-12 27-18t30-6q15 0 30 6t27 18l85 85q12 12 12 28t-12 28q-12 12-28.5 12T564-682l-86-85-85 85q-11 11-28 11t-28-11q-11-11-11-28t11-28Zm344 343 85-85-85-85q-11-11-11-28t11-28q11-11 28-11t28 11l85 85q12 12 18 27t6 30q0 15-6 30t-18 27l-85 85q-12 12-28 11.5T681-338q-12-12-12-28.5t12-28.5Z");
          a = V("label");
          a.classList.add("shaka-overflow-button-label");
          a.classList.add("shaka-overflow-menu-only");
          this.i = V("span");
          a.appendChild(this.i);
          this.h = V("span");
          this.h.classList.add("shaka-current-selection-span");
          a.appendChild(this.h);
          this.g.appendChild(a);
          this.parent.appendChild(this.g);
          pK(this);
          this.eventManager.o(this.localization, "locale-updated", function() {
            pK(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            pK(c);
          });
          var d = this.controls.D;
          this.eventManager.o(
            this.g,
            "click",
            function() {
              c.controls.Ca() && (d.g ? PH(d.g) : ab("Not playing VR content"));
            }
          );
          this.eventManager.o(d, "vrstatuschanged", function() {
            RG(c.g, c.controls.Xb());
          });
          RG(this.g, this.controls.Xb());
        }
        la(oK, LG);
        function pK(a) {
          a.g.ariaLabel = a.localization.resolve("RECENTER_VR");
          a.i.textContent = a.localization.resolve("RECENTER_VR");
        }
        S("shaka.ui.RecenterVRButton", oK);
        function qK() {
        }
        qK.prototype.create = function(a, b) {
          return new oK(a, b);
        };
        OI("recenter_vr", new qK());
        iI("recenter_vr", new qK());
        function rK(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.i = Rb().kg();
          this.g = Lj();
          this.g.classList.add("shaka-remote-button");
          this.g.classList.add("shaka-tooltip");
          this.g.ariaPressed = "false";
          this.l = new MG(this.g, this.i ? "M312-120q-14 0-22-9.5t-8-20.5q0-5 2-10.5t7-10.5l161-161q6-6 13-9t15-3q8 0 15 3t13 9l161 161q5 5 7 10.5t2 10.5q0 11-8 20.5t-22 9.5H312ZM160-840h640q33 0 56.5 23.5T880-760v480q0 33-23.5 56.5T800-200h-7q-16 0-30.5-6T737-223L565-395q-17-17-39-26t-46-9q-24 0-46 9t-39 26L223-223q-11 11-25.5 17t-30.5 6h-7q-33 0-56.5-23.5T80-280v-480q0-33 23.5-56.5T160-840Z" : "M880-240q0 33-23.5 56.5T800-160H633q-14 0-23.5-10.5T599-195q-6-95-43.5-177.5t-98-146.5q-60.5-64-141-105T143-676q-26-3-44.5-20.5T80-740q0-26 18.5-43t44.5-17h657q33 0 56.5 23.5T880-720v480Zm-560 80q-16 0-28-9.5T277-195q-11-63-56.5-107T112-357q-15-2-23.5-14.5T80-400q0-17 11-28.5t26-9.5q94 12 160.5 79T357-198q2 16-9 27t-28 11Zm160 0q-17 0-28.5-11T438-199q-14-128-104.5-217T115-518q-16-2-25.5-14T80-560q0-17 10.5-29t25.5-10q161 13 274 125t128 273q2 17-9.5 29T480-160Zm-350 0q-21 0-35.5-14.5T80-210q0-21 14.5-35.5T130-260q21 0 35.5 14.5T180-210q0 21-14.5 35.5T130-160Z");
          a = V("label");
          a.classList.add("shaka-overflow-button-label");
          a.classList.add("shaka-overflow-menu-only");
          this.m = V("span");
          a.appendChild(this.m);
          this.j = V("span");
          this.j.classList.add("shaka-current-selection-span");
          a.appendChild(this.j);
          this.g.appendChild(a);
          this.parent.appendChild(this.g);
          this.h = -1;
          sK(this);
          RG(this.g, false);
          this.video.remote ? (this.eventManager.o(this.localization, "locale-updated", function() {
            sK(c);
          }), this.eventManager.o(this.localization, "locale-changed", function() {
            sK(c);
          }), this.eventManager.o(
            this.controls,
            "caststatuschanged",
            function() {
              tK(c);
            }
          ), this.eventManager.o(this.g, "click", function() {
            c.controls.Ca() && c.video.remote.prompt().catch(function() {
            });
          }), this.eventManager.o(this.video.remote, "connect", function() {
            tK(c);
            uK(c);
          }), this.eventManager.o(this.video.remote, "connecting", function() {
            tK(c);
            uK(c);
          }), this.eventManager.o(this.video.remote, "disconnect", function() {
            tK(c);
            uK(c);
          }), this.eventManager.o(this.player, "loaded", function() {
            tK(c);
          }), tK(this, true), uK(this)) : this.g.classList.add("shaka-hidden");
        }
        la(rK, LG);
        rK.prototype.release = function() {
          this.video.remote && this.h != -1 && this.video.remote.cancelWatchAvailability(this.h).catch(function() {
          });
          LG.prototype.release.call(this);
        };
        function tK(a, b) {
          b = b === void 0 ? false : b;
          var c, d;
          Q(function(e) {
            switch (e.g) {
              case 1:
                if (a.controls.F.Kg() && a.controls.ra || !a.video.remote) {
                  RG(a.g, false);
                  a.h != -1 && (a.video.remote.cancelWatchAvailability(a.h), a.h = -1);
                  e.B(0);
                  break;
                }
                if (a.video.remote.state == "disconnected" || b) {
                  c = function(f) {
                    if (a.player) {
                      var g = a.video.disableRemotePlayback, h = true;
                      Rb().kg() && a.player.l == vr && a.player.sh() != "HLS" && (h = false);
                      RG(a.g, h && f && !g);
                    } else RG(a.g, false);
                  };
                  ra(e, 7);
                  if (a.h == -1) {
                    e.B(9);
                    break;
                  }
                  return F(
                    e,
                    a.video.remote.cancelWatchAvailability(a.h),
                    10
                  );
                }
                RG(a.g, true);
                if (a.h == -1) {
                  e.B(0);
                  break;
                }
                return F(e, a.video.remote.cancelWatchAvailability(a.h), 6);
              case 6:
                a.h = -1;
                e.B(0);
                break;
              case 10:
                a.h = -1;
              case 9:
                ta(e, 8);
                break;
              case 7:
                ua(e);
              case 8:
                return ra(e, 11), F(e, a.video.remote.watchAvailability(c), 13);
              case 13:
                d = e.h;
                a.h = d;
                ta(e, 0);
                break;
              case 11:
                ua(e), c(true), H(e);
            }
          });
        }
        function sK(a) {
          var b = a.i ? a.localization.resolve("AIRPLAY") : a.localization.resolve("CAST");
          a.g.ariaLabel = b;
          a.m.textContent = b;
        }
        function uK(a) {
          a.i || (a.video.remote.state == "disconnected" ? a.l.use("M880-240q0 33-23.5 56.5T800-160H633q-14 0-23.5-10.5T599-195q-6-95-43.5-177.5t-98-146.5q-60.5-64-141-105T143-676q-26-3-44.5-20.5T80-740q0-26 18.5-43t44.5-17h657q33 0 56.5 23.5T880-720v480Zm-560 80q-16 0-28-9.5T277-195q-11-63-56.5-107T112-357q-15-2-23.5-14.5T80-400q0-17 11-28.5t26-9.5q94 12 160.5 79T357-198q2 16-9 27t-28 11Zm160 0q-17 0-28.5-11T438-199q-14-128-104.5-217T115-518q-16-2-25.5-14T80-560q0-17 10.5-29t25.5-10q161 13 274 125t128 273q2 17-9.5 29T480-160Zm-350 0q-21 0-35.5-14.5T80-210q0-21 14.5-35.5T130-260q21 0 35.5 14.5T180-210q0 21-14.5 35.5T130-160Z") : a.l.use("M720-600v240q0 17-11.5 28.5T680-320h-87q-8 0-14.5-4.5T569-337q-29-81-81.5-147T364-596q-16-10-11.5-27t21.5-17h306q17 0 28.5 11.5T720-600ZM320-160q-16 0-28-9.5T277-195q-11-63-56.5-107T112-357q-15-2-23.5-14.5T80-400q0-17 11-28.5t26-9.5q94 12 160.5 79T357-198q2 16-9 27t-28 11Zm160 0q-17 0-28.5-11T438-199q-14-128-104.5-217T115-518q-16-2-25.5-14T80-560q0-17 10.5-29t25.5-10q161 13 274 125.5T518-201q2 17-9.5 29T480-160Zm-340 0q-25 0-42.5-17.5T80-220q0-25 17.5-42.5T140-280q25 0 42.5 17.5T200-220q0 25-17.5 42.5T140-160Zm740-560v480q0 33-23.5 56.5T800-160H638q-17 0-28.5-11.5T598-200q0-17 11.5-28.5T638-240h162v-480H160v6q0 17-11.5 28.5T120-674q-17 0-28.5-11.5T80-714v-6q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720Z"));
        }
        S("shaka.ui.RemoteButton", rK);
        function vK() {
        }
        vK.prototype.create = function(a, b) {
          return new rK(a, b);
        };
        OI("remote", new vK());
        iI("remote", new vK());
        function wK(a, b) {
          rJ.call(this, a, b, "M480-120q-17 0-28.5-11.5T440-160v-160q0-17 11.5-28.5T480-360q17 0 28.5 11.5T520-320v40h280q17 0 28.5 11.5T840-240q0 17-11.5 28.5T800-200H520v40q0 17-11.5 28.5T480-120Zm-320-80q-17 0-28.5-11.5T120-240q0-17 11.5-28.5T160-280h160q17 0 28.5 11.5T360-240q0 17-11.5 28.5T320-200H160Zm160-160q-17 0-28.5-11.5T280-400v-40H160q-17 0-28.5-11.5T120-480q0-17 11.5-28.5T160-520h120v-40q0-17 11.5-28.5T320-600q17 0 28.5 11.5T360-560v160q0 17-11.5 28.5T320-360Zm160-80q-17 0-28.5-11.5T440-480q0-17 11.5-28.5T480-520h320q17 0 28.5 11.5T840-480q0 17-11.5 28.5T800-440H480Zm160-160q-17 0-28.5-11.5T600-640v-160q0-17 11.5-28.5T640-840q17 0 28.5 11.5T680-800v40h120q17 0 28.5 11.5T840-720q0 17-11.5 28.5T800-680H680v40q0 17-11.5 28.5T640-600Zm-480-80q-17 0-28.5-11.5T120-720q0-17 11.5-28.5T160-760h320q17 0 28.5 11.5T520-720q0 17-11.5 28.5T480-680H160Z");
          var c = this;
          this.button.classList.add("shaka-resolution-button");
          this.button.classList.add("shaka-tooltip-status");
          this.menu.classList.add("shaka-resolutions");
          this.h = V("span");
          this.h.classList.add("shaka-current-auto-quality");
          this.h.style.display = "none";
          this.i = V("sup");
          this.i.classList.add("shaka-current-quality-mark");
          this.i.style.display = "none";
          Array.from(a.classList).includes("shaka-overflow-menu") ? this.parent.parentElement && (this.g = Oj(this.parent.parentElement)) : (this.g = V("span"), this.g.classList.add("shaka-overflow-playback-rate-mark"), this.button.appendChild(this.g));
          a = V("span");
          this.button.childNodes[1].appendChild(a);
          a.appendChild(this.currentSelection);
          a.appendChild(this.h);
          a.appendChild(this.i);
          this.eventManager.o(this.localization, "locale-updated", function() {
            xK(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            xK(c);
          });
          this.eventManager.o(this.player, "loading", function() {
            yK(c);
            zK(c);
          });
          this.eventManager.o(this.player, "loaded", function() {
            yK(c);
            zK(c);
          });
          this.eventManager.o(this.player, "unloading", function() {
            yK(c);
            zK(c);
          });
          this.eventManager.o(this.player, "variantchanged", function() {
            yK(c);
            zK(c);
          });
          this.eventManager.o(this.player, "trackschanged", function() {
            yK(c);
            zK(c);
          });
          this.eventManager.o(this.player, "abrstatuschanged", function() {
            yK(c);
            zK(c);
          });
          this.eventManager.o(this.player, "adaptation", function() {
            yK(c);
            zK(c);
          });
          yK(this);
        }
        la(wK, rJ);
        function zK(a) {
          var b = a.player.getConfiguration().abr.enabled;
          if (a.player.Ld()) {
            a.i.textContent = "";
            a.i.style.display = "none";
            a.g && (a.g.textContent = "", a.g.style.display = "none");
            var c = a.player.Ob() || [], d = c.find(function(e) {
              return e.active;
            });
            d && (b ? (a.h.textContent = d.bandwidth ? JK(a, d, c) : "Unknown", a.h.style.display = "") : a.h.style.display = "none");
          } else c = a.player.getVideoTracks() || [], (d = c.find(function(e) {
            return e.active;
          })) ? (b ? (a.h.textContent = d.height && d.width ? KK(a, d, c) : d.bandwidth ? LK(d.bandwidth) : "Unknown", a.h.style.display = "") : a.h.style.display = "none", b = MK(a, d.width, d.height), a.i.textContent = b, a.i.style.display = b !== "" ? "" : "none", a.g && (a.g.textContent = b, a.g.style.display = b !== "" ? "" : "none")) : a.g && (b = a.player.getStats(), b = MK(a, b.width, b.height), a.g.textContent = b, a.g.style.display = b !== "" ? "" : "none");
        }
        function MK(a, b, c) {
          if (!b || !c) return "";
          c > b && (c = u([c, b]), b = c.next().value, c = c.next().value);
          b / c > 16 / 9 && (c = Math.round(b * 9 / 16));
          a = a.controls.g.qualityMarks;
          return c >= 8640 ? c + "p" : c >= 4320 ? a["4320"] : c >= 2160 ? a["2160"] : c >= 1440 ? a["1440"] : c >= 1080 ? a["1080"] : c >= 720 ? a["720"] : "";
        }
        function yK(a) {
          var b = NG(a.menu);
          Pj(a.menu);
          a.menu.appendChild(b);
          b = 0;
          b = a.player.Ld() ? NK(a) : OK(a);
          var c = Lj();
          c.classList.add("shaka-enable-abr-button");
          a.eventManager.o(c, "click", function() {
            a.player.configure({ abr: { enabled: true } });
            yK(a);
          });
          a.l = V("span");
          a.l.textContent = a.localization.resolve("AUTO_QUALITY");
          c.appendChild(a.l);
          a.player.getConfiguration().abr.enabled && (c.ariaSelected = "true", c.appendChild(QG()), a.l.classList.add("shaka-chosen-item"), a.currentSelection.textContent = a.localization.resolve("AUTO_QUALITY"));
          a.button.setAttribute("shaka-status", a.currentSelection.textContent);
          a.menu.appendChild(c);
          PG(a.menu);
          a.controls.dispatchEvent(new T("resolutionselectionupdated"));
          xK(a);
          RG(a.button, b > 0);
        }
        function NK(a) {
          var b = [];
          a.player.l == zr || a.player.Da() || (b = a.player.Ob() || []);
          var c = b.find(function(k2) {
            return k2.active;
          });
          c && (b = b.filter(function(k2) {
            if (k2.language != c.language || a.controls.g.showAudioChannelCountVariants && k2.channelsCount && c.channelsCount && k2.channelsCount != c.channelsCount) return false;
            var l = a.controls.g.trackLabelFormat;
            return (l == 1 || l == 2) && JSON.stringify(k2.audioRoles) != JSON.stringify(c.audioRoles) || l == 3 && k2.label != c.label || !k2.bandwidth ? false : true;
          }));
          b = b.filter(function(k2, l) {
            return b.findIndex(function(m) {
              return m.bandwidth == k2.bandwidth;
            }) == l;
          });
          b.sort(function(k2, l) {
            return l.bandwidth - k2.bandwidth;
          });
          for (var d = a.player.getConfiguration().abr.enabled, e = u(b), f = e.next(), g = {}; !f.done; g = { Ke: void 0 }, f = e.next()) {
            g.Ke = f.value;
            f = Lj();
            f.classList.add("explicit-resolution");
            a.eventManager.o(f, "click", /* @__PURE__ */ function(k2) {
              return function() {
                var l = k2.Ke;
                a.player.configure({ abr: { enabled: false } });
                a.player.Ge(l, a.controls.g.clearBufferOnQualityChange);
              };
            }(g));
            var h = V("span");
            h.textContent = g.Ke.bandwidth ? JK(a, g.Ke, b) : "Unknown";
            f.appendChild(h);
            d || g.Ke != c || (f.ariaSelected = "true", f.appendChild(QG()), h.classList.add("shaka-chosen-item"), a.currentSelection.textContent = h.textContent);
            a.menu.appendChild(f);
          }
          return b.length;
        }
        function OK(a) {
          var b = a.player.getVideoTracks() || [], c = b.find(function(m) {
            return m.active;
          });
          b = b.filter(function(m, n) {
            return b.findIndex(function(q) {
              var r = q.height == m.height && q.bandwidth == m.bandwidth && q.frameRate == m.frameRate && q.hdr == m.hdr && q.videoLayout == m.videoLayout && Sc(q.roles, m.roles);
              r && a.controls.g.showVideoCodec && q.codecs && m.codecs && (r = jf(q.codecs) == jf(m.codecs));
              return r;
            }) == n;
          });
          b.sort(function(m, n) {
            return n.height == m.height || m.height == null || n.height == null ? n.bandwidth - m.bandwidth : n.height - m.height;
          });
          for (var d = a.player.getConfiguration().abr.enabled, e = u(b), f = e.next(), g = {}; !f.done; g = { nc: void 0 }, f = e.next()) {
            g.nc = f.value;
            f = Lj();
            f.classList.add("explicit-resolution");
            a.eventManager.o(f, "click", /* @__PURE__ */ function(m) {
              return function() {
                var n = m.nc;
                a.player.configure({ abr: { enabled: false } });
                a.player.Ij(n, a.controls.g.clearBufferOnQualityChange);
              };
            }(g));
            var h = V("span");
            h.textContent = g.nc.height && g.nc.width ? KK(a, g.nc, b) : g.nc.bandwidth ? LK(g.nc.bandwidth) : "Unknown";
            f.appendChild(h);
            var k2 = MK(a, g.nc.width, g.nc.height);
            if (k2 !== "") {
              var l = V("sup");
              l.classList.add("shaka-quality-mark");
              l.textContent = k2;
              f.appendChild(l);
            }
            d || g.nc != c || (f.ariaSelected = "true", f.appendChild(QG()), h.classList.add("shaka-chosen-item"), a.currentSelection.textContent = h.textContent);
            a.menu.appendChild(f);
          }
          return b.length;
        }
        function KK(a, b, c) {
          function d(m, n) {
            return m != n && m.height == n.height && m.hdr == n.hdr && e(m) == e(n) && Math.round(m.frameRate || 0) == Math.round(n.frameRate || 0);
          }
          function e(m) {
            return m.codecs ? jf(m.codecs).startsWith("dovi-") : false;
          }
          var f = b.height || 0, g = b.width || 0;
          f > g && (f = u([f, g]), g = f.next().value, f = f.next().value);
          var h = f;
          g / f > 16 / 9 && (h = Math.round(g * 9 / 16));
          g = h + "p";
          f = /* @__PURE__ */ new Set();
          h = u(c);
          for (var k2 = h.next(); !k2.done; k2 = h.next()) k2 = k2.value, k2.frameRate && f.add(Math.round(k2.frameRate));
          f.size > 1 && (f = b.frameRate) && (f >= 50 || f <= 20) && (g += Math.round(b.frameRate));
          if (b.hdr == "PQ" || b.hdr == "HLG") g = e(b) ? g + " Dolby Vision" : g + " HDR";
          (b.videoLayout || "").includes("CH-STEREO") && (g += " 3D");
          if (c.some(function(m) {
            return d(b, m);
          }) && (c.some(function(m) {
            return d(b, m) && m.bandwidth == b.bandwidth;
          }) || (g += " (" + LK(b.bandwidth) + ")"), a.controls.g.showVideoCodec)) {
            var l = function(m) {
              var n = "";
              m && (n = jf(m).toUpperCase());
              return n ? " " + n : n;
            };
            c.some(function(m) {
              return d(b, m) && l(m.codecs) != l(b.codecs);
            }) && (g += l(b.codecs));
          }
          return g;
        }
        function JK(a, b, c) {
          var d = LK(b.bandwidth);
          if (a.controls.g.showAudioCodec) {
            var e = function(f) {
              var g = "";
              f && (g = jf(f).toUpperCase());
              return g ? " " + g : g;
            };
            c.some(function(f) {
              return e(f.codecs) != e(b.codecs);
            }) && (d += e(b.codecs));
          }
          return d;
        }
        function LK(a) {
          return a >= 1e6 ? (a / 1e6).toFixed(1).replace(".0", "") + " Mbps" : Math.floor(a / 1e3) + " Kbps";
        }
        function xK(a) {
          var b = a.player.Ld() ? "QUALITY" : "RESOLUTION";
          a.button.ariaLabel = a.localization.resolve(b);
          a.backButton.ariaLabel = a.localization.resolve(b);
          a.backSpan.textContent = a.localization.resolve(b);
          a.nameSpan.textContent = a.localization.resolve(b);
          a.l.textContent = a.localization.resolve("AUTO_QUALITY");
          a.player.getConfiguration().abr.enabled && (a.currentSelection.textContent = a.localization.resolve("AUTO_QUALITY"));
        }
        S("shaka.ui.ResolutionSelection", wK);
        function PK() {
        }
        PK.prototype.create = function(a, b) {
          return new wK(a, b);
        };
        OI("quality", new PK());
        iI("quality", new PK());
        function QK(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.g = Lj();
          this.g.classList.add("shaka-rewind-button");
          this.g.classList.add("shaka-tooltip-status");
          this.g.setAttribute("shaka-status", this.localization.resolve("OFF"));
          new MG(this.g).use("M798-281 550-447q-9-6-13.5-14.5T532-480q0-10 4.5-18.5T550-513l248-166q5-4 11-5t11-1q16 0 28 11t12 29v330q0 18-12 29t-28 11q-5 0-11-1t-11-5Zm-400 0L150-447q-9-6-13.5-14.5T132-480q0-10 4.5-18.5T150-513l248-166q5-4 11-5t11-1q16 0 28 11t12 29v330q0 18-12 29t-28 11q-5 0-11-1t-11-5Z");
          this.parent.appendChild(this.g);
          RK(this);
          this.h = this.controls.g.rewindRates;
          this.eventManager.o(this.localization, "locale-updated", function() {
            RK(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            RK(c);
          });
          this.eventManager.o(this.g, "click", function() {
            if (c.controls.Ca() && c.video.duration) {
              var d = c.h.indexOf(c.player.Za()) + 1;
              d = d != c.h.length ? c.h[d] : c.h[0];
              c.video.paused && c.video.play();
              c.player.sc(d);
              c.g.setAttribute("shaka-status", d + "x");
            }
          });
          this.eventManager.o(
            this.player,
            "ratechange",
            function() {
              c.g.setAttribute("shaka-status", c.player.Za() + "x");
            }
          );
        }
        la(QK, LG);
        function RK(a) {
          a.g.ariaLabel = a.localization.resolve("REWIND");
        }
        S("shaka.ui.RewindButton", QK);
        function SK() {
        }
        SK.prototype.create = function(a, b) {
          return new QK(a, b);
        };
        iI("rewind", new SK());
        function TK(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.j = this.controls.F;
          this.g = Lj();
          this.g.classList.add("shaka-save.video-frame-button");
          this.g.classList.add("shaka-tooltip");
          new MG(this.g, "M480-337q-8 0-15-2.5t-13-8.5L308-492q-12-12-11.5-28t11.5-28q12-12 28.5-12.5T365-549l75 75v-286q0-17 11.5-28.5T480-800q17 0 28.5 11.5T520-760v286l75-75q12-12 28.5-11.5T652-548q11 12 11.5 28T652-492L508-348q-6 6-13 8.5t-15 2.5ZM240-160q-33 0-56.5-23.5T160-240v-80q0-17 11.5-28.5T200-360q17 0 28.5 11.5T240-320v80h480v-80q0-17 11.5-28.5T760-360q17 0 28.5 11.5T800-320v80q0 33-23.5 56.5T720-160H240Z");
          a = V("label");
          a.classList.add("shaka-overflow-button-label");
          a.classList.add("shaka-overflow-menu-only");
          this.h = V("span");
          this.h.textContent = this.localization.resolve("DOWNLOAD_VIDEO_FRAME");
          a.appendChild(this.h);
          this.i = V("span");
          this.i.classList.add("shaka-current-selection-span");
          a.appendChild(this.i);
          this.g.appendChild(a);
          UK(this);
          this.parent.appendChild(this.g);
          this.eventManager.o(this.localization, "locale-updated", function() {
            UK(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            UK(c);
          });
          this.eventManager.o(this.g, "click", function() {
            var d = document.createElement("canvas"), e = d.getContext("2d"), f = c.controls.u;
            d.width = f.videoWidth;
            d.height = f.videoHeight;
            e.drawImage(f, 0, 0, d.width, d.height);
            d = d.toDataURL("image/png");
            e = document.createElement("a");
            e.href = d;
            e.download = "videoframe_" + f.currentTime.toFixed(3) + ".png";
            e.click();
          });
          this.eventManager.o(this.controls.D, "vrstatuschanged", function() {
            VK(c);
          });
          this.eventManager.o(this.adManager, "ad-started", function() {
            VK(c);
          });
          this.eventManager.o(
            this.adManager,
            "ad-stopped",
            function() {
              VK(c);
            }
          );
          this.eventManager.o(this.player, "unloading", function() {
            VK(c);
          });
          this.eventManager.o(this.player, "loaded", function() {
            VK(c);
          });
          this.eventManager.o(this.video, "play", function() {
            VK(c);
          });
          this.eventManager.o(this.video, "pause", function() {
            VK(c);
          });
          this.eventManager.o(this.video, "seeking", function() {
            VK(c);
          });
          this.eventManager.o(this.controls, "caststatuschanged", function() {
            VK(c);
          });
          VK(this);
        }
        la(TK, LG);
        function VK(a) {
          var b = true;
          a.controls.Xb() && (b = false);
          b && a.j.Qa() && (b = false);
          b && (a.player.drmInfo() || a.player.Ld()) && (b = false);
          b && a.ad && (b = false);
          b && a.video.remote && a.video.remote.state != "disconnected" && (b = false);
          RG(a.g, b);
        }
        function UK(a) {
          a.g.ariaLabel = a.localization.resolve("DOWNLOAD_VIDEO_FRAME");
          a.h.textContent = a.localization.resolve("DOWNLOAD_VIDEO_FRAME");
        }
        S("shaka.ui.SaveVideoFrameButton", TK);
        function WK() {
        }
        WK.prototype.create = function(a, b) {
          return new TK(a, b);
        };
        OI("save_video_frame", new WK());
        WG("save_video_frame", new WK());
        function XK(a, b) {
          LG.call(this, a, b);
          var c = this;
          if (this.g = this.player.vf()) this.h = Lj(), this.h.classList.add("shaka-skip-next-button"), this.h.classList.add("shaka-tooltip"), new MG(this.h).use("M660-280v-400q0-17 11.5-28.5T700-720q17 0 28.5 11.5T740-680v400q0 17-11.5 28.5T700-240q-17 0-28.5-11.5T660-280Zm-440-35v-330q0-18 12-29t28-11q5 0 11 1t11 5l248 166q9 6 13.5 14.5T548-480q0 10-4.5 18.5T530-447L282-281q-5 4-11 5t-11 1q-16 0-28-11t-12-29Z"), this.parent.appendChild(this.h), YK(this), ZK(this), this.eventManager.o(
            this.localization,
            "locale-updated",
            function() {
              YK(c);
            }
          ), this.eventManager.o(this.localization, "locale-changed", function() {
            YK(c);
          }), this.eventManager.o(this.h, "click", function() {
            c.controls.Ca() && c.g.playItem(c.g.getCurrentItemIndex() + 1);
          }), this.eventManager.o(this.g, "currentitemchanged", function() {
            ZK(c);
          }), this.eventManager.o(this.g, "itemsinserted", function() {
            ZK(c);
          }), this.eventManager.o(this.g, "itemsremoved", function() {
            ZK(c);
          }), this.eventManager.o(this.player, "loading", function() {
            ZK(c);
          });
        }
        la(XK, LG);
        function YK(a) {
          a.h.ariaLabel = a.localization.resolve("SKIP_NEXT");
        }
        function ZK(a) {
          var b = a.g.getItems().length;
          b = b > 1 && a.g.getCurrentItemIndex() + 1 < b;
          RG(a.h, b);
        }
        S("shaka.ui.SkipNextButton", XK);
        function $K() {
        }
        $K.prototype.create = function(a, b) {
          return new XK(a, b);
        };
        iI("skip_next", new $K());
        function aL(a, b) {
          LG.call(this, a, b);
          var c = this;
          if (this.g = this.player.vf()) this.h = Lj(), this.h.classList.add("shaka-skip-previous-button"), this.h.classList.add("shaka-tooltip"), new MG(this.h).use("M220-280v-400q0-17 11.5-28.5T260-720q17 0 28.5 11.5T300-680v400q0 17-11.5 28.5T260-240q-17 0-28.5-11.5T220-280Zm458-1L430-447q-9-6-13.5-14.5T412-480q0-10 4.5-18.5T430-513l248-166q5-4 11-5t11-1q16 0 28 11t12 29v330q0 18-12 29t-28 11q-5 0-11-1t-11-5Z"), this.parent.appendChild(this.h), bL(this), cL(this), this.eventManager.o(
            this.localization,
            "locale-updated",
            function() {
              bL(c);
            }
          ), this.eventManager.o(this.localization, "locale-changed", function() {
            bL(c);
          }), this.eventManager.o(this.h, "click", function() {
            c.controls.Ca() && c.g.playItem(c.g.getCurrentItemIndex() - 1);
          }), this.eventManager.o(this.g, "currentitemchanged", function() {
            cL(c);
          }), this.eventManager.o(this.g, "itemsinserted", function() {
            cL(c);
          }), this.eventManager.o(this.g, "itemsremoved", function() {
            cL(c);
          }), this.eventManager.o(this.player, "loading", function() {
            cL(c);
          });
        }
        la(aL, LG);
        function bL(a) {
          a.h.ariaLabel = a.localization.resolve("SKIP_PREVIOUS");
        }
        function cL(a) {
          var b = a.g.getItems().length > 1 && a.g.getCurrentItemIndex() > 0;
          RG(a.h, b);
        }
        S("shaka.ui.SkipPreviousButton", aL);
        function dL() {
        }
        dL.prototype.create = function(a, b) {
          return new aL(a, b);
        };
        iI("skip_previous", new dL());
        function eL(a, b) {
          YG.call(this, a, b);
          this.button.classList.add("shaka-small-play-button");
          this.button.classList.add("shaka-tooltip");
        }
        la(eL, YG);
        S("shaka.ui.SmallPlayButton", eL);
        function fL() {
        }
        fL.prototype.create = function(a, b) {
          return new eL(a, b);
        };
        iI("play_pause", new fL());
        function gL(a, b) {
          LG.call(this, a, b);
          a = V("div");
          a.classList.add("shaka-spacer");
          a.ariaHidden = "true";
          this.parent.appendChild(a);
        }
        la(gL, LG);
        S("shaka.ui.Spacer", gL);
        function hL() {
        }
        hL.prototype.create = function(a, b) {
          return new gL(a, b);
        };
        iI("spacer", new hL());
        function iL(a, b) {
          function c(m) {
            m = parseInt(l.g[m], 10);
            return m > 2e9 ? (m / 1e9).toFixed(2) + "GB" : m > 1e6 ? (m / 1e6).toFixed(2) + "MB" : m > 1e3 ? (m / 1e3).toFixed(2) + "KB" : m + "B";
          }
          function d(m) {
            return l.g[m] + " (gaps)";
          }
          function e(m) {
            return SG(l.g[m], false) + " (m)";
          }
          function f(m) {
            return Math.round(l.g[m] / 1e3) + " (kbits/s)";
          }
          function g(m) {
            return l.g[m].toFixed(2) + " (s)";
          }
          function h(m) {
            return l.g[m] + " (frames)";
          }
          function k2(m) {
            return l.g[m] + " (px)";
          }
          LG.call(this, a, b);
          var l = this;
          this.i = Lj();
          this.i.classList.add("shaka-statistics-button");
          this.u = new MG(this.i, "M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Zm120 200q-17 0-28.5 11.5T280-520v200q0 17 11.5 28.5T320-280q17 0 28.5-11.5T360-320v-200q0-17-11.5-28.5T320-560Zm160-120q-17 0-28.5 11.5T440-640v320q0 17 11.5 28.5T480-280q17 0 28.5-11.5T520-320v-320q0-17-11.5-28.5T480-680Zm160 240q-17 0-28.5 11.5T600-400v80q0 17 11.5 28.5T640-280q17 0 28.5-11.5T680-320v-80q0-17-11.5-28.5T640-440Z");
          a = V("label");
          a.classList.add("shaka-overflow-button-label");
          a.classList.add("shaka-simple-overflow-button-label-inline");
          this.A = V("span");
          a.appendChild(this.A);
          this.l = V("span");
          this.l.classList.add("shaka-current-selection-span");
          a.appendChild(this.l);
          this.i.appendChild(a);
          this.parent.appendChild(this.i);
          this.h = V("div");
          this.h.classList.add("shaka-no-propagation");
          this.h.classList.add("shaka-show-controls-on-mouse-over");
          this.h.classList.add("shaka-statistics-container");
          this.h.classList.add("shaka-hidden");
          this.controls.i.appendChild(this.h);
          this.D = [];
          this.F = ["stateHistory", "switchHistory"];
          this.g = this.player.getStats();
          this.m = /* @__PURE__ */ new Map();
          this.C = (/* @__PURE__ */ new Map()).set("width", k2).set("height", k2).set("currentCodecs", function(m) {
            return l.g[m];
          }).set("completionPercent", function(m) {
            return l.g[m] + " (%)";
          }).set("bufferingTime", g).set("drmTimeSeconds", g).set("licenseTime", g).set("liveLatency", g).set("loadLatency", g).set("manifestTimeSeconds", g).set("estimatedBandwidth", f).set("streamBandwidth", f).set(
            "maxSegmentDuration",
            g
          ).set("pauseTime", e).set("playTime", e).set("corruptedFrames", h).set("decodedFrames", h).set("droppedFrames", h).set("stallsDetected", function(m) {
            return l.g[m] + " (stalls)";
          }).set("gapsJumped", d).set("manifestSizeBytes", c).set("bytesDownloaded", c).set("nonFatalErrorCount", function(m) {
            return l.g[m] + " (errors)";
          }).set("manifestPeriodCount", function(m) {
            return l.g[m] + " (periods)";
          }).set("manifestGapCount", d);
          this.j = new Bf(function() {
            l.g = l.player.getStats();
            for (var m = u(l.D), n = m.next(); !n.done; n = m.next()) {
              var q = n.value;
              n = l.m.get(q);
              n.textContent = l.C.get(q)(q);
              n && n.parentElement && (q = l.g[q], typeof q == "string" ? RG(n.parentElement, q != "") : RG(n.parentElement, !isNaN(q)));
            }
          });
          jL(this);
          kL(this);
          this.eventManager.o(this.localization, "locale-updated", function() {
            jL(l);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            jL(l);
          });
          this.eventManager.o(this.i, "click", function() {
            lL(l);
            jL(l);
          });
        }
        la(iL, LG);
        function lL(a) {
          a.h.classList.contains("shaka-hidden") ? (a.u.use("M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm120-440q-17 0-28.5 11.5T280-520v200q0 17 11.5 28.5T320-280q17 0 28.5-11.5T360-320v-200q0-17-11.5-28.5T320-560Zm160-120q-17 0-28.5 11.5T440-640v320q0 17 11.5 28.5T480-280q17 0 28.5-11.5T520-320v-320q0-17-11.5-28.5T480-680Zm160 240q-17 0-28.5 11.5T600-400v80q0 17 11.5 28.5T640-280q17 0 28.5-11.5T680-320v-80q0-17-11.5-28.5T640-440Z"), a.j.wa(0.1), RG(a.h, true)) : (a.u.use("M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Zm120 200q-17 0-28.5 11.5T280-520v200q0 17 11.5 28.5T320-280q17 0 28.5-11.5T360-320v-200q0-17-11.5-28.5T320-560Zm160-120q-17 0-28.5 11.5T440-640v320q0 17 11.5 28.5T480-280q17 0 28.5-11.5T520-320v-320q0-17-11.5-28.5T480-680Zm160 240q-17 0-28.5 11.5T600-400v80q0 17 11.5 28.5T640-280q17 0 28.5-11.5T680-320v-80q0-17-11.5-28.5T640-440Z"), a.j.stop(), RG(a.h, false));
        }
        function jL(a) {
          a.A.textContent = a.localization.resolve("STATISTICS");
          a.i.ariaLabel = a.localization.resolve("STATISTICS");
          a.l.textContent = a.localization.resolve(a.h.classList.contains("shaka-hidden") ? "OFF" : "ON");
        }
        function mL(a, b) {
          var c = V("div"), d = V("label");
          d.textContent = b + ":";
          c.appendChild(d);
          d = V("span");
          d.textContent = a.C.get(b)(b);
          c.appendChild(d);
          a.m.set(b, d);
          return c;
        }
        function kL(a) {
          var b = V("div");
          b.classList.add("shaka-no-propagation");
          b.classList.add("shaka-statistics-close");
          var c = new MG(b, "M480-424 284-228q-11 11-28 11t-28-11q-11-11-11-28t11-28l196-196-196-196q-11-11-11-28t11-28q11-11 28-11t28 11l196 196 196-196q11-11 28-11t28 11q11 11 11 28t-11 28L536-480l196 196q11 11 11 28t-11 28q-11 11-28 11t-28-11L480-424Z").g;
          c.classList.add("material-icons", "notranslate");
          a.h.appendChild(b);
          a.eventManager.o(c, "click", function() {
            lL(a);
          });
          b = u(a.controls.g.statisticsList);
          for (c = b.next(); !c.done; c = b.next()) if (c = c.value, c in a.g && !a.F.includes(c)) {
            var d = mL(a, c);
            a.h.appendChild(d);
            a.D.push(c);
          } else ab("Unrecognized statistic element:", c);
        }
        iL.prototype.release = function() {
          this.j.stop();
          this.j = null;
          LG.prototype.release.call(this);
        };
        S("shaka.ui.StatisticsButton", iL);
        function nL() {
        }
        nL.prototype.create = function(a, b) {
          return new iL(a, b);
        };
        OI("statistics", new nL());
        WG("statistics", new nL());
        function oL(a, b) {
          rJ.call(this, a, b, "M200-160q-33 0-56.5-23.5T120-240v-480q0-33 23.5-56.5T200-800h560q33 0 56.5 23.5T840-720v480q0 33-23.5 56.5T760-160H200Zm80-200h120q17 0 28.5-11.5T440-400v-20q0-9-6-15t-15-6h-18q-9 0-15 6t-6 15h-80v-120h80q0 9 6 15t15 6h18q9 0 15-6t6-15v-20q0-17-11.5-28.5T400-600H280q-17 0-28.5 11.5T240-560v160q0 17 11.5 28.5T280-360Zm400-240H560q-17 0-28.5 11.5T520-560v160q0 17 11.5 28.5T560-360h120q17 0 28.5-11.5T720-400v-20q0-9-6-15t-15-6h-18q-9 0-15 6t-6 15h-80v-120h80q0 9 6 15t15 6h18q9 0 15-6t6-15v-20q0-17-11.5-28.5T680-600Z");
          var c = this;
          this.button.classList.add("shaka-caption-button");
          this.button.classList.add("shaka-tooltip-status");
          this.menu.classList.add("shaka-text-languages");
          this.player && this.player.Xc() ? this.button.ariaPressed = "true" : this.button.ariaPressed = "false";
          pL(this);
          this.eventManager.o(this.localization, "locale-updated", function() {
            qL(c);
            rL(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            qL(c);
            rL(c);
          });
          this.eventManager.o(this.player, "loading", function() {
            sL(c);
            rL(c);
          });
          this.eventManager.o(
            this.player,
            "loaded",
            function() {
              sL(c);
              rL(c);
            }
          );
          this.eventManager.o(this.player, "unloading", function() {
            sL(c);
            rL(c);
          });
          this.eventManager.o(this.player, "texttrackvisibility", function() {
            sL(c);
            rL(c);
          });
          this.eventManager.o(this.player, "textchanged", function() {
            rL(c);
          });
          this.eventManager.o(this.player, "trackschanged", function() {
            rL(c);
          });
          sL(this);
          qL(this);
          rL(this);
        }
        la(oL, rJ);
        function pL(a) {
          var b = Lj();
          b.ariaSelected = "true";
          a.menu.appendChild(b);
          b.appendChild(QG());
          a.g = V("span");
          b.appendChild(a.g);
        }
        function sL(a) {
          a.player.Xc() ? (a.icon.use("M200-160q-33 0-56.5-23.5T120-240v-480q0-33 23.5-56.5T200-800h560q33 0 56.5 23.5T840-720v480q0 33-23.5 56.5T760-160H200Zm80-200h120q17 0 28.5-11.5T440-400v-20q0-9-6-15t-15-6h-18q-9 0-15 6t-6 15h-80v-120h80q0 9 6 15t15 6h18q9 0 15-6t6-15v-20q0-17-11.5-28.5T400-600H280q-17 0-28.5 11.5T240-560v160q0 17 11.5 28.5T280-360Zm400-240H560q-17 0-28.5 11.5T520-560v160q0 17 11.5 28.5T560-360h120q17 0 28.5-11.5T720-400v-20q0-9-6-15t-15-6h-18q-9 0-15 6t-6 15h-80v-120h80q0 9 6 15t15 6h18q9 0 15-6t6-15v-20q0-17-11.5-28.5T680-600Z"), a.button.ariaPressed = "true") : (a.icon.use("M791-57 687-160H200q-33 0-56.5-23.5T120-240v-487l-65-65q-12-12-12-28.5T55-849q12-12 28.5-12t28.5 12l736 736q12 12 12 28t-12 28q-12 12-28.5 12T791-57ZM280-360h120q17 0 28.5-11.5T440-400v-25q0-8-6-14t-14-6h-20q-8 0-14 6t-6 14v5h-80v-127l-45-45v1q-7 5-11 13t-4 18v160q0 17 11.5 28.5T280-360Zm560-360v388q0 27-24.5 37.5T772-303l-66-66q7-5 10.5-13.5T720-400v-20q0-8-6-14t-14-6h-20q-8 0-14 6t-6 14h-5l-75-75v-45h80v5q0 8 6 14t14 6h20q8 0 14-6t6-14v-25q0-17-11.5-28.5T680-600H560q-17 0-28.5 11.5T520-560v5L343-732q-19-19-8.5-43.5T372-800h388q33 0 56.5 23.5T840-720Z"), a.button.ariaPressed = "false");
          a.controls.dispatchEvent(new T("captionselectionupdated"));
        }
        function rL(a) {
          var b = a.player.yc() || [];
          qJ(b, a.menu, function(d) {
            return tL(a, d);
          }, a.player.Xc(), a.currentSelection, a.localization, a.controls.g.textTrackLabelFormat);
          var c = Lj();
          c.classList.add("shaka-turn-captions-off-button");
          a.eventManager.o(c, "click", function() {
            a.player.Zd(false);
            rL(a);
          });
          c.appendChild(a.g);
          a.menu.appendChild(c);
          a.player.Xc() ? a.g.classList.remove("shaka-chosen-item") : (c.ariaSelected = "true", c.appendChild(QG()), a.g.classList.add("shaka-chosen-item"), a.currentSelection.textContent = a.localization.resolve("OFF"));
          a.button.setAttribute("shaka-status", a.currentSelection.textContent);
          PG(a.menu);
          a.controls.dispatchEvent(new T("captionselectionupdated"));
          RG(a.button, b.length > 0);
        }
        function tL(a, b) {
          return Q(function(c) {
            if (c.g == 1) return a.player.fg(b), F(c, a.player.Zd(true), 2);
            a.player.configure("preferredTextLanguage", b.language);
            a.player.configure("preferForcedSubs", b.forced);
            H(c);
          });
        }
        function qL(a) {
          a.button.ariaLabel = a.localization.resolve("CAPTIONS");
          a.backButton.ariaLabel = a.localization.resolve("BACK");
          a.nameSpan.textContent = a.localization.resolve("CAPTIONS");
          a.backSpan.textContent = a.localization.resolve("CAPTIONS");
          a.g.textContent = a.localization.resolve("OFF");
        }
        S("shaka.ui.TextSelection", oL);
        function uL() {
        }
        uL.prototype.create = function(a, b) {
          return new oL(a, b);
        };
        OI("captions", new uL());
        iI("captions", new uL());
        function vL(a, b) {
          LG.call(this, a, b);
          var c = this;
          this.g = Lj();
          this.g.classList.add("shaka-toggle-stereoscopic-button");
          this.g.classList.add("shaka-tooltip");
          this.g.ariaPressed = "false";
          new MG(this.g, "M620-360H520q-8 0-14-6t-6-14v-200q0-8 6-14t14-6h100q17 0 28.5 11.5T660-560v160q0 17-11.5 28.5T620-360Zm-200 0h-90q-13 0-21.5-8.5T300-390q0-13 8.5-21.5T330-420h70v-40h-40q-8 0-14-6t-6-14q0-8 6-14t14-6h40v-40h-70q-13 0-21.5-8.5T300-570q0-13 8.5-21.5T330-600h90q17 0 28.5 11.5T460-560v160q0 17-11.5 28.5T420-360Zm140-60h40v-120h-40v120Zm280-20q-17 0-28.5-11.5T800-480q0-115-72.5-203T542-794l30 30q11 11 11 28t-11 28q-11 11-28 11t-28-11L387-837q-8-8-4.5-20t14.5-15q20-5 41-6.5t42-1.5q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 17-11.5 28.5T840-440ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-17 11.5-28.5T120-520q17 0 28.5 11.5T160-480q0 115 72.5 203T418-166l-30-30q-11-11-11-28t11-28q11-11 28-11t28 11l129 129q8 8 4.5 20T563-88q-20 5-41 6.5T480-80Z");
          a = V("label");
          a.classList.add("shaka-overflow-button-label");
          a.classList.add("shaka-overflow-menu-only");
          this.i = V("span");
          a.appendChild(this.i);
          this.h = V("span");
          this.h.classList.add("shaka-current-selection-span");
          a.appendChild(this.h);
          this.g.appendChild(a);
          this.parent.appendChild(this.g);
          wL(this);
          this.eventManager.o(this.localization, "locale-updated", function() {
            wL(c);
          });
          this.eventManager.o(this.localization, "locale-changed", function() {
            wL(c);
          });
          var d = this.controls.D;
          this.eventManager.o(
            this.g,
            "click",
            function() {
              c.controls.Ca() && d.$d();
            }
          );
          this.eventManager.o(d, "vrstatuschanged", function() {
            RG(c.g, c.controls.Xb());
          });
          RG(this.g, this.controls.Xb());
        }
        la(vL, LG);
        function wL(a) {
          a.g.ariaLabel = a.localization.resolve("TOGGLE_STEREOSCOPIC");
          a.i.textContent = a.localization.resolve("TOGGLE_STEREOSCOPIC");
        }
        S("shaka.ui.ToggleStereoscopicButton", vL);
        function xL() {
        }
        xL.prototype.create = function(a, b) {
          return new vL(a, b);
        };
        OI("toggle_stereoscopic", new xL());
        iI("toggle_stereoscopic", new xL());
        function yL(a, b) {
          fH.call(this, a, b, ["shaka-volume-bar-container"], ["shaka-volume-bar"]);
          var c = this;
          this.g = this.controls.g;
          this.g.alwaysShowVolumeBar || this.container.classList.add("shaka-volume-bar-container-allow-hiding");
          this.setRange(0, 100);
          this.eventManager.o(this.video, "volumechange", function() {
            return zL(c);
          });
          this.eventManager.o(this.player, "loading", function() {
            return zL(c);
          });
          this.eventManager.o(this.player, "loaded", function() {
            return AL(c);
          });
          this.eventManager.o(this.player, "unloading", function() {
            return AL(c);
          });
          this.eventManager.o(this.player, "trackschanged", function() {
            return AL(c);
          });
          this.eventManager.o(this.controls, "caststatuschanged", function() {
            return zL(c);
          });
          this.eventManager.o(this.adManager, "ad-volume-changed", function() {
            return BL(c);
          });
          this.eventManager.o(this.adManager, "ad-muted", function() {
            return BL(c);
          });
          this.eventManager.o(this.adManager, "ad-started", function() {
            return AL(c);
          });
          this.eventManager.o(this.adManager, "ad-stopped", function() {
            AL(c);
            zL(c);
          });
          this.eventManager.o(
            this.localization,
            "locale-updated",
            function() {
              return CL(c);
            }
          );
          this.eventManager.o(this.localization, "locale-changed", function() {
            return CL(c);
          });
          zL(this);
          CL(this);
          if (this.ad) this.onChange();
          AL(this);
        }
        la(yL, fH);
        yL.prototype.onChange = function() {
          this.ad && this.ad.isLinear() ? this.ad.setVolume(this.getValue() / 100) : (this.video.volume = this.getValue() / 100, this.video.volume > 0 && (this.video.muted = false));
        };
        function zL(a) {
          a.video.muted ? a.setValue(0) : a.setValue(a.video.volume * 100);
          DL(a);
        }
        function BL(a) {
          var b = a.ad.getVolume();
          a.setValue(b * 100);
          DL(a);
        }
        function DL(a) {
          var b = a.g.volumeBarColors, c = ["to right"];
          c.push(b.level + a.getValue() + "%");
          c.push(b.base + a.getValue() + "%");
          c.push(b.base + "100%");
          a.container.style.background = "linear-gradient(" + c.join(",") + ")";
        }
        function CL(a) {
          a.bar.ariaLabel = a.localization.resolve("VOLUME");
        }
        function AL(a) {
          var b = true;
          a.ad && a.ad.isLinear() ? b = true : a.player.Hh() && (b = false);
          RG(a.container, b);
        }
        S("shaka.ui.VolumeBar", yL);
        function EL() {
        }
        EL.prototype.create = function(a, b) {
          return new yL(a, b);
        };
        iI("volume", new EL());
      }).call(exportTo, innerGlobal, innerGlobal, void 0);
      if (typeof exports != "undefined") for (var k in exportTo.shaka) exports[k] = exportTo.shaka[k];
      else if (typeof define == "function" && define.amd) define(function() {
        return exportTo.shaka;
      });
      else innerGlobal.shaka = exportTo.shaka;
    })();
  }
});
export default require_shaka_player_ui();
/*! Bundled license information:

shaka-player/dist/shaka-player.ui.js:
  (*
   @license
   Shaka Player
   Copyright 2016 Google LLC
   SPDX-License-Identifier: Apache-2.0
  *)
  (*
   @license
   Copyright 2008 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  *)
  (*
   @license
   Copyright 2006 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  *)
  (*
   @license
   Shaka Player
   Copyright 2025 Google LLC
   SPDX-License-Identifier: Apache-2.0
  *)
  (*
   @license
   tXml
   Copyright 2015 Tobias Nickel
   SPDX-License-Identifier: MIT
  *)
  (*
   @license
   Shaka Player
   Copyright 2023 Google LLC
   SPDX-License-Identifier: Apache-2.0
  *)
  (*
   @license
   Shaka Player
   Copyright 2022 Google LLC
   SPDX-License-Identifier: Apache-2.0
  *)
  (*
   @license
   Copyright 2013 Ali Al Dallal
  
   Licensed under the MIT license.
  
   Permission is hereby granted, free of charge, to any person obtaining a copy
   of this software and associated documentation files (the "Software"), to deal
   in the Software without restriction, including without limitation the rights
   to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   copies of the Software, and to permit persons to whom the Software is
   furnished to do so, subject to the following conditions:
  
   The above copyright notice and this permission notice shall be included in
   all copies or substantial portions of the Software.
  
   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   SOFTWARE.
  *)
  (*
   @license
   MSS Transmuxer
   Copyright 2015 Dash Industry Forum
   SPDX-License-Identifier: BSD-3-Clause
  *)
  (*
   @license
   glMatrix: https://github.com/toji/gl-matrix/
   Copyright 2015-2021, Brandon Jones, Colin MacKenzie IV
   SPDX-License-Identifier: MIT
  *)
*/
//# sourceMappingURL=shaka-player_dist_shaka-player__ui__js.js.map
